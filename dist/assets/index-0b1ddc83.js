(function(){const Mt=document.createElement("link").relList;if(Mt&&Mt.supports&&Mt.supports("modulepreload"))return;for(const nn of document.querySelectorAll('link[rel="modulepreload"]'))rn(nn);new MutationObserver(nn=>{for(const an of nn)if(an.type==="childList")for(const on of an.addedNodes)on.tagName==="LINK"&&on.rel==="modulepreload"&&rn(on)}).observe(document,{childList:!0,subtree:!0});function Xr(nn){const an={};return nn.integrity&&(an.integrity=nn.integrity),nn.referrerPolicy&&(an.referrerPolicy=nn.referrerPolicy),nn.crossOrigin==="use-credentials"?an.credentials="include":nn.crossOrigin==="anonymous"?an.credentials="omit":an.credentials="same-origin",an}function rn(nn){if(nn.ep)return;nn.ep=!0;const an=Xr(nn);fetch(nn.href,an)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(st){return st&&st.__esModule&&Object.prototype.hasOwnProperty.call(st,"default")?st.default:st}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$6=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(st){return st===null||typeof st!="object"?null:(st=z$2&&st[z$2]||st["@@iterator"],typeof st=="function"?st:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$2(st,Mt,Xr){this.props=st,this.context=Mt,this.refs=D$3,this.updater=Xr||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(st,Mt){if(typeof st!="object"&&typeof st!="function"&&st!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,st,Mt,"setState")};E$2.prototype.forceUpdate=function(st){this.updater.enqueueForceUpdate(this,st,"forceUpdate")};function F$3(){}F$3.prototype=E$2.prototype;function G$2(st,Mt,Xr){this.props=st,this.context=Mt,this.refs=D$3,this.updater=Xr||B$3}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$2(H$4,E$2.prototype);H$4.isPureReactComponent=!0;var I$4=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$5(st,Mt,Xr){var rn,nn={},an=null,on=null;if(Mt!=null)for(rn in Mt.ref!==void 0&&(on=Mt.ref),Mt.key!==void 0&&(an=""+Mt.key),Mt)J$1.call(Mt,rn)&&!L$2.hasOwnProperty(rn)&&(nn[rn]=Mt[rn]);var sn=arguments.length-2;if(sn===1)nn.children=Xr;else if(1<sn){for(var ln=Array(sn),un=0;un<sn;un++)ln[un]=arguments[un+2];nn.children=ln}if(st&&st.defaultProps)for(rn in sn=st.defaultProps,sn)nn[rn]===void 0&&(nn[rn]=sn[rn]);return{$$typeof:l$4,type:st,key:an,ref:on,props:nn,_owner:K$2.current}}function N$4(st,Mt){return{$$typeof:l$4,type:st.type,key:Mt,ref:st.ref,props:st.props,_owner:st._owner}}function O$3(st){return typeof st=="object"&&st!==null&&st.$$typeof===l$4}function escape(st){var Mt={"=":"=0",":":"=2"};return"$"+st.replace(/[=:]/g,function(Xr){return Mt[Xr]})}var P$2=/\/+/g;function Q$2(st,Mt){return typeof st=="object"&&st!==null&&st.key!=null?escape(""+st.key):Mt.toString(36)}function R$3(st,Mt,Xr,rn,nn){var an=typeof st;(an==="undefined"||an==="boolean")&&(st=null);var on=!1;if(st===null)on=!0;else switch(an){case"string":case"number":on=!0;break;case"object":switch(st.$$typeof){case l$4:case n$3:on=!0}}if(on)return on=st,nn=nn(on),st=rn===""?"."+Q$2(on,0):rn,I$4(nn)?(Xr="",st!=null&&(Xr=st.replace(P$2,"$&/")+"/"),R$3(nn,Mt,Xr,"",function(un){return un})):nn!=null&&(O$3(nn)&&(nn=N$4(nn,Xr+(!nn.key||on&&on.key===nn.key?"":(""+nn.key).replace(P$2,"$&/")+"/")+st)),Mt.push(nn)),1;if(on=0,rn=rn===""?".":rn+":",I$4(st))for(var sn=0;sn<st.length;sn++){an=st[sn];var ln=rn+Q$2(an,sn);on+=R$3(an,Mt,Xr,ln,nn)}else if(ln=A$3(st),typeof ln=="function")for(st=ln.call(st),sn=0;!(an=st.next()).done;)an=an.value,ln=rn+Q$2(an,sn++),on+=R$3(an,Mt,Xr,ln,nn);else if(an==="object")throw Mt=String(st),Error("Objects are not valid as a React child (found: "+(Mt==="[object Object]"?"object with keys {"+Object.keys(st).join(", ")+"}":Mt)+"). If you meant to render a collection of children, use an array instead.");return on}function S$5(st,Mt,Xr){if(st==null)return st;var rn=[],nn=0;return R$3(st,rn,"","",function(an){return Mt.call(Xr,an,nn++)}),rn}function T$4(st){if(st._status===-1){var Mt=st._result;Mt=Mt(),Mt.then(function(Xr){(st._status===0||st._status===-1)&&(st._status=1,st._result=Xr)},function(Xr){(st._status===0||st._status===-1)&&(st._status=2,st._result=Xr)}),st._status===-1&&(st._status=0,st._result=Mt)}if(st._status===1)return st._result.default;throw st._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$5,forEach:function(st,Mt,Xr){S$5(st,function(){Mt.apply(this,arguments)},Xr)},count:function(st){var Mt=0;return S$5(st,function(){Mt++}),Mt},toArray:function(st){return S$5(st,function(Mt){return Mt})||[]},only:function(st){if(!O$3(st))throw Error("React.Children.only expected to receive a single React element child.");return st}};react_production_min.Component=E$2;react_production_min.Fragment=p$6;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$6;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(st,Mt,Xr){if(st==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+st+".");var rn=C$2({},st.props),nn=st.key,an=st.ref,on=st._owner;if(Mt!=null){if(Mt.ref!==void 0&&(an=Mt.ref,on=K$2.current),Mt.key!==void 0&&(nn=""+Mt.key),st.type&&st.type.defaultProps)var sn=st.type.defaultProps;for(ln in Mt)J$1.call(Mt,ln)&&!L$2.hasOwnProperty(ln)&&(rn[ln]=Mt[ln]===void 0&&sn!==void 0?sn[ln]:Mt[ln])}var ln=arguments.length-2;if(ln===1)rn.children=Xr;else if(1<ln){sn=Array(ln);for(var un=0;un<ln;un++)sn[un]=arguments[un+2];rn.children=sn}return{$$typeof:l$4,type:st.type,key:nn,ref:an,props:rn,_owner:on}};react_production_min.createContext=function(st){return st={$$typeof:u$4,_currentValue:st,_currentValue2:st,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},st.Provider={$$typeof:t$2,_context:st},st.Consumer=st};react_production_min.createElement=M$5;react_production_min.createFactory=function(st){var Mt=M$5.bind(null,st);return Mt.type=st,Mt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(st){return{$$typeof:v$5,render:st}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(st){return{$$typeof:y$2,_payload:{_status:-1,_result:st},_init:T$4}};react_production_min.memo=function(st,Mt){return{$$typeof:x$1,type:st,compare:Mt===void 0?null:Mt}};react_production_min.startTransition=function(st){var Mt=V$2.transition;V$2.transition={};try{st()}finally{V$2.transition=Mt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(st,Mt){return U$2.current.useCallback(st,Mt)};react_production_min.useContext=function(st){return U$2.current.useContext(st)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(st){return U$2.current.useDeferredValue(st)};react_production_min.useEffect=function(st,Mt){return U$2.current.useEffect(st,Mt)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(st,Mt,Xr){return U$2.current.useImperativeHandle(st,Mt,Xr)};react_production_min.useInsertionEffect=function(st,Mt){return U$2.current.useInsertionEffect(st,Mt)};react_production_min.useLayoutEffect=function(st,Mt){return U$2.current.useLayoutEffect(st,Mt)};react_production_min.useMemo=function(st,Mt){return U$2.current.useMemo(st,Mt)};react_production_min.useReducer=function(st,Mt,Xr){return U$2.current.useReducer(st,Mt,Xr)};react_production_min.useRef=function(st){return U$2.current.useRef(st)};react_production_min.useState=function(st){return U$2.current.useState(st)};react_production_min.useSyncExternalStore=function(st,Mt,Xr){return U$2.current.useSyncExternalStore(st,Mt,Xr)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$6=reactExports,k$2=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$2=f$6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$1(st,Mt,Xr){var rn,nn={},an=null,on=null;Xr!==void 0&&(an=""+Xr),Mt.key!==void 0&&(an=""+Mt.key),Mt.ref!==void 0&&(on=Mt.ref);for(rn in Mt)m$1.call(Mt,rn)&&!p$5.hasOwnProperty(rn)&&(nn[rn]=Mt[rn]);if(st&&st.defaultProps)for(rn in Mt=st.defaultProps,Mt)nn[rn]===void 0&&(nn[rn]=Mt[rn]);return{$$typeof:k$2,type:st,key:an,ref:on,props:nn,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(st){function Mt(tp,np){var fp=tp.length;tp.push(np);e:for(;0<fp;){var dp=fp-1>>>1,yp=tp[dp];if(0<nn(yp,np))tp[dp]=np,tp[fp]=yp,fp=dp;else break e}}function Xr(tp){return tp.length===0?null:tp[0]}function rn(tp){if(tp.length===0)return null;var np=tp[0],fp=tp.pop();if(fp!==np){tp[0]=fp;e:for(var dp=0,yp=tp.length,bp=yp>>>1;dp<bp;){var _p=2*(dp+1)-1,Cp=tp[_p],Sp=_p+1,Rp=tp[Sp];if(0>nn(Cp,fp))Sp<yp&&0>nn(Rp,Cp)?(tp[dp]=Rp,tp[Sp]=fp,dp=Sp):(tp[dp]=Cp,tp[_p]=fp,dp=_p);else if(Sp<yp&&0>nn(Rp,fp))tp[dp]=Rp,tp[Sp]=fp,dp=Sp;else break e}}return np}function nn(tp,np){var fp=tp.sortIndex-np.sortIndex;return fp!==0?fp:tp.id-np.id}if(typeof performance=="object"&&typeof performance.now=="function"){var an=performance;st.unstable_now=function(){return an.now()}}else{var on=Date,sn=on.now();st.unstable_now=function(){return on.now()-sn}}var ln=[],un=[],cn=1,hn=null,fn=3,to=!1,uo=!1,co=!1,Uo=typeof setTimeout=="function"?setTimeout:null,lo=typeof clearTimeout=="function"?clearTimeout:null,ho=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function fo(tp){for(var np=Xr(un);np!==null;){if(np.callback===null)rn(un);else if(np.startTime<=tp)rn(un),np.sortIndex=np.expirationTime,Mt(ln,np);else break;np=Xr(un)}}function mo(tp){if(co=!1,fo(tp),!uo)if(Xr(ln)!==null)uo=!0,lp(_d);else{var np=Xr(un);np!==null&&cp(mo,np.startTime-tp)}}function _d(tp,np){uo=!1,co&&(co=!1,lo(ap),ap=-1),to=!0;var fp=fn;try{for(fo(np),hn=Xr(ln);hn!==null&&(!(hn.expirationTime>np)||tp&&!pp());){var dp=hn.callback;if(typeof dp=="function"){hn.callback=null,fn=hn.priorityLevel;var yp=dp(hn.expirationTime<=np);np=st.unstable_now(),typeof yp=="function"?hn.callback=yp:hn===Xr(ln)&&rn(ln),fo(np)}else rn(ln);hn=Xr(ln)}if(hn!==null)var bp=!0;else{var _p=Xr(un);_p!==null&&cp(mo,_p.startTime-np),bp=!1}return bp}finally{hn=null,fn=fp,to=!1}}var ep=!1,rp=null,ap=-1,sp=5,up=-1;function pp(){return!(st.unstable_now()-up<sp)}function hp(){if(rp!==null){var tp=st.unstable_now();up=tp;var np=!0;try{np=rp(!0,tp)}finally{np?vp():(ep=!1,rp=null)}}else ep=!1}var vp;if(typeof ho=="function")vp=function(){ho(hp)};else if(typeof MessageChannel<"u"){var gp=new MessageChannel,mp=gp.port2;gp.port1.onmessage=hp,vp=function(){mp.postMessage(null)}}else vp=function(){Uo(hp,0)};function lp(tp){rp=tp,ep||(ep=!0,vp())}function cp(tp,np){ap=Uo(function(){tp(st.unstable_now())},np)}st.unstable_IdlePriority=5,st.unstable_ImmediatePriority=1,st.unstable_LowPriority=4,st.unstable_NormalPriority=3,st.unstable_Profiling=null,st.unstable_UserBlockingPriority=2,st.unstable_cancelCallback=function(tp){tp.callback=null},st.unstable_continueExecution=function(){uo||to||(uo=!0,lp(_d))},st.unstable_forceFrameRate=function(tp){0>tp||125<tp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):sp=0<tp?Math.floor(1e3/tp):5},st.unstable_getCurrentPriorityLevel=function(){return fn},st.unstable_getFirstCallbackNode=function(){return Xr(ln)},st.unstable_next=function(tp){switch(fn){case 1:case 2:case 3:var np=3;break;default:np=fn}var fp=fn;fn=np;try{return tp()}finally{fn=fp}},st.unstable_pauseExecution=function(){},st.unstable_requestPaint=function(){},st.unstable_runWithPriority=function(tp,np){switch(tp){case 1:case 2:case 3:case 4:case 5:break;default:tp=3}var fp=fn;fn=tp;try{return np()}finally{fn=fp}},st.unstable_scheduleCallback=function(tp,np,fp){var dp=st.unstable_now();switch(typeof fp=="object"&&fp!==null?(fp=fp.delay,fp=typeof fp=="number"&&0<fp?dp+fp:dp):fp=dp,tp){case 1:var yp=-1;break;case 2:yp=250;break;case 5:yp=1073741823;break;case 4:yp=1e4;break;default:yp=5e3}return yp=fp+yp,tp={id:cn++,callback:np,priorityLevel:tp,startTime:fp,expirationTime:yp,sortIndex:-1},fp>dp?(tp.sortIndex=fp,Mt(un,tp),Xr(ln)===null&&tp===Xr(un)&&(co?(lo(ap),ap=-1):co=!0,cp(mo,fp-dp))):(tp.sortIndex=yp,Mt(ln,tp),uo||to||(uo=!0,lp(_d))),tp},st.unstable_shouldYield=pp,st.unstable_wrapCallback=function(tp){var np=fn;return function(){var fp=fn;fn=np;try{return tp.apply(this,arguments)}finally{fn=fp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$4(st){for(var Mt="https://reactjs.org/docs/error-decoder.html?invariant="+st,Xr=1;Xr<arguments.length;Xr++)Mt+="&args[]="+encodeURIComponent(arguments[Xr]);return"Minified React error #"+st+"; visit "+Mt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(st,Mt){ha$1(st,Mt),ha$1(st+"Capture",Mt)}function ha$1(st,Mt){for(ea$1[st]=Mt,st=0;st<Mt.length;st++)da$1.add(Mt[st])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(st){return ja$1.call(ma$1,st)?!0:ja$1.call(la$1,st)?!1:ka$1.test(st)?ma$1[st]=!0:(la$1[st]=!0,!1)}function pa$1(st,Mt,Xr,rn){if(Xr!==null&&Xr.type===0)return!1;switch(typeof Mt){case"function":case"symbol":return!0;case"boolean":return rn?!1:Xr!==null?!Xr.acceptsBooleans:(st=st.toLowerCase().slice(0,5),st!=="data-"&&st!=="aria-");default:return!1}}function qa$1(st,Mt,Xr,rn){if(Mt===null||typeof Mt>"u"||pa$1(st,Mt,Xr,rn))return!0;if(rn)return!1;if(Xr!==null)switch(Xr.type){case 3:return!Mt;case 4:return Mt===!1;case 5:return isNaN(Mt);case 6:return isNaN(Mt)||1>Mt}return!1}function v$4(st,Mt,Xr,rn,nn,an,on){this.acceptsBooleans=Mt===2||Mt===3||Mt===4,this.attributeName=rn,this.attributeNamespace=nn,this.mustUseProperty=Xr,this.propertyName=st,this.type=Mt,this.sanitizeURL=an,this.removeEmptyString=on}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(st){z$1[st]=new v$4(st,0,!1,st,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(st){var Mt=st[0];z$1[Mt]=new v$4(Mt,1,!1,st[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(st){z$1[st]=new v$4(st,2,!1,st.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(st){z$1[st]=new v$4(st,2,!1,st,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(st){z$1[st]=new v$4(st,3,!1,st.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(st){z$1[st]=new v$4(st,3,!0,st,null,!1,!1)});["capture","download"].forEach(function(st){z$1[st]=new v$4(st,4,!1,st,null,!1,!1)});["cols","rows","size","span"].forEach(function(st){z$1[st]=new v$4(st,6,!1,st,null,!1,!1)});["rowSpan","start"].forEach(function(st){z$1[st]=new v$4(st,5,!1,st.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(st){return st[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(st){var Mt=st.replace(ra$1,sa$1);z$1[Mt]=new v$4(Mt,1,!1,st,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(st){var Mt=st.replace(ra$1,sa$1);z$1[Mt]=new v$4(Mt,1,!1,st,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(st){var Mt=st.replace(ra$1,sa$1);z$1[Mt]=new v$4(Mt,1,!1,st,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(st){z$1[st]=new v$4(st,1,!1,st.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(st){z$1[st]=new v$4(st,1,!1,st.toLowerCase(),null,!0,!0)});function ta$1(st,Mt,Xr,rn){var nn=z$1.hasOwnProperty(Mt)?z$1[Mt]:null;(nn!==null?nn.type!==0:rn||!(2<Mt.length)||Mt[0]!=="o"&&Mt[0]!=="O"||Mt[1]!=="n"&&Mt[1]!=="N")&&(qa$1(Mt,Xr,nn,rn)&&(Xr=null),rn||nn===null?oa$1(Mt)&&(Xr===null?st.removeAttribute(Mt):st.setAttribute(Mt,""+Xr)):nn.mustUseProperty?st[nn.propertyName]=Xr===null?nn.type===3?!1:"":Xr:(Mt=nn.attributeName,rn=nn.attributeNamespace,Xr===null?st.removeAttribute(Mt):(nn=nn.type,Xr=nn===3||nn===4&&Xr===!0?"":""+Xr,rn?st.setAttributeNS(rn,Mt,Xr):st.setAttribute(Mt,Xr))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(st){return st===null||typeof st!="object"?null:(st=Ja$1&&st[Ja$1]||st["@@iterator"],typeof st=="function"?st:null)}var A$2=Object.assign,La$1;function Ma$1(st){if(La$1===void 0)try{throw Error()}catch(Xr){var Mt=Xr.stack.trim().match(/\n( *(at )?)/);La$1=Mt&&Mt[1]||""}return`
`+La$1+st}var Na$1=!1;function Oa$1(st,Mt){if(!st||Na$1)return"";Na$1=!0;var Xr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(Mt)if(Mt=function(){throw Error()},Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(un){var rn=un}Reflect.construct(st,[],Mt)}else{try{Mt.call()}catch(un){rn=un}st.call(Mt.prototype)}else{try{throw Error()}catch(un){rn=un}st()}}catch(un){if(un&&rn&&typeof un.stack=="string"){for(var nn=un.stack.split(`
`),an=rn.stack.split(`
`),on=nn.length-1,sn=an.length-1;1<=on&&0<=sn&&nn[on]!==an[sn];)sn--;for(;1<=on&&0<=sn;on--,sn--)if(nn[on]!==an[sn]){if(on!==1||sn!==1)do if(on--,sn--,0>sn||nn[on]!==an[sn]){var ln=`
`+nn[on].replace(" at new "," at ");return st.displayName&&ln.includes("<anonymous>")&&(ln=ln.replace("<anonymous>",st.displayName)),ln}while(1<=on&&0<=sn);break}}}finally{Na$1=!1,Error.prepareStackTrace=Xr}return(st=st?st.displayName||st.name:"")?Ma$1(st):""}function Pa$1(st){switch(st.tag){case 5:return Ma$1(st.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return st=Oa$1(st.type,!1),st;case 11:return st=Oa$1(st.type.render,!1),st;case 1:return st=Oa$1(st.type,!0),st;default:return""}}function Qa$1(st){if(st==null)return null;if(typeof st=="function")return st.displayName||st.name||null;if(typeof st=="string")return st;switch(st){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof st=="object")switch(st.$$typeof){case Ca$1:return(st.displayName||"Context")+".Consumer";case Ba$1:return(st._context.displayName||"Context")+".Provider";case Da$1:var Mt=st.render;return st=st.displayName,st||(st=Mt.displayName||Mt.name||"",st=st!==""?"ForwardRef("+st+")":"ForwardRef"),st;case Ga$1:return Mt=st.displayName||null,Mt!==null?Mt:Qa$1(st.type)||"Memo";case Ha$1:Mt=st._payload,st=st._init;try{return Qa$1(st(Mt))}catch{}}return null}function Ra$1(st){var Mt=st.type;switch(st.tag){case 24:return"Cache";case 9:return(Mt.displayName||"Context")+".Consumer";case 10:return(Mt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return st=Mt.render,st=st.displayName||st.name||"",Mt.displayName||(st!==""?"ForwardRef("+st+")":"ForwardRef");case 7:return"Fragment";case 5:return Mt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(Mt);case 8:return Mt===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof Mt=="function")return Mt.displayName||Mt.name||null;if(typeof Mt=="string")return Mt}return null}function Sa$1(st){switch(typeof st){case"boolean":case"number":case"string":case"undefined":return st;case"object":return st;default:return""}}function Ta$1(st){var Mt=st.type;return(st=st.nodeName)&&st.toLowerCase()==="input"&&(Mt==="checkbox"||Mt==="radio")}function Ua$1(st){var Mt=Ta$1(st)?"checked":"value",Xr=Object.getOwnPropertyDescriptor(st.constructor.prototype,Mt),rn=""+st[Mt];if(!st.hasOwnProperty(Mt)&&typeof Xr<"u"&&typeof Xr.get=="function"&&typeof Xr.set=="function"){var nn=Xr.get,an=Xr.set;return Object.defineProperty(st,Mt,{configurable:!0,get:function(){return nn.call(this)},set:function(on){rn=""+on,an.call(this,on)}}),Object.defineProperty(st,Mt,{enumerable:Xr.enumerable}),{getValue:function(){return rn},setValue:function(on){rn=""+on},stopTracking:function(){st._valueTracker=null,delete st[Mt]}}}}function Va$1(st){st._valueTracker||(st._valueTracker=Ua$1(st))}function Wa$1(st){if(!st)return!1;var Mt=st._valueTracker;if(!Mt)return!0;var Xr=Mt.getValue(),rn="";return st&&(rn=Ta$1(st)?st.checked?"true":"false":st.value),st=rn,st!==Xr?(Mt.setValue(st),!0):!1}function Xa$1(st){if(st=st||(typeof document<"u"?document:void 0),typeof st>"u")return null;try{return st.activeElement||st.body}catch{return st.body}}function Ya$1(st,Mt){var Xr=Mt.checked;return A$2({},Mt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Xr??st._wrapperState.initialChecked})}function Za$1(st,Mt){var Xr=Mt.defaultValue==null?"":Mt.defaultValue,rn=Mt.checked!=null?Mt.checked:Mt.defaultChecked;Xr=Sa$1(Mt.value!=null?Mt.value:Xr),st._wrapperState={initialChecked:rn,initialValue:Xr,controlled:Mt.type==="checkbox"||Mt.type==="radio"?Mt.checked!=null:Mt.value!=null}}function ab(st,Mt){Mt=Mt.checked,Mt!=null&&ta$1(st,"checked",Mt,!1)}function bb(st,Mt){ab(st,Mt);var Xr=Sa$1(Mt.value),rn=Mt.type;if(Xr!=null)rn==="number"?(Xr===0&&st.value===""||st.value!=Xr)&&(st.value=""+Xr):st.value!==""+Xr&&(st.value=""+Xr);else if(rn==="submit"||rn==="reset"){st.removeAttribute("value");return}Mt.hasOwnProperty("value")?cb(st,Mt.type,Xr):Mt.hasOwnProperty("defaultValue")&&cb(st,Mt.type,Sa$1(Mt.defaultValue)),Mt.checked==null&&Mt.defaultChecked!=null&&(st.defaultChecked=!!Mt.defaultChecked)}function db(st,Mt,Xr){if(Mt.hasOwnProperty("value")||Mt.hasOwnProperty("defaultValue")){var rn=Mt.type;if(!(rn!=="submit"&&rn!=="reset"||Mt.value!==void 0&&Mt.value!==null))return;Mt=""+st._wrapperState.initialValue,Xr||Mt===st.value||(st.value=Mt),st.defaultValue=Mt}Xr=st.name,Xr!==""&&(st.name=""),st.defaultChecked=!!st._wrapperState.initialChecked,Xr!==""&&(st.name=Xr)}function cb(st,Mt,Xr){(Mt!=="number"||Xa$1(st.ownerDocument)!==st)&&(Xr==null?st.defaultValue=""+st._wrapperState.initialValue:st.defaultValue!==""+Xr&&(st.defaultValue=""+Xr))}var eb=Array.isArray;function fb(st,Mt,Xr,rn){if(st=st.options,Mt){Mt={};for(var nn=0;nn<Xr.length;nn++)Mt["$"+Xr[nn]]=!0;for(Xr=0;Xr<st.length;Xr++)nn=Mt.hasOwnProperty("$"+st[Xr].value),st[Xr].selected!==nn&&(st[Xr].selected=nn),nn&&rn&&(st[Xr].defaultSelected=!0)}else{for(Xr=""+Sa$1(Xr),Mt=null,nn=0;nn<st.length;nn++){if(st[nn].value===Xr){st[nn].selected=!0,rn&&(st[nn].defaultSelected=!0);return}Mt!==null||st[nn].disabled||(Mt=st[nn])}Mt!==null&&(Mt.selected=!0)}}function gb(st,Mt){if(Mt.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$2({},Mt,{value:void 0,defaultValue:void 0,children:""+st._wrapperState.initialValue})}function hb(st,Mt){var Xr=Mt.value;if(Xr==null){if(Xr=Mt.children,Mt=Mt.defaultValue,Xr!=null){if(Mt!=null)throw Error(p$4(92));if(eb(Xr)){if(1<Xr.length)throw Error(p$4(93));Xr=Xr[0]}Mt=Xr}Mt==null&&(Mt=""),Xr=Mt}st._wrapperState={initialValue:Sa$1(Xr)}}function ib(st,Mt){var Xr=Sa$1(Mt.value),rn=Sa$1(Mt.defaultValue);Xr!=null&&(Xr=""+Xr,Xr!==st.value&&(st.value=Xr),Mt.defaultValue==null&&st.defaultValue!==Xr&&(st.defaultValue=Xr)),rn!=null&&(st.defaultValue=""+rn)}function jb(st){var Mt=st.textContent;Mt===st._wrapperState.initialValue&&Mt!==""&&Mt!==null&&(st.value=Mt)}function kb(st){switch(st){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(st,Mt){return st==null||st==="http://www.w3.org/1999/xhtml"?kb(Mt):st==="http://www.w3.org/2000/svg"&&Mt==="foreignObject"?"http://www.w3.org/1999/xhtml":st}var mb,nb=function(st){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(Mt,Xr,rn,nn){MSApp.execUnsafeLocalFunction(function(){return st(Mt,Xr,rn,nn)})}:st}(function(st,Mt){if(st.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in st)st.innerHTML=Mt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+Mt.valueOf().toString()+"</svg>",Mt=mb.firstChild;st.firstChild;)st.removeChild(st.firstChild);for(;Mt.firstChild;)st.appendChild(Mt.firstChild)}});function ob(st,Mt){if(Mt){var Xr=st.firstChild;if(Xr&&Xr===st.lastChild&&Xr.nodeType===3){Xr.nodeValue=Mt;return}}st.textContent=Mt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(st){qb.forEach(function(Mt){Mt=Mt+st.charAt(0).toUpperCase()+st.substring(1),pb[Mt]=pb[st]})});function rb(st,Mt,Xr){return Mt==null||typeof Mt=="boolean"||Mt===""?"":Xr||typeof Mt!="number"||Mt===0||pb.hasOwnProperty(st)&&pb[st]?(""+Mt).trim():Mt+"px"}function sb(st,Mt){st=st.style;for(var Xr in Mt)if(Mt.hasOwnProperty(Xr)){var rn=Xr.indexOf("--")===0,nn=rb(Xr,Mt[Xr],rn);Xr==="float"&&(Xr="cssFloat"),rn?st.setProperty(Xr,nn):st[Xr]=nn}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(st,Mt){if(Mt){if(tb[st]&&(Mt.children!=null||Mt.dangerouslySetInnerHTML!=null))throw Error(p$4(137,st));if(Mt.dangerouslySetInnerHTML!=null){if(Mt.children!=null)throw Error(p$4(60));if(typeof Mt.dangerouslySetInnerHTML!="object"||!("__html"in Mt.dangerouslySetInnerHTML))throw Error(p$4(61))}if(Mt.style!=null&&typeof Mt.style!="object")throw Error(p$4(62))}}function vb(st,Mt){if(st.indexOf("-")===-1)return typeof Mt.is=="string";switch(st){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(st){return st=st.target||st.srcElement||window,st.correspondingUseElement&&(st=st.correspondingUseElement),st.nodeType===3?st.parentNode:st}var yb=null,zb=null,Ab=null;function Bb(st){if(st=Cb(st)){if(typeof yb!="function")throw Error(p$4(280));var Mt=st.stateNode;Mt&&(Mt=Db(Mt),yb(st.stateNode,st.type,Mt))}}function Eb(st){zb?Ab?Ab.push(st):Ab=[st]:zb=st}function Fb(){if(zb){var st=zb,Mt=Ab;if(Ab=zb=null,Bb(st),Mt)for(st=0;st<Mt.length;st++)Bb(Mt[st])}}function Gb(st,Mt){return st(Mt)}function Hb(){}var Ib=!1;function Jb(st,Mt,Xr){if(Ib)return st(Mt,Xr);Ib=!0;try{return Gb(st,Mt,Xr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(st,Mt){var Xr=st.stateNode;if(Xr===null)return null;var rn=Db(Xr);if(rn===null)return null;Xr=rn[Mt];e:switch(Mt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(rn=!rn.disabled)||(st=st.type,rn=!(st==="button"||st==="input"||st==="select"||st==="textarea")),st=!rn;break e;default:st=!1}if(st)return null;if(Xr&&typeof Xr!="function")throw Error(p$4(231,Mt,typeof Xr));return Xr}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(st,Mt,Xr,rn,nn,an,on,sn,ln){var un=Array.prototype.slice.call(arguments,3);try{Mt.apply(Xr,un)}catch(cn){this.onError(cn)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(st){Ob=!0,Pb=st}};function Tb(st,Mt,Xr,rn,nn,an,on,sn,ln){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(st,Mt,Xr,rn,nn,an,on,sn,ln){if(Tb.apply(this,arguments),Ob){if(Ob){var un=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=un)}}function Vb(st){var Mt=st,Xr=st;if(st.alternate)for(;Mt.return;)Mt=Mt.return;else{st=Mt;do Mt=st,Mt.flags&4098&&(Xr=Mt.return),st=Mt.return;while(st)}return Mt.tag===3?Xr:null}function Wb(st){if(st.tag===13){var Mt=st.memoizedState;if(Mt===null&&(st=st.alternate,st!==null&&(Mt=st.memoizedState)),Mt!==null)return Mt.dehydrated}return null}function Xb(st){if(Vb(st)!==st)throw Error(p$4(188))}function Yb(st){var Mt=st.alternate;if(!Mt){if(Mt=Vb(st),Mt===null)throw Error(p$4(188));return Mt!==st?null:st}for(var Xr=st,rn=Mt;;){var nn=Xr.return;if(nn===null)break;var an=nn.alternate;if(an===null){if(rn=nn.return,rn!==null){Xr=rn;continue}break}if(nn.child===an.child){for(an=nn.child;an;){if(an===Xr)return Xb(nn),st;if(an===rn)return Xb(nn),Mt;an=an.sibling}throw Error(p$4(188))}if(Xr.return!==rn.return)Xr=nn,rn=an;else{for(var on=!1,sn=nn.child;sn;){if(sn===Xr){on=!0,Xr=nn,rn=an;break}if(sn===rn){on=!0,rn=nn,Xr=an;break}sn=sn.sibling}if(!on){for(sn=an.child;sn;){if(sn===Xr){on=!0,Xr=an,rn=nn;break}if(sn===rn){on=!0,rn=an,Xr=nn;break}sn=sn.sibling}if(!on)throw Error(p$4(189))}}if(Xr.alternate!==rn)throw Error(p$4(190))}if(Xr.tag!==3)throw Error(p$4(188));return Xr.stateNode.current===Xr?st:Mt}function Zb(st){return st=Yb(st),st!==null?$b(st):null}function $b(st){if(st.tag===5||st.tag===6)return st;for(st=st.child;st!==null;){var Mt=$b(st);if(Mt!==null)return Mt;st=st.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(st){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,st,void 0,(st.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(st){return st>>>=0,st===0?32:31-(pc$1(st)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(st){switch(st&-st){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return st&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return st&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return st}}function uc$1(st,Mt){var Xr=st.pendingLanes;if(Xr===0)return 0;var rn=0,nn=st.suspendedLanes,an=st.pingedLanes,on=Xr&268435455;if(on!==0){var sn=on&~nn;sn!==0?rn=tc$1(sn):(an&=on,an!==0&&(rn=tc$1(an)))}else on=Xr&~nn,on!==0?rn=tc$1(on):an!==0&&(rn=tc$1(an));if(rn===0)return 0;if(Mt!==0&&Mt!==rn&&!(Mt&nn)&&(nn=rn&-rn,an=Mt&-Mt,nn>=an||nn===16&&(an&4194240)!==0))return Mt;if(rn&4&&(rn|=Xr&16),Mt=st.entangledLanes,Mt!==0)for(st=st.entanglements,Mt&=rn;0<Mt;)Xr=31-oc$1(Mt),nn=1<<Xr,rn|=st[Xr],Mt&=~nn;return rn}function vc$1(st,Mt){switch(st){case 1:case 2:case 4:return Mt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Mt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(st,Mt){for(var Xr=st.suspendedLanes,rn=st.pingedLanes,nn=st.expirationTimes,an=st.pendingLanes;0<an;){var on=31-oc$1(an),sn=1<<on,ln=nn[on];ln===-1?(!(sn&Xr)||sn&rn)&&(nn[on]=vc$1(sn,Mt)):ln<=Mt&&(st.expiredLanes|=sn),an&=~sn}}function xc$1(st){return st=st.pendingLanes&-1073741825,st!==0?st:st&1073741824?1073741824:0}function yc$1(){var st=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),st}function zc$1(st){for(var Mt=[],Xr=0;31>Xr;Xr++)Mt.push(st);return Mt}function Ac$1(st,Mt,Xr){st.pendingLanes|=Mt,Mt!==536870912&&(st.suspendedLanes=0,st.pingedLanes=0),st=st.eventTimes,Mt=31-oc$1(Mt),st[Mt]=Xr}function Bc$1(st,Mt){var Xr=st.pendingLanes&~Mt;st.pendingLanes=Mt,st.suspendedLanes=0,st.pingedLanes=0,st.expiredLanes&=Mt,st.mutableReadLanes&=Mt,st.entangledLanes&=Mt,Mt=st.entanglements;var rn=st.eventTimes;for(st=st.expirationTimes;0<Xr;){var nn=31-oc$1(Xr),an=1<<nn;Mt[nn]=0,rn[nn]=-1,st[nn]=-1,Xr&=~an}}function Cc$1(st,Mt){var Xr=st.entangledLanes|=Mt;for(st=st.entanglements;Xr;){var rn=31-oc$1(Xr),nn=1<<rn;nn&Mt|st[rn]&Mt&&(st[rn]|=Mt),Xr&=~nn}}var C$1=0;function Dc$1(st){return st&=-st,1<st?4<st?st&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(st,Mt){switch(st){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(Mt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(Mt.pointerId)}}function Tc$1(st,Mt,Xr,rn,nn,an){return st===null||st.nativeEvent!==an?(st={blockedOn:Mt,domEventName:Xr,eventSystemFlags:rn,nativeEvent:an,targetContainers:[nn]},Mt!==null&&(Mt=Cb(Mt),Mt!==null&&Fc$1(Mt)),st):(st.eventSystemFlags|=rn,Mt=st.targetContainers,nn!==null&&Mt.indexOf(nn)===-1&&Mt.push(nn),st)}function Uc$1(st,Mt,Xr,rn,nn){switch(Mt){case"focusin":return Lc$1=Tc$1(Lc$1,st,Mt,Xr,rn,nn),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,st,Mt,Xr,rn,nn),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,st,Mt,Xr,rn,nn),!0;case"pointerover":var an=nn.pointerId;return Oc$1.set(an,Tc$1(Oc$1.get(an)||null,st,Mt,Xr,rn,nn)),!0;case"gotpointercapture":return an=nn.pointerId,Pc$1.set(an,Tc$1(Pc$1.get(an)||null,st,Mt,Xr,rn,nn)),!0}return!1}function Vc$1(st){var Mt=Wc$1(st.target);if(Mt!==null){var Xr=Vb(Mt);if(Xr!==null){if(Mt=Xr.tag,Mt===13){if(Mt=Wb(Xr),Mt!==null){st.blockedOn=Mt,Ic$1(st.priority,function(){Gc$1(Xr)});return}}else if(Mt===3&&Xr.stateNode.current.memoizedState.isDehydrated){st.blockedOn=Xr.tag===3?Xr.stateNode.containerInfo:null;return}}}st.blockedOn=null}function Xc$1(st){if(st.blockedOn!==null)return!1;for(var Mt=st.targetContainers;0<Mt.length;){var Xr=Yc$1(st.domEventName,st.eventSystemFlags,Mt[0],st.nativeEvent);if(Xr===null){Xr=st.nativeEvent;var rn=new Xr.constructor(Xr.type,Xr);wb=rn,Xr.target.dispatchEvent(rn),wb=null}else return Mt=Cb(Xr),Mt!==null&&Fc$1(Mt),st.blockedOn=Xr,!1;Mt.shift()}return!0}function Zc$1(st,Mt,Xr){Xc$1(st)&&Xr.delete(Mt)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(st,Mt){st.blockedOn===Mt&&(st.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(st){function Mt(nn){return ad$1(nn,st)}if(0<Kc$1.length){ad$1(Kc$1[0],st);for(var Xr=1;Xr<Kc$1.length;Xr++){var rn=Kc$1[Xr];rn.blockedOn===st&&(rn.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,st),Mc$1!==null&&ad$1(Mc$1,st),Nc$1!==null&&ad$1(Nc$1,st),Oc$1.forEach(Mt),Pc$1.forEach(Mt),Xr=0;Xr<Qc$1.length;Xr++)rn=Qc$1[Xr],rn.blockedOn===st&&(rn.blockedOn=null);for(;0<Qc$1.length&&(Xr=Qc$1[0],Xr.blockedOn===null);)Vc$1(Xr),Xr.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd=!0;function ed$1(st,Mt,Xr,rn){var nn=C$1,an=cd$1.transition;cd$1.transition=null;try{C$1=1,fd(st,Mt,Xr,rn)}finally{C$1=nn,cd$1.transition=an}}function gd(st,Mt,Xr,rn){var nn=C$1,an=cd$1.transition;cd$1.transition=null;try{C$1=4,fd(st,Mt,Xr,rn)}finally{C$1=nn,cd$1.transition=an}}function fd(st,Mt,Xr,rn){if(dd){var nn=Yc$1(st,Mt,Xr,rn);if(nn===null)hd(st,Mt,rn,id$3,Xr),Sc$1(st,rn);else if(Uc$1(nn,st,Mt,Xr,rn))rn.stopPropagation();else if(Sc$1(st,rn),Mt&4&&-1<Rc$1.indexOf(st)){for(;nn!==null;){var an=Cb(nn);if(an!==null&&Ec$1(an),an=Yc$1(st,Mt,Xr,rn),an===null&&hd(st,Mt,rn,id$3,Xr),an===nn)break;nn=an}nn!==null&&rn.stopPropagation()}else hd(st,Mt,rn,null,Xr)}}var id$3=null;function Yc$1(st,Mt,Xr,rn){if(id$3=null,st=xb(rn),st=Wc$1(st),st!==null)if(Mt=Vb(st),Mt===null)st=null;else if(Xr=Mt.tag,Xr===13){if(st=Wb(Mt),st!==null)return st;st=null}else if(Xr===3){if(Mt.stateNode.current.memoizedState.isDehydrated)return Mt.tag===3?Mt.stateNode.containerInfo:null;st=null}else Mt!==st&&(st=null);return id$3=st,null}function jd(st){switch(st){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld=null,md=null;function nd$1(){if(md)return md;var st,Mt=ld,Xr=Mt.length,rn,nn="value"in kd$1?kd$1.value:kd$1.textContent,an=nn.length;for(st=0;st<Xr&&Mt[st]===nn[st];st++);var on=Xr-st;for(rn=1;rn<=on&&Mt[Xr-rn]===nn[an-rn];rn++);return md=nn.slice(st,1<rn?1-rn:void 0)}function od(st){var Mt=st.keyCode;return"charCode"in st?(st=st.charCode,st===0&&Mt===13&&(st=13)):st=Mt,st===10&&(st=13),32<=st||st===13?st:0}function pd(){return!0}function qd(){return!1}function rd(st){function Mt(Xr,rn,nn,an,on){this._reactName=Xr,this._targetInst=nn,this.type=rn,this.nativeEvent=an,this.target=on,this.currentTarget=null;for(var sn in st)st.hasOwnProperty(sn)&&(Xr=st[sn],this[sn]=Xr?Xr(an):an[sn]);return this.isDefaultPrevented=(an.defaultPrevented!=null?an.defaultPrevented:an.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(Mt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Xr=this.nativeEvent;Xr&&(Xr.preventDefault?Xr.preventDefault():typeof Xr.returnValue!="unknown"&&(Xr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var Xr=this.nativeEvent;Xr&&(Xr.stopPropagation?Xr.stopPropagation():typeof Xr.cancelBubble!="unknown"&&(Xr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),Mt}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(st){return st.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd$1),ud$1=A$2({},sd$1,{view:0,detail:0}),vd=rd(ud$1),wd$1,xd$1,yd,Ad=A$2({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(st){return st.relatedTarget===void 0?st.fromElement===st.srcElement?st.toElement:st.fromElement:st.relatedTarget},movementX:function(st){return"movementX"in st?st.movementX:(st!==yd&&(yd&&st.type==="mousemove"?(wd$1=st.screenX-yd.screenX,xd$1=st.screenY-yd.screenY):xd$1=wd$1=0,yd=st),wd$1)},movementY:function(st){return"movementY"in st?st.movementY:xd$1}}),Bd=rd(Ad),Cd$1=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd$1),Ed$1=A$2({},ud$1,{relatedTarget:0}),Fd=rd(Ed$1),Gd=A$2({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id$1=A$2({},sd$1,{clipboardData:function(st){return"clipboardData"in st?st.clipboardData:window.clipboardData}}),Jd=rd(Id$1),Kd=A$2({},sd$1,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(st){var Mt=this.nativeEvent;return Mt.getModifierState?Mt.getModifierState(st):(st=Od[st])?!!Mt[st]:!1}function zd(){return Pd}var Qd=A$2({},ud$1,{key:function(st){if(st.key){var Mt=Md[st.key]||st.key;if(Mt!=="Unidentified")return Mt}return st.type==="keypress"?(st=od(st),st===13?"Enter":String.fromCharCode(st)):st.type==="keydown"||st.type==="keyup"?Nd[st.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(st){return st.type==="keypress"?od(st):0},keyCode:function(st){return st.type==="keydown"||st.type==="keyup"?st.keyCode:0},which:function(st){return st.type==="keypress"?od(st):st.type==="keydown"||st.type==="keyup"?st.keyCode:0}}),Rd$1=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(st){return"deltaX"in st?st.deltaX:"wheelDeltaX"in st?-st.wheelDeltaX:0},deltaY:function(st){return"deltaY"in st?st.deltaY:"wheelDeltaY"in st?-st.wheelDeltaY:"wheelDelta"in st?-st.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(st,Mt){switch(st){case"keyup":return $d.indexOf(Mt.keyCode)!==-1;case"keydown":return Mt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(st){return st=st.detail,typeof st=="object"&&"data"in st?st.data:null}var ie$1=!1;function je(st,Mt){switch(st){case"compositionend":return he$2(Mt);case"keypress":return Mt.which!==32?null:(fe$1=!0,ee$1);case"textInput":return st=Mt.data,st===ee$1&&fe$1?null:st;default:return null}}function ke$2(st,Mt){if(ie$1)return st==="compositionend"||!ae$1&&ge$1(st,Mt)?(st=nd$1(),md=ld=kd$1=null,ie$1=!1,st):null;switch(st){case"paste":return null;case"keypress":if(!(Mt.ctrlKey||Mt.altKey||Mt.metaKey)||Mt.ctrlKey&&Mt.altKey){if(Mt.char&&1<Mt.char.length)return Mt.char;if(Mt.which)return String.fromCharCode(Mt.which)}return null;case"compositionend":return de$1&&Mt.locale!=="ko"?null:Mt.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(st){var Mt=st&&st.nodeName&&st.nodeName.toLowerCase();return Mt==="input"?!!le$1[st.type]:Mt==="textarea"}function ne$2(st,Mt,Xr,rn){Eb(rn),Mt=oe$2(Mt,"onChange"),0<Mt.length&&(Xr=new td$1("onChange","change",null,Xr,rn),st.push({event:Xr,listeners:Mt}))}var pe$1=null,qe=null;function re$1(st){se$1(st,0)}function te$1(st){var Mt=ue$1(st);if(Wa$1(Mt))return st}function ve$1(st,Mt){if(st==="change")return Mt}var we$2=!1;if(ia$1){var xe$2;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$2=ye$1}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe=pe$1=null)}function Be$1(st){if(st.propertyName==="value"&&te$1(qe)){var Mt=[];ne$2(Mt,qe,st,xb(st)),Jb(re$1,Mt)}}function Ce$2(st,Mt,Xr){st==="focusin"?(Ae$1(),pe$1=Mt,qe=Xr,pe$1.attachEvent("onpropertychange",Be$1)):st==="focusout"&&Ae$1()}function De$1(st){if(st==="selectionchange"||st==="keyup"||st==="keydown")return te$1(qe)}function Ee$1(st,Mt){if(st==="click")return te$1(Mt)}function Fe$2(st,Mt){if(st==="input"||st==="change")return te$1(Mt)}function Ge(st,Mt){return st===Mt&&(st!==0||1/st===1/Mt)||st!==st&&Mt!==Mt}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie$2(st,Mt){if(He$1(st,Mt))return!0;if(typeof st!="object"||st===null||typeof Mt!="object"||Mt===null)return!1;var Xr=Object.keys(st),rn=Object.keys(Mt);if(Xr.length!==rn.length)return!1;for(rn=0;rn<Xr.length;rn++){var nn=Xr[rn];if(!ja$1.call(Mt,nn)||!He$1(st[nn],Mt[nn]))return!1}return!0}function Je(st){for(;st&&st.firstChild;)st=st.firstChild;return st}function Ke(st,Mt){var Xr=Je(st);st=0;for(var rn;Xr;){if(Xr.nodeType===3){if(rn=st+Xr.textContent.length,st<=Mt&&rn>=Mt)return{node:Xr,offset:Mt-st};st=rn}e:{for(;Xr;){if(Xr.nextSibling){Xr=Xr.nextSibling;break e}Xr=Xr.parentNode}Xr=void 0}Xr=Je(Xr)}}function Le$2(st,Mt){return st&&Mt?st===Mt?!0:st&&st.nodeType===3?!1:Mt&&Mt.nodeType===3?Le$2(st,Mt.parentNode):"contains"in st?st.contains(Mt):st.compareDocumentPosition?!!(st.compareDocumentPosition(Mt)&16):!1:!1}function Me$1(){for(var st=window,Mt=Xa$1();Mt instanceof st.HTMLIFrameElement;){try{var Xr=typeof Mt.contentWindow.location.href=="string"}catch{Xr=!1}if(Xr)st=Mt.contentWindow;else break;Mt=Xa$1(st.document)}return Mt}function Ne$1(st){var Mt=st&&st.nodeName&&st.nodeName.toLowerCase();return Mt&&(Mt==="input"&&(st.type==="text"||st.type==="search"||st.type==="tel"||st.type==="url"||st.type==="password")||Mt==="textarea"||st.contentEditable==="true")}function Oe$1(st){var Mt=Me$1(),Xr=st.focusedElem,rn=st.selectionRange;if(Mt!==Xr&&Xr&&Xr.ownerDocument&&Le$2(Xr.ownerDocument.documentElement,Xr)){if(rn!==null&&Ne$1(Xr)){if(Mt=rn.start,st=rn.end,st===void 0&&(st=Mt),"selectionStart"in Xr)Xr.selectionStart=Mt,Xr.selectionEnd=Math.min(st,Xr.value.length);else if(st=(Mt=Xr.ownerDocument||document)&&Mt.defaultView||window,st.getSelection){st=st.getSelection();var nn=Xr.textContent.length,an=Math.min(rn.start,nn);rn=rn.end===void 0?an:Math.min(rn.end,nn),!st.extend&&an>rn&&(nn=rn,rn=an,an=nn),nn=Ke(Xr,an);var on=Ke(Xr,rn);nn&&on&&(st.rangeCount!==1||st.anchorNode!==nn.node||st.anchorOffset!==nn.offset||st.focusNode!==on.node||st.focusOffset!==on.offset)&&(Mt=Mt.createRange(),Mt.setStart(nn.node,nn.offset),st.removeAllRanges(),an>rn?(st.addRange(Mt),st.extend(on.node,on.offset)):(Mt.setEnd(on.node,on.offset),st.addRange(Mt)))}}for(Mt=[],st=Xr;st=st.parentNode;)st.nodeType===1&&Mt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof Xr.focus=="function"&&Xr.focus(),Xr=0;Xr<Mt.length;Xr++)st=Mt[Xr],st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se$2=null,Te$1=!1;function Ue$1(st,Mt,Xr){var rn=Xr.window===Xr?Xr.document:Xr.nodeType===9?Xr:Xr.ownerDocument;Te$1||Qe==null||Qe!==Xa$1(rn)||(rn=Qe,"selectionStart"in rn&&Ne$1(rn)?rn={start:rn.selectionStart,end:rn.selectionEnd}:(rn=(rn.ownerDocument&&rn.ownerDocument.defaultView||window).getSelection(),rn={anchorNode:rn.anchorNode,anchorOffset:rn.anchorOffset,focusNode:rn.focusNode,focusOffset:rn.focusOffset}),Se$2&&Ie$2(Se$2,rn)||(Se$2=rn,rn=oe$2(Re$1,"onSelect"),0<rn.length&&(Mt=new td$1("onSelect","select",null,Mt,Xr),st.push({event:Mt,listeners:rn}),Mt.target=Qe)))}function Ve$1(st,Mt){var Xr={};return Xr[st.toLowerCase()]=Mt.toLowerCase(),Xr["Webkit"+st]="webkit"+Mt,Xr["Moz"+st]="moz"+Mt,Xr}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(st){if(Xe$1[st])return Xe$1[st];if(!We$1[st])return st;var Mt=We$1[st],Xr;for(Xr in Mt)if(Mt.hasOwnProperty(Xr)&&Xr in Ye)return Xe$1[st]=Mt[Xr];return st}var $e=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(st,Mt){df$1.set(st,Mt),fa$1(Mt,[st])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(st,Mt,Xr){var rn=st.type||"unknown-event";st.currentTarget=Xr,Ub(rn,Mt,void 0,st),st.currentTarget=null}function se$1(st,Mt){Mt=(Mt&4)!==0;for(var Xr=0;Xr<st.length;Xr++){var rn=st[Xr],nn=rn.event;rn=rn.listeners;e:{var an=void 0;if(Mt)for(var on=rn.length-1;0<=on;on--){var sn=rn[on],ln=sn.instance,un=sn.currentTarget;if(sn=sn.listener,ln!==an&&nn.isPropagationStopped())break e;nf$1(nn,sn,un),an=ln}else for(on=0;on<rn.length;on++){if(sn=rn[on],ln=sn.instance,un=sn.currentTarget,sn=sn.listener,ln!==an&&nn.isPropagationStopped())break e;nf$1(nn,sn,un),an=ln}}}if(Qb)throw st=Rb,Qb=!1,Rb=null,st}function D$2(st,Mt){var Xr=Mt[of$1];Xr===void 0&&(Xr=Mt[of$1]=new Set);var rn=st+"__bubble";Xr.has(rn)||(pf$1(Mt,st,2,!1),Xr.add(rn))}function qf$1(st,Mt,Xr){var rn=0;Mt&&(rn|=4),pf$1(Xr,st,rn,Mt)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(st){if(!st[rf$1]){st[rf$1]=!0,da$1.forEach(function(Xr){Xr!=="selectionchange"&&(mf$1.has(Xr)||qf$1(Xr,!1,st),qf$1(Xr,!0,st))});var Mt=st.nodeType===9?st:st.ownerDocument;Mt===null||Mt[rf$1]||(Mt[rf$1]=!0,qf$1("selectionchange",!1,Mt))}}function pf$1(st,Mt,Xr,rn){switch(jd(Mt)){case 1:var nn=ed$1;break;case 4:nn=gd;break;default:nn=fd}Xr=nn.bind(null,Mt,Xr,st),nn=void 0,!Lb||Mt!=="touchstart"&&Mt!=="touchmove"&&Mt!=="wheel"||(nn=!0),rn?nn!==void 0?st.addEventListener(Mt,Xr,{capture:!0,passive:nn}):st.addEventListener(Mt,Xr,!0):nn!==void 0?st.addEventListener(Mt,Xr,{passive:nn}):st.addEventListener(Mt,Xr,!1)}function hd(st,Mt,Xr,rn,nn){var an=rn;if(!(Mt&1)&&!(Mt&2)&&rn!==null)e:for(;;){if(rn===null)return;var on=rn.tag;if(on===3||on===4){var sn=rn.stateNode.containerInfo;if(sn===nn||sn.nodeType===8&&sn.parentNode===nn)break;if(on===4)for(on=rn.return;on!==null;){var ln=on.tag;if((ln===3||ln===4)&&(ln=on.stateNode.containerInfo,ln===nn||ln.nodeType===8&&ln.parentNode===nn))return;on=on.return}for(;sn!==null;){if(on=Wc$1(sn),on===null)return;if(ln=on.tag,ln===5||ln===6){rn=an=on;continue e}sn=sn.parentNode}}rn=rn.return}Jb(function(){var un=an,cn=xb(Xr),hn=[];e:{var fn=df$1.get(st);if(fn!==void 0){var to=td$1,uo=st;switch(st){case"keypress":if(od(Xr)===0)break e;case"keydown":case"keyup":to=Rd$1;break;case"focusin":uo="focus",to=Fd;break;case"focusout":uo="blur",to=Fd;break;case"beforeblur":case"afterblur":to=Fd;break;case"click":if(Xr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":to=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":to=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":to=Vd;break;case $e:case af$1:case bf$1:to=Hd;break;case cf$1:to=Xd;break;case"scroll":to=vd;break;case"wheel":to=Zd;break;case"copy":case"cut":case"paste":to=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":to=Td}var co=(Mt&4)!==0,Uo=!co&&st==="scroll",lo=co?fn!==null?fn+"Capture":null:fn;co=[];for(var ho=un,fo;ho!==null;){fo=ho;var mo=fo.stateNode;if(fo.tag===5&&mo!==null&&(fo=mo,lo!==null&&(mo=Kb(ho,lo),mo!=null&&co.push(tf$1(ho,mo,fo)))),Uo)break;ho=ho.return}0<co.length&&(fn=new to(fn,uo,null,Xr,cn),hn.push({event:fn,listeners:co}))}}if(!(Mt&7)){e:{if(fn=st==="mouseover"||st==="pointerover",to=st==="mouseout"||st==="pointerout",fn&&Xr!==wb&&(uo=Xr.relatedTarget||Xr.fromElement)&&(Wc$1(uo)||uo[uf$1]))break e;if((to||fn)&&(fn=cn.window===cn?cn:(fn=cn.ownerDocument)?fn.defaultView||fn.parentWindow:window,to?(uo=Xr.relatedTarget||Xr.toElement,to=un,uo=uo?Wc$1(uo):null,uo!==null&&(Uo=Vb(uo),uo!==Uo||uo.tag!==5&&uo.tag!==6)&&(uo=null)):(to=null,uo=un),to!==uo)){if(co=Bd,mo="onMouseLeave",lo="onMouseEnter",ho="mouse",(st==="pointerout"||st==="pointerover")&&(co=Td,mo="onPointerLeave",lo="onPointerEnter",ho="pointer"),Uo=to==null?fn:ue$1(to),fo=uo==null?fn:ue$1(uo),fn=new co(mo,ho+"leave",to,Xr,cn),fn.target=Uo,fn.relatedTarget=fo,mo=null,Wc$1(cn)===un&&(co=new co(lo,ho+"enter",uo,Xr,cn),co.target=fo,co.relatedTarget=Uo,mo=co),Uo=mo,to&&uo)t:{for(co=to,lo=uo,ho=0,fo=co;fo;fo=vf$1(fo))ho++;for(fo=0,mo=lo;mo;mo=vf$1(mo))fo++;for(;0<ho-fo;)co=vf$1(co),ho--;for(;0<fo-ho;)lo=vf$1(lo),fo--;for(;ho--;){if(co===lo||lo!==null&&co===lo.alternate)break t;co=vf$1(co),lo=vf$1(lo)}co=null}else co=null;to!==null&&wf$1(hn,fn,to,co,!1),uo!==null&&Uo!==null&&wf$1(hn,Uo,uo,co,!0)}}e:{if(fn=un?ue$1(un):window,to=fn.nodeName&&fn.nodeName.toLowerCase(),to==="select"||to==="input"&&fn.type==="file")var _d=ve$1;else if(me$1(fn))if(we$2)_d=Fe$2;else{_d=De$1;var ep=Ce$2}else(to=fn.nodeName)&&to.toLowerCase()==="input"&&(fn.type==="checkbox"||fn.type==="radio")&&(_d=Ee$1);if(_d&&(_d=_d(st,un))){ne$2(hn,_d,Xr,cn);break e}ep&&ep(st,fn,un),st==="focusout"&&(ep=fn._wrapperState)&&ep.controlled&&fn.type==="number"&&cb(fn,"number",fn.value)}switch(ep=un?ue$1(un):window,st){case"focusin":(me$1(ep)||ep.contentEditable==="true")&&(Qe=ep,Re$1=un,Se$2=null);break;case"focusout":Se$2=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(hn,Xr,cn);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(hn,Xr,cn)}var rp;if(ae$1)e:{switch(st){case"compositionstart":var ap="onCompositionStart";break e;case"compositionend":ap="onCompositionEnd";break e;case"compositionupdate":ap="onCompositionUpdate";break e}ap=void 0}else ie$1?ge$1(st,Xr)&&(ap="onCompositionEnd"):st==="keydown"&&Xr.keyCode===229&&(ap="onCompositionStart");ap&&(de$1&&Xr.locale!=="ko"&&(ie$1||ap!=="onCompositionStart"?ap==="onCompositionEnd"&&ie$1&&(rp=nd$1()):(kd$1=cn,ld="value"in kd$1?kd$1.value:kd$1.textContent,ie$1=!0)),ep=oe$2(un,ap),0<ep.length&&(ap=new Ld(ap,st,null,Xr,cn),hn.push({event:ap,listeners:ep}),rp?ap.data=rp:(rp=he$2(Xr),rp!==null&&(ap.data=rp)))),(rp=ce$1?je(st,Xr):ke$2(st,Xr))&&(un=oe$2(un,"onBeforeInput"),0<un.length&&(cn=new Ld("onBeforeInput","beforeinput",null,Xr,cn),hn.push({event:cn,listeners:un}),cn.data=rp))}se$1(hn,Mt)})}function tf$1(st,Mt,Xr){return{instance:st,listener:Mt,currentTarget:Xr}}function oe$2(st,Mt){for(var Xr=Mt+"Capture",rn=[];st!==null;){var nn=st,an=nn.stateNode;nn.tag===5&&an!==null&&(nn=an,an=Kb(st,Xr),an!=null&&rn.unshift(tf$1(st,an,nn)),an=Kb(st,Mt),an!=null&&rn.push(tf$1(st,an,nn))),st=st.return}return rn}function vf$1(st){if(st===null)return null;do st=st.return;while(st&&st.tag!==5);return st||null}function wf$1(st,Mt,Xr,rn,nn){for(var an=Mt._reactName,on=[];Xr!==null&&Xr!==rn;){var sn=Xr,ln=sn.alternate,un=sn.stateNode;if(ln!==null&&ln===rn)break;sn.tag===5&&un!==null&&(sn=un,nn?(ln=Kb(Xr,an),ln!=null&&on.unshift(tf$1(Xr,ln,sn))):nn||(ln=Kb(Xr,an),ln!=null&&on.push(tf$1(Xr,ln,sn)))),Xr=Xr.return}on.length!==0&&st.push({event:Mt,listeners:on})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(st){return(typeof st=="string"?st:""+st).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(st,Mt,Xr){if(Mt=zf$1(Mt),zf$1(st)!==Mt&&Xr)throw Error(p$4(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(st,Mt){return st==="textarea"||st==="noscript"||typeof Mt.children=="string"||typeof Mt.children=="number"||typeof Mt.dangerouslySetInnerHTML=="object"&&Mt.dangerouslySetInnerHTML!==null&&Mt.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(st){return Hf$1.resolve(null).then(st).catch(If$1)}:Ff$1;function If$1(st){setTimeout(function(){throw st})}function Kf$1(st,Mt){var Xr=Mt,rn=0;do{var nn=Xr.nextSibling;if(st.removeChild(Xr),nn&&nn.nodeType===8)if(Xr=nn.data,Xr==="/$"){if(rn===0){st.removeChild(nn),bd$1(Mt);return}rn--}else Xr!=="$"&&Xr!=="$?"&&Xr!=="$!"||rn++;Xr=nn}while(Xr);bd$1(Mt)}function Lf$1(st){for(;st!=null;st=st.nextSibling){var Mt=st.nodeType;if(Mt===1||Mt===3)break;if(Mt===8){if(Mt=st.data,Mt==="$"||Mt==="$!"||Mt==="$?")break;if(Mt==="/$")return null}}return st}function Mf$1(st){st=st.previousSibling;for(var Mt=0;st;){if(st.nodeType===8){var Xr=st.data;if(Xr==="$"||Xr==="$!"||Xr==="$?"){if(Mt===0)return st;Mt--}else Xr==="/$"&&Mt++}st=st.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(st){var Mt=st[Of$1];if(Mt)return Mt;for(var Xr=st.parentNode;Xr;){if(Mt=Xr[uf$1]||Xr[Of$1]){if(Xr=Mt.alternate,Mt.child!==null||Xr!==null&&Xr.child!==null)for(st=Mf$1(st);st!==null;){if(Xr=st[Of$1])return Xr;st=Mf$1(st)}return Mt}st=Xr,Xr=st.parentNode}return null}function Cb(st){return st=st[Of$1]||st[uf$1],!st||st.tag!==5&&st.tag!==6&&st.tag!==13&&st.tag!==3?null:st}function ue$1(st){if(st.tag===5||st.tag===6)return st.stateNode;throw Error(p$4(33))}function Db(st){return st[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(st){return{current:st}}function E$1(st){0>Tf$1||(st.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(st,Mt){Tf$1++,Sf$1[Tf$1]=st.current,st.current=Mt}var Vf$1={},H$3=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(st,Mt){var Xr=st.type.contextTypes;if(!Xr)return Vf$1;var rn=st.stateNode;if(rn&&rn.__reactInternalMemoizedUnmaskedChildContext===Mt)return rn.__reactInternalMemoizedMaskedChildContext;var nn={},an;for(an in Xr)nn[an]=Mt[an];return rn&&(st=st.stateNode,st.__reactInternalMemoizedUnmaskedChildContext=Mt,st.__reactInternalMemoizedMaskedChildContext=nn),nn}function Zf$1(st){return st=st.childContextTypes,st!=null}function $f$1(){E$1(Wf$1),E$1(H$3)}function ag(st,Mt,Xr){if(H$3.current!==Vf$1)throw Error(p$4(168));G$1(H$3,Mt),G$1(Wf$1,Xr)}function bg(st,Mt,Xr){var rn=st.stateNode;if(Mt=Mt.childContextTypes,typeof rn.getChildContext!="function")return Xr;rn=rn.getChildContext();for(var nn in rn)if(!(nn in Mt))throw Error(p$4(108,Ra$1(st)||"Unknown",nn));return A$2({},Xr,rn)}function cg(st){return st=(st=st.stateNode)&&st.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$3.current,G$1(H$3,st),G$1(Wf$1,Wf$1.current),!0}function dg(st,Mt,Xr){var rn=st.stateNode;if(!rn)throw Error(p$4(169));Xr?(st=bg(st,Mt,Xf$1),rn.__reactInternalMemoizedMergedChildContext=st,E$1(Wf$1),E$1(H$3),G$1(H$3,st)):E$1(Wf$1),G$1(Wf$1,Xr)}var eg=null,fg=!1,gg=!1;function hg(st){eg===null?eg=[st]:eg.push(st)}function ig(st){fg=!0,hg(st)}function jg(){if(!gg&&eg!==null){gg=!0;var st=0,Mt=C$1;try{var Xr=eg;for(C$1=1;st<Xr.length;st++){var rn=Xr[st];do rn=rn(!0);while(rn!==null)}eg=null,fg=!1}catch(nn){throw eg!==null&&(eg=eg.slice(st+1)),ac$1(fc$1,jg),nn}finally{C$1=Mt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(st,Mt){kg[lg++]=ng,kg[lg++]=mg,mg=st,ng=Mt}function ug(st,Mt,Xr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=st;var rn=rg;st=sg;var nn=32-oc$1(rn)-1;rn&=~(1<<nn),Xr+=1;var an=32-oc$1(Mt)+nn;if(30<an){var on=nn-nn%5;an=(rn&(1<<on)-1).toString(32),rn>>=on,nn-=on,rg=1<<32-oc$1(Mt)+nn|Xr<<nn|rn,sg=an+st}else rg=1<<an|Xr<<nn|rn,sg=st}function vg(st){st.return!==null&&(tg(st,1),ug(st,1,0))}function wg(st){for(;st===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;st===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(st,Mt){var Xr=Bg(5,null,null,0);Xr.elementType="DELETED",Xr.stateNode=Mt,Xr.return=st,Mt=st.deletions,Mt===null?(st.deletions=[Xr],st.flags|=16):Mt.push(Xr)}function Cg(st,Mt){switch(st.tag){case 5:var Xr=st.type;return Mt=Mt.nodeType!==1||Xr.toLowerCase()!==Mt.nodeName.toLowerCase()?null:Mt,Mt!==null?(st.stateNode=Mt,xg=st,yg=Lf$1(Mt.firstChild),!0):!1;case 6:return Mt=st.pendingProps===""||Mt.nodeType!==3?null:Mt,Mt!==null?(st.stateNode=Mt,xg=st,yg=null,!0):!1;case 13:return Mt=Mt.nodeType!==8?null:Mt,Mt!==null?(Xr=qg!==null?{id:rg,overflow:sg}:null,st.memoizedState={dehydrated:Mt,treeContext:Xr,retryLane:1073741824},Xr=Bg(18,null,null,0),Xr.stateNode=Mt,Xr.return=st,st.child=Xr,xg=st,yg=null,!0):!1;default:return!1}}function Dg(st){return(st.mode&1)!==0&&(st.flags&128)===0}function Eg(st){if(I$3){var Mt=yg;if(Mt){var Xr=Mt;if(!Cg(st,Mt)){if(Dg(st))throw Error(p$4(418));Mt=Lf$1(Xr.nextSibling);var rn=xg;Mt&&Cg(st,Mt)?Ag(rn,Xr):(st.flags=st.flags&-4097|2,I$3=!1,xg=st)}}else{if(Dg(st))throw Error(p$4(418));st.flags=st.flags&-4097|2,I$3=!1,xg=st}}}function Fg(st){for(st=st.return;st!==null&&st.tag!==5&&st.tag!==3&&st.tag!==13;)st=st.return;xg=st}function Gg(st){if(st!==xg)return!1;if(!I$3)return Fg(st),I$3=!0,!1;var Mt;if((Mt=st.tag!==3)&&!(Mt=st.tag!==5)&&(Mt=st.type,Mt=Mt!=="head"&&Mt!=="body"&&!Ef$1(st.type,st.memoizedProps)),Mt&&(Mt=yg)){if(Dg(st))throw Hg(),Error(p$4(418));for(;Mt;)Ag(st,Mt),Mt=Lf$1(Mt.nextSibling)}if(Fg(st),st.tag===13){if(st=st.memoizedState,st=st!==null?st.dehydrated:null,!st)throw Error(p$4(317));e:{for(st=st.nextSibling,Mt=0;st;){if(st.nodeType===8){var Xr=st.data;if(Xr==="/$"){if(Mt===0){yg=Lf$1(st.nextSibling);break e}Mt--}else Xr!=="$"&&Xr!=="$!"&&Xr!=="$?"||Mt++}st=st.nextSibling}yg=null}}else yg=xg?Lf$1(st.stateNode.nextSibling):null;return!0}function Hg(){for(var st=yg;st;)st=Lf$1(st.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(st){zg===null?zg=[st]:zg.push(st)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(st,Mt){if(st&&st.defaultProps){Mt=A$2({},Mt),st=st.defaultProps;for(var Xr in st)Mt[Xr]===void 0&&(Mt[Xr]=st[Xr]);return Mt}return Mt}var Mg=Uf$1(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(st){var Mt=Mg.current;E$1(Mg),st._currentValue=Mt}function Sg(st,Mt,Xr){for(;st!==null;){var rn=st.alternate;if((st.childLanes&Mt)!==Mt?(st.childLanes|=Mt,rn!==null&&(rn.childLanes|=Mt)):rn!==null&&(rn.childLanes&Mt)!==Mt&&(rn.childLanes|=Mt),st===Xr)break;st=st.return}}function Tg(st,Mt){Ng=st,Pg=Og=null,st=st.dependencies,st!==null&&st.firstContext!==null&&(st.lanes&Mt&&(Ug=!0),st.firstContext=null)}function Vg(st){var Mt=st._currentValue;if(Pg!==st)if(st={context:st,memoizedValue:Mt,next:null},Og===null){if(Ng===null)throw Error(p$4(308));Og=st,Ng.dependencies={lanes:0,firstContext:st}}else Og=Og.next=st;return Mt}var Wg=null;function Xg(st){Wg===null?Wg=[st]:Wg.push(st)}function Yg(st,Mt,Xr,rn){var nn=Mt.interleaved;return nn===null?(Xr.next=Xr,Xg(Mt)):(Xr.next=nn.next,nn.next=Xr),Mt.interleaved=Xr,Zg(st,rn)}function Zg(st,Mt){st.lanes|=Mt;var Xr=st.alternate;for(Xr!==null&&(Xr.lanes|=Mt),Xr=st,st=st.return;st!==null;)st.childLanes|=Mt,Xr=st.alternate,Xr!==null&&(Xr.childLanes|=Mt),Xr=st,st=st.return;return Xr.tag===3?Xr.stateNode:null}var $g=!1;function ah$1(st){st.updateQueue={baseState:st.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(st,Mt){st=st.updateQueue,Mt.updateQueue===st&&(Mt.updateQueue={baseState:st.baseState,firstBaseUpdate:st.firstBaseUpdate,lastBaseUpdate:st.lastBaseUpdate,shared:st.shared,effects:st.effects})}function ch$1(st,Mt){return{eventTime:st,lane:Mt,tag:0,payload:null,callback:null,next:null}}function dh$1(st,Mt,Xr){var rn=st.updateQueue;if(rn===null)return null;if(rn=rn.shared,K$1&2){var nn=rn.pending;return nn===null?Mt.next=Mt:(Mt.next=nn.next,nn.next=Mt),rn.pending=Mt,Zg(st,Xr)}return nn=rn.interleaved,nn===null?(Mt.next=Mt,Xg(rn)):(Mt.next=nn.next,nn.next=Mt),rn.interleaved=Mt,Zg(st,Xr)}function eh$1(st,Mt,Xr){if(Mt=Mt.updateQueue,Mt!==null&&(Mt=Mt.shared,(Xr&4194240)!==0)){var rn=Mt.lanes;rn&=st.pendingLanes,Xr|=rn,Mt.lanes=Xr,Cc$1(st,Xr)}}function fh$1(st,Mt){var Xr=st.updateQueue,rn=st.alternate;if(rn!==null&&(rn=rn.updateQueue,Xr===rn)){var nn=null,an=null;if(Xr=Xr.firstBaseUpdate,Xr!==null){do{var on={eventTime:Xr.eventTime,lane:Xr.lane,tag:Xr.tag,payload:Xr.payload,callback:Xr.callback,next:null};an===null?nn=an=on:an=an.next=on,Xr=Xr.next}while(Xr!==null);an===null?nn=an=Mt:an=an.next=Mt}else nn=an=Mt;Xr={baseState:rn.baseState,firstBaseUpdate:nn,lastBaseUpdate:an,shared:rn.shared,effects:rn.effects},st.updateQueue=Xr;return}st=Xr.lastBaseUpdate,st===null?Xr.firstBaseUpdate=Mt:st.next=Mt,Xr.lastBaseUpdate=Mt}function gh$1(st,Mt,Xr,rn){var nn=st.updateQueue;$g=!1;var an=nn.firstBaseUpdate,on=nn.lastBaseUpdate,sn=nn.shared.pending;if(sn!==null){nn.shared.pending=null;var ln=sn,un=ln.next;ln.next=null,on===null?an=un:on.next=un,on=ln;var cn=st.alternate;cn!==null&&(cn=cn.updateQueue,sn=cn.lastBaseUpdate,sn!==on&&(sn===null?cn.firstBaseUpdate=un:sn.next=un,cn.lastBaseUpdate=ln))}if(an!==null){var hn=nn.baseState;on=0,cn=un=ln=null,sn=an;do{var fn=sn.lane,to=sn.eventTime;if((rn&fn)===fn){cn!==null&&(cn=cn.next={eventTime:to,lane:0,tag:sn.tag,payload:sn.payload,callback:sn.callback,next:null});e:{var uo=st,co=sn;switch(fn=Mt,to=Xr,co.tag){case 1:if(uo=co.payload,typeof uo=="function"){hn=uo.call(to,hn,fn);break e}hn=uo;break e;case 3:uo.flags=uo.flags&-65537|128;case 0:if(uo=co.payload,fn=typeof uo=="function"?uo.call(to,hn,fn):uo,fn==null)break e;hn=A$2({},hn,fn);break e;case 2:$g=!0}}sn.callback!==null&&sn.lane!==0&&(st.flags|=64,fn=nn.effects,fn===null?nn.effects=[sn]:fn.push(sn))}else to={eventTime:to,lane:fn,tag:sn.tag,payload:sn.payload,callback:sn.callback,next:null},cn===null?(un=cn=to,ln=hn):cn=cn.next=to,on|=fn;if(sn=sn.next,sn===null){if(sn=nn.shared.pending,sn===null)break;fn=sn,sn=fn.next,fn.next=null,nn.lastBaseUpdate=fn,nn.shared.pending=null}}while(1);if(cn===null&&(ln=hn),nn.baseState=ln,nn.firstBaseUpdate=un,nn.lastBaseUpdate=cn,Mt=nn.shared.interleaved,Mt!==null){nn=Mt;do on|=nn.lane,nn=nn.next;while(nn!==Mt)}else an===null&&(nn.shared.lanes=0);hh$1|=on,st.lanes=on,st.memoizedState=hn}}function ih$1(st,Mt,Xr){if(st=Mt.effects,Mt.effects=null,st!==null)for(Mt=0;Mt<st.length;Mt++){var rn=st[Mt],nn=rn.callback;if(nn!==null){if(rn.callback=null,rn=Xr,typeof nn!="function")throw Error(p$4(191,nn));nn.call(rn)}}}var jh$1=new aa$1.Component().refs;function kh$1(st,Mt,Xr,rn){Mt=st.memoizedState,Xr=Xr(rn,Mt),Xr=Xr==null?Mt:A$2({},Mt,Xr),st.memoizedState=Xr,st.lanes===0&&(st.updateQueue.baseState=Xr)}var nh$1={isMounted:function(st){return(st=st._reactInternals)?Vb(st)===st:!1},enqueueSetState:function(st,Mt,Xr){st=st._reactInternals;var rn=L$1(),nn=lh$1(st),an=ch$1(rn,nn);an.payload=Mt,Xr!=null&&(an.callback=Xr),Mt=dh$1(st,an,nn),Mt!==null&&(mh$1(Mt,st,nn,rn),eh$1(Mt,st,nn))},enqueueReplaceState:function(st,Mt,Xr){st=st._reactInternals;var rn=L$1(),nn=lh$1(st),an=ch$1(rn,nn);an.tag=1,an.payload=Mt,Xr!=null&&(an.callback=Xr),Mt=dh$1(st,an,nn),Mt!==null&&(mh$1(Mt,st,nn,rn),eh$1(Mt,st,nn))},enqueueForceUpdate:function(st,Mt){st=st._reactInternals;var Xr=L$1(),rn=lh$1(st),nn=ch$1(Xr,rn);nn.tag=2,Mt!=null&&(nn.callback=Mt),Mt=dh$1(st,nn,rn),Mt!==null&&(mh$1(Mt,st,rn,Xr),eh$1(Mt,st,rn))}};function oh$1(st,Mt,Xr,rn,nn,an,on){return st=st.stateNode,typeof st.shouldComponentUpdate=="function"?st.shouldComponentUpdate(rn,an,on):Mt.prototype&&Mt.prototype.isPureReactComponent?!Ie$2(Xr,rn)||!Ie$2(nn,an):!0}function ph$1(st,Mt,Xr){var rn=!1,nn=Vf$1,an=Mt.contextType;return typeof an=="object"&&an!==null?an=Vg(an):(nn=Zf$1(Mt)?Xf$1:H$3.current,rn=Mt.contextTypes,an=(rn=rn!=null)?Yf$1(st,nn):Vf$1),Mt=new Mt(Xr,an),st.memoizedState=Mt.state!==null&&Mt.state!==void 0?Mt.state:null,Mt.updater=nh$1,st.stateNode=Mt,Mt._reactInternals=st,rn&&(st=st.stateNode,st.__reactInternalMemoizedUnmaskedChildContext=nn,st.__reactInternalMemoizedMaskedChildContext=an),Mt}function qh$1(st,Mt,Xr,rn){st=Mt.state,typeof Mt.componentWillReceiveProps=="function"&&Mt.componentWillReceiveProps(Xr,rn),typeof Mt.UNSAFE_componentWillReceiveProps=="function"&&Mt.UNSAFE_componentWillReceiveProps(Xr,rn),Mt.state!==st&&nh$1.enqueueReplaceState(Mt,Mt.state,null)}function rh$1(st,Mt,Xr,rn){var nn=st.stateNode;nn.props=Xr,nn.state=st.memoizedState,nn.refs=jh$1,ah$1(st);var an=Mt.contextType;typeof an=="object"&&an!==null?nn.context=Vg(an):(an=Zf$1(Mt)?Xf$1:H$3.current,nn.context=Yf$1(st,an)),nn.state=st.memoizedState,an=Mt.getDerivedStateFromProps,typeof an=="function"&&(kh$1(st,Mt,an,Xr),nn.state=st.memoizedState),typeof Mt.getDerivedStateFromProps=="function"||typeof nn.getSnapshotBeforeUpdate=="function"||typeof nn.UNSAFE_componentWillMount!="function"&&typeof nn.componentWillMount!="function"||(Mt=nn.state,typeof nn.componentWillMount=="function"&&nn.componentWillMount(),typeof nn.UNSAFE_componentWillMount=="function"&&nn.UNSAFE_componentWillMount(),Mt!==nn.state&&nh$1.enqueueReplaceState(nn,nn.state,null),gh$1(st,Xr,nn,rn),nn.state=st.memoizedState),typeof nn.componentDidMount=="function"&&(st.flags|=4194308)}function sh$1(st,Mt,Xr){if(st=Xr.ref,st!==null&&typeof st!="function"&&typeof st!="object"){if(Xr._owner){if(Xr=Xr._owner,Xr){if(Xr.tag!==1)throw Error(p$4(309));var rn=Xr.stateNode}if(!rn)throw Error(p$4(147,st));var nn=rn,an=""+st;return Mt!==null&&Mt.ref!==null&&typeof Mt.ref=="function"&&Mt.ref._stringRef===an?Mt.ref:(Mt=function(on){var sn=nn.refs;sn===jh$1&&(sn=nn.refs={}),on===null?delete sn[an]:sn[an]=on},Mt._stringRef=an,Mt)}if(typeof st!="string")throw Error(p$4(284));if(!Xr._owner)throw Error(p$4(290,st))}return st}function th$1(st,Mt){throw st=Object.prototype.toString.call(Mt),Error(p$4(31,st==="[object Object]"?"object with keys {"+Object.keys(Mt).join(", ")+"}":st))}function uh$1(st){var Mt=st._init;return Mt(st._payload)}function vh$1(st){function Mt(lo,ho){if(st){var fo=lo.deletions;fo===null?(lo.deletions=[ho],lo.flags|=16):fo.push(ho)}}function Xr(lo,ho){if(!st)return null;for(;ho!==null;)Mt(lo,ho),ho=ho.sibling;return null}function rn(lo,ho){for(lo=new Map;ho!==null;)ho.key!==null?lo.set(ho.key,ho):lo.set(ho.index,ho),ho=ho.sibling;return lo}function nn(lo,ho){return lo=wh$1(lo,ho),lo.index=0,lo.sibling=null,lo}function an(lo,ho,fo){return lo.index=fo,st?(fo=lo.alternate,fo!==null?(fo=fo.index,fo<ho?(lo.flags|=2,ho):fo):(lo.flags|=2,ho)):(lo.flags|=1048576,ho)}function on(lo){return st&&lo.alternate===null&&(lo.flags|=2),lo}function sn(lo,ho,fo,mo){return ho===null||ho.tag!==6?(ho=xh$1(fo,lo.mode,mo),ho.return=lo,ho):(ho=nn(ho,fo),ho.return=lo,ho)}function ln(lo,ho,fo,mo){var _d=fo.type;return _d===ya$1?cn(lo,ho,fo.props.children,mo,fo.key):ho!==null&&(ho.elementType===_d||typeof _d=="object"&&_d!==null&&_d.$$typeof===Ha$1&&uh$1(_d)===ho.type)?(mo=nn(ho,fo.props),mo.ref=sh$1(lo,ho,fo),mo.return=lo,mo):(mo=yh$1(fo.type,fo.key,fo.props,null,lo.mode,mo),mo.ref=sh$1(lo,ho,fo),mo.return=lo,mo)}function un(lo,ho,fo,mo){return ho===null||ho.tag!==4||ho.stateNode.containerInfo!==fo.containerInfo||ho.stateNode.implementation!==fo.implementation?(ho=zh$1(fo,lo.mode,mo),ho.return=lo,ho):(ho=nn(ho,fo.children||[]),ho.return=lo,ho)}function cn(lo,ho,fo,mo,_d){return ho===null||ho.tag!==7?(ho=Ah$1(fo,lo.mode,mo,_d),ho.return=lo,ho):(ho=nn(ho,fo),ho.return=lo,ho)}function hn(lo,ho,fo){if(typeof ho=="string"&&ho!==""||typeof ho=="number")return ho=xh$1(""+ho,lo.mode,fo),ho.return=lo,ho;if(typeof ho=="object"&&ho!==null){switch(ho.$$typeof){case va$1:return fo=yh$1(ho.type,ho.key,ho.props,null,lo.mode,fo),fo.ref=sh$1(lo,null,ho),fo.return=lo,fo;case wa$1:return ho=zh$1(ho,lo.mode,fo),ho.return=lo,ho;case Ha$1:var mo=ho._init;return hn(lo,mo(ho._payload),fo)}if(eb(ho)||Ka$1(ho))return ho=Ah$1(ho,lo.mode,fo,null),ho.return=lo,ho;th$1(lo,ho)}return null}function fn(lo,ho,fo,mo){var _d=ho!==null?ho.key:null;if(typeof fo=="string"&&fo!==""||typeof fo=="number")return _d!==null?null:sn(lo,ho,""+fo,mo);if(typeof fo=="object"&&fo!==null){switch(fo.$$typeof){case va$1:return fo.key===_d?ln(lo,ho,fo,mo):null;case wa$1:return fo.key===_d?un(lo,ho,fo,mo):null;case Ha$1:return _d=fo._init,fn(lo,ho,_d(fo._payload),mo)}if(eb(fo)||Ka$1(fo))return _d!==null?null:cn(lo,ho,fo,mo,null);th$1(lo,fo)}return null}function to(lo,ho,fo,mo,_d){if(typeof mo=="string"&&mo!==""||typeof mo=="number")return lo=lo.get(fo)||null,sn(ho,lo,""+mo,_d);if(typeof mo=="object"&&mo!==null){switch(mo.$$typeof){case va$1:return lo=lo.get(mo.key===null?fo:mo.key)||null,ln(ho,lo,mo,_d);case wa$1:return lo=lo.get(mo.key===null?fo:mo.key)||null,un(ho,lo,mo,_d);case Ha$1:var ep=mo._init;return to(lo,ho,fo,ep(mo._payload),_d)}if(eb(mo)||Ka$1(mo))return lo=lo.get(fo)||null,cn(ho,lo,mo,_d,null);th$1(ho,mo)}return null}function uo(lo,ho,fo,mo){for(var _d=null,ep=null,rp=ho,ap=ho=0,sp=null;rp!==null&&ap<fo.length;ap++){rp.index>ap?(sp=rp,rp=null):sp=rp.sibling;var up=fn(lo,rp,fo[ap],mo);if(up===null){rp===null&&(rp=sp);break}st&&rp&&up.alternate===null&&Mt(lo,rp),ho=an(up,ho,ap),ep===null?_d=up:ep.sibling=up,ep=up,rp=sp}if(ap===fo.length)return Xr(lo,rp),I$3&&tg(lo,ap),_d;if(rp===null){for(;ap<fo.length;ap++)rp=hn(lo,fo[ap],mo),rp!==null&&(ho=an(rp,ho,ap),ep===null?_d=rp:ep.sibling=rp,ep=rp);return I$3&&tg(lo,ap),_d}for(rp=rn(lo,rp);ap<fo.length;ap++)sp=to(rp,lo,ap,fo[ap],mo),sp!==null&&(st&&sp.alternate!==null&&rp.delete(sp.key===null?ap:sp.key),ho=an(sp,ho,ap),ep===null?_d=sp:ep.sibling=sp,ep=sp);return st&&rp.forEach(function(pp){return Mt(lo,pp)}),I$3&&tg(lo,ap),_d}function co(lo,ho,fo,mo){var _d=Ka$1(fo);if(typeof _d!="function")throw Error(p$4(150));if(fo=_d.call(fo),fo==null)throw Error(p$4(151));for(var ep=_d=null,rp=ho,ap=ho=0,sp=null,up=fo.next();rp!==null&&!up.done;ap++,up=fo.next()){rp.index>ap?(sp=rp,rp=null):sp=rp.sibling;var pp=fn(lo,rp,up.value,mo);if(pp===null){rp===null&&(rp=sp);break}st&&rp&&pp.alternate===null&&Mt(lo,rp),ho=an(pp,ho,ap),ep===null?_d=pp:ep.sibling=pp,ep=pp,rp=sp}if(up.done)return Xr(lo,rp),I$3&&tg(lo,ap),_d;if(rp===null){for(;!up.done;ap++,up=fo.next())up=hn(lo,up.value,mo),up!==null&&(ho=an(up,ho,ap),ep===null?_d=up:ep.sibling=up,ep=up);return I$3&&tg(lo,ap),_d}for(rp=rn(lo,rp);!up.done;ap++,up=fo.next())up=to(rp,lo,ap,up.value,mo),up!==null&&(st&&up.alternate!==null&&rp.delete(up.key===null?ap:up.key),ho=an(up,ho,ap),ep===null?_d=up:ep.sibling=up,ep=up);return st&&rp.forEach(function(hp){return Mt(lo,hp)}),I$3&&tg(lo,ap),_d}function Uo(lo,ho,fo,mo){if(typeof fo=="object"&&fo!==null&&fo.type===ya$1&&fo.key===null&&(fo=fo.props.children),typeof fo=="object"&&fo!==null){switch(fo.$$typeof){case va$1:e:{for(var _d=fo.key,ep=ho;ep!==null;){if(ep.key===_d){if(_d=fo.type,_d===ya$1){if(ep.tag===7){Xr(lo,ep.sibling),ho=nn(ep,fo.props.children),ho.return=lo,lo=ho;break e}}else if(ep.elementType===_d||typeof _d=="object"&&_d!==null&&_d.$$typeof===Ha$1&&uh$1(_d)===ep.type){Xr(lo,ep.sibling),ho=nn(ep,fo.props),ho.ref=sh$1(lo,ep,fo),ho.return=lo,lo=ho;break e}Xr(lo,ep);break}else Mt(lo,ep);ep=ep.sibling}fo.type===ya$1?(ho=Ah$1(fo.props.children,lo.mode,mo,fo.key),ho.return=lo,lo=ho):(mo=yh$1(fo.type,fo.key,fo.props,null,lo.mode,mo),mo.ref=sh$1(lo,ho,fo),mo.return=lo,lo=mo)}return on(lo);case wa$1:e:{for(ep=fo.key;ho!==null;){if(ho.key===ep)if(ho.tag===4&&ho.stateNode.containerInfo===fo.containerInfo&&ho.stateNode.implementation===fo.implementation){Xr(lo,ho.sibling),ho=nn(ho,fo.children||[]),ho.return=lo,lo=ho;break e}else{Xr(lo,ho);break}else Mt(lo,ho);ho=ho.sibling}ho=zh$1(fo,lo.mode,mo),ho.return=lo,lo=ho}return on(lo);case Ha$1:return ep=fo._init,Uo(lo,ho,ep(fo._payload),mo)}if(eb(fo))return uo(lo,ho,fo,mo);if(Ka$1(fo))return co(lo,ho,fo,mo);th$1(lo,fo)}return typeof fo=="string"&&fo!==""||typeof fo=="number"?(fo=""+fo,ho!==null&&ho.tag===6?(Xr(lo,ho.sibling),ho=nn(ho,fo),ho.return=lo,lo=ho):(Xr(lo,ho),ho=xh$1(fo,lo.mode,mo),ho.return=lo,lo=ho),on(lo)):Xr(lo,ho)}return Uo}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(st){if(st===Dh$1)throw Error(p$4(174));return st}function Ih$1(st,Mt){switch(G$1(Gh$1,Mt),G$1(Fh$1,st),G$1(Eh$1,Dh$1),st=Mt.nodeType,st){case 9:case 11:Mt=(Mt=Mt.documentElement)?Mt.namespaceURI:lb(null,"");break;default:st=st===8?Mt.parentNode:Mt,Mt=st.namespaceURI||null,st=st.tagName,Mt=lb(Mt,st)}E$1(Eh$1),G$1(Eh$1,Mt)}function Jh$1(){E$1(Eh$1),E$1(Fh$1),E$1(Gh$1)}function Kh$1(st){Hh$1(Gh$1.current);var Mt=Hh$1(Eh$1.current),Xr=lb(Mt,st.type);Mt!==Xr&&(G$1(Fh$1,st),G$1(Eh$1,Xr))}function Lh$1(st){Fh$1.current===st&&(E$1(Eh$1),E$1(Fh$1))}var M$4=Uf$1(0);function Mh$1(st){for(var Mt=st;Mt!==null;){if(Mt.tag===13){var Xr=Mt.memoizedState;if(Xr!==null&&(Xr=Xr.dehydrated,Xr===null||Xr.data==="$?"||Xr.data==="$!"))return Mt}else if(Mt.tag===19&&Mt.memoizedProps.revealOrder!==void 0){if(Mt.flags&128)return Mt}else if(Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===st)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===st)return null;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}return null}var Nh$1=[];function Oh$1(){for(var st=0;st<Nh$1.length;st++)Nh$1[st]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N$3=null,O$2=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$1(){throw Error(p$4(321))}function Wh$1(st,Mt){if(Mt===null)return!1;for(var Xr=0;Xr<Mt.length&&Xr<st.length;Xr++)if(!He$1(st[Xr],Mt[Xr]))return!1;return!0}function Xh$1(st,Mt,Xr,rn,nn,an){if(Rh$1=an,N$3=Mt,Mt.memoizedState=null,Mt.updateQueue=null,Mt.lanes=0,Ph$1.current=st===null||st.memoizedState===null?Yh$1:Zh$1,st=Xr(rn,nn),Th$1){an=0;do{if(Th$1=!1,Uh$1=0,25<=an)throw Error(p$4(301));an+=1,P$1=O$2=null,Mt.updateQueue=null,Ph$1.current=$h$1,st=Xr(rn,nn)}while(Th$1)}if(Ph$1.current=ai$1,Mt=O$2!==null&&O$2.next!==null,Rh$1=0,P$1=O$2=N$3=null,Sh$1=!1,Mt)throw Error(p$4(300));return st}function bi$1(){var st=Uh$1!==0;return Uh$1=0,st}function ci$1(){var st={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$3.memoizedState=P$1=st:P$1=P$1.next=st,P$1}function di$1(){if(O$2===null){var st=N$3.alternate;st=st!==null?st.memoizedState:null}else st=O$2.next;var Mt=P$1===null?N$3.memoizedState:P$1.next;if(Mt!==null)P$1=Mt,O$2=st;else{if(st===null)throw Error(p$4(310));O$2=st,st={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$1===null?N$3.memoizedState=P$1=st:P$1=P$1.next=st}return P$1}function ei$1(st,Mt){return typeof Mt=="function"?Mt(st):Mt}function fi$1(st){var Mt=di$1(),Xr=Mt.queue;if(Xr===null)throw Error(p$4(311));Xr.lastRenderedReducer=st;var rn=O$2,nn=rn.baseQueue,an=Xr.pending;if(an!==null){if(nn!==null){var on=nn.next;nn.next=an.next,an.next=on}rn.baseQueue=nn=an,Xr.pending=null}if(nn!==null){an=nn.next,rn=rn.baseState;var sn=on=null,ln=null,un=an;do{var cn=un.lane;if((Rh$1&cn)===cn)ln!==null&&(ln=ln.next={lane:0,action:un.action,hasEagerState:un.hasEagerState,eagerState:un.eagerState,next:null}),rn=un.hasEagerState?un.eagerState:st(rn,un.action);else{var hn={lane:cn,action:un.action,hasEagerState:un.hasEagerState,eagerState:un.eagerState,next:null};ln===null?(sn=ln=hn,on=rn):ln=ln.next=hn,N$3.lanes|=cn,hh$1|=cn}un=un.next}while(un!==null&&un!==an);ln===null?on=rn:ln.next=sn,He$1(rn,Mt.memoizedState)||(Ug=!0),Mt.memoizedState=rn,Mt.baseState=on,Mt.baseQueue=ln,Xr.lastRenderedState=rn}if(st=Xr.interleaved,st!==null){nn=st;do an=nn.lane,N$3.lanes|=an,hh$1|=an,nn=nn.next;while(nn!==st)}else nn===null&&(Xr.lanes=0);return[Mt.memoizedState,Xr.dispatch]}function gi$1(st){var Mt=di$1(),Xr=Mt.queue;if(Xr===null)throw Error(p$4(311));Xr.lastRenderedReducer=st;var rn=Xr.dispatch,nn=Xr.pending,an=Mt.memoizedState;if(nn!==null){Xr.pending=null;var on=nn=nn.next;do an=st(an,on.action),on=on.next;while(on!==nn);He$1(an,Mt.memoizedState)||(Ug=!0),Mt.memoizedState=an,Mt.baseQueue===null&&(Mt.baseState=an),Xr.lastRenderedState=an}return[an,rn]}function hi$1(){}function ii$1(st,Mt){var Xr=N$3,rn=di$1(),nn=Mt(),an=!He$1(rn.memoizedState,nn);if(an&&(rn.memoizedState=nn,Ug=!0),rn=rn.queue,ji$1(ki$1.bind(null,Xr,rn,st),[st]),rn.getSnapshot!==Mt||an||P$1!==null&&P$1.memoizedState.tag&1){if(Xr.flags|=2048,li$1(9,mi$1.bind(null,Xr,rn,nn,Mt),void 0,null),R$2===null)throw Error(p$4(349));Rh$1&30||ni$1(Xr,Mt,nn)}return nn}function ni$1(st,Mt,Xr){st.flags|=16384,st={getSnapshot:Mt,value:Xr},Mt=N$3.updateQueue,Mt===null?(Mt={lastEffect:null,stores:null},N$3.updateQueue=Mt,Mt.stores=[st]):(Xr=Mt.stores,Xr===null?Mt.stores=[st]:Xr.push(st))}function mi$1(st,Mt,Xr,rn){Mt.value=Xr,Mt.getSnapshot=rn,oi$1(Mt)&&pi$1(st)}function ki$1(st,Mt,Xr){return Xr(function(){oi$1(Mt)&&pi$1(st)})}function oi$1(st){var Mt=st.getSnapshot;st=st.value;try{var Xr=Mt();return!He$1(st,Xr)}catch{return!0}}function pi$1(st){var Mt=Zg(st,1);Mt!==null&&mh$1(Mt,st,1,-1)}function qi$1(st){var Mt=ci$1();return typeof st=="function"&&(st=st()),Mt.memoizedState=Mt.baseState=st,st={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:st},Mt.queue=st,st=st.dispatch=ri$1.bind(null,N$3,st),[Mt.memoizedState,st]}function li$1(st,Mt,Xr,rn){return st={tag:st,create:Mt,destroy:Xr,deps:rn,next:null},Mt=N$3.updateQueue,Mt===null?(Mt={lastEffect:null,stores:null},N$3.updateQueue=Mt,Mt.lastEffect=st.next=st):(Xr=Mt.lastEffect,Xr===null?Mt.lastEffect=st.next=st:(rn=Xr.next,Xr.next=st,st.next=rn,Mt.lastEffect=st)),st}function si$1(){return di$1().memoizedState}function ti$1(st,Mt,Xr,rn){var nn=ci$1();N$3.flags|=st,nn.memoizedState=li$1(1|Mt,Xr,void 0,rn===void 0?null:rn)}function ui$1(st,Mt,Xr,rn){var nn=di$1();rn=rn===void 0?null:rn;var an=void 0;if(O$2!==null){var on=O$2.memoizedState;if(an=on.destroy,rn!==null&&Wh$1(rn,on.deps)){nn.memoizedState=li$1(Mt,Xr,an,rn);return}}N$3.flags|=st,nn.memoizedState=li$1(1|Mt,Xr,an,rn)}function vi$1(st,Mt){return ti$1(8390656,8,st,Mt)}function ji$1(st,Mt){return ui$1(2048,8,st,Mt)}function wi$1(st,Mt){return ui$1(4,2,st,Mt)}function xi$1(st,Mt){return ui$1(4,4,st,Mt)}function yi$1(st,Mt){if(typeof Mt=="function")return st=st(),Mt(st),function(){Mt(null)};if(Mt!=null)return st=st(),Mt.current=st,function(){Mt.current=null}}function zi$1(st,Mt,Xr){return Xr=Xr!=null?Xr.concat([st]):null,ui$1(4,4,yi$1.bind(null,Mt,st),Xr)}function Ai$1(){}function Bi$1(st,Mt){var Xr=di$1();Mt=Mt===void 0?null:Mt;var rn=Xr.memoizedState;return rn!==null&&Mt!==null&&Wh$1(Mt,rn[1])?rn[0]:(Xr.memoizedState=[st,Mt],st)}function Ci$1(st,Mt){var Xr=di$1();Mt=Mt===void 0?null:Mt;var rn=Xr.memoizedState;return rn!==null&&Mt!==null&&Wh$1(Mt,rn[1])?rn[0]:(st=st(),Xr.memoizedState=[st,Mt],st)}function Di$1(st,Mt,Xr){return Rh$1&21?(He$1(Xr,Mt)||(Xr=yc$1(),N$3.lanes|=Xr,hh$1|=Xr,st.baseState=!0),Mt):(st.baseState&&(st.baseState=!1,Ug=!0),st.memoizedState=Xr)}function Ei$1(st,Mt){var Xr=C$1;C$1=Xr!==0&&4>Xr?Xr:4,st(!0);var rn=Qh$1.transition;Qh$1.transition={};try{st(!1),Mt()}finally{C$1=Xr,Qh$1.transition=rn}}function Fi$1(){return di$1().memoizedState}function Gi$1(st,Mt,Xr){var rn=lh$1(st);if(Xr={lane:rn,action:Xr,hasEagerState:!1,eagerState:null,next:null},Hi$1(st))Ii$1(Mt,Xr);else if(Xr=Yg(st,Mt,Xr,rn),Xr!==null){var nn=L$1();mh$1(Xr,st,rn,nn),Ji$1(Xr,Mt,rn)}}function ri$1(st,Mt,Xr){var rn=lh$1(st),nn={lane:rn,action:Xr,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(st))Ii$1(Mt,nn);else{var an=st.alternate;if(st.lanes===0&&(an===null||an.lanes===0)&&(an=Mt.lastRenderedReducer,an!==null))try{var on=Mt.lastRenderedState,sn=an(on,Xr);if(nn.hasEagerState=!0,nn.eagerState=sn,He$1(sn,on)){var ln=Mt.interleaved;ln===null?(nn.next=nn,Xg(Mt)):(nn.next=ln.next,ln.next=nn),Mt.interleaved=nn;return}}catch{}finally{}Xr=Yg(st,Mt,nn,rn),Xr!==null&&(nn=L$1(),mh$1(Xr,st,rn,nn),Ji$1(Xr,Mt,rn))}}function Hi$1(st){var Mt=st.alternate;return st===N$3||Mt!==null&&Mt===N$3}function Ii$1(st,Mt){Th$1=Sh$1=!0;var Xr=st.pending;Xr===null?Mt.next=Mt:(Mt.next=Xr.next,Xr.next=Mt),st.pending=Mt}function Ji$1(st,Mt,Xr){if(Xr&4194240){var rn=Mt.lanes;rn&=st.pendingLanes,Xr|=rn,Mt.lanes=Xr,Cc$1(st,Xr)}}var ai$1={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh$1={readContext:Vg,useCallback:function(st,Mt){return ci$1().memoizedState=[st,Mt===void 0?null:Mt],st},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(st,Mt,Xr){return Xr=Xr!=null?Xr.concat([st]):null,ti$1(4194308,4,yi$1.bind(null,Mt,st),Xr)},useLayoutEffect:function(st,Mt){return ti$1(4194308,4,st,Mt)},useInsertionEffect:function(st,Mt){return ti$1(4,2,st,Mt)},useMemo:function(st,Mt){var Xr=ci$1();return Mt=Mt===void 0?null:Mt,st=st(),Xr.memoizedState=[st,Mt],st},useReducer:function(st,Mt,Xr){var rn=ci$1();return Mt=Xr!==void 0?Xr(Mt):Mt,rn.memoizedState=rn.baseState=Mt,st={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:st,lastRenderedState:Mt},rn.queue=st,st=st.dispatch=Gi$1.bind(null,N$3,st),[rn.memoizedState,st]},useRef:function(st){var Mt=ci$1();return st={current:st},Mt.memoizedState=st},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(st){return ci$1().memoizedState=st},useTransition:function(){var st=qi$1(!1),Mt=st[0];return st=Ei$1.bind(null,st[1]),ci$1().memoizedState=st,[Mt,st]},useMutableSource:function(){},useSyncExternalStore:function(st,Mt,Xr){var rn=N$3,nn=ci$1();if(I$3){if(Xr===void 0)throw Error(p$4(407));Xr=Xr()}else{if(Xr=Mt(),R$2===null)throw Error(p$4(349));Rh$1&30||ni$1(rn,Mt,Xr)}nn.memoizedState=Xr;var an={value:Xr,getSnapshot:Mt};return nn.queue=an,vi$1(ki$1.bind(null,rn,an,st),[st]),rn.flags|=2048,li$1(9,mi$1.bind(null,rn,an,Xr,Mt),void 0,null),Xr},useId:function(){var st=ci$1(),Mt=R$2.identifierPrefix;if(I$3){var Xr=sg,rn=rg;Xr=(rn&~(1<<32-oc$1(rn)-1)).toString(32)+Xr,Mt=":"+Mt+"R"+Xr,Xr=Uh$1++,0<Xr&&(Mt+="H"+Xr.toString(32)),Mt+=":"}else Xr=Vh$1++,Mt=":"+Mt+"r"+Xr.toString(32)+":";return st.memoizedState=Mt},unstable_isNewReconciler:!1},Zh$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$1,useRef:si$1,useState:function(){return fi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(st){var Mt=di$1();return Di$1(Mt,O$2.memoizedState,st)},useTransition:function(){var st=fi$1(ei$1)[0],Mt=di$1().memoizedState;return[st,Mt]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(st){var Mt=di$1();return O$2===null?Mt.memoizedState=st:Di$1(Mt,O$2.memoizedState,st)},useTransition:function(){var st=gi$1(ei$1)[0],Mt=di$1().memoizedState;return[st,Mt]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(st,Mt){try{var Xr="",rn=Mt;do Xr+=Pa$1(rn),rn=rn.return;while(rn);var nn=Xr}catch(an){nn=`
Error generating stack: `+an.message+`
`+an.stack}return{value:st,source:Mt,stack:nn,digest:null}}function Li$1(st,Mt,Xr){return{value:st,source:null,stack:Xr??null,digest:Mt??null}}function Mi(st,Mt){try{console.error(Mt.value)}catch(Xr){setTimeout(function(){throw Xr})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(st,Mt,Xr){Xr=ch$1(-1,Xr),Xr.tag=3,Xr.payload={element:null};var rn=Mt.value;return Xr.callback=function(){Pi$1||(Pi$1=!0,Qi$1=rn),Mi(st,Mt)},Xr}function Ri$1(st,Mt,Xr){Xr=ch$1(-1,Xr),Xr.tag=3;var rn=st.type.getDerivedStateFromError;if(typeof rn=="function"){var nn=Mt.value;Xr.payload=function(){return rn(nn)},Xr.callback=function(){Mi(st,Mt)}}var an=st.stateNode;return an!==null&&typeof an.componentDidCatch=="function"&&(Xr.callback=function(){Mi(st,Mt),typeof rn!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var on=Mt.stack;this.componentDidCatch(Mt.value,{componentStack:on!==null?on:""})}),Xr}function Ti$1(st,Mt,Xr){var rn=st.pingCache;if(rn===null){rn=st.pingCache=new Ni$1;var nn=new Set;rn.set(Mt,nn)}else nn=rn.get(Mt),nn===void 0&&(nn=new Set,rn.set(Mt,nn));nn.has(Xr)||(nn.add(Xr),st=Ui$1.bind(null,st,Mt,Xr),Mt.then(st,st))}function Vi$1(st){do{var Mt;if((Mt=st.tag===13)&&(Mt=st.memoizedState,Mt=Mt!==null?Mt.dehydrated!==null:!0),Mt)return st;st=st.return}while(st!==null);return null}function Wi$1(st,Mt,Xr,rn,nn){return st.mode&1?(st.flags|=65536,st.lanes=nn,st):(st===Mt?st.flags|=65536:(st.flags|=128,Xr.flags|=131072,Xr.flags&=-52805,Xr.tag===1&&(Xr.alternate===null?Xr.tag=17:(Mt=ch$1(-1,1),Mt.tag=2,dh$1(Xr,Mt,1))),Xr.lanes|=1),st)}var Xi$1=ua$1.ReactCurrentOwner,Ug=!1;function Yi$1(st,Mt,Xr,rn){Mt.child=st===null?Ch$1(Mt,null,Xr,rn):Bh$1(Mt,st.child,Xr,rn)}function Zi$1(st,Mt,Xr,rn,nn){Xr=Xr.render;var an=Mt.ref;return Tg(Mt,nn),rn=Xh$1(st,Mt,Xr,rn,an,nn),Xr=bi$1(),st!==null&&!Ug?(Mt.updateQueue=st.updateQueue,Mt.flags&=-2053,st.lanes&=~nn,$i$1(st,Mt,nn)):(I$3&&Xr&&vg(Mt),Mt.flags|=1,Yi$1(st,Mt,rn,nn),Mt.child)}function aj(st,Mt,Xr,rn,nn){if(st===null){var an=Xr.type;return typeof an=="function"&&!bj(an)&&an.defaultProps===void 0&&Xr.compare===null&&Xr.defaultProps===void 0?(Mt.tag=15,Mt.type=an,cj(st,Mt,an,rn,nn)):(st=yh$1(Xr.type,null,rn,Mt,Mt.mode,nn),st.ref=Mt.ref,st.return=Mt,Mt.child=st)}if(an=st.child,!(st.lanes&nn)){var on=an.memoizedProps;if(Xr=Xr.compare,Xr=Xr!==null?Xr:Ie$2,Xr(on,rn)&&st.ref===Mt.ref)return $i$1(st,Mt,nn)}return Mt.flags|=1,st=wh$1(an,rn),st.ref=Mt.ref,st.return=Mt,Mt.child=st}function cj(st,Mt,Xr,rn,nn){if(st!==null){var an=st.memoizedProps;if(Ie$2(an,rn)&&st.ref===Mt.ref)if(Ug=!1,Mt.pendingProps=rn=an,(st.lanes&nn)!==0)st.flags&131072&&(Ug=!0);else return Mt.lanes=st.lanes,$i$1(st,Mt,nn)}return dj(st,Mt,Xr,rn,nn)}function ej(st,Mt,Xr){var rn=Mt.pendingProps,nn=rn.children,an=st!==null?st.memoizedState:null;if(rn.mode==="hidden")if(!(Mt.mode&1))Mt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=Xr;else{if(!(Xr&1073741824))return st=an!==null?an.baseLanes|Xr:Xr,Mt.lanes=Mt.childLanes=1073741824,Mt.memoizedState={baseLanes:st,cachePool:null,transitions:null},Mt.updateQueue=null,G$1(fj,gj),gj|=st,null;Mt.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn=an!==null?an.baseLanes:Xr,G$1(fj,gj),gj|=rn}else an!==null?(rn=an.baseLanes|Xr,Mt.memoizedState=null):rn=Xr,G$1(fj,gj),gj|=rn;return Yi$1(st,Mt,nn,Xr),Mt.child}function hj(st,Mt){var Xr=Mt.ref;(st===null&&Xr!==null||st!==null&&st.ref!==Xr)&&(Mt.flags|=512,Mt.flags|=2097152)}function dj(st,Mt,Xr,rn,nn){var an=Zf$1(Xr)?Xf$1:H$3.current;return an=Yf$1(Mt,an),Tg(Mt,nn),Xr=Xh$1(st,Mt,Xr,rn,an,nn),rn=bi$1(),st!==null&&!Ug?(Mt.updateQueue=st.updateQueue,Mt.flags&=-2053,st.lanes&=~nn,$i$1(st,Mt,nn)):(I$3&&rn&&vg(Mt),Mt.flags|=1,Yi$1(st,Mt,Xr,nn),Mt.child)}function ij(st,Mt,Xr,rn,nn){if(Zf$1(Xr)){var an=!0;cg(Mt)}else an=!1;if(Tg(Mt,nn),Mt.stateNode===null)jj(st,Mt),ph$1(Mt,Xr,rn),rh$1(Mt,Xr,rn,nn),rn=!0;else if(st===null){var on=Mt.stateNode,sn=Mt.memoizedProps;on.props=sn;var ln=on.context,un=Xr.contextType;typeof un=="object"&&un!==null?un=Vg(un):(un=Zf$1(Xr)?Xf$1:H$3.current,un=Yf$1(Mt,un));var cn=Xr.getDerivedStateFromProps,hn=typeof cn=="function"||typeof on.getSnapshotBeforeUpdate=="function";hn||typeof on.UNSAFE_componentWillReceiveProps!="function"&&typeof on.componentWillReceiveProps!="function"||(sn!==rn||ln!==un)&&qh$1(Mt,on,rn,un),$g=!1;var fn=Mt.memoizedState;on.state=fn,gh$1(Mt,rn,on,nn),ln=Mt.memoizedState,sn!==rn||fn!==ln||Wf$1.current||$g?(typeof cn=="function"&&(kh$1(Mt,Xr,cn,rn),ln=Mt.memoizedState),(sn=$g||oh$1(Mt,Xr,sn,rn,fn,ln,un))?(hn||typeof on.UNSAFE_componentWillMount!="function"&&typeof on.componentWillMount!="function"||(typeof on.componentWillMount=="function"&&on.componentWillMount(),typeof on.UNSAFE_componentWillMount=="function"&&on.UNSAFE_componentWillMount()),typeof on.componentDidMount=="function"&&(Mt.flags|=4194308)):(typeof on.componentDidMount=="function"&&(Mt.flags|=4194308),Mt.memoizedProps=rn,Mt.memoizedState=ln),on.props=rn,on.state=ln,on.context=un,rn=sn):(typeof on.componentDidMount=="function"&&(Mt.flags|=4194308),rn=!1)}else{on=Mt.stateNode,bh$1(st,Mt),sn=Mt.memoizedProps,un=Mt.type===Mt.elementType?sn:Lg(Mt.type,sn),on.props=un,hn=Mt.pendingProps,fn=on.context,ln=Xr.contextType,typeof ln=="object"&&ln!==null?ln=Vg(ln):(ln=Zf$1(Xr)?Xf$1:H$3.current,ln=Yf$1(Mt,ln));var to=Xr.getDerivedStateFromProps;(cn=typeof to=="function"||typeof on.getSnapshotBeforeUpdate=="function")||typeof on.UNSAFE_componentWillReceiveProps!="function"&&typeof on.componentWillReceiveProps!="function"||(sn!==hn||fn!==ln)&&qh$1(Mt,on,rn,ln),$g=!1,fn=Mt.memoizedState,on.state=fn,gh$1(Mt,rn,on,nn);var uo=Mt.memoizedState;sn!==hn||fn!==uo||Wf$1.current||$g?(typeof to=="function"&&(kh$1(Mt,Xr,to,rn),uo=Mt.memoizedState),(un=$g||oh$1(Mt,Xr,un,rn,fn,uo,ln)||!1)?(cn||typeof on.UNSAFE_componentWillUpdate!="function"&&typeof on.componentWillUpdate!="function"||(typeof on.componentWillUpdate=="function"&&on.componentWillUpdate(rn,uo,ln),typeof on.UNSAFE_componentWillUpdate=="function"&&on.UNSAFE_componentWillUpdate(rn,uo,ln)),typeof on.componentDidUpdate=="function"&&(Mt.flags|=4),typeof on.getSnapshotBeforeUpdate=="function"&&(Mt.flags|=1024)):(typeof on.componentDidUpdate!="function"||sn===st.memoizedProps&&fn===st.memoizedState||(Mt.flags|=4),typeof on.getSnapshotBeforeUpdate!="function"||sn===st.memoizedProps&&fn===st.memoizedState||(Mt.flags|=1024),Mt.memoizedProps=rn,Mt.memoizedState=uo),on.props=rn,on.state=uo,on.context=ln,rn=un):(typeof on.componentDidUpdate!="function"||sn===st.memoizedProps&&fn===st.memoizedState||(Mt.flags|=4),typeof on.getSnapshotBeforeUpdate!="function"||sn===st.memoizedProps&&fn===st.memoizedState||(Mt.flags|=1024),rn=!1)}return kj(st,Mt,Xr,rn,an,nn)}function kj(st,Mt,Xr,rn,nn,an){hj(st,Mt);var on=(Mt.flags&128)!==0;if(!rn&&!on)return nn&&dg(Mt,Xr,!1),$i$1(st,Mt,an);rn=Mt.stateNode,Xi$1.current=Mt;var sn=on&&typeof Xr.getDerivedStateFromError!="function"?null:rn.render();return Mt.flags|=1,st!==null&&on?(Mt.child=Bh$1(Mt,st.child,null,an),Mt.child=Bh$1(Mt,null,sn,an)):Yi$1(st,Mt,sn,an),Mt.memoizedState=rn.state,nn&&dg(Mt,Xr,!0),Mt.child}function lj(st){var Mt=st.stateNode;Mt.pendingContext?ag(st,Mt.pendingContext,Mt.pendingContext!==Mt.context):Mt.context&&ag(st,Mt.context,!1),Ih$1(st,Mt.containerInfo)}function mj(st,Mt,Xr,rn,nn){return Ig(),Jg(nn),Mt.flags|=256,Yi$1(st,Mt,Xr,rn),Mt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(st){return{baseLanes:st,cachePool:null,transitions:null}}function pj(st,Mt,Xr){var rn=Mt.pendingProps,nn=M$4.current,an=!1,on=(Mt.flags&128)!==0,sn;if((sn=on)||(sn=st!==null&&st.memoizedState===null?!1:(nn&2)!==0),sn?(an=!0,Mt.flags&=-129):(st===null||st.memoizedState!==null)&&(nn|=1),G$1(M$4,nn&1),st===null)return Eg(Mt),st=Mt.memoizedState,st!==null&&(st=st.dehydrated,st!==null)?(Mt.mode&1?st.data==="$!"?Mt.lanes=8:Mt.lanes=1073741824:Mt.lanes=1,null):(on=rn.children,st=rn.fallback,an?(rn=Mt.mode,an=Mt.child,on={mode:"hidden",children:on},!(rn&1)&&an!==null?(an.childLanes=0,an.pendingProps=on):an=qj(on,rn,0,null),st=Ah$1(st,rn,Xr,null),an.return=Mt,st.return=Mt,an.sibling=st,Mt.child=an,Mt.child.memoizedState=oj(Xr),Mt.memoizedState=nj,st):rj(Mt,on));if(nn=st.memoizedState,nn!==null&&(sn=nn.dehydrated,sn!==null))return sj(st,Mt,on,rn,sn,nn,Xr);if(an){an=rn.fallback,on=Mt.mode,nn=st.child,sn=nn.sibling;var ln={mode:"hidden",children:rn.children};return!(on&1)&&Mt.child!==nn?(rn=Mt.child,rn.childLanes=0,rn.pendingProps=ln,Mt.deletions=null):(rn=wh$1(nn,ln),rn.subtreeFlags=nn.subtreeFlags&14680064),sn!==null?an=wh$1(sn,an):(an=Ah$1(an,on,Xr,null),an.flags|=2),an.return=Mt,rn.return=Mt,rn.sibling=an,Mt.child=rn,rn=an,an=Mt.child,on=st.child.memoizedState,on=on===null?oj(Xr):{baseLanes:on.baseLanes|Xr,cachePool:null,transitions:on.transitions},an.memoizedState=on,an.childLanes=st.childLanes&~Xr,Mt.memoizedState=nj,rn}return an=st.child,st=an.sibling,rn=wh$1(an,{mode:"visible",children:rn.children}),!(Mt.mode&1)&&(rn.lanes=Xr),rn.return=Mt,rn.sibling=null,st!==null&&(Xr=Mt.deletions,Xr===null?(Mt.deletions=[st],Mt.flags|=16):Xr.push(st)),Mt.child=rn,Mt.memoizedState=null,rn}function rj(st,Mt){return Mt=qj({mode:"visible",children:Mt},st.mode,0,null),Mt.return=st,st.child=Mt}function tj(st,Mt,Xr,rn){return rn!==null&&Jg(rn),Bh$1(Mt,st.child,null,Xr),st=rj(Mt,Mt.pendingProps.children),st.flags|=2,Mt.memoizedState=null,st}function sj(st,Mt,Xr,rn,nn,an,on){if(Xr)return Mt.flags&256?(Mt.flags&=-257,rn=Li$1(Error(p$4(422))),tj(st,Mt,on,rn)):Mt.memoizedState!==null?(Mt.child=st.child,Mt.flags|=128,null):(an=rn.fallback,nn=Mt.mode,rn=qj({mode:"visible",children:rn.children},nn,0,null),an=Ah$1(an,nn,on,null),an.flags|=2,rn.return=Mt,an.return=Mt,rn.sibling=an,Mt.child=rn,Mt.mode&1&&Bh$1(Mt,st.child,null,on),Mt.child.memoizedState=oj(on),Mt.memoizedState=nj,an);if(!(Mt.mode&1))return tj(st,Mt,on,null);if(nn.data==="$!"){if(rn=nn.nextSibling&&nn.nextSibling.dataset,rn)var sn=rn.dgst;return rn=sn,an=Error(p$4(419)),rn=Li$1(an,rn,void 0),tj(st,Mt,on,rn)}if(sn=(on&st.childLanes)!==0,Ug||sn){if(rn=R$2,rn!==null){switch(on&-on){case 4:nn=2;break;case 16:nn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nn=32;break;case 536870912:nn=268435456;break;default:nn=0}nn=nn&(rn.suspendedLanes|on)?0:nn,nn!==0&&nn!==an.retryLane&&(an.retryLane=nn,Zg(st,nn),mh$1(rn,st,nn,-1))}return uj(),rn=Li$1(Error(p$4(421))),tj(st,Mt,on,rn)}return nn.data==="$?"?(Mt.flags|=128,Mt.child=st.child,Mt=vj.bind(null,st),nn._reactRetry=Mt,null):(st=an.treeContext,yg=Lf$1(nn.nextSibling),xg=Mt,I$3=!0,zg=null,st!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=st.id,sg=st.overflow,qg=Mt),Mt=rj(Mt,rn.children),Mt.flags|=4096,Mt)}function wj(st,Mt,Xr){st.lanes|=Mt;var rn=st.alternate;rn!==null&&(rn.lanes|=Mt),Sg(st.return,Mt,Xr)}function xj(st,Mt,Xr,rn,nn){var an=st.memoizedState;an===null?st.memoizedState={isBackwards:Mt,rendering:null,renderingStartTime:0,last:rn,tail:Xr,tailMode:nn}:(an.isBackwards=Mt,an.rendering=null,an.renderingStartTime=0,an.last=rn,an.tail=Xr,an.tailMode=nn)}function yj(st,Mt,Xr){var rn=Mt.pendingProps,nn=rn.revealOrder,an=rn.tail;if(Yi$1(st,Mt,rn.children,Xr),rn=M$4.current,rn&2)rn=rn&1|2,Mt.flags|=128;else{if(st!==null&&st.flags&128)e:for(st=Mt.child;st!==null;){if(st.tag===13)st.memoizedState!==null&&wj(st,Xr,Mt);else if(st.tag===19)wj(st,Xr,Mt);else if(st.child!==null){st.child.return=st,st=st.child;continue}if(st===Mt)break e;for(;st.sibling===null;){if(st.return===null||st.return===Mt)break e;st=st.return}st.sibling.return=st.return,st=st.sibling}rn&=1}if(G$1(M$4,rn),!(Mt.mode&1))Mt.memoizedState=null;else switch(nn){case"forwards":for(Xr=Mt.child,nn=null;Xr!==null;)st=Xr.alternate,st!==null&&Mh$1(st)===null&&(nn=Xr),Xr=Xr.sibling;Xr=nn,Xr===null?(nn=Mt.child,Mt.child=null):(nn=Xr.sibling,Xr.sibling=null),xj(Mt,!1,nn,Xr,an);break;case"backwards":for(Xr=null,nn=Mt.child,Mt.child=null;nn!==null;){if(st=nn.alternate,st!==null&&Mh$1(st)===null){Mt.child=nn;break}st=nn.sibling,nn.sibling=Xr,Xr=nn,nn=st}xj(Mt,!0,Xr,null,an);break;case"together":xj(Mt,!1,null,null,void 0);break;default:Mt.memoizedState=null}return Mt.child}function jj(st,Mt){!(Mt.mode&1)&&st!==null&&(st.alternate=null,Mt.alternate=null,Mt.flags|=2)}function $i$1(st,Mt,Xr){if(st!==null&&(Mt.dependencies=st.dependencies),hh$1|=Mt.lanes,!(Xr&Mt.childLanes))return null;if(st!==null&&Mt.child!==st.child)throw Error(p$4(153));if(Mt.child!==null){for(st=Mt.child,Xr=wh$1(st,st.pendingProps),Mt.child=Xr,Xr.return=Mt;st.sibling!==null;)st=st.sibling,Xr=Xr.sibling=wh$1(st,st.pendingProps),Xr.return=Mt;Xr.sibling=null}return Mt.child}function zj(st,Mt,Xr){switch(Mt.tag){case 3:lj(Mt),Ig();break;case 5:Kh$1(Mt);break;case 1:Zf$1(Mt.type)&&cg(Mt);break;case 4:Ih$1(Mt,Mt.stateNode.containerInfo);break;case 10:var rn=Mt.type._context,nn=Mt.memoizedProps.value;G$1(Mg,rn._currentValue),rn._currentValue=nn;break;case 13:if(rn=Mt.memoizedState,rn!==null)return rn.dehydrated!==null?(G$1(M$4,M$4.current&1),Mt.flags|=128,null):Xr&Mt.child.childLanes?pj(st,Mt,Xr):(G$1(M$4,M$4.current&1),st=$i$1(st,Mt,Xr),st!==null?st.sibling:null);G$1(M$4,M$4.current&1);break;case 19:if(rn=(Xr&Mt.childLanes)!==0,st.flags&128){if(rn)return yj(st,Mt,Xr);Mt.flags|=128}if(nn=Mt.memoizedState,nn!==null&&(nn.rendering=null,nn.tail=null,nn.lastEffect=null),G$1(M$4,M$4.current),rn)break;return null;case 22:case 23:return Mt.lanes=0,ej(st,Mt,Xr)}return $i$1(st,Mt,Xr)}var Aj,Bj,Cj,Dj;Aj=function(st,Mt){for(var Xr=Mt.child;Xr!==null;){if(Xr.tag===5||Xr.tag===6)st.appendChild(Xr.stateNode);else if(Xr.tag!==4&&Xr.child!==null){Xr.child.return=Xr,Xr=Xr.child;continue}if(Xr===Mt)break;for(;Xr.sibling===null;){if(Xr.return===null||Xr.return===Mt)return;Xr=Xr.return}Xr.sibling.return=Xr.return,Xr=Xr.sibling}};Bj=function(){};Cj=function(st,Mt,Xr,rn){var nn=st.memoizedProps;if(nn!==rn){st=Mt.stateNode,Hh$1(Eh$1.current);var an=null;switch(Xr){case"input":nn=Ya$1(st,nn),rn=Ya$1(st,rn),an=[];break;case"select":nn=A$2({},nn,{value:void 0}),rn=A$2({},rn,{value:void 0}),an=[];break;case"textarea":nn=gb(st,nn),rn=gb(st,rn),an=[];break;default:typeof nn.onClick!="function"&&typeof rn.onClick=="function"&&(st.onclick=Bf$1)}ub(Xr,rn);var on;Xr=null;for(un in nn)if(!rn.hasOwnProperty(un)&&nn.hasOwnProperty(un)&&nn[un]!=null)if(un==="style"){var sn=nn[un];for(on in sn)sn.hasOwnProperty(on)&&(Xr||(Xr={}),Xr[on]="")}else un!=="dangerouslySetInnerHTML"&&un!=="children"&&un!=="suppressContentEditableWarning"&&un!=="suppressHydrationWarning"&&un!=="autoFocus"&&(ea$1.hasOwnProperty(un)?an||(an=[]):(an=an||[]).push(un,null));for(un in rn){var ln=rn[un];if(sn=nn!=null?nn[un]:void 0,rn.hasOwnProperty(un)&&ln!==sn&&(ln!=null||sn!=null))if(un==="style")if(sn){for(on in sn)!sn.hasOwnProperty(on)||ln&&ln.hasOwnProperty(on)||(Xr||(Xr={}),Xr[on]="");for(on in ln)ln.hasOwnProperty(on)&&sn[on]!==ln[on]&&(Xr||(Xr={}),Xr[on]=ln[on])}else Xr||(an||(an=[]),an.push(un,Xr)),Xr=ln;else un==="dangerouslySetInnerHTML"?(ln=ln?ln.__html:void 0,sn=sn?sn.__html:void 0,ln!=null&&sn!==ln&&(an=an||[]).push(un,ln)):un==="children"?typeof ln!="string"&&typeof ln!="number"||(an=an||[]).push(un,""+ln):un!=="suppressContentEditableWarning"&&un!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(un)?(ln!=null&&un==="onScroll"&&D$2("scroll",st),an||sn===ln||(an=[])):(an=an||[]).push(un,ln))}Xr&&(an=an||[]).push("style",Xr);var un=an;(Mt.updateQueue=un)&&(Mt.flags|=4)}};Dj=function(st,Mt,Xr,rn){Xr!==rn&&(Mt.flags|=4)};function Ej(st,Mt){if(!I$3)switch(st.tailMode){case"hidden":Mt=st.tail;for(var Xr=null;Mt!==null;)Mt.alternate!==null&&(Xr=Mt),Mt=Mt.sibling;Xr===null?st.tail=null:Xr.sibling=null;break;case"collapsed":Xr=st.tail;for(var rn=null;Xr!==null;)Xr.alternate!==null&&(rn=Xr),Xr=Xr.sibling;rn===null?Mt||st.tail===null?st.tail=null:st.tail.sibling=null:rn.sibling=null}}function S$4(st){var Mt=st.alternate!==null&&st.alternate.child===st.child,Xr=0,rn=0;if(Mt)for(var nn=st.child;nn!==null;)Xr|=nn.lanes|nn.childLanes,rn|=nn.subtreeFlags&14680064,rn|=nn.flags&14680064,nn.return=st,nn=nn.sibling;else for(nn=st.child;nn!==null;)Xr|=nn.lanes|nn.childLanes,rn|=nn.subtreeFlags,rn|=nn.flags,nn.return=st,nn=nn.sibling;return st.subtreeFlags|=rn,st.childLanes=Xr,Mt}function Fj(st,Mt,Xr){var rn=Mt.pendingProps;switch(wg(Mt),Mt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(Mt),null;case 1:return Zf$1(Mt.type)&&$f$1(),S$4(Mt),null;case 3:return rn=Mt.stateNode,Jh$1(),E$1(Wf$1),E$1(H$3),Oh$1(),rn.pendingContext&&(rn.context=rn.pendingContext,rn.pendingContext=null),(st===null||st.child===null)&&(Gg(Mt)?Mt.flags|=4:st===null||st.memoizedState.isDehydrated&&!(Mt.flags&256)||(Mt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(st,Mt),S$4(Mt),null;case 5:Lh$1(Mt);var nn=Hh$1(Gh$1.current);if(Xr=Mt.type,st!==null&&Mt.stateNode!=null)Cj(st,Mt,Xr,rn,nn),st.ref!==Mt.ref&&(Mt.flags|=512,Mt.flags|=2097152);else{if(!rn){if(Mt.stateNode===null)throw Error(p$4(166));return S$4(Mt),null}if(st=Hh$1(Eh$1.current),Gg(Mt)){rn=Mt.stateNode,Xr=Mt.type;var an=Mt.memoizedProps;switch(rn[Of$1]=Mt,rn[Pf$1]=an,st=(Mt.mode&1)!==0,Xr){case"dialog":D$2("cancel",rn),D$2("close",rn);break;case"iframe":case"object":case"embed":D$2("load",rn);break;case"video":case"audio":for(nn=0;nn<lf$1.length;nn++)D$2(lf$1[nn],rn);break;case"source":D$2("error",rn);break;case"img":case"image":case"link":D$2("error",rn),D$2("load",rn);break;case"details":D$2("toggle",rn);break;case"input":Za$1(rn,an),D$2("invalid",rn);break;case"select":rn._wrapperState={wasMultiple:!!an.multiple},D$2("invalid",rn);break;case"textarea":hb(rn,an),D$2("invalid",rn)}ub(Xr,an),nn=null;for(var on in an)if(an.hasOwnProperty(on)){var sn=an[on];on==="children"?typeof sn=="string"?rn.textContent!==sn&&(an.suppressHydrationWarning!==!0&&Af$1(rn.textContent,sn,st),nn=["children",sn]):typeof sn=="number"&&rn.textContent!==""+sn&&(an.suppressHydrationWarning!==!0&&Af$1(rn.textContent,sn,st),nn=["children",""+sn]):ea$1.hasOwnProperty(on)&&sn!=null&&on==="onScroll"&&D$2("scroll",rn)}switch(Xr){case"input":Va$1(rn),db(rn,an,!0);break;case"textarea":Va$1(rn),jb(rn);break;case"select":case"option":break;default:typeof an.onClick=="function"&&(rn.onclick=Bf$1)}rn=nn,Mt.updateQueue=rn,rn!==null&&(Mt.flags|=4)}else{on=nn.nodeType===9?nn:nn.ownerDocument,st==="http://www.w3.org/1999/xhtml"&&(st=kb(Xr)),st==="http://www.w3.org/1999/xhtml"?Xr==="script"?(st=on.createElement("div"),st.innerHTML="<script><\/script>",st=st.removeChild(st.firstChild)):typeof rn.is=="string"?st=on.createElement(Xr,{is:rn.is}):(st=on.createElement(Xr),Xr==="select"&&(on=st,rn.multiple?on.multiple=!0:rn.size&&(on.size=rn.size))):st=on.createElementNS(st,Xr),st[Of$1]=Mt,st[Pf$1]=rn,Aj(st,Mt,!1,!1),Mt.stateNode=st;e:{switch(on=vb(Xr,rn),Xr){case"dialog":D$2("cancel",st),D$2("close",st),nn=rn;break;case"iframe":case"object":case"embed":D$2("load",st),nn=rn;break;case"video":case"audio":for(nn=0;nn<lf$1.length;nn++)D$2(lf$1[nn],st);nn=rn;break;case"source":D$2("error",st),nn=rn;break;case"img":case"image":case"link":D$2("error",st),D$2("load",st),nn=rn;break;case"details":D$2("toggle",st),nn=rn;break;case"input":Za$1(st,rn),nn=Ya$1(st,rn),D$2("invalid",st);break;case"option":nn=rn;break;case"select":st._wrapperState={wasMultiple:!!rn.multiple},nn=A$2({},rn,{value:void 0}),D$2("invalid",st);break;case"textarea":hb(st,rn),nn=gb(st,rn),D$2("invalid",st);break;default:nn=rn}ub(Xr,nn),sn=nn;for(an in sn)if(sn.hasOwnProperty(an)){var ln=sn[an];an==="style"?sb(st,ln):an==="dangerouslySetInnerHTML"?(ln=ln?ln.__html:void 0,ln!=null&&nb(st,ln)):an==="children"?typeof ln=="string"?(Xr!=="textarea"||ln!=="")&&ob(st,ln):typeof ln=="number"&&ob(st,""+ln):an!=="suppressContentEditableWarning"&&an!=="suppressHydrationWarning"&&an!=="autoFocus"&&(ea$1.hasOwnProperty(an)?ln!=null&&an==="onScroll"&&D$2("scroll",st):ln!=null&&ta$1(st,an,ln,on))}switch(Xr){case"input":Va$1(st),db(st,rn,!1);break;case"textarea":Va$1(st),jb(st);break;case"option":rn.value!=null&&st.setAttribute("value",""+Sa$1(rn.value));break;case"select":st.multiple=!!rn.multiple,an=rn.value,an!=null?fb(st,!!rn.multiple,an,!1):rn.defaultValue!=null&&fb(st,!!rn.multiple,rn.defaultValue,!0);break;default:typeof nn.onClick=="function"&&(st.onclick=Bf$1)}switch(Xr){case"button":case"input":case"select":case"textarea":rn=!!rn.autoFocus;break e;case"img":rn=!0;break e;default:rn=!1}}rn&&(Mt.flags|=4)}Mt.ref!==null&&(Mt.flags|=512,Mt.flags|=2097152)}return S$4(Mt),null;case 6:if(st&&Mt.stateNode!=null)Dj(st,Mt,st.memoizedProps,rn);else{if(typeof rn!="string"&&Mt.stateNode===null)throw Error(p$4(166));if(Xr=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg(Mt)){if(rn=Mt.stateNode,Xr=Mt.memoizedProps,rn[Of$1]=Mt,(an=rn.nodeValue!==Xr)&&(st=xg,st!==null))switch(st.tag){case 3:Af$1(rn.nodeValue,Xr,(st.mode&1)!==0);break;case 5:st.memoizedProps.suppressHydrationWarning!==!0&&Af$1(rn.nodeValue,Xr,(st.mode&1)!==0)}an&&(Mt.flags|=4)}else rn=(Xr.nodeType===9?Xr:Xr.ownerDocument).createTextNode(rn),rn[Of$1]=Mt,Mt.stateNode=rn}return S$4(Mt),null;case 13:if(E$1(M$4),rn=Mt.memoizedState,st===null||st.memoizedState!==null&&st.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&Mt.mode&1&&!(Mt.flags&128))Hg(),Ig(),Mt.flags|=98560,an=!1;else if(an=Gg(Mt),rn!==null&&rn.dehydrated!==null){if(st===null){if(!an)throw Error(p$4(318));if(an=Mt.memoizedState,an=an!==null?an.dehydrated:null,!an)throw Error(p$4(317));an[Of$1]=Mt}else Ig(),!(Mt.flags&128)&&(Mt.memoizedState=null),Mt.flags|=4;S$4(Mt),an=!1}else zg!==null&&(Gj(zg),zg=null),an=!0;if(!an)return Mt.flags&65536?Mt:null}return Mt.flags&128?(Mt.lanes=Xr,Mt):(rn=rn!==null,rn!==(st!==null&&st.memoizedState!==null)&&rn&&(Mt.child.flags|=8192,Mt.mode&1&&(st===null||M$4.current&1?T$3===0&&(T$3=3):uj())),Mt.updateQueue!==null&&(Mt.flags|=4),S$4(Mt),null);case 4:return Jh$1(),Bj(st,Mt),st===null&&sf$1(Mt.stateNode.containerInfo),S$4(Mt),null;case 10:return Rg(Mt.type._context),S$4(Mt),null;case 17:return Zf$1(Mt.type)&&$f$1(),S$4(Mt),null;case 19:if(E$1(M$4),an=Mt.memoizedState,an===null)return S$4(Mt),null;if(rn=(Mt.flags&128)!==0,on=an.rendering,on===null)if(rn)Ej(an,!1);else{if(T$3!==0||st!==null&&st.flags&128)for(st=Mt.child;st!==null;){if(on=Mh$1(st),on!==null){for(Mt.flags|=128,Ej(an,!1),rn=on.updateQueue,rn!==null&&(Mt.updateQueue=rn,Mt.flags|=4),Mt.subtreeFlags=0,rn=Xr,Xr=Mt.child;Xr!==null;)an=Xr,st=rn,an.flags&=14680066,on=an.alternate,on===null?(an.childLanes=0,an.lanes=st,an.child=null,an.subtreeFlags=0,an.memoizedProps=null,an.memoizedState=null,an.updateQueue=null,an.dependencies=null,an.stateNode=null):(an.childLanes=on.childLanes,an.lanes=on.lanes,an.child=on.child,an.subtreeFlags=0,an.deletions=null,an.memoizedProps=on.memoizedProps,an.memoizedState=on.memoizedState,an.updateQueue=on.updateQueue,an.type=on.type,st=on.dependencies,an.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext}),Xr=Xr.sibling;return G$1(M$4,M$4.current&1|2),Mt.child}st=st.sibling}an.tail!==null&&B$2()>Hj&&(Mt.flags|=128,rn=!0,Ej(an,!1),Mt.lanes=4194304)}else{if(!rn)if(st=Mh$1(on),st!==null){if(Mt.flags|=128,rn=!0,Xr=st.updateQueue,Xr!==null&&(Mt.updateQueue=Xr,Mt.flags|=4),Ej(an,!0),an.tail===null&&an.tailMode==="hidden"&&!on.alternate&&!I$3)return S$4(Mt),null}else 2*B$2()-an.renderingStartTime>Hj&&Xr!==1073741824&&(Mt.flags|=128,rn=!0,Ej(an,!1),Mt.lanes=4194304);an.isBackwards?(on.sibling=Mt.child,Mt.child=on):(Xr=an.last,Xr!==null?Xr.sibling=on:Mt.child=on,an.last=on)}return an.tail!==null?(Mt=an.tail,an.rendering=Mt,an.tail=Mt.sibling,an.renderingStartTime=B$2(),Mt.sibling=null,Xr=M$4.current,G$1(M$4,rn?Xr&1|2:Xr&1),Mt):(S$4(Mt),null);case 22:case 23:return Ij(),rn=Mt.memoizedState!==null,st!==null&&st.memoizedState!==null!==rn&&(Mt.flags|=8192),rn&&Mt.mode&1?gj&1073741824&&(S$4(Mt),Mt.subtreeFlags&6&&(Mt.flags|=8192)):S$4(Mt),null;case 24:return null;case 25:return null}throw Error(p$4(156,Mt.tag))}function Jj(st,Mt){switch(wg(Mt),Mt.tag){case 1:return Zf$1(Mt.type)&&$f$1(),st=Mt.flags,st&65536?(Mt.flags=st&-65537|128,Mt):null;case 3:return Jh$1(),E$1(Wf$1),E$1(H$3),Oh$1(),st=Mt.flags,st&65536&&!(st&128)?(Mt.flags=st&-65537|128,Mt):null;case 5:return Lh$1(Mt),null;case 13:if(E$1(M$4),st=Mt.memoizedState,st!==null&&st.dehydrated!==null){if(Mt.alternate===null)throw Error(p$4(340));Ig()}return st=Mt.flags,st&65536?(Mt.flags=st&-65537|128,Mt):null;case 19:return E$1(M$4),null;case 4:return Jh$1(),null;case 10:return Rg(Mt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(st,Mt){var Xr=st.ref;if(Xr!==null)if(typeof Xr=="function")try{Xr(null)}catch(rn){W$1(st,Mt,rn)}else Xr.current=null}function Nj(st,Mt,Xr){try{Xr()}catch(rn){W$1(st,Mt,rn)}}var Oj=!1;function Pj(st,Mt){if(Cf$1=dd,st=Me$1(),Ne$1(st)){if("selectionStart"in st)var Xr={start:st.selectionStart,end:st.selectionEnd};else e:{Xr=(Xr=st.ownerDocument)&&Xr.defaultView||window;var rn=Xr.getSelection&&Xr.getSelection();if(rn&&rn.rangeCount!==0){Xr=rn.anchorNode;var nn=rn.anchorOffset,an=rn.focusNode;rn=rn.focusOffset;try{Xr.nodeType,an.nodeType}catch{Xr=null;break e}var on=0,sn=-1,ln=-1,un=0,cn=0,hn=st,fn=null;t:for(;;){for(var to;hn!==Xr||nn!==0&&hn.nodeType!==3||(sn=on+nn),hn!==an||rn!==0&&hn.nodeType!==3||(ln=on+rn),hn.nodeType===3&&(on+=hn.nodeValue.length),(to=hn.firstChild)!==null;)fn=hn,hn=to;for(;;){if(hn===st)break t;if(fn===Xr&&++un===nn&&(sn=on),fn===an&&++cn===rn&&(ln=on),(to=hn.nextSibling)!==null)break;hn=fn,fn=hn.parentNode}hn=to}Xr=sn===-1||ln===-1?null:{start:sn,end:ln}}else Xr=null}Xr=Xr||{start:0,end:0}}else Xr=null;for(Df$1={focusedElem:st,selectionRange:Xr},dd=!1,V$1=Mt;V$1!==null;)if(Mt=V$1,st=Mt.child,(Mt.subtreeFlags&1028)!==0&&st!==null)st.return=Mt,V$1=st;else for(;V$1!==null;){Mt=V$1;try{var uo=Mt.alternate;if(Mt.flags&1024)switch(Mt.tag){case 0:case 11:case 15:break;case 1:if(uo!==null){var co=uo.memoizedProps,Uo=uo.memoizedState,lo=Mt.stateNode,ho=lo.getSnapshotBeforeUpdate(Mt.elementType===Mt.type?co:Lg(Mt.type,co),Uo);lo.__reactInternalSnapshotBeforeUpdate=ho}break;case 3:var fo=Mt.stateNode.containerInfo;fo.nodeType===1?fo.textContent="":fo.nodeType===9&&fo.documentElement&&fo.removeChild(fo.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(mo){W$1(Mt,Mt.return,mo)}if(st=Mt.sibling,st!==null){st.return=Mt.return,V$1=st;break}V$1=Mt.return}return uo=Oj,Oj=!1,uo}function Qj(st,Mt,Xr){var rn=Mt.updateQueue;if(rn=rn!==null?rn.lastEffect:null,rn!==null){var nn=rn=rn.next;do{if((nn.tag&st)===st){var an=nn.destroy;nn.destroy=void 0,an!==void 0&&Nj(Mt,Xr,an)}nn=nn.next}while(nn!==rn)}}function Rj(st,Mt){if(Mt=Mt.updateQueue,Mt=Mt!==null?Mt.lastEffect:null,Mt!==null){var Xr=Mt=Mt.next;do{if((Xr.tag&st)===st){var rn=Xr.create;Xr.destroy=rn()}Xr=Xr.next}while(Xr!==Mt)}}function Sj(st){var Mt=st.ref;if(Mt!==null){var Xr=st.stateNode;switch(st.tag){case 5:st=Xr;break;default:st=Xr}typeof Mt=="function"?Mt(st):Mt.current=st}}function Tj(st){var Mt=st.alternate;Mt!==null&&(st.alternate=null,Tj(Mt)),st.child=null,st.deletions=null,st.sibling=null,st.tag===5&&(Mt=st.stateNode,Mt!==null&&(delete Mt[Of$1],delete Mt[Pf$1],delete Mt[of$1],delete Mt[Qf$1],delete Mt[Rf$1])),st.stateNode=null,st.return=null,st.dependencies=null,st.memoizedProps=null,st.memoizedState=null,st.pendingProps=null,st.stateNode=null,st.updateQueue=null}function Uj(st){return st.tag===5||st.tag===3||st.tag===4}function Vj(st){e:for(;;){for(;st.sibling===null;){if(st.return===null||Uj(st.return))return null;st=st.return}for(st.sibling.return=st.return,st=st.sibling;st.tag!==5&&st.tag!==6&&st.tag!==18;){if(st.flags&2||st.child===null||st.tag===4)continue e;st.child.return=st,st=st.child}if(!(st.flags&2))return st.stateNode}}function Wj(st,Mt,Xr){var rn=st.tag;if(rn===5||rn===6)st=st.stateNode,Mt?Xr.nodeType===8?Xr.parentNode.insertBefore(st,Mt):Xr.insertBefore(st,Mt):(Xr.nodeType===8?(Mt=Xr.parentNode,Mt.insertBefore(st,Xr)):(Mt=Xr,Mt.appendChild(st)),Xr=Xr._reactRootContainer,Xr!=null||Mt.onclick!==null||(Mt.onclick=Bf$1));else if(rn!==4&&(st=st.child,st!==null))for(Wj(st,Mt,Xr),st=st.sibling;st!==null;)Wj(st,Mt,Xr),st=st.sibling}function Xj(st,Mt,Xr){var rn=st.tag;if(rn===5||rn===6)st=st.stateNode,Mt?Xr.insertBefore(st,Mt):Xr.appendChild(st);else if(rn!==4&&(st=st.child,st!==null))for(Xj(st,Mt,Xr),st=st.sibling;st!==null;)Xj(st,Mt,Xr),st=st.sibling}var X$2=null,Yj=!1;function Zj(st,Mt,Xr){for(Xr=Xr.child;Xr!==null;)ak(st,Mt,Xr),Xr=Xr.sibling}function ak(st,Mt,Xr){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,Xr)}catch{}switch(Xr.tag){case 5:U$1||Mj(Xr,Mt);case 6:var rn=X$2,nn=Yj;X$2=null,Zj(st,Mt,Xr),X$2=rn,Yj=nn,X$2!==null&&(Yj?(st=X$2,Xr=Xr.stateNode,st.nodeType===8?st.parentNode.removeChild(Xr):st.removeChild(Xr)):X$2.removeChild(Xr.stateNode));break;case 18:X$2!==null&&(Yj?(st=X$2,Xr=Xr.stateNode,st.nodeType===8?Kf$1(st.parentNode,Xr):st.nodeType===1&&Kf$1(st,Xr),bd$1(st)):Kf$1(X$2,Xr.stateNode));break;case 4:rn=X$2,nn=Yj,X$2=Xr.stateNode.containerInfo,Yj=!0,Zj(st,Mt,Xr),X$2=rn,Yj=nn;break;case 0:case 11:case 14:case 15:if(!U$1&&(rn=Xr.updateQueue,rn!==null&&(rn=rn.lastEffect,rn!==null))){nn=rn=rn.next;do{var an=nn,on=an.destroy;an=an.tag,on!==void 0&&(an&2||an&4)&&Nj(Xr,Mt,on),nn=nn.next}while(nn!==rn)}Zj(st,Mt,Xr);break;case 1:if(!U$1&&(Mj(Xr,Mt),rn=Xr.stateNode,typeof rn.componentWillUnmount=="function"))try{rn.props=Xr.memoizedProps,rn.state=Xr.memoizedState,rn.componentWillUnmount()}catch(sn){W$1(Xr,Mt,sn)}Zj(st,Mt,Xr);break;case 21:Zj(st,Mt,Xr);break;case 22:Xr.mode&1?(U$1=(rn=U$1)||Xr.memoizedState!==null,Zj(st,Mt,Xr),U$1=rn):Zj(st,Mt,Xr);break;default:Zj(st,Mt,Xr)}}function bk(st){var Mt=st.updateQueue;if(Mt!==null){st.updateQueue=null;var Xr=st.stateNode;Xr===null&&(Xr=st.stateNode=new Lj),Mt.forEach(function(rn){var nn=ck.bind(null,st,rn);Xr.has(rn)||(Xr.add(rn),rn.then(nn,nn))})}}function dk(st,Mt){var Xr=Mt.deletions;if(Xr!==null)for(var rn=0;rn<Xr.length;rn++){var nn=Xr[rn];try{var an=st,on=Mt,sn=on;e:for(;sn!==null;){switch(sn.tag){case 5:X$2=sn.stateNode,Yj=!1;break e;case 3:X$2=sn.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=sn.stateNode.containerInfo,Yj=!0;break e}sn=sn.return}if(X$2===null)throw Error(p$4(160));ak(an,on,nn),X$2=null,Yj=!1;var ln=nn.alternate;ln!==null&&(ln.return=null),nn.return=null}catch(un){W$1(nn,Mt,un)}}if(Mt.subtreeFlags&12854)for(Mt=Mt.child;Mt!==null;)ek(Mt,st),Mt=Mt.sibling}function ek(st,Mt){var Xr=st.alternate,rn=st.flags;switch(st.tag){case 0:case 11:case 14:case 15:if(dk(Mt,st),fk(st),rn&4){try{Qj(3,st,st.return),Rj(3,st)}catch(co){W$1(st,st.return,co)}try{Qj(5,st,st.return)}catch(co){W$1(st,st.return,co)}}break;case 1:dk(Mt,st),fk(st),rn&512&&Xr!==null&&Mj(Xr,Xr.return);break;case 5:if(dk(Mt,st),fk(st),rn&512&&Xr!==null&&Mj(Xr,Xr.return),st.flags&32){var nn=st.stateNode;try{ob(nn,"")}catch(co){W$1(st,st.return,co)}}if(rn&4&&(nn=st.stateNode,nn!=null)){var an=st.memoizedProps,on=Xr!==null?Xr.memoizedProps:an,sn=st.type,ln=st.updateQueue;if(st.updateQueue=null,ln!==null)try{sn==="input"&&an.type==="radio"&&an.name!=null&&ab(nn,an),vb(sn,on);var un=vb(sn,an);for(on=0;on<ln.length;on+=2){var cn=ln[on],hn=ln[on+1];cn==="style"?sb(nn,hn):cn==="dangerouslySetInnerHTML"?nb(nn,hn):cn==="children"?ob(nn,hn):ta$1(nn,cn,hn,un)}switch(sn){case"input":bb(nn,an);break;case"textarea":ib(nn,an);break;case"select":var fn=nn._wrapperState.wasMultiple;nn._wrapperState.wasMultiple=!!an.multiple;var to=an.value;to!=null?fb(nn,!!an.multiple,to,!1):fn!==!!an.multiple&&(an.defaultValue!=null?fb(nn,!!an.multiple,an.defaultValue,!0):fb(nn,!!an.multiple,an.multiple?[]:"",!1))}nn[Pf$1]=an}catch(co){W$1(st,st.return,co)}}break;case 6:if(dk(Mt,st),fk(st),rn&4){if(st.stateNode===null)throw Error(p$4(162));nn=st.stateNode,an=st.memoizedProps;try{nn.nodeValue=an}catch(co){W$1(st,st.return,co)}}break;case 3:if(dk(Mt,st),fk(st),rn&4&&Xr!==null&&Xr.memoizedState.isDehydrated)try{bd$1(Mt.containerInfo)}catch(co){W$1(st,st.return,co)}break;case 4:dk(Mt,st),fk(st);break;case 13:dk(Mt,st),fk(st),nn=st.child,nn.flags&8192&&(an=nn.memoizedState!==null,nn.stateNode.isHidden=an,!an||nn.alternate!==null&&nn.alternate.memoizedState!==null||(gk=B$2())),rn&4&&bk(st);break;case 22:if(cn=Xr!==null&&Xr.memoizedState!==null,st.mode&1?(U$1=(un=U$1)||cn,dk(Mt,st),U$1=un):dk(Mt,st),fk(st),rn&8192){if(un=st.memoizedState!==null,(st.stateNode.isHidden=un)&&!cn&&st.mode&1)for(V$1=st,cn=st.child;cn!==null;){for(hn=V$1=cn;V$1!==null;){switch(fn=V$1,to=fn.child,fn.tag){case 0:case 11:case 14:case 15:Qj(4,fn,fn.return);break;case 1:Mj(fn,fn.return);var uo=fn.stateNode;if(typeof uo.componentWillUnmount=="function"){rn=fn,Xr=fn.return;try{Mt=rn,uo.props=Mt.memoizedProps,uo.state=Mt.memoizedState,uo.componentWillUnmount()}catch(co){W$1(rn,Xr,co)}}break;case 5:Mj(fn,fn.return);break;case 22:if(fn.memoizedState!==null){hk(hn);continue}}to!==null?(to.return=fn,V$1=to):hk(hn)}cn=cn.sibling}e:for(cn=null,hn=st;;){if(hn.tag===5){if(cn===null){cn=hn;try{nn=hn.stateNode,un?(an=nn.style,typeof an.setProperty=="function"?an.setProperty("display","none","important"):an.display="none"):(sn=hn.stateNode,ln=hn.memoizedProps.style,on=ln!=null&&ln.hasOwnProperty("display")?ln.display:null,sn.style.display=rb("display",on))}catch(co){W$1(st,st.return,co)}}}else if(hn.tag===6){if(cn===null)try{hn.stateNode.nodeValue=un?"":hn.memoizedProps}catch(co){W$1(st,st.return,co)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===st)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===st)break e;for(;hn.sibling===null;){if(hn.return===null||hn.return===st)break e;cn===hn&&(cn=null),hn=hn.return}cn===hn&&(cn=null),hn.sibling.return=hn.return,hn=hn.sibling}}break;case 19:dk(Mt,st),fk(st),rn&4&&bk(st);break;case 21:break;default:dk(Mt,st),fk(st)}}function fk(st){var Mt=st.flags;if(Mt&2){try{e:{for(var Xr=st.return;Xr!==null;){if(Uj(Xr)){var rn=Xr;break e}Xr=Xr.return}throw Error(p$4(160))}switch(rn.tag){case 5:var nn=rn.stateNode;rn.flags&32&&(ob(nn,""),rn.flags&=-33);var an=Vj(st);Xj(st,an,nn);break;case 3:case 4:var on=rn.stateNode.containerInfo,sn=Vj(st);Wj(st,sn,on);break;default:throw Error(p$4(161))}}catch(ln){W$1(st,st.return,ln)}st.flags&=-3}Mt&4096&&(st.flags&=-4097)}function ik(st,Mt,Xr){V$1=st,jk(st)}function jk(st,Mt,Xr){for(var rn=(st.mode&1)!==0;V$1!==null;){var nn=V$1,an=nn.child;if(nn.tag===22&&rn){var on=nn.memoizedState!==null||Kj;if(!on){var sn=nn.alternate,ln=sn!==null&&sn.memoizedState!==null||U$1;sn=Kj;var un=U$1;if(Kj=on,(U$1=ln)&&!un)for(V$1=nn;V$1!==null;)on=V$1,ln=on.child,on.tag===22&&on.memoizedState!==null?kk(nn):ln!==null?(ln.return=on,V$1=ln):kk(nn);for(;an!==null;)V$1=an,jk(an),an=an.sibling;V$1=nn,Kj=sn,U$1=un}lk(st)}else nn.subtreeFlags&8772&&an!==null?(an.return=nn,V$1=an):lk(st)}}function lk(st){for(;V$1!==null;){var Mt=V$1;if(Mt.flags&8772){var Xr=Mt.alternate;try{if(Mt.flags&8772)switch(Mt.tag){case 0:case 11:case 15:U$1||Rj(5,Mt);break;case 1:var rn=Mt.stateNode;if(Mt.flags&4&&!U$1)if(Xr===null)rn.componentDidMount();else{var nn=Mt.elementType===Mt.type?Xr.memoizedProps:Lg(Mt.type,Xr.memoizedProps);rn.componentDidUpdate(nn,Xr.memoizedState,rn.__reactInternalSnapshotBeforeUpdate)}var an=Mt.updateQueue;an!==null&&ih$1(Mt,an,rn);break;case 3:var on=Mt.updateQueue;if(on!==null){if(Xr=null,Mt.child!==null)switch(Mt.child.tag){case 5:Xr=Mt.child.stateNode;break;case 1:Xr=Mt.child.stateNode}ih$1(Mt,on,Xr)}break;case 5:var sn=Mt.stateNode;if(Xr===null&&Mt.flags&4){Xr=sn;var ln=Mt.memoizedProps;switch(Mt.type){case"button":case"input":case"select":case"textarea":ln.autoFocus&&Xr.focus();break;case"img":ln.src&&(Xr.src=ln.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(Mt.memoizedState===null){var un=Mt.alternate;if(un!==null){var cn=un.memoizedState;if(cn!==null){var hn=cn.dehydrated;hn!==null&&bd$1(hn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$1||Mt.flags&512&&Sj(Mt)}catch(fn){W$1(Mt,Mt.return,fn)}}if(Mt===st){V$1=null;break}if(Xr=Mt.sibling,Xr!==null){Xr.return=Mt.return,V$1=Xr;break}V$1=Mt.return}}function hk(st){for(;V$1!==null;){var Mt=V$1;if(Mt===st){V$1=null;break}var Xr=Mt.sibling;if(Xr!==null){Xr.return=Mt.return,V$1=Xr;break}V$1=Mt.return}}function kk(st){for(;V$1!==null;){var Mt=V$1;try{switch(Mt.tag){case 0:case 11:case 15:var Xr=Mt.return;try{Rj(4,Mt)}catch(ln){W$1(Mt,Xr,ln)}break;case 1:var rn=Mt.stateNode;if(typeof rn.componentDidMount=="function"){var nn=Mt.return;try{rn.componentDidMount()}catch(ln){W$1(Mt,nn,ln)}}var an=Mt.return;try{Sj(Mt)}catch(ln){W$1(Mt,an,ln)}break;case 5:var on=Mt.return;try{Sj(Mt)}catch(ln){W$1(Mt,on,ln)}}}catch(ln){W$1(Mt,Mt.return,ln)}if(Mt===st){V$1=null;break}var sn=Mt.sibling;if(sn!==null){sn.return=Mt.return,V$1=sn;break}V$1=Mt.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$2=null,Y$1=null,Z$1=0,gj=0,fj=Uf$1(0),T$3=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi$1=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh$1(st){return st.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(st=C$1,st!==0||(st=window.event,st=st===void 0?16:jd(st.type)),st):1}function mh$1(st,Mt,Xr,rn){if(50<zk)throw zk=0,Ak=null,Error(p$4(185));Ac$1(st,Xr,rn),(!(K$1&2)||st!==R$2)&&(st===R$2&&(!(K$1&2)&&(rk|=Xr),T$3===4&&Dk(st,Z$1)),Ek(st,rn),Xr===1&&K$1===0&&!(Mt.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(st,Mt){var Xr=st.callbackNode;wc$1(st,Mt);var rn=uc$1(st,st===R$2?Z$1:0);if(rn===0)Xr!==null&&bc$1(Xr),st.callbackNode=null,st.callbackPriority=0;else if(Mt=rn&-rn,st.callbackPriority!==Mt){if(Xr!=null&&bc$1(Xr),Mt===1)st.tag===0?ig(Fk.bind(null,st)):hg(Fk.bind(null,st)),Jf$1(function(){!(K$1&6)&&jg()}),Xr=null;else{switch(Dc$1(rn)){case 1:Xr=fc$1;break;case 4:Xr=gc$1;break;case 16:Xr=hc$1;break;case 536870912:Xr=jc$1;break;default:Xr=hc$1}Xr=Gk(Xr,Hk.bind(null,st))}st.callbackPriority=Mt,st.callbackNode=Xr}}function Hk(st,Mt){if(Bk=-1,Ck=0,K$1&6)throw Error(p$4(327));var Xr=st.callbackNode;if(Ik()&&st.callbackNode!==Xr)return null;var rn=uc$1(st,st===R$2?Z$1:0);if(rn===0)return null;if(rn&30||rn&st.expiredLanes||Mt)Mt=Jk(st,rn);else{Mt=rn;var nn=K$1;K$1|=2;var an=Kk();(R$2!==st||Z$1!==Mt)&&(vk=null,Hj=B$2()+500,Lk(st,Mt));do try{Mk();break}catch(sn){Nk(st,sn)}while(1);Qg(),nk.current=an,K$1=nn,Y$1!==null?Mt=0:(R$2=null,Z$1=0,Mt=T$3)}if(Mt!==0){if(Mt===2&&(nn=xc$1(st),nn!==0&&(rn=nn,Mt=Ok(st,nn))),Mt===1)throw Xr=qk,Lk(st,0),Dk(st,rn),Ek(st,B$2()),Xr;if(Mt===6)Dk(st,rn);else{if(nn=st.current.alternate,!(rn&30)&&!Pk(nn)&&(Mt=Jk(st,rn),Mt===2&&(an=xc$1(st),an!==0&&(rn=an,Mt=Ok(st,an))),Mt===1))throw Xr=qk,Lk(st,0),Dk(st,rn),Ek(st,B$2()),Xr;switch(st.finishedWork=nn,st.finishedLanes=rn,Mt){case 0:case 1:throw Error(p$4(345));case 2:Qk(st,uk,vk);break;case 3:if(Dk(st,rn),(rn&130023424)===rn&&(Mt=gk+500-B$2(),10<Mt)){if(uc$1(st,0)!==0)break;if(nn=st.suspendedLanes,(nn&rn)!==rn){L$1(),st.pingedLanes|=st.suspendedLanes&nn;break}st.timeoutHandle=Ff$1(Qk.bind(null,st,uk,vk),Mt);break}Qk(st,uk,vk);break;case 4:if(Dk(st,rn),(rn&4194240)===rn)break;for(Mt=st.eventTimes,nn=-1;0<rn;){var on=31-oc$1(rn);an=1<<on,on=Mt[on],on>nn&&(nn=on),rn&=~an}if(rn=nn,rn=B$2()-rn,rn=(120>rn?120:480>rn?480:1080>rn?1080:1920>rn?1920:3e3>rn?3e3:4320>rn?4320:1960*mk(rn/1960))-rn,10<rn){st.timeoutHandle=Ff$1(Qk.bind(null,st,uk,vk),rn);break}Qk(st,uk,vk);break;case 5:Qk(st,uk,vk);break;default:throw Error(p$4(329))}}}return Ek(st,B$2()),st.callbackNode===Xr?Hk.bind(null,st):null}function Ok(st,Mt){var Xr=tk;return st.current.memoizedState.isDehydrated&&(Lk(st,Mt).flags|=256),st=Jk(st,Mt),st!==2&&(Mt=uk,uk=Xr,Mt!==null&&Gj(Mt)),st}function Gj(st){uk===null?uk=st:uk.push.apply(uk,st)}function Pk(st){for(var Mt=st;;){if(Mt.flags&16384){var Xr=Mt.updateQueue;if(Xr!==null&&(Xr=Xr.stores,Xr!==null))for(var rn=0;rn<Xr.length;rn++){var nn=Xr[rn],an=nn.getSnapshot;nn=nn.value;try{if(!He$1(an(),nn))return!1}catch{return!1}}}if(Xr=Mt.child,Mt.subtreeFlags&16384&&Xr!==null)Xr.return=Mt,Mt=Xr;else{if(Mt===st)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===st)return!0;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}}return!0}function Dk(st,Mt){for(Mt&=~sk,Mt&=~rk,st.suspendedLanes|=Mt,st.pingedLanes&=~Mt,st=st.expirationTimes;0<Mt;){var Xr=31-oc$1(Mt),rn=1<<Xr;st[Xr]=-1,Mt&=~rn}}function Fk(st){if(K$1&6)throw Error(p$4(327));Ik();var Mt=uc$1(st,0);if(!(Mt&1))return Ek(st,B$2()),null;var Xr=Jk(st,Mt);if(st.tag!==0&&Xr===2){var rn=xc$1(st);rn!==0&&(Mt=rn,Xr=Ok(st,rn))}if(Xr===1)throw Xr=qk,Lk(st,0),Dk(st,Mt),Ek(st,B$2()),Xr;if(Xr===6)throw Error(p$4(345));return st.finishedWork=st.current.alternate,st.finishedLanes=Mt,Qk(st,uk,vk),Ek(st,B$2()),null}function Rk(st,Mt){var Xr=K$1;K$1|=1;try{return st(Mt)}finally{K$1=Xr,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(st){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var Mt=K$1;K$1|=1;var Xr=pk.transition,rn=C$1;try{if(pk.transition=null,C$1=1,st)return st()}finally{C$1=rn,pk.transition=Xr,K$1=Mt,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(st,Mt){st.finishedWork=null,st.finishedLanes=0;var Xr=st.timeoutHandle;if(Xr!==-1&&(st.timeoutHandle=-1,Gf$1(Xr)),Y$1!==null)for(Xr=Y$1.return;Xr!==null;){var rn=Xr;switch(wg(rn),rn.tag){case 1:rn=rn.type.childContextTypes,rn!=null&&$f$1();break;case 3:Jh$1(),E$1(Wf$1),E$1(H$3),Oh$1();break;case 5:Lh$1(rn);break;case 4:Jh$1();break;case 13:E$1(M$4);break;case 19:E$1(M$4);break;case 10:Rg(rn.type._context);break;case 22:case 23:Ij()}Xr=Xr.return}if(R$2=st,Y$1=st=wh$1(st.current,null),Z$1=gj=Mt,T$3=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(Mt=0;Mt<Wg.length;Mt++)if(Xr=Wg[Mt],rn=Xr.interleaved,rn!==null){Xr.interleaved=null;var nn=rn.next,an=Xr.pending;if(an!==null){var on=an.next;an.next=nn,rn.next=on}Xr.pending=rn}Wg=null}return st}function Nk(st,Mt){do{var Xr=Y$1;try{if(Qg(),Ph$1.current=ai$1,Sh$1){for(var rn=N$3.memoizedState;rn!==null;){var nn=rn.queue;nn!==null&&(nn.pending=null),rn=rn.next}Sh$1=!1}if(Rh$1=0,P$1=O$2=N$3=null,Th$1=!1,Uh$1=0,ok.current=null,Xr===null||Xr.return===null){T$3=1,qk=Mt,Y$1=null;break}e:{var an=st,on=Xr.return,sn=Xr,ln=Mt;if(Mt=Z$1,sn.flags|=32768,ln!==null&&typeof ln=="object"&&typeof ln.then=="function"){var un=ln,cn=sn,hn=cn.tag;if(!(cn.mode&1)&&(hn===0||hn===11||hn===15)){var fn=cn.alternate;fn?(cn.updateQueue=fn.updateQueue,cn.memoizedState=fn.memoizedState,cn.lanes=fn.lanes):(cn.updateQueue=null,cn.memoizedState=null)}var to=Vi$1(on);if(to!==null){to.flags&=-257,Wi$1(to,on,sn,an,Mt),to.mode&1&&Ti$1(an,un,Mt),Mt=to,ln=un;var uo=Mt.updateQueue;if(uo===null){var co=new Set;co.add(ln),Mt.updateQueue=co}else uo.add(ln);break e}else{if(!(Mt&1)){Ti$1(an,un,Mt),uj();break e}ln=Error(p$4(426))}}else if(I$3&&sn.mode&1){var Uo=Vi$1(on);if(Uo!==null){!(Uo.flags&65536)&&(Uo.flags|=256),Wi$1(Uo,on,sn,an,Mt),Jg(Ki$1(ln,sn));break e}}an=ln=Ki$1(ln,sn),T$3!==4&&(T$3=2),tk===null?tk=[an]:tk.push(an),an=on;do{switch(an.tag){case 3:an.flags|=65536,Mt&=-Mt,an.lanes|=Mt;var lo=Oi$1(an,ln,Mt);fh$1(an,lo);break e;case 1:sn=ln;var ho=an.type,fo=an.stateNode;if(!(an.flags&128)&&(typeof ho.getDerivedStateFromError=="function"||fo!==null&&typeof fo.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(fo)))){an.flags|=65536,Mt&=-Mt,an.lanes|=Mt;var mo=Ri$1(an,sn,Mt);fh$1(an,mo);break e}}an=an.return}while(an!==null)}Tk(Xr)}catch(_d){Mt=_d,Y$1===Xr&&Xr!==null&&(Y$1=Xr=Xr.return);continue}break}while(1)}function Kk(){var st=nk.current;return nk.current=ai$1,st===null?ai$1:st}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$2===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$2,Z$1)}function Jk(st,Mt){var Xr=K$1;K$1|=2;var rn=Kk();(R$2!==st||Z$1!==Mt)&&(vk=null,Lk(st,Mt));do try{Uk();break}catch(nn){Nk(st,nn)}while(1);if(Qg(),K$1=Xr,nk.current=rn,Y$1!==null)throw Error(p$4(261));return R$2=null,Z$1=0,T$3}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc$1();)Vk(Y$1)}function Vk(st){var Mt=Wk(st.alternate,st,gj);st.memoizedProps=st.pendingProps,Mt===null?Tk(st):Y$1=Mt,ok.current=null}function Tk(st){var Mt=st;do{var Xr=Mt.alternate;if(st=Mt.return,Mt.flags&32768){if(Xr=Jj(Xr,Mt),Xr!==null){Xr.flags&=32767,Y$1=Xr;return}if(st!==null)st.flags|=32768,st.subtreeFlags=0,st.deletions=null;else{T$3=6,Y$1=null;return}}else if(Xr=Fj(Xr,Mt,gj),Xr!==null){Y$1=Xr;return}if(Mt=Mt.sibling,Mt!==null){Y$1=Mt;return}Y$1=Mt=st}while(Mt!==null);T$3===0&&(T$3=5)}function Qk(st,Mt,Xr){var rn=C$1,nn=pk.transition;try{pk.transition=null,C$1=1,Xk(st,Mt,Xr,rn)}finally{pk.transition=nn,C$1=rn}return null}function Xk(st,Mt,Xr,rn){do Ik();while(xk!==null);if(K$1&6)throw Error(p$4(327));Xr=st.finishedWork;var nn=st.finishedLanes;if(Xr===null)return null;if(st.finishedWork=null,st.finishedLanes=0,Xr===st.current)throw Error(p$4(177));st.callbackNode=null,st.callbackPriority=0;var an=Xr.lanes|Xr.childLanes;if(Bc$1(st,an),st===R$2&&(Y$1=R$2=null,Z$1=0),!(Xr.subtreeFlags&2064)&&!(Xr.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),an=(Xr.flags&15990)!==0,Xr.subtreeFlags&15990||an){an=pk.transition,pk.transition=null;var on=C$1;C$1=1;var sn=K$1;K$1|=4,ok.current=null,Pj(st,Xr),ek(Xr,st),Oe$1(Df$1),dd=!!Cf$1,Df$1=Cf$1=null,st.current=Xr,ik(Xr),dc$1(),K$1=sn,C$1=on,pk.transition=an}else st.current=Xr;if(wk&&(wk=!1,xk=st,yk=nn),an=st.pendingLanes,an===0&&(Si$1=null),mc$1(Xr.stateNode),Ek(st,B$2()),Mt!==null)for(rn=st.onRecoverableError,Xr=0;Xr<Mt.length;Xr++)nn=Mt[Xr],rn(nn.value,{componentStack:nn.stack,digest:nn.digest});if(Pi$1)throw Pi$1=!1,st=Qi$1,Qi$1=null,st;return yk&1&&st.tag!==0&&Ik(),an=st.pendingLanes,an&1?st===Ak?zk++:(zk=0,Ak=st):zk=0,jg(),null}function Ik(){if(xk!==null){var st=Dc$1(yk),Mt=pk.transition,Xr=C$1;try{if(pk.transition=null,C$1=16>st?16:st,xk===null)var rn=!1;else{if(st=xk,xk=null,yk=0,K$1&6)throw Error(p$4(331));var nn=K$1;for(K$1|=4,V$1=st.current;V$1!==null;){var an=V$1,on=an.child;if(V$1.flags&16){var sn=an.deletions;if(sn!==null){for(var ln=0;ln<sn.length;ln++){var un=sn[ln];for(V$1=un;V$1!==null;){var cn=V$1;switch(cn.tag){case 0:case 11:case 15:Qj(8,cn,an)}var hn=cn.child;if(hn!==null)hn.return=cn,V$1=hn;else for(;V$1!==null;){cn=V$1;var fn=cn.sibling,to=cn.return;if(Tj(cn),cn===un){V$1=null;break}if(fn!==null){fn.return=to,V$1=fn;break}V$1=to}}}var uo=an.alternate;if(uo!==null){var co=uo.child;if(co!==null){uo.child=null;do{var Uo=co.sibling;co.sibling=null,co=Uo}while(co!==null)}}V$1=an}}if(an.subtreeFlags&2064&&on!==null)on.return=an,V$1=on;else e:for(;V$1!==null;){if(an=V$1,an.flags&2048)switch(an.tag){case 0:case 11:case 15:Qj(9,an,an.return)}var lo=an.sibling;if(lo!==null){lo.return=an.return,V$1=lo;break e}V$1=an.return}}var ho=st.current;for(V$1=ho;V$1!==null;){on=V$1;var fo=on.child;if(on.subtreeFlags&2064&&fo!==null)fo.return=on,V$1=fo;else e:for(on=ho;V$1!==null;){if(sn=V$1,sn.flags&2048)try{switch(sn.tag){case 0:case 11:case 15:Rj(9,sn)}}catch(_d){W$1(sn,sn.return,_d)}if(sn===on){V$1=null;break e}var mo=sn.sibling;if(mo!==null){mo.return=sn.return,V$1=mo;break e}V$1=sn.return}}if(K$1=nn,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,st)}catch{}rn=!0}return rn}finally{C$1=Xr,pk.transition=Mt}}return!1}function Yk(st,Mt,Xr){Mt=Ki$1(Xr,Mt),Mt=Oi$1(st,Mt,1),st=dh$1(st,Mt,1),Mt=L$1(),st!==null&&(Ac$1(st,1,Mt),Ek(st,Mt))}function W$1(st,Mt,Xr){if(st.tag===3)Yk(st,st,Xr);else for(;Mt!==null;){if(Mt.tag===3){Yk(Mt,st,Xr);break}else if(Mt.tag===1){var rn=Mt.stateNode;if(typeof Mt.type.getDerivedStateFromError=="function"||typeof rn.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(rn))){st=Ki$1(Xr,st),st=Ri$1(Mt,st,1),Mt=dh$1(Mt,st,1),st=L$1(),Mt!==null&&(Ac$1(Mt,1,st),Ek(Mt,st));break}}Mt=Mt.return}}function Ui$1(st,Mt,Xr){var rn=st.pingCache;rn!==null&&rn.delete(Mt),Mt=L$1(),st.pingedLanes|=st.suspendedLanes&Xr,R$2===st&&(Z$1&Xr)===Xr&&(T$3===4||T$3===3&&(Z$1&130023424)===Z$1&&500>B$2()-gk?Lk(st,0):sk|=Xr),Ek(st,Mt)}function Zk(st,Mt){Mt===0&&(st.mode&1?(Mt=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):Mt=1);var Xr=L$1();st=Zg(st,Mt),st!==null&&(Ac$1(st,Mt,Xr),Ek(st,Xr))}function vj(st){var Mt=st.memoizedState,Xr=0;Mt!==null&&(Xr=Mt.retryLane),Zk(st,Xr)}function ck(st,Mt){var Xr=0;switch(st.tag){case 13:var rn=st.stateNode,nn=st.memoizedState;nn!==null&&(Xr=nn.retryLane);break;case 19:rn=st.stateNode;break;default:throw Error(p$4(314))}rn!==null&&rn.delete(Mt),Zk(st,Xr)}var Wk;Wk=function(st,Mt,Xr){if(st!==null)if(st.memoizedProps!==Mt.pendingProps||Wf$1.current)Ug=!0;else{if(!(st.lanes&Xr)&&!(Mt.flags&128))return Ug=!1,zj(st,Mt,Xr);Ug=!!(st.flags&131072)}else Ug=!1,I$3&&Mt.flags&1048576&&ug(Mt,ng,Mt.index);switch(Mt.lanes=0,Mt.tag){case 2:var rn=Mt.type;jj(st,Mt),st=Mt.pendingProps;var nn=Yf$1(Mt,H$3.current);Tg(Mt,Xr),nn=Xh$1(null,Mt,rn,st,nn,Xr);var an=bi$1();return Mt.flags|=1,typeof nn=="object"&&nn!==null&&typeof nn.render=="function"&&nn.$$typeof===void 0?(Mt.tag=1,Mt.memoizedState=null,Mt.updateQueue=null,Zf$1(rn)?(an=!0,cg(Mt)):an=!1,Mt.memoizedState=nn.state!==null&&nn.state!==void 0?nn.state:null,ah$1(Mt),nn.updater=nh$1,Mt.stateNode=nn,nn._reactInternals=Mt,rh$1(Mt,rn,st,Xr),Mt=kj(null,Mt,rn,!0,an,Xr)):(Mt.tag=0,I$3&&an&&vg(Mt),Yi$1(null,Mt,nn,Xr),Mt=Mt.child),Mt;case 16:rn=Mt.elementType;e:{switch(jj(st,Mt),st=Mt.pendingProps,nn=rn._init,rn=nn(rn._payload),Mt.type=rn,nn=Mt.tag=$k(rn),st=Lg(rn,st),nn){case 0:Mt=dj(null,Mt,rn,st,Xr);break e;case 1:Mt=ij(null,Mt,rn,st,Xr);break e;case 11:Mt=Zi$1(null,Mt,rn,st,Xr);break e;case 14:Mt=aj(null,Mt,rn,Lg(rn.type,st),Xr);break e}throw Error(p$4(306,rn,""))}return Mt;case 0:return rn=Mt.type,nn=Mt.pendingProps,nn=Mt.elementType===rn?nn:Lg(rn,nn),dj(st,Mt,rn,nn,Xr);case 1:return rn=Mt.type,nn=Mt.pendingProps,nn=Mt.elementType===rn?nn:Lg(rn,nn),ij(st,Mt,rn,nn,Xr);case 3:e:{if(lj(Mt),st===null)throw Error(p$4(387));rn=Mt.pendingProps,an=Mt.memoizedState,nn=an.element,bh$1(st,Mt),gh$1(Mt,rn,null,Xr);var on=Mt.memoizedState;if(rn=on.element,an.isDehydrated)if(an={element:rn,isDehydrated:!1,cache:on.cache,pendingSuspenseBoundaries:on.pendingSuspenseBoundaries,transitions:on.transitions},Mt.updateQueue.baseState=an,Mt.memoizedState=an,Mt.flags&256){nn=Ki$1(Error(p$4(423)),Mt),Mt=mj(st,Mt,rn,Xr,nn);break e}else if(rn!==nn){nn=Ki$1(Error(p$4(424)),Mt),Mt=mj(st,Mt,rn,Xr,nn);break e}else for(yg=Lf$1(Mt.stateNode.containerInfo.firstChild),xg=Mt,I$3=!0,zg=null,Xr=Ch$1(Mt,null,rn,Xr),Mt.child=Xr;Xr;)Xr.flags=Xr.flags&-3|4096,Xr=Xr.sibling;else{if(Ig(),rn===nn){Mt=$i$1(st,Mt,Xr);break e}Yi$1(st,Mt,rn,Xr)}Mt=Mt.child}return Mt;case 5:return Kh$1(Mt),st===null&&Eg(Mt),rn=Mt.type,nn=Mt.pendingProps,an=st!==null?st.memoizedProps:null,on=nn.children,Ef$1(rn,nn)?on=null:an!==null&&Ef$1(rn,an)&&(Mt.flags|=32),hj(st,Mt),Yi$1(st,Mt,on,Xr),Mt.child;case 6:return st===null&&Eg(Mt),null;case 13:return pj(st,Mt,Xr);case 4:return Ih$1(Mt,Mt.stateNode.containerInfo),rn=Mt.pendingProps,st===null?Mt.child=Bh$1(Mt,null,rn,Xr):Yi$1(st,Mt,rn,Xr),Mt.child;case 11:return rn=Mt.type,nn=Mt.pendingProps,nn=Mt.elementType===rn?nn:Lg(rn,nn),Zi$1(st,Mt,rn,nn,Xr);case 7:return Yi$1(st,Mt,Mt.pendingProps,Xr),Mt.child;case 8:return Yi$1(st,Mt,Mt.pendingProps.children,Xr),Mt.child;case 12:return Yi$1(st,Mt,Mt.pendingProps.children,Xr),Mt.child;case 10:e:{if(rn=Mt.type._context,nn=Mt.pendingProps,an=Mt.memoizedProps,on=nn.value,G$1(Mg,rn._currentValue),rn._currentValue=on,an!==null)if(He$1(an.value,on)){if(an.children===nn.children&&!Wf$1.current){Mt=$i$1(st,Mt,Xr);break e}}else for(an=Mt.child,an!==null&&(an.return=Mt);an!==null;){var sn=an.dependencies;if(sn!==null){on=an.child;for(var ln=sn.firstContext;ln!==null;){if(ln.context===rn){if(an.tag===1){ln=ch$1(-1,Xr&-Xr),ln.tag=2;var un=an.updateQueue;if(un!==null){un=un.shared;var cn=un.pending;cn===null?ln.next=ln:(ln.next=cn.next,cn.next=ln),un.pending=ln}}an.lanes|=Xr,ln=an.alternate,ln!==null&&(ln.lanes|=Xr),Sg(an.return,Xr,Mt),sn.lanes|=Xr;break}ln=ln.next}}else if(an.tag===10)on=an.type===Mt.type?null:an.child;else if(an.tag===18){if(on=an.return,on===null)throw Error(p$4(341));on.lanes|=Xr,sn=on.alternate,sn!==null&&(sn.lanes|=Xr),Sg(on,Xr,Mt),on=an.sibling}else on=an.child;if(on!==null)on.return=an;else for(on=an;on!==null;){if(on===Mt){on=null;break}if(an=on.sibling,an!==null){an.return=on.return,on=an;break}on=on.return}an=on}Yi$1(st,Mt,nn.children,Xr),Mt=Mt.child}return Mt;case 9:return nn=Mt.type,rn=Mt.pendingProps.children,Tg(Mt,Xr),nn=Vg(nn),rn=rn(nn),Mt.flags|=1,Yi$1(st,Mt,rn,Xr),Mt.child;case 14:return rn=Mt.type,nn=Lg(rn,Mt.pendingProps),nn=Lg(rn.type,nn),aj(st,Mt,rn,nn,Xr);case 15:return cj(st,Mt,Mt.type,Mt.pendingProps,Xr);case 17:return rn=Mt.type,nn=Mt.pendingProps,nn=Mt.elementType===rn?nn:Lg(rn,nn),jj(st,Mt),Mt.tag=1,Zf$1(rn)?(st=!0,cg(Mt)):st=!1,Tg(Mt,Xr),ph$1(Mt,rn,nn),rh$1(Mt,rn,nn,Xr),kj(null,Mt,rn,!0,st,Xr);case 19:return yj(st,Mt,Xr);case 22:return ej(st,Mt,Xr)}throw Error(p$4(156,Mt.tag))};function Gk(st,Mt){return ac$1(st,Mt)}function al$1(st,Mt,Xr,rn){this.tag=st,this.key=Xr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Mt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=rn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(st,Mt,Xr,rn){return new al$1(st,Mt,Xr,rn)}function bj(st){return st=st.prototype,!(!st||!st.isReactComponent)}function $k(st){if(typeof st=="function")return bj(st)?1:0;if(st!=null){if(st=st.$$typeof,st===Da$1)return 11;if(st===Ga$1)return 14}return 2}function wh$1(st,Mt){var Xr=st.alternate;return Xr===null?(Xr=Bg(st.tag,Mt,st.key,st.mode),Xr.elementType=st.elementType,Xr.type=st.type,Xr.stateNode=st.stateNode,Xr.alternate=st,st.alternate=Xr):(Xr.pendingProps=Mt,Xr.type=st.type,Xr.flags=0,Xr.subtreeFlags=0,Xr.deletions=null),Xr.flags=st.flags&14680064,Xr.childLanes=st.childLanes,Xr.lanes=st.lanes,Xr.child=st.child,Xr.memoizedProps=st.memoizedProps,Xr.memoizedState=st.memoizedState,Xr.updateQueue=st.updateQueue,Mt=st.dependencies,Xr.dependencies=Mt===null?null:{lanes:Mt.lanes,firstContext:Mt.firstContext},Xr.sibling=st.sibling,Xr.index=st.index,Xr.ref=st.ref,Xr}function yh$1(st,Mt,Xr,rn,nn,an){var on=2;if(rn=st,typeof st=="function")bj(st)&&(on=1);else if(typeof st=="string")on=5;else e:switch(st){case ya$1:return Ah$1(Xr.children,nn,an,Mt);case za$1:on=8,nn|=8;break;case Aa$1:return st=Bg(12,Xr,Mt,nn|2),st.elementType=Aa$1,st.lanes=an,st;case Ea$1:return st=Bg(13,Xr,Mt,nn),st.elementType=Ea$1,st.lanes=an,st;case Fa$1:return st=Bg(19,Xr,Mt,nn),st.elementType=Fa$1,st.lanes=an,st;case Ia$1:return qj(Xr,nn,an,Mt);default:if(typeof st=="object"&&st!==null)switch(st.$$typeof){case Ba$1:on=10;break e;case Ca$1:on=9;break e;case Da$1:on=11;break e;case Ga$1:on=14;break e;case Ha$1:on=16,rn=null;break e}throw Error(p$4(130,st==null?st:typeof st,""))}return Mt=Bg(on,Xr,Mt,nn),Mt.elementType=st,Mt.type=rn,Mt.lanes=an,Mt}function Ah$1(st,Mt,Xr,rn){return st=Bg(7,st,rn,Mt),st.lanes=Xr,st}function qj(st,Mt,Xr,rn){return st=Bg(22,st,rn,Mt),st.elementType=Ia$1,st.lanes=Xr,st.stateNode={isHidden:!1},st}function xh$1(st,Mt,Xr){return st=Bg(6,st,null,Mt),st.lanes=Xr,st}function zh$1(st,Mt,Xr){return Mt=Bg(4,st.children!==null?st.children:[],st.key,Mt),Mt.lanes=Xr,Mt.stateNode={containerInfo:st.containerInfo,pendingChildren:null,implementation:st.implementation},Mt}function bl$1(st,Mt,Xr,rn,nn){this.tag=Mt,this.containerInfo=st,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=rn,this.onRecoverableError=nn,this.mutableSourceEagerHydrationData=null}function cl$1(st,Mt,Xr,rn,nn,an,on,sn,ln){return st=new bl$1(st,Mt,Xr,sn,ln),Mt===1?(Mt=1,an===!0&&(Mt|=8)):Mt=0,an=Bg(3,null,null,Mt),st.current=an,an.stateNode=st,an.memoizedState={element:rn,isDehydrated:Xr,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(an),st}function dl$1(st,Mt,Xr){var rn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:rn==null?null:""+rn,children:st,containerInfo:Mt,implementation:Xr}}function el$1(st){if(!st)return Vf$1;st=st._reactInternals;e:{if(Vb(st)!==st||st.tag!==1)throw Error(p$4(170));var Mt=st;do{switch(Mt.tag){case 3:Mt=Mt.stateNode.context;break e;case 1:if(Zf$1(Mt.type)){Mt=Mt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}Mt=Mt.return}while(Mt!==null);throw Error(p$4(171))}if(st.tag===1){var Xr=st.type;if(Zf$1(Xr))return bg(st,Xr,Mt)}return Mt}function fl$1(st,Mt,Xr,rn,nn,an,on,sn,ln){return st=cl$1(Xr,rn,!0,st,nn,an,on,sn,ln),st.context=el$1(null),Xr=st.current,rn=L$1(),nn=lh$1(Xr),an=ch$1(rn,nn),an.callback=Mt??null,dh$1(Xr,an,nn),st.current.lanes=nn,Ac$1(st,nn,rn),Ek(st,rn),st}function gl$1(st,Mt,Xr,rn){var nn=Mt.current,an=L$1(),on=lh$1(nn);return Xr=el$1(Xr),Mt.context===null?Mt.context=Xr:Mt.pendingContext=Xr,Mt=ch$1(an,on),Mt.payload={element:st},rn=rn===void 0?null:rn,rn!==null&&(Mt.callback=rn),st=dh$1(nn,Mt,on),st!==null&&(mh$1(st,nn,on,an),eh$1(st,nn,on)),on}function hl$1(st){if(st=st.current,!st.child)return null;switch(st.child.tag){case 5:return st.child.stateNode;default:return st.child.stateNode}}function il$1(st,Mt){if(st=st.memoizedState,st!==null&&st.dehydrated!==null){var Xr=st.retryLane;st.retryLane=Xr!==0&&Xr<Mt?Xr:Mt}}function jl$1(st,Mt){il$1(st,Mt),(st=st.alternate)&&il$1(st,Mt)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(st){console.error(st)};function ml$1(st){this._internalRoot=st}nl$1.prototype.render=ml$1.prototype.render=function(st){var Mt=this._internalRoot;if(Mt===null)throw Error(p$4(409));gl$1(st,Mt,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var st=this._internalRoot;if(st!==null){this._internalRoot=null;var Mt=st.containerInfo;Sk(function(){gl$1(null,st,null,null)}),Mt[uf$1]=null}};function nl$1(st){this._internalRoot=st}nl$1.prototype.unstable_scheduleHydration=function(st){if(st){var Mt=Hc$1();st={blockedOn:null,target:st,priority:Mt};for(var Xr=0;Xr<Qc$1.length&&Mt!==0&&Mt<Qc$1[Xr].priority;Xr++);Qc$1.splice(Xr,0,st),Xr===0&&Vc$1(st)}};function ol$1(st){return!(!st||st.nodeType!==1&&st.nodeType!==9&&st.nodeType!==11)}function pl$1(st){return!(!st||st.nodeType!==1&&st.nodeType!==9&&st.nodeType!==11&&(st.nodeType!==8||st.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(st,Mt,Xr,rn,nn){if(nn){if(typeof rn=="function"){var an=rn;rn=function(){var un=hl$1(on);an.call(un)}}var on=fl$1(Mt,rn,st,0,null,!1,!1,"",ql$1);return st._reactRootContainer=on,st[uf$1]=on.current,sf$1(st.nodeType===8?st.parentNode:st),Sk(),on}for(;nn=st.lastChild;)st.removeChild(nn);if(typeof rn=="function"){var sn=rn;rn=function(){var un=hl$1(ln);sn.call(un)}}var ln=cl$1(st,0,!1,null,null,!1,!1,"",ql$1);return st._reactRootContainer=ln,st[uf$1]=ln.current,sf$1(st.nodeType===8?st.parentNode:st),Sk(function(){gl$1(Mt,ln,Xr,rn)}),ln}function sl$1(st,Mt,Xr,rn,nn){var an=Xr._reactRootContainer;if(an){var on=an;if(typeof nn=="function"){var sn=nn;nn=function(){var ln=hl$1(on);sn.call(ln)}}gl$1(Mt,on,st,nn)}else on=rl$1(Xr,Mt,st,nn,rn);return hl$1(on)}Ec$1=function(st){switch(st.tag){case 3:var Mt=st.stateNode;if(Mt.current.memoizedState.isDehydrated){var Xr=tc$1(Mt.pendingLanes);Xr!==0&&(Cc$1(Mt,Xr|1),Ek(Mt,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var rn=Zg(st,1);if(rn!==null){var nn=L$1();mh$1(rn,st,1,nn)}}),jl$1(st,1)}};Fc$1=function(st){if(st.tag===13){var Mt=Zg(st,134217728);if(Mt!==null){var Xr=L$1();mh$1(Mt,st,134217728,Xr)}jl$1(st,134217728)}};Gc$1=function(st){if(st.tag===13){var Mt=lh$1(st),Xr=Zg(st,Mt);if(Xr!==null){var rn=L$1();mh$1(Xr,st,Mt,rn)}jl$1(st,Mt)}};Hc$1=function(){return C$1};Ic$1=function(st,Mt){var Xr=C$1;try{return C$1=st,Mt()}finally{C$1=Xr}};yb=function(st,Mt,Xr){switch(Mt){case"input":if(bb(st,Xr),Mt=Xr.name,Xr.type==="radio"&&Mt!=null){for(Xr=st;Xr.parentNode;)Xr=Xr.parentNode;for(Xr=Xr.querySelectorAll("input[name="+JSON.stringify(""+Mt)+'][type="radio"]'),Mt=0;Mt<Xr.length;Mt++){var rn=Xr[Mt];if(rn!==st&&rn.form===st.form){var nn=Db(rn);if(!nn)throw Error(p$4(90));Wa$1(rn),bb(rn,nn)}}}break;case"textarea":ib(st,Xr);break;case"select":Mt=Xr.value,Mt!=null&&fb(st,!!Xr.multiple,Mt,!1)}};Gb=Rk;Hb=Sk;var tl$1={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(st){return st=Zb(st),st===null?null:st.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(st,Mt){var Xr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(Mt))throw Error(p$4(200));return dl$1(st,Mt,null,Xr)};reactDom_production_min.createRoot=function(st,Mt){if(!ol$1(st))throw Error(p$4(299));var Xr=!1,rn="",nn=ll$1;return Mt!=null&&(Mt.unstable_strictMode===!0&&(Xr=!0),Mt.identifierPrefix!==void 0&&(rn=Mt.identifierPrefix),Mt.onRecoverableError!==void 0&&(nn=Mt.onRecoverableError)),Mt=cl$1(st,1,!1,null,null,Xr,!1,rn,nn),st[uf$1]=Mt.current,sf$1(st.nodeType===8?st.parentNode:st),new ml$1(Mt)};reactDom_production_min.findDOMNode=function(st){if(st==null)return null;if(st.nodeType===1)return st;var Mt=st._reactInternals;if(Mt===void 0)throw typeof st.render=="function"?Error(p$4(188)):(st=Object.keys(st).join(","),Error(p$4(268,st)));return st=Zb(Mt),st=st===null?null:st.stateNode,st};reactDom_production_min.flushSync=function(st){return Sk(st)};reactDom_production_min.hydrate=function(st,Mt,Xr){if(!pl$1(Mt))throw Error(p$4(200));return sl$1(null,st,Mt,!0,Xr)};reactDom_production_min.hydrateRoot=function(st,Mt,Xr){if(!ol$1(st))throw Error(p$4(405));var rn=Xr!=null&&Xr.hydratedSources||null,nn=!1,an="",on=ll$1;if(Xr!=null&&(Xr.unstable_strictMode===!0&&(nn=!0),Xr.identifierPrefix!==void 0&&(an=Xr.identifierPrefix),Xr.onRecoverableError!==void 0&&(on=Xr.onRecoverableError)),Mt=fl$1(Mt,null,st,1,Xr??null,nn,!1,an,on),st[uf$1]=Mt.current,sf$1(st),rn)for(st=0;st<rn.length;st++)Xr=rn[st],nn=Xr._getVersion,nn=nn(Xr._source),Mt.mutableSourceEagerHydrationData==null?Mt.mutableSourceEagerHydrationData=[Xr,nn]:Mt.mutableSourceEagerHydrationData.push(Xr,nn);return new nl$1(Mt)};reactDom_production_min.render=function(st,Mt,Xr){if(!pl$1(Mt))throw Error(p$4(200));return sl$1(null,st,Mt,!1,Xr)};reactDom_production_min.unmountComponentAtNode=function(st){if(!pl$1(st))throw Error(p$4(40));return st._reactRootContainer?(Sk(function(){sl$1(null,null,st,!1,function(){st._reactRootContainer=null,st[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(st,Mt,Xr,rn){if(!pl$1(Xr))throw Error(p$4(200));if(st==null||st._reactInternals===void 0)throw Error(p$4(38));return sl$1(st,Mt,Xr,!1,rn)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(st){console.error(st)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(st){for(var Mt=1;Mt<arguments.length;Mt++){var Xr=arguments[Mt];for(var rn in Xr)Object.prototype.hasOwnProperty.call(Xr,rn)&&(st[rn]=Xr[rn])}return st},_extends$3.apply(this,arguments)}var Action;(function(st){st.Pop="POP",st.Push="PUSH",st.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(st){st===void 0&&(st={});function Mt(rn,nn){let{pathname:an,search:on,hash:sn}=rn.location;return createLocation("",{pathname:an,search:on,hash:sn},nn.state&&nn.state.usr||null,nn.state&&nn.state.key||"default")}function Xr(rn,nn){return typeof nn=="string"?nn:createPath(nn)}return getUrlBasedHistory(Mt,Xr,null,st)}function invariant(st,Mt){if(st===!1||st===null||typeof st>"u")throw new Error(Mt)}function warning(st,Mt){if(!st){typeof console<"u"&&console.warn(Mt);try{throw new Error(Mt)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(st,Mt){return{usr:st.state,key:st.key,idx:Mt}}function createLocation(st,Mt,Xr,rn){return Xr===void 0&&(Xr=null),_extends$3({pathname:typeof st=="string"?st:st.pathname,search:"",hash:""},typeof Mt=="string"?parsePath(Mt):Mt,{state:Xr,key:Mt&&Mt.key||rn||createKey()})}function createPath(st){let{pathname:Mt="/",search:Xr="",hash:rn=""}=st;return Xr&&Xr!=="?"&&(Mt+=Xr.charAt(0)==="?"?Xr:"?"+Xr),rn&&rn!=="#"&&(Mt+=rn.charAt(0)==="#"?rn:"#"+rn),Mt}function parsePath(st){let Mt={};if(st){let Xr=st.indexOf("#");Xr>=0&&(Mt.hash=st.substr(Xr),st=st.substr(0,Xr));let rn=st.indexOf("?");rn>=0&&(Mt.search=st.substr(rn),st=st.substr(0,rn)),st&&(Mt.pathname=st)}return Mt}function getUrlBasedHistory(st,Mt,Xr,rn){rn===void 0&&(rn={});let{window:nn=document.defaultView,v5Compat:an=!1}=rn,on=nn.history,sn=Action.Pop,ln=null,un=cn();un==null&&(un=0,on.replaceState(_extends$3({},on.state,{idx:un}),""));function cn(){return(on.state||{idx:null}).idx}function hn(){sn=Action.Pop;let Uo=cn(),lo=Uo==null?null:Uo-un;un=Uo,ln&&ln({action:sn,location:co.location,delta:lo})}function fn(Uo,lo){sn=Action.Push;let ho=createLocation(co.location,Uo,lo);Xr&&Xr(ho,Uo),un=cn()+1;let fo=getHistoryState(ho,un),mo=co.createHref(ho);try{on.pushState(fo,"",mo)}catch{nn.location.assign(mo)}an&&ln&&ln({action:sn,location:co.location,delta:1})}function to(Uo,lo){sn=Action.Replace;let ho=createLocation(co.location,Uo,lo);Xr&&Xr(ho,Uo),un=cn();let fo=getHistoryState(ho,un),mo=co.createHref(ho);on.replaceState(fo,"",mo),an&&ln&&ln({action:sn,location:co.location,delta:0})}function uo(Uo){let lo=nn.location.origin!=="null"?nn.location.origin:nn.location.href,ho=typeof Uo=="string"?Uo:createPath(Uo);return invariant(lo,"No window.location.(origin|href) available to create URL for href: "+ho),new URL(ho,lo)}let co={get action(){return sn},get location(){return st(nn,on)},listen(Uo){if(ln)throw new Error("A history only accepts one active listener");return nn.addEventListener(PopStateEventType,hn),ln=Uo,()=>{nn.removeEventListener(PopStateEventType,hn),ln=null}},createHref(Uo){return Mt(nn,Uo)},createURL:uo,encodeLocation(Uo){let lo=uo(Uo);return{pathname:lo.pathname,search:lo.search,hash:lo.hash}},push:fn,replace:to,go(Uo){return on.go(Uo)}};return co}var ResultType;(function(st){st.data="data",st.deferred="deferred",st.redirect="redirect",st.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(st){return st.index===!0}function convertRoutesToDataRoutes(st,Mt,Xr,rn){return Xr===void 0&&(Xr=[]),rn===void 0&&(rn={}),st.map((nn,an)=>{let on=[...Xr,an],sn=typeof nn.id=="string"?nn.id:on.join("-");if(invariant(nn.index!==!0||!nn.children,"Cannot specify children on an index route"),invariant(!rn[sn],'Found a route id collision on id "'+sn+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(nn)){let ln=_extends$3({},nn,Mt(nn),{id:sn});return rn[sn]=ln,ln}else{let ln=_extends$3({},nn,Mt(nn),{id:sn,children:void 0});return rn[sn]=ln,nn.children&&(ln.children=convertRoutesToDataRoutes(nn.children,Mt,on,rn)),ln}})}function matchRoutes(st,Mt,Xr){Xr===void 0&&(Xr="/");let rn=typeof Mt=="string"?parsePath(Mt):Mt,nn=stripBasename(rn.pathname||"/",Xr);if(nn==null)return null;let an=flattenRoutes(st);rankRouteBranches(an);let on=null;for(let sn=0;on==null&&sn<an.length;++sn)on=matchRouteBranch(an[sn],safelyDecodeURI(nn));return on}function flattenRoutes(st,Mt,Xr,rn){Mt===void 0&&(Mt=[]),Xr===void 0&&(Xr=[]),rn===void 0&&(rn="");let nn=(an,on,sn)=>{let ln={relativePath:sn===void 0?an.path||"":sn,caseSensitive:an.caseSensitive===!0,childrenIndex:on,route:an};ln.relativePath.startsWith("/")&&(invariant(ln.relativePath.startsWith(rn),'Absolute route path "'+ln.relativePath+'" nested under path '+('"'+rn+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ln.relativePath=ln.relativePath.slice(rn.length));let un=joinPaths([rn,ln.relativePath]),cn=Xr.concat(ln);an.children&&an.children.length>0&&(invariant(an.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+un+'".')),flattenRoutes(an.children,Mt,cn,un)),!(an.path==null&&!an.index)&&Mt.push({path:un,score:computeScore(un,an.index),routesMeta:cn})};return st.forEach((an,on)=>{var sn;if(an.path===""||!((sn=an.path)!=null&&sn.includes("?")))nn(an,on);else for(let ln of explodeOptionalSegments(an.path))nn(an,on,ln)}),Mt}function explodeOptionalSegments(st){let Mt=st.split("/");if(Mt.length===0)return[];let[Xr,...rn]=Mt,nn=Xr.endsWith("?"),an=Xr.replace(/\?$/,"");if(rn.length===0)return nn?[an,""]:[an];let on=explodeOptionalSegments(rn.join("/")),sn=[];return sn.push(...on.map(ln=>ln===""?an:[an,ln].join("/"))),nn&&sn.push(...on),sn.map(ln=>st.startsWith("/")&&ln===""?"/":ln)}function rankRouteBranches(st){st.sort((Mt,Xr)=>Mt.score!==Xr.score?Xr.score-Mt.score:compareIndexes(Mt.routesMeta.map(rn=>rn.childrenIndex),Xr.routesMeta.map(rn=>rn.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=st=>st==="*";function computeScore(st,Mt){let Xr=st.split("/"),rn=Xr.length;return Xr.some(isSplat)&&(rn+=splatPenalty),Mt&&(rn+=indexRouteValue),Xr.filter(nn=>!isSplat(nn)).reduce((nn,an)=>nn+(paramRe.test(an)?dynamicSegmentValue:an===""?emptySegmentValue:staticSegmentValue),rn)}function compareIndexes(st,Mt){return st.length===Mt.length&&st.slice(0,-1).every((rn,nn)=>rn===Mt[nn])?st[st.length-1]-Mt[Mt.length-1]:0}function matchRouteBranch(st,Mt){let{routesMeta:Xr}=st,rn={},nn="/",an=[];for(let on=0;on<Xr.length;++on){let sn=Xr[on],ln=on===Xr.length-1,un=nn==="/"?Mt:Mt.slice(nn.length)||"/",cn=matchPath({path:sn.relativePath,caseSensitive:sn.caseSensitive,end:ln},un);if(!cn)return null;Object.assign(rn,cn.params);let hn=sn.route;an.push({params:rn,pathname:joinPaths([nn,cn.pathname]),pathnameBase:normalizePathname(joinPaths([nn,cn.pathnameBase])),route:hn}),cn.pathnameBase!=="/"&&(nn=joinPaths([nn,cn.pathnameBase]))}return an}function matchPath(st,Mt){typeof st=="string"&&(st={path:st,caseSensitive:!1,end:!0});let[Xr,rn]=compilePath(st.path,st.caseSensitive,st.end),nn=Mt.match(Xr);if(!nn)return null;let an=nn[0],on=an.replace(/(.)\/+$/,"$1"),sn=nn.slice(1);return{params:rn.reduce((un,cn,hn)=>{if(cn==="*"){let fn=sn[hn]||"";on=an.slice(0,an.length-fn.length).replace(/(.)\/+$/,"$1")}return un[cn]=safelyDecodeURIComponent(sn[hn]||"",cn),un},{}),pathname:an,pathnameBase:on,pattern:st}}function compilePath(st,Mt,Xr){Mt===void 0&&(Mt=!1),Xr===void 0&&(Xr=!0),warning(st==="*"||!st.endsWith("*")||st.endsWith("/*"),'Route path "'+st+'" will be treated as if it were '+('"'+st.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+st.replace(/\*$/,"/*")+'".'));let rn=[],nn="^"+st.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(on,sn)=>(rn.push(sn),"/([^\\/]+)"));return st.endsWith("*")?(rn.push("*"),nn+=st==="*"||st==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Xr?nn+="\\/*$":st!==""&&st!=="/"&&(nn+="(?:(?=\\/|$))"),[new RegExp(nn,Mt?void 0:"i"),rn]}function safelyDecodeURI(st){try{return decodeURI(st)}catch(Mt){return warning(!1,'The URL path "'+st+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+Mt+").")),st}}function safelyDecodeURIComponent(st,Mt){try{return decodeURIComponent(st)}catch(Xr){return warning(!1,'The value for the URL param "'+Mt+'" will not be decoded because'+(' the string "'+st+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+Xr+").")),st}}function stripBasename(st,Mt){if(Mt==="/")return st;if(!st.toLowerCase().startsWith(Mt.toLowerCase()))return null;let Xr=Mt.endsWith("/")?Mt.length-1:Mt.length,rn=st.charAt(Xr);return rn&&rn!=="/"?null:st.slice(Xr)||"/"}function resolvePath(st,Mt){Mt===void 0&&(Mt="/");let{pathname:Xr,search:rn="",hash:nn=""}=typeof st=="string"?parsePath(st):st;return{pathname:Xr?Xr.startsWith("/")?Xr:resolvePathname(Xr,Mt):Mt,search:normalizeSearch(rn),hash:normalizeHash(nn)}}function resolvePathname(st,Mt){let Xr=Mt.replace(/\/+$/,"").split("/");return st.split("/").forEach(nn=>{nn===".."?Xr.length>1&&Xr.pop():nn!=="."&&Xr.push(nn)}),Xr.length>1?Xr.join("/"):"/"}function getInvalidPathError(st,Mt,Xr,rn){return"Cannot include a '"+st+"' character in a manually specified "+("`to."+Mt+"` field ["+JSON.stringify(rn)+"].  Please separate it out to the ")+("`to."+Xr+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(st){return st.filter((Mt,Xr)=>Xr===0||Mt.route.path&&Mt.route.path.length>0)}function resolveTo(st,Mt,Xr,rn){rn===void 0&&(rn=!1);let nn;typeof st=="string"?nn=parsePath(st):(nn=_extends$3({},st),invariant(!nn.pathname||!nn.pathname.includes("?"),getInvalidPathError("?","pathname","search",nn)),invariant(!nn.pathname||!nn.pathname.includes("#"),getInvalidPathError("#","pathname","hash",nn)),invariant(!nn.search||!nn.search.includes("#"),getInvalidPathError("#","search","hash",nn)));let an=st===""||nn.pathname==="",on=an?"/":nn.pathname,sn;if(rn||on==null)sn=Xr;else{let hn=Mt.length-1;if(on.startsWith("..")){let fn=on.split("/");for(;fn[0]==="..";)fn.shift(),hn-=1;nn.pathname=fn.join("/")}sn=hn>=0?Mt[hn]:"/"}let ln=resolvePath(nn,sn),un=on&&on!=="/"&&on.endsWith("/"),cn=(an||on===".")&&Xr.endsWith("/");return!ln.pathname.endsWith("/")&&(un||cn)&&(ln.pathname+="/"),ln}const joinPaths=st=>st.join("/").replace(/\/\/+/g,"/"),normalizePathname=st=>st.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=st=>!st||st==="?"?"":st.startsWith("?")?st:"?"+st,normalizeHash=st=>!st||st==="#"?"":st.startsWith("#")?st:"#"+st;class ErrorResponse{constructor(Mt,Xr,rn,nn){nn===void 0&&(nn=!1),this.status=Mt,this.statusText=Xr||"",this.internal=nn,rn instanceof Error?(this.data=rn.toString(),this.error=rn):this.data=rn}}function isRouteErrorResponse(st){return st!=null&&typeof st.status=="number"&&typeof st.statusText=="string"&&typeof st.internal=="boolean"&&"data"in st}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServer=!isBrowser$3,defaultMapRouteProperties=st=>({hasErrorBoundary:!!st.hasErrorBoundary});function createRouter(st){invariant(st.routes.length>0,"You must provide a non-empty routes array to createRouter");let Mt;if(st.mapRouteProperties)Mt=st.mapRouteProperties;else if(st.detectErrorBoundary){let xp=st.detectErrorBoundary;Mt=wp=>({hasErrorBoundary:xp(wp)})}else Mt=defaultMapRouteProperties;let Xr={},rn=convertRoutesToDataRoutes(st.routes,Mt,void 0,Xr),nn,an=st.basename||"/",on=_extends$3({v7_normalizeFormMethod:!1,v7_prependBasename:!1},st.future),sn=null,ln=new Set,un=null,cn=null,hn=null,fn=st.hydrationData!=null,to=matchRoutes(rn,st.history.location,an),uo=null;if(to==null){let xp=getInternalRouterError(404,{pathname:st.history.location.pathname}),{matches:wp,route:Ep}=getShortCircuitMatches(rn);to=wp,uo={[Ep.id]:xp}}let co=!to.some(xp=>xp.route.lazy)&&(!to.some(xp=>xp.route.loader)||st.hydrationData!=null),Uo,lo={historyAction:st.history.action,location:st.history.location,matches:to,initialized:co,navigation:IDLE_NAVIGATION,restoreScrollPosition:st.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:st.hydrationData&&st.hydrationData.loaderData||{},actionData:st.hydrationData&&st.hydrationData.actionData||null,errors:st.hydrationData&&st.hydrationData.errors||uo,fetchers:new Map,blockers:new Map},ho=Action.Pop,fo=!1,mo,_d=!1,ep=!1,rp=[],ap=[],sp=new Map,up=0,pp=-1,hp=new Map,vp=new Set,gp=new Map,mp=new Map,lp=new Map,cp=!1;function tp(){return sn=st.history.listen(xp=>{let{action:wp,location:Ep,delta:$p}=xp;if(cp){cp=!1;return}warning(lp.size===0||$p!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Pp=Zp({currentLocation:lo.location,nextLocation:Ep,historyAction:wp});if(Pp&&$p!=null){cp=!0,st.history.go($p*-1),Xp(Pp,{state:"blocked",location:Ep,proceed(){Xp(Pp,{state:"proceeding",proceed:void 0,reset:void 0,location:Ep}),st.history.go($p)},reset(){Kp(Pp),dp({blockers:new Map(Uo.state.blockers)})}});return}return Cp(wp,Ep)}),lo.initialized||Cp(Action.Pop,lo.location),Uo}function np(){sn&&sn(),ln.clear(),mo&&mo.abort(),lo.fetchers.forEach((xp,wp)=>Vp(wp)),lo.blockers.forEach((xp,wp)=>Kp(wp))}function fp(xp){return ln.add(xp),()=>ln.delete(xp)}function dp(xp){lo=_extends$3({},lo,xp),ln.forEach(wp=>wp(lo))}function yp(xp,wp){var Ep,$p;let Pp=lo.actionData!=null&&lo.navigation.formMethod!=null&&isMutationMethod(lo.navigation.formMethod)&&lo.navigation.state==="loading"&&((Ep=xp.state)==null?void 0:Ep._isRedirect)!==!0,Fp;wp.actionData?Object.keys(wp.actionData).length>0?Fp=wp.actionData:Fp=null:Pp?Fp=lo.actionData:Fp=null;let Np=wp.loaderData?mergeLoaderData(lo.loaderData,wp.loaderData,wp.matches||[],wp.errors):lo.loaderData;for(let[Ip]of lp)Kp(Ip);let Op=fo===!0||lo.navigation.formMethod!=null&&isMutationMethod(lo.navigation.formMethod)&&(($p=xp.state)==null?void 0:$p._isRedirect)!==!0;nn&&(rn=nn,nn=void 0),dp(_extends$3({},wp,{actionData:Fp,loaderData:Np,historyAction:ho,location:xp,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:e0(xp,wp.matches||lo.matches),preventScrollReset:Op,blockers:new Map(lo.blockers)})),_d||ho===Action.Pop||(ho===Action.Push?st.history.push(xp,xp.state):ho===Action.Replace&&st.history.replace(xp,xp.state)),ho=Action.Pop,fo=!1,_d=!1,ep=!1,rp=[],ap=[]}async function bp(xp,wp){if(typeof xp=="number"){st.history.go(xp);return}let Ep=normalizeTo(lo.location,lo.matches,an,on.v7_prependBasename,xp,wp==null?void 0:wp.fromRouteId,wp==null?void 0:wp.relative),{path:$p,submission:Pp,error:Fp}=normalizeNavigateOptions(on.v7_normalizeFormMethod,!1,Ep,wp),Np=lo.location,Op=createLocation(lo.location,$p,wp&&wp.state);Op=_extends$3({},Op,st.history.encodeLocation(Op));let Ip=wp&&wp.replace!=null?wp.replace:void 0,Gp=Action.Push;Ip===!0?Gp=Action.Replace:Ip===!1||Pp!=null&&isMutationMethod(Pp.formMethod)&&Pp.formAction===lo.location.pathname+lo.location.search&&(Gp=Action.Replace);let zp=wp&&"preventScrollReset"in wp?wp.preventScrollReset===!0:void 0,a0=Zp({currentLocation:Np,nextLocation:Op,historyAction:Gp});if(a0){Xp(a0,{state:"blocked",location:Op,proceed(){Xp(a0,{state:"proceeding",proceed:void 0,reset:void 0,location:Op}),bp(xp,wp)},reset(){Kp(a0),dp({blockers:new Map(lo.blockers)})}});return}return await Cp(Gp,Op,{submission:Pp,pendingError:Fp,preventScrollReset:zp,replace:wp&&wp.replace})}function _p(){if(kp(),dp({revalidation:"loading"}),lo.navigation.state!=="submitting"){if(lo.navigation.state==="idle"){Cp(lo.historyAction,lo.location,{startUninterruptedRevalidation:!0});return}Cp(ho||lo.historyAction,lo.navigation.location,{overrideNavigation:lo.navigation})}}async function Cp(xp,wp,Ep){mo&&mo.abort(),mo=null,ho=xp,_d=(Ep&&Ep.startUninterruptedRevalidation)===!0,i0(lo.location,lo.matches),fo=(Ep&&Ep.preventScrollReset)===!0;let $p=nn||rn,Pp=Ep&&Ep.overrideNavigation,Fp=matchRoutes($p,wp,an);if(!Fp){let t0=getInternalRouterError(404,{pathname:wp.pathname}),{matches:r0,route:s0}=getShortCircuitMatches($p);Jp(),yp(wp,{matches:r0,loaderData:{},errors:{[s0.id]:t0}});return}if(isHashChangeOnly(lo.location,wp)&&!(Ep&&Ep.submission&&isMutationMethod(Ep.submission.formMethod))){yp(wp,{matches:Fp});return}mo=new AbortController;let Np=createClientSideRequest(st.history,wp,mo.signal,Ep&&Ep.submission),Op,Ip;if(Ep&&Ep.pendingError)Ip={[findNearestBoundary(Fp).route.id]:Ep.pendingError};else if(Ep&&Ep.submission&&isMutationMethod(Ep.submission.formMethod)){let t0=await Sp(Np,wp,Ep.submission,Fp,{replace:Ep.replace});if(t0.shortCircuited)return;Op=t0.pendingActionData,Ip=t0.pendingActionError,Pp=_extends$3({state:"loading",location:wp},Ep.submission),Np=new Request(Np.url,{signal:Np.signal})}let{shortCircuited:Gp,loaderData:zp,errors:a0}=await Rp(Np,wp,Fp,Pp,Ep&&Ep.submission,Ep&&Ep.fetcherSubmission,Ep&&Ep.replace,Op,Ip);Gp||(mo=null,yp(wp,_extends$3({matches:Fp},Op?{actionData:Op}:{},{loaderData:zp,errors:a0})))}async function Sp(xp,wp,Ep,$p,Pp){kp();let Fp=_extends$3({state:"submitting",location:wp},Ep);dp({navigation:Fp});let Np,Op=getTargetMatch($p,wp);if(!Op.route.action&&!Op.route.lazy)Np={type:ResultType.error,error:getInternalRouterError(405,{method:xp.method,pathname:wp.pathname,routeId:Op.route.id})};else if(Np=await callLoaderOrAction("action",xp,Op,$p,Xr,Mt,an),xp.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Np)){let Ip;return Pp&&Pp.replace!=null?Ip=Pp.replace:Ip=Np.location===lo.location.pathname+lo.location.search,await Mp(lo,Np,{submission:Ep,replace:Ip}),{shortCircuited:!0}}if(isErrorResult(Np)){let Ip=findNearestBoundary($p,Op.route.id);return(Pp&&Pp.replace)!==!0&&(ho=Action.Push),{pendingActionData:{},pendingActionError:{[Ip.route.id]:Np.error}}}if(isDeferredResult(Np))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Op.route.id]:Np.data}}}async function Rp(xp,wp,Ep,$p,Pp,Fp,Np,Op,Ip){let Gp=$p;Gp||(Gp=_extends$3({state:"loading",location:wp,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Pp));let zp=Pp||Fp?Pp||Fp:Gp.formMethod&&Gp.formAction&&Gp.formData&&Gp.formEncType?{formMethod:Gp.formMethod,formAction:Gp.formAction,formData:Gp.formData,formEncType:Gp.formEncType}:void 0,a0=nn||rn,[t0,r0]=getMatchesToLoad(st.history,lo,Ep,zp,wp,ep,rp,ap,gp,a0,an,Op,Ip);if(Jp(Yp=>!(Ep&&Ep.some(l0=>l0.route.id===Yp))||t0&&t0.some(l0=>l0.route.id===Yp)),t0.length===0&&r0.length===0){let Yp=Up();return yp(wp,_extends$3({matches:Ep,loaderData:{},errors:Ip||null},Op?{actionData:Op}:{},Yp?{fetchers:new Map(lo.fetchers)}:{})),{shortCircuited:!0}}if(!_d){r0.forEach(l0=>{let h0=lo.fetchers.get(l0.key),b0={state:"loading",data:h0&&h0.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lo.fetchers.set(l0.key,b0)});let Yp=Op||lo.actionData;dp(_extends$3({navigation:Gp},Yp?Object.keys(Yp).length===0?{actionData:null}:{actionData:Yp}:{},r0.length>0?{fetchers:new Map(lo.fetchers)}:{}))}pp=++up,r0.forEach(Yp=>{Yp.controller&&sp.set(Yp.key,Yp.controller)});let s0=()=>r0.forEach(Yp=>Wp(Yp.key));mo&&mo.signal.addEventListener("abort",s0);let{results:f0,loaderResults:v0,fetcherResults:d0}=await Ap(lo.matches,Ep,t0,r0,xp);if(xp.signal.aborted)return{shortCircuited:!0};mo&&mo.signal.removeEventListener("abort",s0),r0.forEach(Yp=>sp.delete(Yp.key));let c0=findRedirect(f0);if(c0)return await Mp(lo,c0,{replace:Np}),{shortCircuited:!0};let{loaderData:p0,errors:g0}=processLoaderData(lo,Ep,t0,v0,Ip,r0,d0,mp);mp.forEach((Yp,l0)=>{Yp.subscribe(h0=>{(h0||Yp.done)&&mp.delete(l0)})});let y0=Up(),x0=Qp(pp),m0=y0||x0||r0.length>0;return _extends$3({loaderData:p0,errors:g0},m0?{fetchers:new Map(lo.fetchers)}:{})}function Dp(xp){return lo.fetchers.get(xp)||IDLE_FETCHER}function Lp(xp,wp,Ep,$p){if(isServer)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");sp.has(xp)&&Wp(xp);let Pp=nn||rn,Fp=normalizeTo(lo.location,lo.matches,an,on.v7_prependBasename,Ep,wp,$p==null?void 0:$p.relative),Np=matchRoutes(Pp,Fp,an);if(!Np){jp(xp,wp,getInternalRouterError(404,{pathname:Fp}));return}let{path:Op,submission:Ip}=normalizeNavigateOptions(on.v7_normalizeFormMethod,!0,Fp,$p),Gp=getTargetMatch(Np,Op);if(fo=($p&&$p.preventScrollReset)===!0,Ip&&isMutationMethod(Ip.formMethod)){Bp(xp,wp,Op,Gp,Np,Ip);return}gp.set(xp,{routeId:wp,path:Op}),Tp(xp,wp,Op,Gp,Np,Ip)}async function Bp(xp,wp,Ep,$p,Pp,Fp){if(kp(),gp.delete(xp),!$p.route.action&&!$p.route.lazy){let o0=getInternalRouterError(405,{method:Fp.formMethod,pathname:Ep,routeId:wp});jp(xp,wp,o0);return}let Np=lo.fetchers.get(xp),Op=_extends$3({state:"submitting"},Fp,{data:Np&&Np.data," _hasFetcherDoneAnything ":!0});lo.fetchers.set(xp,Op),dp({fetchers:new Map(lo.fetchers)});let Ip=new AbortController,Gp=createClientSideRequest(st.history,Ep,Ip.signal,Fp);sp.set(xp,Ip);let zp=await callLoaderOrAction("action",Gp,$p,Pp,Xr,Mt,an);if(Gp.signal.aborted){sp.get(xp)===Ip&&sp.delete(xp);return}if(isRedirectResult(zp)){sp.delete(xp),vp.add(xp);let o0=_extends$3({state:"loading"},Fp,{data:void 0," _hasFetcherDoneAnything ":!0});return lo.fetchers.set(xp,o0),dp({fetchers:new Map(lo.fetchers)}),Mp(lo,zp,{submission:Fp,isFetchActionRedirect:!0})}if(isErrorResult(zp)){jp(xp,wp,zp.error);return}if(isDeferredResult(zp))throw getInternalRouterError(400,{type:"defer-action"});let a0=lo.navigation.location||lo.location,t0=createClientSideRequest(st.history,a0,Ip.signal),r0=nn||rn,s0=lo.navigation.state!=="idle"?matchRoutes(r0,lo.navigation.location,an):lo.matches;invariant(s0,"Didn't find any matches after fetcher action");let f0=++up;hp.set(xp,f0);let v0=_extends$3({state:"loading",data:zp.data},Fp,{" _hasFetcherDoneAnything ":!0});lo.fetchers.set(xp,v0);let[d0,c0]=getMatchesToLoad(st.history,lo,s0,Fp,a0,ep,rp,ap,gp,r0,an,{[$p.route.id]:zp.data},void 0);c0.filter(o0=>o0.key!==xp).forEach(o0=>{let w0=o0.key,_0=lo.fetchers.get(w0),E0={state:"loading",data:_0&&_0.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lo.fetchers.set(w0,E0),o0.controller&&sp.set(w0,o0.controller)}),dp({fetchers:new Map(lo.fetchers)});let p0=()=>c0.forEach(o0=>Wp(o0.key));Ip.signal.addEventListener("abort",p0);let{results:g0,loaderResults:y0,fetcherResults:x0}=await Ap(lo.matches,s0,d0,c0,t0);if(Ip.signal.aborted)return;Ip.signal.removeEventListener("abort",p0),hp.delete(xp),sp.delete(xp),c0.forEach(o0=>sp.delete(o0.key));let m0=findRedirect(g0);if(m0)return Mp(lo,m0);let{loaderData:Yp,errors:l0}=processLoaderData(lo,lo.matches,d0,y0,void 0,c0,x0,mp),h0={state:"idle",data:zp.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lo.fetchers.set(xp,h0);let b0=Qp(f0);lo.navigation.state==="loading"&&f0>pp?(invariant(ho,"Expected pending action"),mo&&mo.abort(),yp(lo.navigation.location,{matches:s0,loaderData:Yp,errors:l0,fetchers:new Map(lo.fetchers)})):(dp(_extends$3({errors:l0,loaderData:mergeLoaderData(lo.loaderData,Yp,s0,l0)},b0?{fetchers:new Map(lo.fetchers)}:{})),ep=!1)}async function Tp(xp,wp,Ep,$p,Pp,Fp){let Np=lo.fetchers.get(xp),Op=_extends$3({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Fp,{data:Np&&Np.data," _hasFetcherDoneAnything ":!0});lo.fetchers.set(xp,Op),dp({fetchers:new Map(lo.fetchers)});let Ip=new AbortController,Gp=createClientSideRequest(st.history,Ep,Ip.signal);sp.set(xp,Ip);let zp=await callLoaderOrAction("loader",Gp,$p,Pp,Xr,Mt,an);if(isDeferredResult(zp)&&(zp=await resolveDeferredData(zp,Gp.signal,!0)||zp),sp.get(xp)===Ip&&sp.delete(xp),Gp.signal.aborted)return;if(isRedirectResult(zp)){vp.add(xp),await Mp(lo,zp);return}if(isErrorResult(zp)){let t0=findNearestBoundary(lo.matches,wp);lo.fetchers.delete(xp),dp({fetchers:new Map(lo.fetchers),errors:{[t0.route.id]:zp.error}});return}invariant(!isDeferredResult(zp),"Unhandled fetcher deferred data");let a0={state:"idle",data:zp.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lo.fetchers.set(xp,a0),dp({fetchers:new Map(lo.fetchers)})}async function Mp(xp,wp,Ep){var $p;let{submission:Pp,replace:Fp,isFetchActionRedirect:Np}=Ep===void 0?{}:Ep;wp.revalidate&&(ep=!0);let Op=createLocation(xp.location,wp.location,_extends$3({_isRedirect:!0},Np?{_isFetchActionRedirect:!0}:{}));if(invariant(Op,"Expected a location on the redirect navigation"),ABSOLUTE_URL_REGEX$1.test(wp.location)&&isBrowser$3&&typeof(($p=window)==null?void 0:$p.location)<"u"){let r0=st.history.createURL(wp.location),s0=stripBasename(r0.pathname,an)==null;if(window.location.origin!==r0.origin||s0){Fp?window.location.replace(wp.location):window.location.assign(wp.location);return}}mo=null;let Ip=Fp===!0?Action.Replace:Action.Push,{formMethod:Gp,formAction:zp,formEncType:a0,formData:t0}=xp.navigation;!Pp&&Gp&&zp&&t0&&a0&&(Pp={formMethod:Gp,formAction:zp,formEncType:a0,formData:t0}),redirectPreserveMethodStatusCodes.has(wp.status)&&Pp&&isMutationMethod(Pp.formMethod)?await Cp(Ip,Op,{submission:_extends$3({},Pp,{formAction:wp.location}),preventScrollReset:fo}):Np?await Cp(Ip,Op,{overrideNavigation:{state:"loading",location:Op,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:Pp,preventScrollReset:fo}):await Cp(Ip,Op,{overrideNavigation:{state:"loading",location:Op,formMethod:Pp?Pp.formMethod:void 0,formAction:Pp?Pp.formAction:void 0,formEncType:Pp?Pp.formEncType:void 0,formData:Pp?Pp.formData:void 0},preventScrollReset:fo})}async function Ap(xp,wp,Ep,$p,Pp){let Fp=await Promise.all([...Ep.map(Ip=>callLoaderOrAction("loader",Pp,Ip,wp,Xr,Mt,an)),...$p.map(Ip=>Ip.matches&&Ip.match&&Ip.controller?callLoaderOrAction("loader",createClientSideRequest(st.history,Ip.path,Ip.controller.signal),Ip.match,Ip.matches,Xr,Mt,an):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Ip.path})})]),Np=Fp.slice(0,Ep.length),Op=Fp.slice(Ep.length);return await Promise.all([resolveDeferredResults(xp,Ep,Np,Np.map(()=>Pp.signal),!1,lo.loaderData),resolveDeferredResults(xp,$p.map(Ip=>Ip.match),Op,$p.map(Ip=>Ip.controller?Ip.controller.signal:null),!0)]),{results:Fp,loaderResults:Np,fetcherResults:Op}}function kp(){ep=!0,rp.push(...Jp()),gp.forEach((xp,wp)=>{sp.has(wp)&&(ap.push(wp),Wp(wp))})}function jp(xp,wp,Ep){let $p=findNearestBoundary(lo.matches,wp);Vp(xp),dp({errors:{[$p.route.id]:Ep},fetchers:new Map(lo.fetchers)})}function Vp(xp){sp.has(xp)&&Wp(xp),gp.delete(xp),hp.delete(xp),vp.delete(xp),lo.fetchers.delete(xp)}function Wp(xp){let wp=sp.get(xp);invariant(wp,"Expected fetch controller: "+xp),wp.abort(),sp.delete(xp)}function qp(xp){for(let wp of xp){let $p={state:"idle",data:Dp(wp).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lo.fetchers.set(wp,$p)}}function Up(){let xp=[],wp=!1;for(let Ep of vp){let $p=lo.fetchers.get(Ep);invariant($p,"Expected fetcher: "+Ep),$p.state==="loading"&&(vp.delete(Ep),xp.push(Ep),wp=!0)}return qp(xp),wp}function Qp(xp){let wp=[];for(let[Ep,$p]of hp)if($p<xp){let Pp=lo.fetchers.get(Ep);invariant(Pp,"Expected fetcher: "+Ep),Pp.state==="loading"&&(Wp(Ep),hp.delete(Ep),wp.push(Ep))}return qp(wp),wp.length>0}function Hp(xp,wp){let Ep=lo.blockers.get(xp)||IDLE_BLOCKER;return lp.get(xp)!==wp&&lp.set(xp,wp),Ep}function Kp(xp){lo.blockers.delete(xp),lp.delete(xp)}function Xp(xp,wp){let Ep=lo.blockers.get(xp)||IDLE_BLOCKER;invariant(Ep.state==="unblocked"&&wp.state==="blocked"||Ep.state==="blocked"&&wp.state==="blocked"||Ep.state==="blocked"&&wp.state==="proceeding"||Ep.state==="blocked"&&wp.state==="unblocked"||Ep.state==="proceeding"&&wp.state==="unblocked","Invalid blocker state transition: "+Ep.state+" -> "+wp.state),lo.blockers.set(xp,wp),dp({blockers:new Map(lo.blockers)})}function Zp(xp){let{currentLocation:wp,nextLocation:Ep,historyAction:$p}=xp;if(lp.size===0)return;lp.size>1&&warning(!1,"A router only supports one blocker at a time");let Pp=Array.from(lp.entries()),[Fp,Np]=Pp[Pp.length-1],Op=lo.blockers.get(Fp);if(!(Op&&Op.state==="proceeding")&&Np({currentLocation:wp,nextLocation:Ep,historyAction:$p}))return Fp}function Jp(xp){let wp=[];return mp.forEach((Ep,$p)=>{(!xp||xp($p))&&(Ep.cancel(),wp.push($p),mp.delete($p))}),wp}function n0(xp,wp,Ep){if(un=xp,hn=wp,cn=Ep||($p=>$p.key),!fn&&lo.navigation===IDLE_NAVIGATION){fn=!0;let $p=e0(lo.location,lo.matches);$p!=null&&dp({restoreScrollPosition:$p})}return()=>{un=null,hn=null,cn=null}}function i0(xp,wp){if(un&&cn&&hn){let Ep=wp.map(Pp=>createUseMatchesMatch(Pp,lo.loaderData)),$p=cn(xp,Ep)||xp.key;un[$p]=hn()}}function e0(xp,wp){if(un&&cn&&hn){let Ep=wp.map(Fp=>createUseMatchesMatch(Fp,lo.loaderData)),$p=cn(xp,Ep)||xp.key,Pp=un[$p];if(typeof Pp=="number")return Pp}return null}function u0(xp){nn=xp}return Uo={get basename(){return an},get state(){return lo},get routes(){return rn},initialize:tp,subscribe:fp,enableScrollRestoration:n0,navigate:bp,fetch:Lp,revalidate:_p,createHref:xp=>st.history.createHref(xp),encodeLocation:xp=>st.history.encodeLocation(xp),getFetcher:Dp,deleteFetcher:Vp,dispose:np,getBlocker:Hp,deleteBlocker:Kp,_internalFetchControllers:sp,_internalActiveDeferreds:mp,_internalSetRoutes:u0},Uo}function isSubmissionNavigation(st){return st!=null&&"formData"in st}function normalizeTo(st,Mt,Xr,rn,nn,an,on){let sn,ln;if(an!=null&&on!=="path"){sn=[];for(let cn of Mt)if(sn.push(cn),cn.route.id===an){ln=cn;break}}else sn=Mt,ln=Mt[Mt.length-1];let un=resolveTo(nn||".",getPathContributingMatches(sn).map(cn=>cn.pathnameBase),stripBasename(st.pathname,Xr)||st.pathname,on==="path");return nn==null&&(un.search=st.search,un.hash=st.hash),(nn==null||nn===""||nn===".")&&ln&&ln.route.index&&!hasNakedIndexQuery(un.search)&&(un.search=un.search?un.search.replace(/^\?/,"?index&"):"?index"),rn&&Xr!=="/"&&(un.pathname=un.pathname==="/"?Xr:joinPaths([Xr,un.pathname])),createPath(un)}function normalizeNavigateOptions(st,Mt,Xr,rn){if(!rn||!isSubmissionNavigation(rn))return{path:Xr};if(rn.formMethod&&!isValidMethod(rn.formMethod))return{path:Xr,error:getInternalRouterError(405,{method:rn.formMethod})};let nn;if(rn.formData){let sn=rn.formMethod||"get";if(nn={formMethod:st?sn.toUpperCase():sn.toLowerCase(),formAction:stripHashFromPath(Xr),formEncType:rn&&rn.formEncType||"application/x-www-form-urlencoded",formData:rn.formData},isMutationMethod(nn.formMethod))return{path:Xr,submission:nn}}let an=parsePath(Xr),on=convertFormDataToSearchParams(rn.formData);return Mt&&an.search&&hasNakedIndexQuery(an.search)&&on.append("index",""),an.search="?"+on,{path:createPath(an),submission:nn}}function getLoaderMatchesUntilBoundary(st,Mt){let Xr=st;if(Mt){let rn=st.findIndex(nn=>nn.route.id===Mt);rn>=0&&(Xr=st.slice(0,rn))}return Xr}function getMatchesToLoad(st,Mt,Xr,rn,nn,an,on,sn,ln,un,cn,hn,fn){let to=fn?Object.values(fn)[0]:hn?Object.values(hn)[0]:void 0,uo=st.createURL(Mt.location),co=st.createURL(nn),Uo=fn?Object.keys(fn)[0]:void 0,ho=getLoaderMatchesUntilBoundary(Xr,Uo).filter((mo,_d)=>{if(mo.route.lazy)return!0;if(mo.route.loader==null)return!1;if(isNewLoader(Mt.loaderData,Mt.matches[_d],mo)||on.some(ap=>ap===mo.route.id))return!0;let ep=Mt.matches[_d],rp=mo;return shouldRevalidateLoader(mo,_extends$3({currentUrl:uo,currentParams:ep.params,nextUrl:co,nextParams:rp.params},rn,{actionResult:to,defaultShouldRevalidate:an||uo.pathname+uo.search===co.pathname+co.search||uo.search!==co.search||isNewRouteInstance(ep,rp)}))}),fo=[];return ln.forEach((mo,_d)=>{if(!Xr.some(sp=>sp.route.id===mo.routeId))return;let ep=matchRoutes(un,mo.path,cn);if(!ep){fo.push({key:_d,routeId:mo.routeId,path:mo.path,matches:null,match:null,controller:null});return}let rp=getTargetMatch(ep,mo.path);if(sn.includes(_d)){fo.push({key:_d,routeId:mo.routeId,path:mo.path,matches:ep,match:rp,controller:new AbortController});return}shouldRevalidateLoader(rp,_extends$3({currentUrl:uo,currentParams:Mt.matches[Mt.matches.length-1].params,nextUrl:co,nextParams:Xr[Xr.length-1].params},rn,{actionResult:to,defaultShouldRevalidate:an}))&&fo.push({key:_d,routeId:mo.routeId,path:mo.path,matches:ep,match:rp,controller:new AbortController})}),[ho,fo]}function isNewLoader(st,Mt,Xr){let rn=!Mt||Xr.route.id!==Mt.route.id,nn=st[Xr.route.id]===void 0;return rn||nn}function isNewRouteInstance(st,Mt){let Xr=st.route.path;return st.pathname!==Mt.pathname||Xr!=null&&Xr.endsWith("*")&&st.params["*"]!==Mt.params["*"]}function shouldRevalidateLoader(st,Mt){if(st.route.shouldRevalidate){let Xr=st.route.shouldRevalidate(Mt);if(typeof Xr=="boolean")return Xr}return Mt.defaultShouldRevalidate}async function loadLazyRouteModule(st,Mt,Xr){if(!st.lazy)return;let rn=await st.lazy();if(!st.lazy)return;let nn=Xr[st.id];invariant(nn,"No route found in manifest");let an={};for(let on in rn){let ln=nn[on]!==void 0&&on!=="hasErrorBoundary";warning(!ln,'Route "'+nn.id+'" has a static property "'+on+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+on+'" will be ignored.')),!ln&&!immutableRouteKeys.has(on)&&(an[on]=rn[on])}Object.assign(nn,an),Object.assign(nn,_extends$3({},Mt(nn),{lazy:void 0}))}async function callLoaderOrAction(st,Mt,Xr,rn,nn,an,on,sn,ln,un){sn===void 0&&(sn=!1),ln===void 0&&(ln=!1);let cn,hn,fn,to=Uo=>{let lo,ho=new Promise((fo,mo)=>lo=mo);return fn=()=>lo(),Mt.signal.addEventListener("abort",fn),Promise.race([Uo({request:Mt,params:Xr.params,context:un}),ho])};try{let Uo=Xr.route[st];if(Xr.route.lazy)if(Uo)hn=(await Promise.all([to(Uo),loadLazyRouteModule(Xr.route,an,nn)]))[0];else if(await loadLazyRouteModule(Xr.route,an,nn),Uo=Xr.route[st],Uo)hn=await to(Uo);else if(st==="action"){let lo=new URL(Mt.url),ho=lo.pathname+lo.search;throw getInternalRouterError(405,{method:Mt.method,pathname:ho,routeId:Xr.route.id})}else return{type:ResultType.data,data:void 0};else if(Uo)hn=await to(Uo);else{let lo=new URL(Mt.url),ho=lo.pathname+lo.search;throw getInternalRouterError(404,{pathname:ho})}invariant(hn!==void 0,"You defined "+(st==="action"?"an action":"a loader")+" for route "+('"'+Xr.route.id+"\" but didn't return anything from your `"+st+"` ")+"function. Please return a value or `null`.")}catch(Uo){cn=ResultType.error,hn=Uo}finally{fn&&Mt.signal.removeEventListener("abort",fn)}if(isResponse(hn)){let Uo=hn.status;if(redirectStatusCodes.has(Uo)){let fo=hn.headers.get("Location");if(invariant(fo,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(fo))fo=normalizeTo(new URL(Mt.url),rn.slice(0,rn.indexOf(Xr)+1),on,!0,fo);else if(!sn){let mo=new URL(Mt.url),_d=fo.startsWith("//")?new URL(mo.protocol+fo):new URL(fo),ep=stripBasename(_d.pathname,on)!=null;_d.origin===mo.origin&&ep&&(fo=_d.pathname+_d.search+_d.hash)}if(sn)throw hn.headers.set("Location",fo),hn;return{type:ResultType.redirect,status:Uo,location:fo,revalidate:hn.headers.get("X-Remix-Revalidate")!==null}}if(ln)throw{type:cn||ResultType.data,response:hn};let lo,ho=hn.headers.get("Content-Type");return ho&&/\bapplication\/json\b/.test(ho)?lo=await hn.json():lo=await hn.text(),cn===ResultType.error?{type:cn,error:new ErrorResponse(Uo,hn.statusText,lo),headers:hn.headers}:{type:ResultType.data,data:lo,statusCode:hn.status,headers:hn.headers}}if(cn===ResultType.error)return{type:cn,error:hn};if(isDeferredData(hn)){var uo,co;return{type:ResultType.deferred,deferredData:hn,statusCode:(uo=hn.init)==null?void 0:uo.status,headers:((co=hn.init)==null?void 0:co.headers)&&new Headers(hn.init.headers)}}return{type:ResultType.data,data:hn}}function createClientSideRequest(st,Mt,Xr,rn){let nn=st.createURL(stripHashFromPath(Mt)).toString(),an={signal:Xr};if(rn&&isMutationMethod(rn.formMethod)){let{formMethod:on,formEncType:sn,formData:ln}=rn;an.method=on.toUpperCase(),an.body=sn==="application/x-www-form-urlencoded"?convertFormDataToSearchParams(ln):ln}return new Request(nn,an)}function convertFormDataToSearchParams(st){let Mt=new URLSearchParams;for(let[Xr,rn]of st.entries())Mt.append(Xr,rn instanceof File?rn.name:rn);return Mt}function processRouteLoaderData(st,Mt,Xr,rn,nn){let an={},on=null,sn,ln=!1,un={};return Xr.forEach((cn,hn)=>{let fn=Mt[hn].route.id;if(invariant(!isRedirectResult(cn),"Cannot handle redirect results in processLoaderData"),isErrorResult(cn)){let to=findNearestBoundary(st,fn),uo=cn.error;rn&&(uo=Object.values(rn)[0],rn=void 0),on=on||{},on[to.route.id]==null&&(on[to.route.id]=uo),an[fn]=void 0,ln||(ln=!0,sn=isRouteErrorResponse(cn.error)?cn.error.status:500),cn.headers&&(un[fn]=cn.headers)}else isDeferredResult(cn)?(nn.set(fn,cn.deferredData),an[fn]=cn.deferredData.data):an[fn]=cn.data,cn.statusCode!=null&&cn.statusCode!==200&&!ln&&(sn=cn.statusCode),cn.headers&&(un[fn]=cn.headers)}),rn&&(on=rn,an[Object.keys(rn)[0]]=void 0),{loaderData:an,errors:on,statusCode:sn||200,loaderHeaders:un}}function processLoaderData(st,Mt,Xr,rn,nn,an,on,sn){let{loaderData:ln,errors:un}=processRouteLoaderData(Mt,Xr,rn,nn,sn);for(let cn=0;cn<an.length;cn++){let{key:hn,match:fn,controller:to}=an[cn];invariant(on!==void 0&&on[cn]!==void 0,"Did not find corresponding fetcher result");let uo=on[cn];if(!(to&&to.signal.aborted))if(isErrorResult(uo)){let co=findNearestBoundary(st.matches,fn==null?void 0:fn.route.id);un&&un[co.route.id]||(un=_extends$3({},un,{[co.route.id]:uo.error})),st.fetchers.delete(hn)}else if(isRedirectResult(uo))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(uo))invariant(!1,"Unhandled fetcher deferred data");else{let co={state:"idle",data:uo.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};st.fetchers.set(hn,co)}}return{loaderData:ln,errors:un}}function mergeLoaderData(st,Mt,Xr,rn){let nn=_extends$3({},Mt);for(let an of Xr){let on=an.route.id;if(Mt.hasOwnProperty(on)?Mt[on]!==void 0&&(nn[on]=Mt[on]):st[on]!==void 0&&an.route.loader&&(nn[on]=st[on]),rn&&rn.hasOwnProperty(on))break}return nn}function findNearestBoundary(st,Mt){return(Mt?st.slice(0,st.findIndex(rn=>rn.route.id===Mt)+1):[...st]).reverse().find(rn=>rn.route.hasErrorBoundary===!0)||st[0]}function getShortCircuitMatches(st){let Mt=st.find(Xr=>Xr.index||!Xr.path||Xr.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:Mt}],route:Mt}}function getInternalRouterError(st,Mt){let{pathname:Xr,routeId:rn,method:nn,type:an}=Mt===void 0?{}:Mt,on="Unknown Server Error",sn="Unknown @remix-run/router error";return st===400?(on="Bad Request",nn&&Xr&&rn?sn="You made a "+nn+' request to "'+Xr+'" but '+('did not provide a `loader` for route "'+rn+'", ')+"so there is no way to handle the request.":an==="defer-action"&&(sn="defer() is not supported in actions")):st===403?(on="Forbidden",sn='Route "'+rn+'" does not match URL "'+Xr+'"'):st===404?(on="Not Found",sn='No route matches URL "'+Xr+'"'):st===405&&(on="Method Not Allowed",nn&&Xr&&rn?sn="You made a "+nn.toUpperCase()+' request to "'+Xr+'" but '+('did not provide an `action` for route "'+rn+'", ')+"so there is no way to handle the request.":nn&&(sn='Invalid request method "'+nn.toUpperCase()+'"')),new ErrorResponse(st||500,on,new Error(sn),!0)}function findRedirect(st){for(let Mt=st.length-1;Mt>=0;Mt--){let Xr=st[Mt];if(isRedirectResult(Xr))return Xr}}function stripHashFromPath(st){let Mt=typeof st=="string"?parsePath(st):st;return createPath(_extends$3({},Mt,{hash:""}))}function isHashChangeOnly(st,Mt){return st.pathname!==Mt.pathname||st.search!==Mt.search?!1:st.hash===""?Mt.hash!=="":st.hash===Mt.hash?!0:Mt.hash!==""}function isDeferredResult(st){return st.type===ResultType.deferred}function isErrorResult(st){return st.type===ResultType.error}function isRedirectResult(st){return(st&&st.type)===ResultType.redirect}function isDeferredData(st){let Mt=st;return Mt&&typeof Mt=="object"&&typeof Mt.data=="object"&&typeof Mt.subscribe=="function"&&typeof Mt.cancel=="function"&&typeof Mt.resolveData=="function"}function isResponse(st){return st!=null&&typeof st.status=="number"&&typeof st.statusText=="string"&&typeof st.headers=="object"&&typeof st.body<"u"}function isValidMethod(st){return validRequestMethods.has(st.toLowerCase())}function isMutationMethod(st){return validMutationMethods.has(st.toLowerCase())}async function resolveDeferredResults(st,Mt,Xr,rn,nn,an){for(let on=0;on<Xr.length;on++){let sn=Xr[on],ln=Mt[on];if(!ln)continue;let un=st.find(hn=>hn.route.id===ln.route.id),cn=un!=null&&!isNewRouteInstance(un,ln)&&(an&&an[ln.route.id])!==void 0;if(isDeferredResult(sn)&&(nn||cn)){let hn=rn[on];invariant(hn,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(sn,hn,nn).then(fn=>{fn&&(Xr[on]=fn||Xr[on])})}}}async function resolveDeferredData(st,Mt,Xr){if(Xr===void 0&&(Xr=!1),!await st.deferredData.resolveData(Mt)){if(Xr)try{return{type:ResultType.data,data:st.deferredData.unwrappedData}}catch(nn){return{type:ResultType.error,error:nn}}return{type:ResultType.data,data:st.deferredData.data}}}function hasNakedIndexQuery(st){return new URLSearchParams(st).getAll("index").some(Mt=>Mt==="")}function createUseMatchesMatch(st,Mt){let{route:Xr,pathname:rn,params:nn}=st;return{id:Xr.id,pathname:rn,params:nn,data:Mt[Xr.id],handle:Xr.handle}}function getTargetMatch(st,Mt){let Xr=typeof Mt=="string"?parsePath(Mt).search:Mt.search;if(st[st.length-1].route.index&&hasNakedIndexQuery(Xr||""))return st[st.length-1];let rn=getPathContributingMatches(st);return rn[rn.length-1]}/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(st){for(var Mt=1;Mt<arguments.length;Mt++){var Xr=arguments[Mt];for(var rn in Xr)Object.prototype.hasOwnProperty.call(Xr,rn)&&(st[rn]=Xr[rn])}return st},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(st,Mt){let{relative:Xr}=Mt===void 0?{}:Mt;useInRouterContext()||invariant(!1);let{basename:rn,navigator:nn}=reactExports.useContext(NavigationContext),{hash:an,pathname:on,search:sn}=useResolvedPath(st,{relative:Xr}),ln=on;return rn!=="/"&&(ln=on==="/"?rn:joinPaths([rn,on])),nn.createHref({pathname:ln,search:sn,hash:an})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(st){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(st)}function useNavigate(){let{isDataRoute:st}=reactExports.useContext(RouteContext);return st?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let{basename:st,navigator:Mt}=reactExports.useContext(NavigationContext),{matches:Xr}=reactExports.useContext(RouteContext),{pathname:rn}=useLocation(),nn=JSON.stringify(getPathContributingMatches(Xr).map(sn=>sn.pathnameBase)),an=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{an.current=!0}),reactExports.useCallback(function(sn,ln){if(ln===void 0&&(ln={}),!an.current)return;if(typeof sn=="number"){Mt.go(sn);return}let un=resolveTo(sn,JSON.parse(nn),rn,ln.relative==="path");st!=="/"&&(un.pathname=un.pathname==="/"?st:joinPaths([st,un.pathname])),(ln.replace?Mt.replace:Mt.push)(un,ln.state,ln)},[st,Mt,nn,rn])}const OutletContext=reactExports.createContext(null);function useOutlet(st){let Mt=reactExports.useContext(RouteContext).outlet;return Mt&&reactExports.createElement(OutletContext.Provider,{value:st},Mt)}function useResolvedPath(st,Mt){let{relative:Xr}=Mt===void 0?{}:Mt,{matches:rn}=reactExports.useContext(RouteContext),{pathname:nn}=useLocation(),an=JSON.stringify(getPathContributingMatches(rn).map(on=>on.pathnameBase));return reactExports.useMemo(()=>resolveTo(st,JSON.parse(an),nn,Xr==="path"),[st,an,nn,Xr])}function useRoutesImpl(st,Mt,Xr){useInRouterContext()||invariant(!1);let{navigator:rn}=reactExports.useContext(NavigationContext),{matches:nn}=reactExports.useContext(RouteContext),an=nn[nn.length-1],on=an?an.params:{};an&&an.pathname;let sn=an?an.pathnameBase:"/";an&&an.route;let ln=useLocation(),un;if(Mt){var cn;let co=typeof Mt=="string"?parsePath(Mt):Mt;sn==="/"||(cn=co.pathname)!=null&&cn.startsWith(sn)||invariant(!1),un=co}else un=ln;let hn=un.pathname||"/",fn=sn==="/"?hn:hn.slice(sn.length)||"/",to=matchRoutes(st,{pathname:fn}),uo=_renderMatches(to&&to.map(co=>Object.assign({},co,{params:Object.assign({},on,co.params),pathname:joinPaths([sn,rn.encodeLocation?rn.encodeLocation(co.pathname).pathname:co.pathname]),pathnameBase:co.pathnameBase==="/"?sn:joinPaths([sn,rn.encodeLocation?rn.encodeLocation(co.pathnameBase).pathname:co.pathnameBase])})),nn,Xr);return Mt&&uo?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},un),navigationType:Action.Pop}},uo):uo}function DefaultErrorComponent(){let st=useRouteError(),Mt=isRouteErrorResponse(st)?st.status+" "+st.statusText:st instanceof Error?st.message:JSON.stringify(st),Xr=st instanceof Error?st.stack:null,nn={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},an=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},Mt),Xr?reactExports.createElement("pre",{style:nn},Xr):null,an)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(Mt){super(Mt),this.state={location:Mt.location,revalidation:Mt.revalidation,error:Mt.error}}static getDerivedStateFromError(Mt){return{error:Mt}}static getDerivedStateFromProps(Mt,Xr){return Xr.location!==Mt.location||Xr.revalidation!=="idle"&&Mt.revalidation==="idle"?{error:Mt.error,location:Mt.location,revalidation:Mt.revalidation}:{error:Mt.error||Xr.error,location:Xr.location,revalidation:Mt.revalidation||Xr.revalidation}}componentDidCatch(Mt,Xr){console.error("React Router caught the following error during render",Mt,Xr)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(st){let{routeContext:Mt,match:Xr,children:rn}=st,nn=reactExports.useContext(DataRouterContext);return nn&&nn.static&&nn.staticContext&&(Xr.route.errorElement||Xr.route.ErrorBoundary)&&(nn.staticContext._deepestRenderedBoundaryId=Xr.route.id),reactExports.createElement(RouteContext.Provider,{value:Mt},rn)}function _renderMatches(st,Mt,Xr){var rn;if(Mt===void 0&&(Mt=[]),Xr===void 0&&(Xr=null),st==null){var nn;if((nn=Xr)!=null&&nn.errors)st=Xr.matches;else return null}let an=st,on=(rn=Xr)==null?void 0:rn.errors;if(on!=null){let sn=an.findIndex(ln=>ln.route.id&&(on==null?void 0:on[ln.route.id]));sn>=0||invariant(!1),an=an.slice(0,Math.min(an.length,sn+1))}return an.reduceRight((sn,ln,un)=>{let cn=ln.route.id?on==null?void 0:on[ln.route.id]:null,hn=null;Xr&&(hn=ln.route.errorElement||defaultErrorElement);let fn=Mt.concat(an.slice(0,un+1)),to=()=>{let uo;return cn?uo=hn:ln.route.Component?uo=reactExports.createElement(ln.route.Component,null):ln.route.element?uo=ln.route.element:uo=sn,reactExports.createElement(RenderedRoute,{match:ln,routeContext:{outlet:sn,matches:fn,isDataRoute:Xr!=null},children:uo})};return Xr&&(ln.route.ErrorBoundary||ln.route.errorElement||un===0)?reactExports.createElement(RenderErrorBoundary,{location:Xr.location,revalidation:Xr.revalidation,component:hn,error:cn,children:to(),routeContext:{outlet:null,matches:fn,isDataRoute:!0}}):to()},null)}var DataRouterHook$1;(function(st){st.UseBlocker="useBlocker",st.UseRevalidator="useRevalidator",st.UseNavigateStable="useNavigate"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(st){st.UseBlocker="useBlocker",st.UseLoaderData="useLoaderData",st.UseActionData="useActionData",st.UseRouteError="useRouteError",st.UseNavigation="useNavigation",st.UseRouteLoaderData="useRouteLoaderData",st.UseMatches="useMatches",st.UseRevalidator="useRevalidator",st.UseNavigateStable="useNavigate",st.UseRouteId="useRouteId"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterContext(st){let Mt=reactExports.useContext(DataRouterContext);return Mt||invariant(!1),Mt}function useDataRouterState(st){let Mt=reactExports.useContext(DataRouterStateContext);return Mt||invariant(!1),Mt}function useRouteContext(st){let Mt=reactExports.useContext(RouteContext);return Mt||invariant(!1),Mt}function useCurrentRouteId(st){let Mt=useRouteContext(),Xr=Mt.matches[Mt.matches.length-1];return Xr.route.id||invariant(!1),Xr.route.id}function useRouteError(){var st;let Mt=reactExports.useContext(RouteErrorContext),Xr=useDataRouterState(DataRouterStateHook$1.UseRouteError),rn=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return Mt||((st=Xr.errors)==null?void 0:st[rn])}function useNavigateStable(){let{router:st}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),Mt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),Xr=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{Xr.current=!0}),reactExports.useCallback(function(nn,an){an===void 0&&(an={}),Xr.current&&(typeof nn=="number"?st.navigate(nn):st.navigate(nn,_extends$2({fromRouteId:Mt},an)))},[st,Mt])}function RouterProvider(st){let{fallbackElement:Mt,router:Xr}=st,[rn,nn]=reactExports.useState(Xr.state);reactExports.useLayoutEffect(()=>Xr.subscribe(nn),[Xr,nn]);let an=reactExports.useMemo(()=>({createHref:Xr.createHref,encodeLocation:Xr.encodeLocation,go:ln=>Xr.navigate(ln),push:(ln,un,cn)=>Xr.navigate(ln,{state:un,preventScrollReset:cn==null?void 0:cn.preventScrollReset}),replace:(ln,un,cn)=>Xr.navigate(ln,{replace:!0,state:un,preventScrollReset:cn==null?void 0:cn.preventScrollReset})}),[Xr]),on=Xr.basename||"/",sn=reactExports.useMemo(()=>({router:Xr,navigator:an,static:!1,basename:on}),[Xr,an,on]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:sn},reactExports.createElement(DataRouterStateContext.Provider,{value:rn},reactExports.createElement(Router,{basename:Xr.basename,location:Xr.state.location,navigationType:Xr.state.historyAction,navigator:an},Xr.state.initialized?reactExports.createElement(DataRoutes,{routes:Xr.routes,state:rn}):Mt))),null)}function DataRoutes(st){let{routes:Mt,state:Xr}=st;return useRoutesImpl(Mt,void 0,Xr)}function Navigate(st){let{to:Mt,replace:Xr,state:rn,relative:nn}=st;useInRouterContext()||invariant(!1);let{matches:an}=reactExports.useContext(RouteContext),{pathname:on}=useLocation(),sn=useNavigate(),ln=resolveTo(Mt,getPathContributingMatches(an).map(cn=>cn.pathnameBase),on,nn==="path"),un=JSON.stringify(ln);return reactExports.useEffect(()=>sn(JSON.parse(un),{replace:Xr,state:rn,relative:nn}),[sn,un,nn,Xr,rn]),null}function Outlet(st){return useOutlet(st.context)}function Route(st){invariant(!1)}function Router(st){let{basename:Mt="/",children:Xr=null,location:rn,navigationType:nn=Action.Pop,navigator:an,static:on=!1}=st;useInRouterContext()&&invariant(!1);let sn=Mt.replace(/^\/*/,"/"),ln=reactExports.useMemo(()=>({basename:sn,navigator:an,static:on}),[sn,an,on]);typeof rn=="string"&&(rn=parsePath(rn));let{pathname:un="/",search:cn="",hash:hn="",state:fn=null,key:to="default"}=rn,uo=reactExports.useMemo(()=>{let co=stripBasename(un,sn);return co==null?null:{location:{pathname:co,search:cn,hash:hn,state:fn,key:to},navigationType:nn}},[sn,un,cn,hn,fn,to,nn]);return uo==null?null:reactExports.createElement(NavigationContext.Provider,{value:ln},reactExports.createElement(LocationContext.Provider,{children:Xr,value:uo}))}var AwaitRenderStatus;(function(st){st[st.pending=0]="pending",st[st.success=1]="success",st[st.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(st,Mt){Mt===void 0&&(Mt=[]);let Xr=[];return reactExports.Children.forEach(st,(rn,nn)=>{if(!reactExports.isValidElement(rn))return;let an=[...Mt,nn];if(rn.type===reactExports.Fragment){Xr.push.apply(Xr,createRoutesFromChildren(rn.props.children,an));return}rn.type!==Route&&invariant(!1),!rn.props.index||!rn.props.children||invariant(!1);let on={id:rn.props.id||an.join("-"),caseSensitive:rn.props.caseSensitive,element:rn.props.element,Component:rn.props.Component,index:rn.props.index,path:rn.props.path,loader:rn.props.loader,action:rn.props.action,errorElement:rn.props.errorElement,ErrorBoundary:rn.props.ErrorBoundary,hasErrorBoundary:rn.props.ErrorBoundary!=null||rn.props.errorElement!=null,shouldRevalidate:rn.props.shouldRevalidate,handle:rn.props.handle,lazy:rn.props.lazy};rn.props.children&&(on.children=createRoutesFromChildren(rn.props.children,an)),Xr.push(on)}),Xr}function mapRouteProperties(st){let Mt={hasErrorBoundary:st.ErrorBoundary!=null||st.errorElement!=null};return st.Component&&Object.assign(Mt,{element:reactExports.createElement(st.Component),Component:void 0}),st.ErrorBoundary&&Object.assign(Mt,{errorElement:reactExports.createElement(st.ErrorBoundary),ErrorBoundary:void 0}),Mt}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(st){for(var Mt=1;Mt<arguments.length;Mt++){var Xr=arguments[Mt];for(var rn in Xr)Object.prototype.hasOwnProperty.call(Xr,rn)&&(st[rn]=Xr[rn])}return st},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(st,Mt){if(st==null)return{};var Xr={},rn=Object.keys(st),nn,an;for(an=0;an<rn.length;an++)nn=rn[an],!(Mt.indexOf(nn)>=0)&&(Xr[nn]=st[nn]);return Xr}function isModifiedEvent(st){return!!(st.metaKey||st.altKey||st.ctrlKey||st.shiftKey)}function shouldProcessLinkClick(st,Mt){return st.button===0&&(!Mt||Mt==="_self")&&!isModifiedEvent(st)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function createBrowserRouter(st,Mt){return createRouter({basename:Mt==null?void 0:Mt.basename,future:_extends$1({},Mt==null?void 0:Mt.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:Mt==null?void 0:Mt.window}),hydrationData:(Mt==null?void 0:Mt.hydrationData)||parseHydrationData(),routes:st,mapRouteProperties}).initialize()}function parseHydrationData(){var st;let Mt=(st=window)==null?void 0:st.__staticRouterHydrationData;return Mt&&Mt.errors&&(Mt=_extends$1({},Mt,{errors:deserializeErrors(Mt.errors)})),Mt}function deserializeErrors(st){if(!st)return null;let Mt=Object.entries(st),Xr={};for(let[rn,nn]of Mt)if(nn&&nn.__type==="RouteErrorResponse")Xr[rn]=new ErrorResponse(nn.status,nn.statusText,nn.data,nn.internal===!0);else if(nn&&nn.__type==="Error"){let an=new Error(nn.message);an.stack="",Xr[rn]=an}else Xr[rn]=nn;return Xr}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(Mt,Xr){let{onClick:rn,relative:nn,reloadDocument:an,replace:on,state:sn,target:ln,to:un,preventScrollReset:cn}=Mt,hn=_objectWithoutPropertiesLoose(Mt,_excluded),{basename:fn}=reactExports.useContext(NavigationContext),to,uo=!1;if(typeof un=="string"&&ABSOLUTE_URL_REGEX.test(un)&&(to=un,isBrowser$2))try{let ho=new URL(window.location.href),fo=un.startsWith("//")?new URL(ho.protocol+un):new URL(un),mo=stripBasename(fo.pathname,fn);fo.origin===ho.origin&&mo!=null?un=mo+fo.search+fo.hash:uo=!0}catch{}let co=useHref(un,{relative:nn}),Uo=useLinkClickHandler(un,{replace:on,state:sn,target:ln,preventScrollReset:cn,relative:nn});function lo(ho){rn&&rn(ho),ho.defaultPrevented||Uo(ho)}return reactExports.createElement("a",_extends$1({},hn,{href:to||co,onClick:uo||an?rn:lo,ref:Xr,target:ln}))});var DataRouterHook;(function(st){st.UseScrollRestoration="useScrollRestoration",st.UseSubmitImpl="useSubmitImpl",st.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(st){st.UseFetchers="useFetchers",st.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(st,Mt){let{target:Xr,replace:rn,state:nn,preventScrollReset:an,relative:on}=Mt===void 0?{}:Mt,sn=useNavigate(),ln=useLocation(),un=useResolvedPath(st,{relative:on});return reactExports.useCallback(cn=>{if(shouldProcessLinkClick(cn,Xr)){cn.preventDefault();let hn=rn!==void 0?rn:createPath(ln)===createPath(un);sn(st,{replace:hn,state:nn,preventScrollReset:an,relative:on})}},[ln,sn,un,rn,nn,Xr,st,an,on])}const scriptRel="modulepreload",assetsURL=function(st){return"/"+st},seen={},__vitePreload=function(Mt,Xr,rn){if(!Xr||Xr.length===0)return Mt();const nn=document.getElementsByTagName("link");return Promise.all(Xr.map(an=>{if(an=assetsURL(an),an in seen)return;seen[an]=!0;const on=an.endsWith(".css"),sn=on?'[rel="stylesheet"]':"";if(!!rn)for(let cn=nn.length-1;cn>=0;cn--){const hn=nn[cn];if(hn.href===an&&(!on||hn.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${an}"]${sn}`))return;const un=document.createElement("link");if(un.rel=on?"stylesheet":scriptRel,on||(un.as="script",un.crossOrigin=""),un.href=an,document.head.appendChild(un),on)return new Promise((cn,hn)=>{un.addEventListener("load",cn),un.addEventListener("error",()=>hn(new Error(`Unable to preload CSS for ${an}`)))})})).then(()=>Mt())},generatedAttribute="generated",mouseDownEvent="pointerdown",mouseUpEvent="pointerup",mouseLeaveEvent="pointerleave",mouseOutEvent="pointerout",mouseMoveEvent="pointermove",touchStartEvent="touchstart",touchEndEvent="touchend",touchMoveEvent="touchmove",touchCancelEvent="touchcancel",resizeEvent="resize",visibilityChangeEvent="visibilitychange",errorPrefix="tsParticles - Error",percentDenominator=100,halfRandom=.5,millisecondsToSeconds=1e3;function isBoolean(st){return typeof st=="boolean"}function isString(st){return typeof st=="string"}function isNumber$1(st){return typeof st=="number"}function isObject$4(st){return typeof st=="object"&&st!==null}function isArray$1(st){return Array.isArray(st)}const origin={x:0,y:0,z:0},squareExp=2,inverseFactorNumerator=1;class Vector3d{constructor(Mt,Xr,rn){if(this._updateFromAngle=(nn,an)=>{this.x=Math.cos(nn)*an,this.y=Math.sin(nn)*an},!isNumber$1(Mt)&&Mt){this.x=Mt.x,this.y=Mt.y;const nn=Mt;this.z=nn.z?nn.z:origin.z}else if(Mt!==void 0&&Xr!==void 0)this.x=Mt,this.y=Xr,this.z=rn??origin.z;else throw new Error(`${errorPrefix} Vector3d not initialized correctly`)}static get origin(){return Vector3d.create(origin.x,origin.y,origin.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(Mt){this._updateFromAngle(Mt,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(Mt){this._updateFromAngle(this.angle,Mt)}static clone(Mt){return Vector3d.create(Mt.x,Mt.y,Mt.z)}static create(Mt,Xr,rn){return new Vector3d(Mt,Xr,rn)}add(Mt){return Vector3d.create(this.x+Mt.x,this.y+Mt.y,this.z+Mt.z)}addTo(Mt){this.x+=Mt.x,this.y+=Mt.y,this.z+=Mt.z}copy(){return Vector3d.clone(this)}distanceTo(Mt){return this.sub(Mt).length}distanceToSq(Mt){return this.sub(Mt).getLengthSq()}div(Mt){return Vector3d.create(this.x/Mt,this.y/Mt,this.z/Mt)}divTo(Mt){this.x/=Mt,this.y/=Mt,this.z/=Mt}getLengthSq(){return this.x**squareExp+this.y**squareExp}mult(Mt){return Vector3d.create(this.x*Mt,this.y*Mt,this.z*Mt)}multTo(Mt){this.x*=Mt,this.y*=Mt,this.z*=Mt}normalize(){const Mt=this.length;Mt!=0&&this.multTo(inverseFactorNumerator/Mt)}rotate(Mt){return Vector3d.create(this.x*Math.cos(Mt)-this.y*Math.sin(Mt),this.x*Math.sin(Mt)+this.y*Math.cos(Mt),origin.z)}setTo(Mt){this.x=Mt.x,this.y=Mt.y;const Xr=Mt;this.z=Xr.z?Xr.z:origin.z}sub(Mt){return Vector3d.create(this.x-Mt.x,this.y-Mt.y,this.z-Mt.z)}subFrom(Mt){this.x-=Mt.x,this.y-=Mt.y,this.z-=Mt.z}}class Vector extends Vector3d{constructor(Mt,Xr){super(Mt,Xr,origin.z)}static get origin(){return Vector.create(origin.x,origin.y)}static clone(Mt){return Vector.create(Mt.x,Mt.y)}static create(Mt,Xr){return new Vector(Mt,Xr)}}let _random=Math.random;const easings=new Map,double=2,doublePI=Math.PI*double;function addEasing(st,Mt){easings.get(st)||easings.set(st,Mt)}function getEasing(st){return easings.get(st)??(Mt=>Mt)}function getRandom(){return clamp(_random(),0,1-Number.EPSILON)}function clamp(st,Mt,Xr){return Math.min(Math.max(st,Mt),Xr)}function mix(st,Mt,Xr,rn){return Math.floor((st*Xr+Mt*rn)/(Xr+rn))}function randomInRange(st){const Mt=getRangeMax(st),Xr=0;let rn=getRangeMin(st);return Mt===rn&&(rn=Xr),getRandom()*(Mt-rn)+rn}function getRangeValue(st){return isNumber$1(st)?st:randomInRange(st)}function getRangeMin(st){return isNumber$1(st)?st:st.min}function getRangeMax(st){return isNumber$1(st)?st:st.max}function setRangeValue(st,Mt){if(st===Mt||Mt===void 0&&isNumber$1(st))return st;const Xr=getRangeMin(st),rn=getRangeMax(st);return Mt!==void 0?{min:Math.min(Xr,Mt),max:Math.max(rn,Mt)}:setRangeValue(Xr,rn)}function getDistances(st,Mt){const Xr=st.x-Mt.x,rn=st.y-Mt.y,nn=2;return{dx:Xr,dy:rn,distance:Math.sqrt(Xr**nn+rn**nn)}}function getDistance(st,Mt){return getDistances(st,Mt).distance}function degToRad(st){return st*Math.PI/180}function getParticleDirectionAngle(st,Mt,Xr){if(isNumber$1(st))return degToRad(st);const rn=0,nn=.5,an=.25,on=nn+an;switch(st){case"top":return-Math.PI*nn;case"top-right":return-Math.PI*an;case"right":return rn;case"bottom-right":return Math.PI*an;case"bottom":return Math.PI*nn;case"bottom-left":return Math.PI*on;case"left":return Math.PI;case"top-left":return-Math.PI*on;case"inside":return Math.atan2(Xr.y-Mt.y,Xr.x-Mt.x);case"outside":return Math.atan2(Mt.y-Xr.y,Mt.x-Xr.x);default:return getRandom()*doublePI}}function getParticleBaseVelocity(st){const Mt=Vector.origin;return Mt.length=1,Mt.angle=st,Mt}function collisionVelocity(st,Mt,Xr,rn){return Vector.create(st.x*(Xr-rn)/(Xr+rn)+Mt.x*2*rn/(Xr+rn),st.y)}function calcExactPositionOrRandomFromSize(st){var Mt,Xr;return{x:((Mt=st.position)==null?void 0:Mt.x)??getRandom()*st.size.width,y:((Xr=st.position)==null?void 0:Xr.y)??getRandom()*st.size.height}}function parseAlpha(st){return st?st.endsWith("%")?parseFloat(st)/percentDenominator:parseFloat(st):1}const _logger={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function getLogger(){return _logger}function rectSideBounce(st){const Mt={bounced:!1},{pSide:Xr,pOtherSide:rn,rectSide:nn,rectOtherSide:an,velocity:on,factor:sn}=st,ln=.5,un=0;return rn.min<an.min||rn.min>an.max||rn.max<an.min||rn.max>an.max||(Xr.max>=nn.min&&Xr.max<=(nn.max+nn.min)*ln&&on>un||Xr.min<=nn.max&&Xr.min>(nn.max+nn.min)*ln&&on<un)&&(Mt.velocity=on*-sn,Mt.bounced=!0),Mt}function checkSelector(st,Mt){const Xr=executeOnSingleOrMultiple(Mt,rn=>st.matches(rn));return isArray$1(Xr)?Xr.some(rn=>rn):Xr}function isSsr(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function hasMatchMedia(){return!isSsr()&&typeof matchMedia<"u"}function safeMatchMedia(st){if(hasMatchMedia())return matchMedia(st)}function safeIntersectionObserver(st){if(!(isSsr()||typeof IntersectionObserver>"u"))return new IntersectionObserver(st)}function safeMutationObserver(st){if(!(isSsr()||typeof MutationObserver>"u"))return new MutationObserver(st)}function isInArray(st,Mt){return st===Mt||isArray$1(Mt)&&Mt.indexOf(st)>-1}async function loadFont(st,Mt){try{await document.fonts.load(`${Mt??"400"} 36px '${st??"Verdana"}'`)}catch{}}function arrayRandomIndex(st){return Math.floor(getRandom()*st.length)}function itemFromArray(st,Mt,Xr=!0){return st[Mt!==void 0&&Xr?Mt%st.length:arrayRandomIndex(st)]}function isPointInside(st,Mt,Xr,rn,nn){return areBoundsInside(calculateBounds(st,rn??0),Mt,Xr,nn)}function areBoundsInside(st,Mt,Xr,rn){let nn=!0;return(!rn||rn==="bottom")&&(nn=st.top<Mt.height+Xr.x),nn&&(!rn||rn==="left")&&(nn=st.right>Xr.x),nn&&(!rn||rn==="right")&&(nn=st.left<Mt.width+Xr.y),nn&&(!rn||rn==="top")&&(nn=st.bottom>Xr.y),nn}function calculateBounds(st,Mt){return{bottom:st.y+Mt,left:st.x-Mt,right:st.x+Mt,top:st.y-Mt}}function deepExtend(st,...Mt){for(const Xr of Mt){if(Xr==null)continue;if(!isObject$4(Xr)){st=Xr;continue}const rn=Array.isArray(Xr);rn&&(isObject$4(st)||!st||!Array.isArray(st))?st=[]:!rn&&(isObject$4(st)||!st||Array.isArray(st))&&(st={});for(const nn in Xr){if(nn==="__proto__")continue;const an=Xr,on=an[nn],sn=st;sn[nn]=isObject$4(on)&&Array.isArray(on)?on.map(ln=>deepExtend(sn[nn],ln)):deepExtend(sn[nn],on)}}return st}function isDivModeEnabled(st,Mt){return!!findItemFromSingleOrMultiple(Mt,Xr=>Xr.enable&&isInArray(st,Xr.mode))}function divModeExecute(st,Mt,Xr){executeOnSingleOrMultiple(Mt,rn=>{const nn=rn.mode;rn.enable&&isInArray(st,nn)&&singleDivModeExecute(rn,Xr)})}function singleDivModeExecute(st,Mt){const Xr=st.selectors;executeOnSingleOrMultiple(Xr,rn=>{Mt(rn,st)})}function divMode(st,Mt){if(!(!Mt||!st))return findItemFromSingleOrMultiple(st,Xr=>checkSelector(Mt,Xr.selectors))}function circleBounceDataFromParticle(st){return{position:st.getPosition(),radius:st.getRadius(),mass:st.getMass(),velocity:st.velocity,factor:Vector.create(getRangeValue(st.options.bounce.horizontal.value),getRangeValue(st.options.bounce.vertical.value))}}function circleBounce(st,Mt){const{x:Xr,y:rn}=st.velocity.sub(Mt.velocity),[nn,an]=[st.position,Mt.position],{dx:on,dy:sn}=getDistances(an,nn),ln=0;if(Xr*on+rn*sn<ln)return;const un=-Math.atan2(sn,on),cn=st.mass,hn=Mt.mass,fn=st.velocity.rotate(un),to=Mt.velocity.rotate(un),uo=collisionVelocity(fn,to,cn,hn),co=collisionVelocity(to,fn,cn,hn),Uo=uo.rotate(-un),lo=co.rotate(-un);st.velocity.x=Uo.x*st.factor.x,st.velocity.y=Uo.y*st.factor.y,Mt.velocity.x=lo.x*Mt.factor.x,Mt.velocity.y=lo.y*Mt.factor.y}function rectBounce(st,Mt){const Xr=st.getPosition(),rn=st.getRadius(),nn=calculateBounds(Xr,rn),an=st.options.bounce,on=rectSideBounce({pSide:{min:nn.left,max:nn.right},pOtherSide:{min:nn.top,max:nn.bottom},rectSide:{min:Mt.left,max:Mt.right},rectOtherSide:{min:Mt.top,max:Mt.bottom},velocity:st.velocity.x,factor:getRangeValue(an.horizontal.value)});on.bounced&&(on.velocity!==void 0&&(st.velocity.x=on.velocity),on.position!==void 0&&(st.position.x=on.position));const sn=rectSideBounce({pSide:{min:nn.top,max:nn.bottom},pOtherSide:{min:nn.left,max:nn.right},rectSide:{min:Mt.top,max:Mt.bottom},rectOtherSide:{min:Mt.left,max:Mt.right},velocity:st.velocity.y,factor:getRangeValue(an.vertical.value)});sn.bounced&&(sn.velocity!==void 0&&(st.velocity.y=sn.velocity),sn.position!==void 0&&(st.position.y=sn.position))}function executeOnSingleOrMultiple(st,Mt){return isArray$1(st)?st.map((rn,nn)=>Mt(rn,nn)):Mt(st,0)}function itemFromSingleOrMultiple(st,Mt,Xr){return isArray$1(st)?itemFromArray(st,Mt,Xr):st}function findItemFromSingleOrMultiple(st,Mt){return isArray$1(st)?st.find((rn,nn)=>Mt(rn,nn)):Mt(st,0)?st:void 0}function initParticleNumericAnimationValue(st,Mt){const Xr=st.value,rn=st.animation,nn={delayTime:getRangeValue(rn.delay)*millisecondsToSeconds,enable:rn.enable,value:getRangeValue(st.value)*Mt,max:getRangeMax(Xr)*Mt,min:getRangeMin(Xr)*Mt,loops:0,maxLoops:getRangeValue(rn.count),time:0},an=1;if(rn.enable){switch(nn.decay=an-getRangeValue(rn.decay),rn.mode){case"increase":nn.status="increasing";break;case"decrease":nn.status="decreasing";break;case"random":nn.status=getRandom()>=halfRandom?"increasing":"decreasing";break}const on=rn.mode==="auto";switch(rn.startValue){case"min":nn.value=nn.min,on&&(nn.status="increasing");break;case"max":nn.value=nn.max,on&&(nn.status="decreasing");break;case"random":default:nn.value=randomInRange(nn),on&&(nn.status=getRandom()>=halfRandom?"increasing":"decreasing");break}}return nn.initialValue=nn.value,nn}function getPositionOrSize(st,Mt){if(!(st.mode==="percent")){const{mode:nn,...an}=st;return an}return"x"in st?{x:st.x/percentDenominator*Mt.width,y:st.y/percentDenominator*Mt.height}:{width:st.width/percentDenominator*Mt.width,height:st.height/percentDenominator*Mt.height}}function getPosition(st,Mt){return getPositionOrSize(st,Mt)}function checkDestroy(st,Mt,Xr,rn,nn){switch(Mt){case"max":Xr>=nn&&st.destroy();break;case"min":Xr<=rn&&st.destroy();break}}function updateAnimation(st,Mt,Xr,rn,nn){if(st.destroyed||!Mt||!Mt.enable||(Mt.maxLoops??0)>0&&(Mt.loops??0)>(Mt.maxLoops??0))return;const cn=(Mt.velocity??0)*nn.factor,hn=Mt.min,fn=Mt.max,to=Mt.decay??1;if(Mt.time||(Mt.time=0),(Mt.delayTime??0)>0&&Mt.time<(Mt.delayTime??0)&&(Mt.time+=nn.value),!((Mt.delayTime??0)>0&&Mt.time<(Mt.delayTime??0))){switch(Mt.status){case"increasing":Mt.value>=fn?(Xr?Mt.status="decreasing":Mt.value-=fn,Mt.loops||(Mt.loops=0),Mt.loops++):Mt.value+=cn;break;case"decreasing":Mt.value<=hn?(Xr?Mt.status="increasing":Mt.value+=fn,Mt.loops||(Mt.loops=0),Mt.loops++):Mt.value-=cn}Mt.velocity&&to!==1&&(Mt.velocity*=to),checkDestroy(st,rn,Mt.value,hn,fn),st.destroyed||(Mt.value=clamp(Mt.value,hn,fn))}}class EventDispatcher{constructor(){this._listeners=new Map}addEventListener(Mt,Xr){this.removeEventListener(Mt,Xr);let rn=this._listeners.get(Mt);rn||(rn=[],this._listeners.set(Mt,rn)),rn.push(Xr)}dispatchEvent(Mt,Xr){const rn=this._listeners.get(Mt);rn==null||rn.forEach(nn=>nn(Xr))}hasEventListener(Mt){return!!this._listeners.get(Mt)}removeAllEventListeners(Mt){Mt?this._listeners.delete(Mt):this._listeners=new Map}removeEventListener(Mt,Xr){const rn=this._listeners.get(Mt);if(!rn)return;const nn=rn.length,an=rn.indexOf(Xr);if(an<0)return;const sn=1;nn===sn?this._listeners.delete(Mt):rn.splice(an,sn)}}async function getItemsFromInitializer(st,Mt,Xr,rn=!1){let nn=Mt.get(st);return(!nn||rn)&&(nn=await Promise.all([...Xr.values()].map(an=>an(st))),Mt.set(st,nn)),nn}async function getDataFromUrl(st){const Mt=itemFromSingleOrMultiple(st.url,st.index);if(!Mt)return st.fallback;const Xr=await fetch(Mt);return Xr.ok?await Xr.json():(getLogger().error(`${errorPrefix} ${Xr.status} while retrieving config file`),st.fallback)}class Engine{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new EventDispatcher,this._initialized=!1,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const Mt={};for(const[Xr,rn]of this._configs)Mt[Xr]=rn;return Mt}get version(){return"3.3.0"}addConfig(Mt){const Xr=Mt.key??Mt.name??"default";this._configs.set(Xr,Mt),this._eventDispatcher.dispatchEvent("configAdded",{data:{name:Xr,config:Mt}})}async addEffect(Mt,Xr,rn=!0){executeOnSingleOrMultiple(Mt,nn=>{this.getEffectDrawer(nn)||this.effectDrawers.set(nn,Xr)}),await this.refresh(rn)}addEventListener(Mt,Xr){this._eventDispatcher.addEventListener(Mt,Xr)}async addInteractor(Mt,Xr,rn=!0){this._initializers.interactors.set(Mt,Xr),await this.refresh(rn)}async addMover(Mt,Xr,rn=!0){this._initializers.movers.set(Mt,Xr),await this.refresh(rn)}async addParticleUpdater(Mt,Xr,rn=!0){this._initializers.updaters.set(Mt,Xr),await this.refresh(rn)}async addPathGenerator(Mt,Xr,rn=!0){this.getPathGenerator(Mt)||this.pathGenerators.set(Mt,Xr),await this.refresh(rn)}async addPlugin(Mt,Xr=!0){this.getPlugin(Mt.id)||this.plugins.push(Mt),await this.refresh(Xr)}async addPreset(Mt,Xr,rn=!1,nn=!0){(rn||!this.getPreset(Mt))&&this.presets.set(Mt,Xr),await this.refresh(nn)}async addShape(Mt,Xr,rn=!0){executeOnSingleOrMultiple(Mt,nn=>{this.getShapeDrawer(nn)||this.shapeDrawers.set(nn,Xr)}),await this.refresh(rn)}clearPlugins(Mt){this.updaters.delete(Mt),this.movers.delete(Mt),this.interactors.delete(Mt)}dispatchEvent(Mt,Xr){this._eventDispatcher.dispatchEvent(Mt,Xr)}dom(){return this._domArray}domItem(Mt){const Xr=this.dom(),rn=Xr[Mt];if(!rn||rn.destroyed){Xr.splice(Mt,1);return}return rn}async getAvailablePlugins(Mt){const Xr=new Map;for(const rn of this.plugins)rn.needsPlugin(Mt.actualOptions)&&Xr.set(rn.id,await rn.getPlugin(Mt));return Xr}getEffectDrawer(Mt){return this.effectDrawers.get(Mt)}async getInteractors(Mt,Xr=!1){return await getItemsFromInitializer(Mt,this.interactors,this._initializers.interactors,Xr)}async getMovers(Mt,Xr=!1){return await getItemsFromInitializer(Mt,this.movers,this._initializers.movers,Xr)}getPathGenerator(Mt){return this.pathGenerators.get(Mt)}getPlugin(Mt){return this.plugins.find(Xr=>Xr.id===Mt)}getPreset(Mt){return this.presets.get(Mt)}getShapeDrawer(Mt){return this.shapeDrawers.get(Mt)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(Mt,Xr=!1){return await getItemsFromInitializer(Mt,this.updaters,this._initializers.updaters,Xr)}init(){this._initialized||(this._initialized=!0)}async load(Mt){var co;const rn=Mt.id??((co=Mt.element)==null?void 0:co.id)??`tsparticles${Math.floor(getRandom()*1e4)}`,{index:nn,url:an}=Mt,on=an?await getDataFromUrl({fallback:Mt.options,url:an,index:nn}):Mt.options;let sn=Mt.element??document.getElementById(rn);sn||(sn=document.createElement("div"),sn.id=rn,document.body.append(sn));const ln=itemFromSingleOrMultiple(on,nn),un=this.dom(),cn=un.findIndex(Uo=>Uo.id.description===rn),hn=0;if(cn>=hn){const Uo=this.domItem(cn);if(Uo&&!Uo.destroyed){Uo.destroy();const lo=1;un.splice(cn,lo)}}let fn;if(sn.tagName.toLowerCase()==="canvas")fn=sn,fn.dataset[generatedAttribute]="false";else{const Uo=sn.getElementsByTagName("canvas");Uo.length?(fn=Uo[0],fn.dataset[generatedAttribute]="false"):(fn=document.createElement("canvas"),fn.dataset[generatedAttribute]="true",sn.appendChild(fn))}fn.style.width||(fn.style.width="100%"),fn.style.height||(fn.style.height="100%");const{Container:to}=await __vitePreload(()=>import("./Container-635af332.js"),["assets/Container-635af332.js","assets/CanvasUtils-2631658e.js","assets/OptionsColor-92d43c1c.js","assets/ValueWithRandom-bbac2ad5.js","assets/Ranges-955d8737.js"]),uo=new to(this,rn,ln);return cn>=hn?un.splice(cn,0,uo):un.push(uo),uo.canvas.loadCanvas(fn),await uo.start(),uo}loadOptions(Mt,Xr){for(const rn of this.plugins)rn.loadOptions(Mt,Xr)}loadParticlesOptions(Mt,Xr,...rn){var an;const nn=this.updaters.get(Mt);if(nn)for(const on of nn)(an=on.loadOptions)==null||an.call(on,Xr,...rn)}async refresh(Mt=!0){Mt&&await Promise.all(this.dom().map(Xr=>Xr.refresh()))}removeEventListener(Mt,Xr){this._eventDispatcher.removeEventListener(Mt,Xr)}setOnClickHandler(Mt){const Xr=this.dom();if(!Xr.length)throw new Error(`${errorPrefix} can only set click handlers after calling tsParticles.load()`);for(const rn of Xr)rn.addClickHandler(Mt)}}const randomColorValue="random",midColorValue="mid",colorManagers=new Map;function addColorManager(st){colorManagers.set(st.key,st)}function stringToRgba(st){for(const[,ln]of colorManagers)if(st.startsWith(ln.stringPrefix))return ln.parseString(st);const Mt=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,Xr=st.replace(Mt,(ln,un,cn,hn,fn)=>un+un+cn+cn+hn+hn+(fn!==void 0?fn+fn:"")),rn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,nn=rn.exec(Xr),an=16,on=1,sn=255;return nn?{a:nn[4]!==void 0?parseInt(nn[4],an)/sn:on,b:parseInt(nn[3],an),g:parseInt(nn[2],an),r:parseInt(nn[1],an)}:void 0}function rangeColorToRgb(st,Mt,Xr=!0){if(!st)return;const rn=isString(st)?{value:st}:st;if(isString(rn.value))return colorToRgb(rn.value,Mt,Xr);if(isArray$1(rn.value))return rangeColorToRgb({value:itemFromArray(rn.value,Mt,Xr)});for(const[,nn]of colorManagers){const an=nn.handleRangeColor(rn);if(an)return an}}function colorToRgb(st,Mt,Xr=!0){if(!st)return;const rn=isString(st)?{value:st}:st;if(isString(rn.value))return rn.value===randomColorValue?getRandomRgbColor():stringToRgb(rn.value);if(isArray$1(rn.value))return colorToRgb({value:itemFromArray(rn.value,Mt,Xr)});for(const[,nn]of colorManagers){const an=nn.handleColor(rn);if(an)return an}}function rangeColorToHsl(st,Mt,Xr=!0){const rn=rangeColorToRgb(st,Mt,Xr);return rn?rgbToHsl(rn):void 0}function rgbToHsl(st){const cn=st.r/255,hn=st.g/255,fn=st.b/255,to=Math.max(cn,hn,fn),uo=Math.min(cn,hn,fn),co={h:0,l:(to+uo)*.5,s:0};return to!==uo&&(co.s=co.l<.5?(to-uo)/(to+uo):(to-uo)/(2-to-uo),co.h=cn===to?(hn-fn)/(to-uo):co.h=hn===to?2+(fn-cn)/(to-uo):2*2+(cn-hn)/(to-uo)),co.l*=100,co.s*=100,co.h*=60,co.h<0&&(co.h+=360),co.h>=360&&(co.h-=360),co}function stringToRgb(st){return stringToRgba(st)}function hslToRgb(st){const on=(st.h%360+360)%360,sn=Math.max(0,Math.min(100,st.s)),ln=Math.max(0,Math.min(100,st.l)),un=on/360,cn=sn/100,hn=ln/100,fn=255,to=3;if(sn===0){const sp=Math.round(hn*fn);return{r:sp,g:sp,b:sp}}const uo=.5,co=2,Uo=(sp,up,pp)=>{if(pp<0&&pp++,pp>1&&pp--,pp*6<1)return sp+(up-sp)*6*pp;if(pp*co<1)return up;if(pp*to<1*co){const mp=co/to;return sp+(up-sp)*(mp-pp)*6}return sp},lo=1,ho=hn<uo?hn*(lo+cn):hn+cn-hn*cn,fo=co*hn-ho,mo=1,_d=mo/to,ep=Math.min(fn,fn*Uo(fo,ho,un+_d)),rp=Math.min(fn,fn*Uo(fo,ho,un)),ap=Math.min(fn,fn*Uo(fo,ho,un-_d));return{r:Math.round(ep),g:Math.round(rp),b:Math.round(ap)}}function hslaToRgba(st){const Mt=hslToRgb(st);return{a:st.a,b:Mt.b,g:Mt.g,r:Mt.r}}function getRandomRgbColor(st){const Xr=st??0,rn=256;return{b:Math.floor(randomInRange(setRangeValue(Xr,rn))),g:Math.floor(randomInRange(setRangeValue(Xr,rn))),r:Math.floor(randomInRange(setRangeValue(Xr,rn)))}}function getStyleFromRgb(st,Mt){return`rgba(${st.r}, ${st.g}, ${st.b}, ${Mt??1})`}function getStyleFromHsl(st,Mt){return`hsla(${st.h}, ${st.s}%, ${st.l}%, ${Mt??1})`}function colorMix(st,Mt,Xr,rn){let nn=st,an=Mt;return nn.r===void 0&&(nn=hslToRgb(st)),an.r===void 0&&(an=hslToRgb(Mt)),{b:mix(nn.b,an.b,Xr,rn),g:mix(nn.g,an.g,Xr,rn),r:mix(nn.r,an.r,Xr,rn)}}function getLinkColor(st,Mt,Xr){if(Xr===randomColorValue)return getRandomRgbColor();if(Xr===midColorValue){const rn=st.getFillColor()??st.getStrokeColor(),nn=(Mt==null?void 0:Mt.getFillColor())??(Mt==null?void 0:Mt.getStrokeColor());if(rn&&nn&&Mt)return colorMix(rn,nn,st.getRadius(),Mt.getRadius());{const an=rn??nn;if(an)return hslToRgb(an)}}else return Xr}function getLinkRandomColor(st,Mt,Xr){const rn=isString(st)?st:st.value;return rn===randomColorValue?Xr?rangeColorToRgb({value:rn}):Mt?randomColorValue:midColorValue:rn===midColorValue?midColorValue:rangeColorToRgb({value:rn})}function getHslFromAnimation(st){return st!==void 0?{h:st.h.value,s:st.s.value,l:st.l.value}:void 0}function getHslAnimationFromHsl(st,Mt,Xr){const rn={h:{enable:!1,value:st.h},s:{enable:!1,value:st.s},l:{enable:!1,value:st.l}};return Mt&&(setColorAnimation(rn.h,Mt.h,Xr),setColorAnimation(rn.s,Mt.s,Xr),setColorAnimation(rn.l,Mt.l,Xr)),rn}function setColorAnimation(st,Mt,Xr){st.enable=Mt.enable;const rn=0,nn=1,an=0,on=0;st.enable?(st.velocity=getRangeValue(Mt.speed)/percentDenominator*Xr,st.decay=nn-getRangeValue(Mt.decay),st.status="increasing",st.loops=an,st.maxLoops=getRangeValue(Mt.count),st.time=on,st.delayTime=getRangeValue(Mt.delay)*millisecondsToSeconds,Mt.sync||(st.velocity*=getRandom(),st.value*=getRandom()),st.initialValue=st.value,st.offset=setRangeValue(Mt.offset)):st.velocity=rn}function updateColorValue(st,Mt,Xr,rn){if(!st||!st.enable||(st.maxLoops??0)>0&&(st.loops??0)>(st.maxLoops??0)||(st.time||(st.time=0),(st.delayTime??0)>0&&st.time<(st.delayTime??0)&&(st.time+=rn.value),(st.delayTime??0)>0&&st.time<(st.delayTime??0)))return;const cn=st.offset?randomInRange(st.offset):0,hn=(st.velocity??0)*rn.factor+cn*3.6,fn=st.decay??1,to=getRangeMax(Mt),uo=getRangeMin(Mt);if(!Xr||st.status==="increasing")st.value+=hn,st.value>to&&(st.loops||(st.loops=0),st.loops++,Xr?st.status="decreasing":st.value-=to);else{st.value-=hn;const co=0;st.value<co&&(st.loops||(st.loops=0),st.loops++,st.status="increasing")}st.velocity&&fn!==1&&(st.velocity*=fn),st.value=clamp(st.value,uo,to)}function updateColor(st,Mt){if(!st)return;const{h:Xr,s:rn,l:nn}=st,an={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};Xr&&updateColorValue(Xr,an.h,!1,Mt),rn&&updateColorValue(rn,an.s,!0,Mt),nn&&updateColorValue(nn,an.l,!0,Mt)}class HslColorManager{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(Mt){const Xr=Mt.value,rn=Xr.hsl??Mt.value;if(rn.h!==void 0&&rn.s!==void 0&&rn.l!==void 0)return hslToRgb(rn)}handleRangeColor(Mt){const Xr=Mt.value,rn=Xr.hsl??Mt.value;if(rn.h!==void 0&&rn.l!==void 0)return hslToRgb({h:getRangeValue(rn.h),l:getRangeValue(rn.l),s:getRangeValue(rn.s)})}parseString(Mt){if(!Mt.startsWith("hsl"))return;const Xr=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,rn=Xr.exec(Mt),nn=4,an=1,on=10;return rn?hslaToRgba({a:rn.length>nn?parseAlpha(rn[5]):an,h:parseInt(rn[1],on),l:parseInt(rn[3],on),s:parseInt(rn[2],on)}):void 0}}class RgbColorManager{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(Mt){const Xr=Mt.value,rn=Xr.rgb??Mt.value;if(rn.r!==void 0)return rn}handleRangeColor(Mt){const Xr=Mt.value,rn=Xr.rgb??Mt.value;if(rn.r!==void 0)return{r:getRangeValue(rn.r),g:getRangeValue(rn.g),b:getRangeValue(rn.b)}}parseString(Mt){if(!Mt.startsWith(this.stringPrefix))return;const Xr=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,rn=Xr.exec(Mt),nn=10,an=4,on=1;return rn?{a:rn.length>an?parseAlpha(rn[5]):on,b:parseInt(rn[3],nn),g:parseInt(rn[2],nn),r:parseInt(rn[1],nn)}:void 0}}function init(){const st=new RgbColorManager,Mt=new HslColorManager;addColorManager(st),addColorManager(Mt);const Xr=new Engine;return Xr.init(),Xr}const tsParticles=init();isSsr()||(window.tsParticles=tsParticles);const f$5=st=>{const Mt=st.id??"tsparticles";return reactExports.useEffect(()=>{let Xr;return tsParticles.load({id:Mt,url:st.url,options:st.options}).then(rn=>{var nn;Xr=rn,(nn=st.particlesLoaded)==null||nn.call(st,rn)}),()=>{Xr==null||Xr.destroy()}},[Mt,st,st.url,st.options]),jsxRuntimeExports.jsx("div",{id:Mt,className:st.className})};async function n$1(st){await st(tsParticles)}async function loadSlim(st,Mt=!0){const{loadParallaxMover:Xr}=await __vitePreload(()=>import("./index-566d69ef.js"),[]),{loadExternalAttractInteraction:rn}=await __vitePreload(()=>import("./index-ca1b80d6.js"),[]),{loadExternalBounceInteraction:nn}=await __vitePreload(()=>import("./index-43a4a04d.js"),[]),{loadExternalBubbleInteraction:an}=await __vitePreload(()=>import("./index-3277bcf9.js"),["assets/index-3277bcf9.js","assets/OptionsColor-92d43c1c.js"]),{loadExternalConnectInteraction:on}=await __vitePreload(()=>import("./index-b5cb28d0.js"),[]),{loadExternalGrabInteraction:sn}=await __vitePreload(()=>import("./index-85876bfb.js"),["assets/index-85876bfb.js","assets/OptionsColor-92d43c1c.js"]),{loadExternalPauseInteraction:ln}=await __vitePreload(()=>import("./index-722e1b96.js"),[]),{loadExternalPushInteraction:un}=await __vitePreload(()=>import("./index-54fb22b5.js"),[]),{loadExternalRemoveInteraction:cn}=await __vitePreload(()=>import("./index-90738ea0.js"),[]),{loadExternalRepulseInteraction:hn}=await __vitePreload(()=>import("./index-0f6d1536.js"),[]),{loadExternalSlowInteraction:fn}=await __vitePreload(()=>import("./index-2e3ef35a.js"),[]),{loadParticlesAttractInteraction:to}=await __vitePreload(()=>import("./index-e78afcc7.js"),[]),{loadParticlesCollisionsInteraction:uo}=await __vitePreload(()=>import("./index-83b721fb.js"),[]),{loadParticlesLinksInteraction:co}=await __vitePreload(()=>import("./index-6d0ed79f.js"),["assets/index-6d0ed79f.js","assets/OptionsColor-92d43c1c.js"]),{loadEasingQuadPlugin:Uo}=await __vitePreload(()=>import("./index-03ffac0d.js"),[]),{loadEmojiShape:lo}=await __vitePreload(()=>import("./index-0f75a8cd.js").then(pp=>pp.i),[]),{loadImageShape:ho}=await __vitePreload(()=>import("./index-7752f1b0.js").then(pp=>pp.i),[]),{loadLineShape:fo}=await __vitePreload(()=>import("./index-d3818475.js"),[]),{loadPolygonShape:mo}=await __vitePreload(()=>import("./index-880e8f6f.js"),[]),{loadSquareShape:_d}=await __vitePreload(()=>import("./index-3ddb3e5e.js"),[]),{loadStarShape:ep}=await __vitePreload(()=>import("./index-78e0d7d4.js"),[]),{loadLifeUpdater:rp}=await __vitePreload(()=>import("./index-9871ebee.js"),[]),{loadRotateUpdater:ap}=await __vitePreload(()=>import("./index-0cfc600d.js"),[]),{loadStrokeColorUpdater:sp}=await __vitePreload(()=>import("./index-8321217c.js"),[]),{loadBasic:up}=await __vitePreload(()=>import("./index-8edd0058.js"),[]);await Xr(st,!1),await rn(st,!1),await nn(st,!1),await an(st,!1),await on(st,!1),await sn(st,!1),await ln(st,!1),await un(st,!1),await cn(st,!1),await hn(st,!1),await fn(st,!1),await to(st,!1),await uo(st,!1),await co(st,!1),await Uo(),await lo(st,!1),await ho(st,!1),await fo(st,!1),await mo(st,!1),await _d(st,!1),await ep(st,!1),await rp(st,!1),await ap(st,!1),await sp(st,!1),await up(st,Mt)}const ParticlesComponent=st=>{const[Mt,Xr]=reactExports.useState(null),[rn,nn]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{await n$1(async sn=>{await loadSlim(sn)}),nn(!0)})()},[]),reactExports.useEffect(()=>{if(!rn)return;Xr({fpsLimit:120,interactivity:{events:{onClick:{enable:!1,mode:"repulse"},onHover:{enable:!1,mode:"grab"}},modes:{push:{distance:200,duration:15},grab:{distance:10}}},particles:{color:{value:"#85e8f9",opacity:.2},links:{color:"#20a4e8",distance:150,enable:!0,opacity:.5,width:2},move:{direction:"vertical",enable:!0,outModes:{default:"bounce"},random:!0,speed:3,straight:!0},number:{density:{enable:!0},value:120},opacity:{value:.3},shape:{type:"circle"},size:{value:{min:2,max:4}}},detectRetina:!0})},[rn]);const an=on=>{console.log(on)};return Mt?jsxRuntimeExports.jsx(f$5,{id:st.id,init:an,options:Mt}):null},Logo="/assets/logo-0b59e18c.png";function Footer(){return jsxRuntimeExports.jsx("footer",{class:"bg-gray-900 z-10",children:jsxRuntimeExports.jsxs("div",{class:"mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8",children:[jsxRuntimeExports.jsxs("div",{class:"md:flex md:justify-between",children:[jsxRuntimeExports.jsxs("div",{class:"mb-6 md:mb-0 flex items-center",children:[jsxRuntimeExports.jsx("img",{src:Logo,class:"h-14 me-3",alt:"Face Logo"}),jsxRuntimeExports.jsx("span",{class:"self-center text-2xl font-semibold whitespace-nowrap text-white",children:"FaceAuthenticator"})]}),jsxRuntimeExports.jsx("div",{class:"grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{class:"mb-6 text-sm font-semibold uppercase text-white",children:"Ingresa al repositorio"}),jsxRuntimeExports.jsx("ul",{class:"text-gray-500  font-medium",children:jsxRuntimeExports.jsx("li",{class:"mb-4",children:jsxRuntimeExports.jsx("a",{href:"https://github.com/yairhdz24/FaceAuthenticator",class:"hover:underline ",children:"Repositorio"})})})]})})]}),jsxRuntimeExports.jsx("hr",{class:"my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"}),jsxRuntimeExports.jsxs("div",{class:"sm:flex sm:items-center sm:justify-between",children:[jsxRuntimeExports.jsx("span",{class:"text-sm text-gray-500 sm:text-center dark:text-gray-400",children:" 2024 Judith Villalvazo y Yair Hernandez"}),jsxRuntimeExports.jsxs("div",{class:"flex mt-4 sm:justify-center sm:mt-0",children:[jsxRuntimeExports.jsxs("a",{href:"#",class:"text-gray-500 hover:text-gray-900 dark:hover:text-white",children:[jsxRuntimeExports.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 8 19",children:jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd",d:"M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z","clip-rule":"evenodd"})}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"Facebook page"})]}),jsxRuntimeExports.jsxs("a",{href:"#",class:"text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5",children:[jsxRuntimeExports.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 16",children:jsxRuntimeExports.jsx("path",{d:"M16.942 1.556a16.3 16.3 0 0 0-4.126-1.3 12.04 12.04 0 0 0-.529 1.1 15.175 15.175 0 0 0-4.573 0 11.585 11.585 0 0 0-.535-1.1 16.274 16.274 0 0 0-4.129 1.3A17.392 17.392 0 0 0 .182 13.218a15.785 15.785 0 0 0 4.963 2.521c.41-.564.773-1.16 1.084-1.785a10.63 10.63 0 0 1-1.706-.83c.143-.106.283-.217.418-.33a11.664 11.664 0 0 0 10.118 0c.137.113.277.224.418.33-.544.328-1.116.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595 17.286 17.286 0 0 0-2.973-11.59ZM6.678 10.813a1.941 1.941 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.919 1.919 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Zm6.644 0a1.94 1.94 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.918 1.918 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Z"})}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"Discord community"})]}),jsxRuntimeExports.jsxs("a",{href:"#",class:"text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5",children:[jsxRuntimeExports.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 17",children:jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd",d:"M20 1.892a8.178 8.178 0 0 1-2.355.635 4.074 4.074 0 0 0 1.8-2.235 8.344 8.344 0 0 1-2.605.98A4.13 4.13 0 0 0 13.85 0a4.068 4.068 0 0 0-4.1 4.038 4 4 0 0 0 .105.919A11.705 11.705 0 0 1 1.4.734a4.006 4.006 0 0 0 1.268 5.392 4.165 4.165 0 0 1-1.859-.5v.05A4.057 4.057 0 0 0 4.1 9.635a4.19 4.19 0 0 1-1.856.07 4.108 4.108 0 0 0 3.831 2.807A8.36 8.36 0 0 1 0 14.184 11.732 11.732 0 0 0 6.291 16 11.502 11.502 0 0 0 17.964 4.5c0-.177 0-.35-.012-.523A8.143 8.143 0 0 0 20 1.892Z","clip-rule":"evenodd"})}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"Twitter page"})]}),jsxRuntimeExports.jsxs("a",{href:"#",class:"text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5",children:[jsxRuntimeExports.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd",d:"M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z","clip-rule":"evenodd"})}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"GitHub account"})]})]})]})]})})}var dist={},_extends={},_global={exports:{}},global$5=_global.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=global$5);var _globalExports=_global.exports,_core={exports:{}},core$4=_core.exports={version:"2.6.12"};typeof __e=="number"&&(__e=core$4);var _coreExports=_core.exports,_aFunction=function(st){if(typeof st!="function")throw TypeError(st+" is not a function!");return st},aFunction=_aFunction,_ctx=function(st,Mt,Xr){if(aFunction(st),Mt===void 0)return st;switch(Xr){case 1:return function(rn){return st.call(Mt,rn)};case 2:return function(rn,nn){return st.call(Mt,rn,nn)};case 3:return function(rn,nn,an){return st.call(Mt,rn,nn,an)}}return function(){return st.apply(Mt,arguments)}},_objectDp={},_isObject=function(st){return typeof st=="object"?st!==null:typeof st=="function"},isObject$3=_isObject,_anObject=function(st){if(!isObject$3(st))throw TypeError(st+" is not an object!");return st},_fails=function(st){try{return!!st()}catch{return!0}},_descriptors,hasRequired_descriptors;function require_descriptors(){return hasRequired_descriptors||(hasRequired_descriptors=1,_descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),_descriptors}var _domCreate,hasRequired_domCreate;function require_domCreate(){if(hasRequired_domCreate)return _domCreate;hasRequired_domCreate=1;var st=_isObject,Mt=_globalExports.document,Xr=st(Mt)&&st(Mt.createElement);return _domCreate=function(rn){return Xr?Mt.createElement(rn):{}},_domCreate}var _ie8DomDefine,hasRequired_ie8DomDefine;function require_ie8DomDefine(){return hasRequired_ie8DomDefine||(hasRequired_ie8DomDefine=1,_ie8DomDefine=!require_descriptors()&&!_fails(function(){return Object.defineProperty(require_domCreate()("div"),"a",{get:function(){return 7}}).a!=7})),_ie8DomDefine}var isObject$2=_isObject,_toPrimitive=function(st,Mt){if(!isObject$2(st))return st;var Xr,rn;if(Mt&&typeof(Xr=st.toString)=="function"&&!isObject$2(rn=Xr.call(st))||typeof(Xr=st.valueOf)=="function"&&!isObject$2(rn=Xr.call(st))||!Mt&&typeof(Xr=st.toString)=="function"&&!isObject$2(rn=Xr.call(st)))return rn;throw TypeError("Can't convert object to primitive value")},hasRequired_objectDp;function require_objectDp(){if(hasRequired_objectDp)return _objectDp;hasRequired_objectDp=1;var st=_anObject,Mt=require_ie8DomDefine(),Xr=_toPrimitive,rn=Object.defineProperty;return _objectDp.f=require_descriptors()?Object.defineProperty:function(an,on,sn){if(st(an),on=Xr(on,!0),st(sn),Mt)try{return rn(an,on,sn)}catch{}if("get"in sn||"set"in sn)throw TypeError("Accessors not supported!");return"value"in sn&&(an[on]=sn.value),an},_objectDp}var _propertyDesc=function(st,Mt){return{enumerable:!(st&1),configurable:!(st&2),writable:!(st&4),value:Mt}},dP$1=require_objectDp(),createDesc$2=_propertyDesc,_hide=require_descriptors()?function(st,Mt,Xr){return dP$1.f(st,Mt,createDesc$2(1,Xr))}:function(st,Mt,Xr){return st[Mt]=Xr,st},hasOwnProperty={}.hasOwnProperty,_has=function(st,Mt){return hasOwnProperty.call(st,Mt)},global$4=_globalExports,core$3=_coreExports,ctx=_ctx,hide$2=_hide,has$6=_has,PROTOTYPE$1="prototype",$export$7=function(st,Mt,Xr){var rn=st&$export$7.F,nn=st&$export$7.G,an=st&$export$7.S,on=st&$export$7.P,sn=st&$export$7.B,ln=st&$export$7.W,un=nn?core$3:core$3[Mt]||(core$3[Mt]={}),cn=un[PROTOTYPE$1],hn=nn?global$4:an?global$4[Mt]:(global$4[Mt]||{})[PROTOTYPE$1],fn,to,uo;nn&&(Xr=Mt);for(fn in Xr)to=!rn&&hn&&hn[fn]!==void 0,!(to&&has$6(un,fn))&&(uo=to?hn[fn]:Xr[fn],un[fn]=nn&&typeof hn[fn]!="function"?Xr[fn]:sn&&to?ctx(uo,global$4):ln&&hn[fn]==uo?function(co){var Uo=function(lo,ho,fo){if(this instanceof co){switch(arguments.length){case 0:return new co;case 1:return new co(lo);case 2:return new co(lo,ho)}return new co(lo,ho,fo)}return co.apply(this,arguments)};return Uo[PROTOTYPE$1]=co[PROTOTYPE$1],Uo}(uo):on&&typeof uo=="function"?ctx(Function.call,uo):uo,on&&((un.virtual||(un.virtual={}))[fn]=uo,st&$export$7.R&&cn&&!cn[fn]&&hide$2(cn,fn,uo)))};$export$7.F=1;$export$7.G=2;$export$7.S=4;$export$7.P=8;$export$7.B=16;$export$7.W=32;$export$7.U=64;$export$7.R=128;var _export=$export$7,toString$1={}.toString,_cof=function(st){return toString$1.call(st).slice(8,-1)},_iobject,hasRequired_iobject;function require_iobject(){if(hasRequired_iobject)return _iobject;hasRequired_iobject=1;var st=_cof;return _iobject=Object("z").propertyIsEnumerable(0)?Object:function(Mt){return st(Mt)=="String"?Mt.split(""):Object(Mt)},_iobject}var _defined=function(st){if(st==null)throw TypeError("Can't call method on  "+st);return st},IObject=require_iobject(),defined$2=_defined,_toIobject=function(st){return IObject(defined$2(st))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(st){return isNaN(st=+st)?0:(st>0?floor:ceil)(st)},toInteger$2=_toInteger,min$1=Math.min,_toLength=function(st){return st>0?min$1(toInteger$2(st),9007199254740991):0},toInteger$1=_toInteger,max=Math.max,min=Math.min,_toAbsoluteIndex=function(st,Mt){return st=toInteger$1(st),st<0?max(st+Mt,0):min(st,Mt)},toIObject$5=_toIobject,toLength=_toLength,toAbsoluteIndex=_toAbsoluteIndex,_arrayIncludes=function(st){return function(Mt,Xr,rn){var nn=toIObject$5(Mt),an=toLength(nn.length),on=toAbsoluteIndex(rn,an),sn;if(st&&Xr!=Xr){for(;an>on;)if(sn=nn[on++],sn!=sn)return!0}else for(;an>on;on++)if((st||on in nn)&&nn[on]===Xr)return st||on||0;return!st&&-1}},_shared={exports:{}},_library=!0,core$2=_coreExports,global$3=_globalExports,SHARED="__core-js_shared__",store$1=global$3[SHARED]||(global$3[SHARED]={});(_shared.exports=function(st,Mt){return store$1[st]||(store$1[st]=Mt!==void 0?Mt:{})})("versions",[]).push({version:core$2.version,mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"});var _sharedExports=_shared.exports,id$2=0,px=Math.random(),_uid=function(st){return"Symbol(".concat(st===void 0?"":st,")_",(++id$2+px).toString(36))},shared$1=_sharedExports("keys"),uid$2=_uid,_sharedKey=function(st){return shared$1[st]||(shared$1[st]=uid$2(st))},has$5=_has,toIObject$4=_toIobject,arrayIndexOf=_arrayIncludes(!1),IE_PROTO$1=_sharedKey("IE_PROTO"),_objectKeysInternal=function(st,Mt){var Xr=toIObject$4(st),rn=0,nn=[],an;for(an in Xr)an!=IE_PROTO$1&&has$5(Xr,an)&&nn.push(an);for(;Mt.length>rn;)has$5(Xr,an=Mt[rn++])&&(~arrayIndexOf(nn,an)||nn.push(an));return nn},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$keys$1=_objectKeysInternal,enumBugKeys=_enumBugKeys,_objectKeys=Object.keys||function(Mt){return $keys$1(Mt,enumBugKeys)},_objectGops={};_objectGops.f=Object.getOwnPropertySymbols;var _objectPie={},hasRequired_objectPie;function require_objectPie(){return hasRequired_objectPie||(hasRequired_objectPie=1,_objectPie.f={}.propertyIsEnumerable),_objectPie}var defined$1=_defined,_toObject=function(st){return Object(defined$1(st))},_objectAssign,hasRequired_objectAssign;function require_objectAssign(){if(hasRequired_objectAssign)return _objectAssign;hasRequired_objectAssign=1;var st=require_descriptors(),Mt=_objectKeys,Xr=_objectGops,rn=require_objectPie(),nn=_toObject,an=require_iobject(),on=Object.assign;return _objectAssign=!on||_fails(function(){var sn={},ln={},un=Symbol(),cn="abcdefghijklmnopqrst";return sn[un]=7,cn.split("").forEach(function(hn){ln[hn]=hn}),on({},sn)[un]!=7||Object.keys(on({},ln)).join("")!=cn})?function(ln,un){for(var cn=nn(ln),hn=arguments.length,fn=1,to=Xr.f,uo=rn.f;hn>fn;)for(var co=an(arguments[fn++]),Uo=to?Mt(co).concat(to(co)):Mt(co),lo=Uo.length,ho=0,fo;lo>ho;)fo=Uo[ho++],(!st||uo.call(co,fo))&&(cn[fo]=co[fo]);return cn}:on,_objectAssign}var $export$6=_export;$export$6($export$6.S+$export$6.F,"Object",{assign:require_objectAssign()});var assign$1=_coreExports.Object.assign,assign={default:assign$1,__esModule:!0};_extends.__esModule=!0;var _assign=assign,_assign2=_interopRequireDefault$5(_assign);function _interopRequireDefault$5(st){return st&&st.__esModule?st:{default:st}}_extends.default=_assign2.default||function(st){for(var Mt=1;Mt<arguments.length;Mt++){var Xr=arguments[Mt];for(var rn in Xr)Object.prototype.hasOwnProperty.call(Xr,rn)&&(st[rn]=Xr[rn])}return st};var has$4=_has,toObject$2=_toObject,IE_PROTO=_sharedKey("IE_PROTO"),ObjectProto$1=Object.prototype,_objectGpo=Object.getPrototypeOf||function(st){return st=toObject$2(st),has$4(st,IE_PROTO)?st[IE_PROTO]:typeof st.constructor=="function"&&st instanceof st.constructor?st.constructor.prototype:st instanceof Object?ObjectProto$1:null},$export$5=_export,core$1=_coreExports,fails=_fails,_objectSap=function(st,Mt){var Xr=(core$1.Object||{})[st]||Object[st],rn={};rn[st]=Mt(Xr),$export$5($export$5.S+$export$5.F*fails(function(){Xr(1)}),"Object",rn)},toObject$1=_toObject,$getPrototypeOf=_objectGpo;_objectSap("getPrototypeOf",function(){return function(Mt){return $getPrototypeOf(toObject$1(Mt))}});var getPrototypeOf$2=_coreExports.Object.getPrototypeOf,getPrototypeOf$1={default:getPrototypeOf$2,__esModule:!0},classCallCheck={};classCallCheck.__esModule=!0;classCallCheck.default=function(st,Mt){if(!(st instanceof Mt))throw new TypeError("Cannot call a class as a function")};var createClass={},$export$4=_export;$export$4($export$4.S+$export$4.F*!require_descriptors(),"Object",{defineProperty:require_objectDp().f});var $Object$1=_coreExports.Object,defineProperty$2=function(Mt,Xr,rn){return $Object$1.defineProperty(Mt,Xr,rn)},defineProperty$1={default:defineProperty$2,__esModule:!0};createClass.__esModule=!0;var _defineProperty=defineProperty$1,_defineProperty2=_interopRequireDefault$4(_defineProperty);function _interopRequireDefault$4(st){return st&&st.__esModule?st:{default:st}}createClass.default=function(){function st(Mt,Xr){for(var rn=0;rn<Xr.length;rn++){var nn=Xr[rn];nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),(0,_defineProperty2.default)(Mt,nn.key,nn)}}return function(Mt,Xr,rn){return Xr&&st(Mt.prototype,Xr),rn&&st(Mt,rn),Mt}}();var possibleConstructorReturn={},_typeof$1={},toInteger=_toInteger,defined=_defined,_stringAt=function(st){return function(Mt,Xr){var rn=String(defined(Mt)),nn=toInteger(Xr),an=rn.length,on,sn;return nn<0||nn>=an?st?"":void 0:(on=rn.charCodeAt(nn),on<55296||on>56319||nn+1===an||(sn=rn.charCodeAt(nn+1))<56320||sn>57343?st?rn.charAt(nn):on:st?rn.slice(nn,nn+2):(on-55296<<10)+(sn-56320)+65536)}},_redefine=_hide,_iterators={},_objectDps,hasRequired_objectDps;function require_objectDps(){if(hasRequired_objectDps)return _objectDps;hasRequired_objectDps=1;var st=require_objectDp(),Mt=_anObject,Xr=_objectKeys;return _objectDps=require_descriptors()?Object.defineProperties:function(nn,an){Mt(nn);for(var on=Xr(an),sn=on.length,ln=0,un;sn>ln;)st.f(nn,un=on[ln++],an[un]);return nn},_objectDps}var _html,hasRequired_html;function require_html(){if(hasRequired_html)return _html;hasRequired_html=1;var st=_globalExports.document;return _html=st&&st.documentElement,_html}var _objectCreate,hasRequired_objectCreate;function require_objectCreate(){if(hasRequired_objectCreate)return _objectCreate;hasRequired_objectCreate=1;var st=_anObject,Mt=require_objectDps(),Xr=_enumBugKeys,rn=_sharedKey("IE_PROTO"),nn=function(){},an="prototype",on=function(){var sn=require_domCreate()("iframe"),ln=Xr.length,un="<",cn=">",hn;for(sn.style.display="none",require_html().appendChild(sn),sn.src="javascript:",hn=sn.contentWindow.document,hn.open(),hn.write(un+"script"+cn+"document.F=Object"+un+"/script"+cn),hn.close(),on=hn.F;ln--;)delete on[an][Xr[ln]];return on()};return _objectCreate=Object.create||function(ln,un){var cn;return ln!==null?(nn[an]=st(ln),cn=new nn,nn[an]=null,cn[rn]=ln):cn=on(),un===void 0?cn:Mt(cn,un)},_objectCreate}var _wks={exports:{}},store=_sharedExports("wks"),uid$1=_uid,Symbol$1=_globalExports.Symbol,USE_SYMBOL=typeof Symbol$1=="function",$exports=_wks.exports=function(st){return store[st]||(store[st]=USE_SYMBOL&&Symbol$1[st]||(USE_SYMBOL?Symbol$1:uid$1)("Symbol."+st))};$exports.store=store;var _wksExports=_wks.exports,def=require_objectDp().f,has$3=_has,TAG=_wksExports("toStringTag"),_setToStringTag=function(st,Mt,Xr){st&&!has$3(st=Xr?st:st.prototype,TAG)&&def(st,TAG,{configurable:!0,value:Mt})},create$2=require_objectCreate(),descriptor=_propertyDesc,setToStringTag$2=_setToStringTag,IteratorPrototype={};_hide(IteratorPrototype,_wksExports("iterator"),function(){return this});var _iterCreate=function(st,Mt,Xr){st.prototype=create$2(IteratorPrototype,{next:descriptor(1,Xr)}),setToStringTag$2(st,Mt+" Iterator")},$export$3=_export,redefine$1=_redefine,hide$1=_hide,Iterators$2=_iterators,$iterCreate=_iterCreate,setToStringTag$1=_setToStringTag,getPrototypeOf=_objectGpo,ITERATOR=_wksExports("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(st,Mt,Xr,rn,nn,an,on){$iterCreate(Xr,Mt,rn);var sn=function(fo){if(!BUGGY&&fo in hn)return hn[fo];switch(fo){case KEYS:return function(){return new Xr(this,fo)};case VALUES:return function(){return new Xr(this,fo)}}return function(){return new Xr(this,fo)}},ln=Mt+" Iterator",un=nn==VALUES,cn=!1,hn=st.prototype,fn=hn[ITERATOR]||hn[FF_ITERATOR]||nn&&hn[nn],to=fn||sn(nn),uo=nn?un?sn("entries"):to:void 0,co=Mt=="Array"&&hn.entries||fn,Uo,lo,ho;if(co&&(ho=getPrototypeOf(co.call(new st)),ho!==Object.prototype&&ho.next&&setToStringTag$1(ho,ln,!0)),un&&fn&&fn.name!==VALUES&&(cn=!0,to=function(){return fn.call(this)}),on&&(BUGGY||cn||!hn[ITERATOR])&&hide$1(hn,ITERATOR,to),Iterators$2[Mt]=to,Iterators$2[ln]=returnThis,nn)if(Uo={values:un?to:sn(VALUES),keys:an?to:sn(KEYS),entries:uo},on)for(lo in Uo)lo in hn||redefine$1(hn,lo,Uo[lo]);else $export$3($export$3.P+$export$3.F*(BUGGY||cn),Mt,Uo);return Uo},$at=_stringAt(!0);_iterDefine(String,"String",function(st){this._t=String(st),this._i=0},function(){var st=this._t,Mt=this._i,Xr;return Mt>=st.length?{value:void 0,done:!0}:(Xr=$at(st,Mt),this._i+=Xr.length,{value:Xr,done:!1})});var _iterStep=function(st,Mt){return{value:Mt,done:!!st}},step=_iterStep,Iterators$1=_iterators,toIObject$3=_toIobject;_iterDefine(Array,"Array",function(st,Mt){this._t=toIObject$3(st),this._i=0,this._k=Mt},function(){var st=this._t,Mt=this._k,Xr=this._i++;return!st||Xr>=st.length?(this._t=void 0,step(1)):Mt=="keys"?step(0,Xr):Mt=="values"?step(0,st[Xr]):step(0,[Xr,st[Xr]])},"values");Iterators$1.Arguments=Iterators$1.Array;var global$2=_globalExports,hide=_hide,Iterators=_iterators,TO_STRING_TAG=_wksExports("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var i$3=0;i$3<DOMIterables.length;i$3++){var NAME=DOMIterables[i$3],Collection=global$2[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}var _wksExt={};_wksExt.f=_wksExports;var iterator$1=_wksExt.f("iterator"),iterator={default:iterator$1,__esModule:!0},_meta={exports:{}},META$1=_uid("meta"),isObject$1=_isObject,has$2=_has,setDesc=require_objectDp().f,id$1=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!_fails(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(st){setDesc(st,META$1,{value:{i:"O"+ ++id$1,w:{}}})},fastKey=function(st,Mt){if(!isObject$1(st))return typeof st=="symbol"?st:(typeof st=="string"?"S":"P")+st;if(!has$2(st,META$1)){if(!isExtensible(st))return"F";if(!Mt)return"E";setMeta(st)}return st[META$1].i},getWeak=function(st,Mt){if(!has$2(st,META$1)){if(!isExtensible(st))return!0;if(!Mt)return!1;setMeta(st)}return st[META$1].w},onFreeze=function(st){return FREEZE&&meta$3.NEED&&isExtensible(st)&&!has$2(st,META$1)&&setMeta(st),st},meta$3=_meta.exports={KEY:META$1,NEED:!1,fastKey,getWeak,onFreeze},_metaExports=_meta.exports,core=_coreExports,wksExt$1=_wksExt,defineProperty=require_objectDp().f,_wksDefine=function(st){var Mt=core.Symbol||(core.Symbol={});st.charAt(0)!="_"&&!(st in Mt)&&defineProperty(Mt,st,{value:wksExt$1.f(st)})},getKeys=_objectKeys,gOPS=_objectGops,pIE$1=require_objectPie(),_enumKeys=function(st){var Mt=getKeys(st),Xr=gOPS.f;if(Xr)for(var rn=Xr(st),nn=pIE$1.f,an=0,on;rn.length>an;)nn.call(st,on=rn[an++])&&Mt.push(on);return Mt},cof=_cof,_isArray=Array.isArray||function(Mt){return cof(Mt)=="Array"},_objectGopnExt={},_objectGopn={},hasRequired_objectGopn;function require_objectGopn(){if(hasRequired_objectGopn)return _objectGopn;hasRequired_objectGopn=1;var st=_objectKeysInternal,Mt=_enumBugKeys.concat("length","prototype");return _objectGopn.f=Object.getOwnPropertyNames||function(rn){return st(rn,Mt)},_objectGopn}var toIObject$2=_toIobject,gOPN$1=require_objectGopn().f,toString={}.toString,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(st){try{return gOPN$1(st)}catch{return windowNames.slice()}};_objectGopnExt.f=function(Mt){return windowNames&&toString.call(Mt)=="[object Window]"?getWindowNames(Mt):gOPN$1(toIObject$2(Mt))};var _objectGopd={},pIE=require_objectPie(),createDesc$1=_propertyDesc,toIObject$1=_toIobject,toPrimitive$1=_toPrimitive,has$1=_has,IE8_DOM_DEFINE=require_ie8DomDefine(),gOPD$1=Object.getOwnPropertyDescriptor;_objectGopd.f=require_descriptors()?gOPD$1:function(Mt,Xr){if(Mt=toIObject$1(Mt),Xr=toPrimitive$1(Xr,!0),IE8_DOM_DEFINE)try{return gOPD$1(Mt,Xr)}catch{}if(has$1(Mt,Xr))return createDesc$1(!pIE.f.call(Mt,Xr),Mt[Xr])};var global$1=_globalExports,has=_has,DESCRIPTORS=require_descriptors(),$export$2=_export,redefine=_redefine,META=_metaExports.KEY,$fails=_fails,shared=_sharedExports,setToStringTag=_setToStringTag,uid=_uid,wks=_wksExports,wksExt=_wksExt,wksDefine=_wksDefine,enumKeys=_enumKeys,isArray=_isArray,anObject=_anObject,isObject=_isObject,toObject=_toObject,toIObject=_toIobject,toPrimitive=_toPrimitive,createDesc=_propertyDesc,_create$1=require_objectCreate(),gOPNExt=_objectGopnExt,$GOPD=_objectGopd,$GOPS=_objectGops,$DP=require_objectDp(),$keys=_objectKeys,gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global$1.Symbol,$JSON=global$1.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE=typeof $Symbol=="function"&&!!$GOPS.f,QObject=global$1.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create$1(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(st,Mt,Xr){var rn=gOPD(ObjectProto,Mt);rn&&delete ObjectProto[Mt],dP(st,Mt,Xr),rn&&st!==ObjectProto&&dP(ObjectProto,Mt,rn)}:dP,wrap=function(st){var Mt=AllSymbols[st]=_create$1($Symbol[PROTOTYPE]);return Mt._k=st,Mt},isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(st){return typeof st=="symbol"}:function(st){return st instanceof $Symbol},$defineProperty=function(Mt,Xr,rn){return Mt===ObjectProto&&$defineProperty(OPSymbols,Xr,rn),anObject(Mt),Xr=toPrimitive(Xr,!0),anObject(rn),has(AllSymbols,Xr)?(rn.enumerable?(has(Mt,HIDDEN)&&Mt[HIDDEN][Xr]&&(Mt[HIDDEN][Xr]=!1),rn=_create$1(rn,{enumerable:createDesc(0,!1)})):(has(Mt,HIDDEN)||dP(Mt,HIDDEN,createDesc(1,{})),Mt[HIDDEN][Xr]=!0),setSymbolDesc(Mt,Xr,rn)):dP(Mt,Xr,rn)},$defineProperties=function(Mt,Xr){anObject(Mt);for(var rn=enumKeys(Xr=toIObject(Xr)),nn=0,an=rn.length,on;an>nn;)$defineProperty(Mt,on=rn[nn++],Xr[on]);return Mt},$create=function(Mt,Xr){return Xr===void 0?_create$1(Mt):$defineProperties(_create$1(Mt),Xr)},$propertyIsEnumerable=function(Mt){var Xr=isEnum.call(this,Mt=toPrimitive(Mt,!0));return this===ObjectProto&&has(AllSymbols,Mt)&&!has(OPSymbols,Mt)?!1:Xr||!has(this,Mt)||!has(AllSymbols,Mt)||has(this,HIDDEN)&&this[HIDDEN][Mt]?Xr:!0},$getOwnPropertyDescriptor=function(Mt,Xr){if(Mt=toIObject(Mt),Xr=toPrimitive(Xr,!0),!(Mt===ObjectProto&&has(AllSymbols,Xr)&&!has(OPSymbols,Xr))){var rn=gOPD(Mt,Xr);return rn&&has(AllSymbols,Xr)&&!(has(Mt,HIDDEN)&&Mt[HIDDEN][Xr])&&(rn.enumerable=!0),rn}},$getOwnPropertyNames=function(Mt){for(var Xr=gOPN(toIObject(Mt)),rn=[],nn=0,an;Xr.length>nn;)!has(AllSymbols,an=Xr[nn++])&&an!=HIDDEN&&an!=META&&rn.push(an);return rn},$getOwnPropertySymbols=function(Mt){for(var Xr=Mt===ObjectProto,rn=gOPN(Xr?OPSymbols:toIObject(Mt)),nn=[],an=0,on;rn.length>an;)has(AllSymbols,on=rn[an++])&&(!Xr||has(ObjectProto,on))&&nn.push(AllSymbols[on]);return nn};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var Mt=uid(arguments.length>0?arguments[0]:void 0),Xr=function(rn){this===ObjectProto&&Xr.call(OPSymbols,rn),has(this,HIDDEN)&&has(this[HIDDEN],Mt)&&(this[HIDDEN][Mt]=!1),setSymbolDesc(this,Mt,createDesc(1,rn))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,Mt,{configurable:!0,set:Xr}),wrap(Mt)},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require_objectGopn().f=gOPNExt.f=$getOwnPropertyNames,require_objectPie().f=$propertyIsEnumerable,$GOPS.f=$getOwnPropertySymbols,DESCRIPTORS&&!_library&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable),wksExt.f=function(st){return wrap(wks(st))});$export$2($export$2.G+$export$2.W+$export$2.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j$2=0;es6Symbols.length>j$2;)wks(es6Symbols[j$2++]);for(var wellKnownSymbols=$keys(wks.store),k$1=0;wellKnownSymbols.length>k$1;)wksDefine(wellKnownSymbols[k$1++]);$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Symbol",{for:function(st){return has(SymbolRegistry,st+="")?SymbolRegistry[st]:SymbolRegistry[st]=$Symbol(st)},keyFor:function(Mt){if(!isSymbol(Mt))throw TypeError(Mt+" is not a symbol!");for(var Xr in SymbolRegistry)if(SymbolRegistry[Xr]===Mt)return Xr},useSetter:function(){setter=!0},useSimple:function(){setter=!1}});$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES=$fails(function(){$GOPS.f(1)});$export$2($export$2.S+$export$2.F*FAILS_ON_PRIMITIVES,"Object",{getOwnPropertySymbols:function(Mt){return $GOPS.f(toObject(Mt))}});$JSON&&$export$2($export$2.S+$export$2.F*(!USE_NATIVE||$fails(function(){var st=$Symbol();return _stringify([st])!="[null]"||_stringify({a:st})!="{}"||_stringify(Object(st))!="{}"})),"JSON",{stringify:function(Mt){for(var Xr=[Mt],rn=1,nn,an;arguments.length>rn;)Xr.push(arguments[rn++]);if(an=nn=Xr[1],!(!isObject(nn)&&Mt===void 0||isSymbol(Mt)))return isArray(nn)||(nn=function(on,sn){if(typeof an=="function"&&(sn=an.call(this,on,sn)),!isSymbol(sn))return sn}),Xr[1]=nn,_stringify.apply($JSON,Xr)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||_hide($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",!0);setToStringTag(global$1.JSON,"JSON",!0);_wksDefine("asyncIterator");_wksDefine("observable");var symbol$1=_coreExports.Symbol,symbol={default:symbol$1,__esModule:!0};_typeof$1.__esModule=!0;var _iterator=iterator,_iterator2=_interopRequireDefault$3(_iterator),_symbol=symbol,_symbol2=_interopRequireDefault$3(_symbol),_typeof=typeof _symbol2.default=="function"&&typeof _iterator2.default=="symbol"?function(st){return typeof st}:function(st){return st&&typeof _symbol2.default=="function"&&st.constructor===_symbol2.default&&st!==_symbol2.default.prototype?"symbol":typeof st};function _interopRequireDefault$3(st){return st&&st.__esModule?st:{default:st}}_typeof$1.default=typeof _symbol2.default=="function"&&_typeof(_iterator2.default)==="symbol"?function(st){return typeof st>"u"?"undefined":_typeof(st)}:function(st){return st&&typeof _symbol2.default=="function"&&st.constructor===_symbol2.default&&st!==_symbol2.default.prototype?"symbol":typeof st>"u"?"undefined":_typeof(st)};possibleConstructorReturn.__esModule=!0;var _typeof2$1=_typeof$1,_typeof3$1=_interopRequireDefault$2(_typeof2$1);function _interopRequireDefault$2(st){return st&&st.__esModule?st:{default:st}}possibleConstructorReturn.default=function(st,Mt){if(!st)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt&&((typeof Mt>"u"?"undefined":(0,_typeof3$1.default)(Mt))==="object"||typeof Mt=="function")?Mt:st};var inherits={},_setProto,hasRequired_setProto;function require_setProto(){if(hasRequired_setProto)return _setProto;hasRequired_setProto=1;var st=_isObject,Mt=_anObject,Xr=function(rn,nn){if(Mt(rn),!st(nn)&&nn!==null)throw TypeError(nn+": can't set as prototype!")};return _setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(rn,nn,an){try{an=_ctx(Function.call,_objectGopd.f(Object.prototype,"__proto__").set,2),an(rn,[]),nn=!(rn instanceof Array)}catch{nn=!0}return function(sn,ln){return Xr(sn,ln),nn?sn.__proto__=ln:an(sn,ln),sn}}({},!1):void 0),check:Xr},_setProto}var $export$1=_export;$export$1($export$1.S,"Object",{setPrototypeOf:require_setProto().set});var setPrototypeOf$1=_coreExports.Object.setPrototypeOf,setPrototypeOf={default:setPrototypeOf$1,__esModule:!0},$export=_export;$export($export.S,"Object",{create:require_objectCreate()});var $Object=_coreExports.Object,create$1=function(Mt,Xr){return $Object.create(Mt,Xr)},create={default:create$1,__esModule:!0};inherits.__esModule=!0;var _setPrototypeOf=setPrototypeOf,_setPrototypeOf2=_interopRequireDefault$1(_setPrototypeOf),_create=create,_create2=_interopRequireDefault$1(_create),_typeof2=_typeof$1,_typeof3=_interopRequireDefault$1(_typeof2);function _interopRequireDefault$1(st){return st&&st.__esModule?st:{default:st}}inherits.default=function(st,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof Mt>"u"?"undefined":(0,_typeof3.default)(Mt)));st.prototype=(0,_create2.default)(Mt&&Mt.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),Mt&&(_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(st,Mt):st.__proto__=Mt)};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function st(rn,nn,an,on,sn,ln){if(ln!==ReactPropTypesSecret){var un=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw un.name="Invariant Violation",un}}st.isRequired=st;function Mt(){return st}var Xr={array:st,bigint:st,bool:st,func:st,number:st,object:st,string:st,symbol:st,any:st,arrayOf:Mt,element:st,elementType:st,instanceOf:Mt,node:st,objectOf:Mt,oneOf:Mt,oneOfType:Mt,shape:Mt,exact:Mt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return Xr.PropTypes=Xr,Xr};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports,lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function(st,Mt){module.exports=Mt()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(Mt){_useWebWorker=!!Mt},getWebWorker=function(){return _useWebWorker},setLocationHref=function(Mt){locationHref=Mt},getLocationHref=function(){return locationHref};function createTag(st){return document.createElement(st)}function extendPrototype(st,Mt){var Xr,rn=st.length,nn;for(Xr=0;Xr<rn;Xr+=1){nn=st[Xr].prototype;for(var an in nn)Object.prototype.hasOwnProperty.call(nn,an)&&(Mt.prototype[an]=nn[an])}}function getDescriptor(st,Mt){return Object.getOwnPropertyDescriptor(st,Mt)}function createProxyFunction(st){function Mt(){}return Mt.prototype=st,Mt}var audioControllerFactory=function(){function st(Mt){this.audios=[],this.audioFactory=Mt,this._volume=1,this._isMuted=!1}return st.prototype={addAudio:function(Xr){this.audios.push(Xr)},pause:function(){var Xr,rn=this.audios.length;for(Xr=0;Xr<rn;Xr+=1)this.audios[Xr].pause()},resume:function(){var Xr,rn=this.audios.length;for(Xr=0;Xr<rn;Xr+=1)this.audios[Xr].resume()},setRate:function(Xr){var rn,nn=this.audios.length;for(rn=0;rn<nn;rn+=1)this.audios[rn].setRate(Xr)},createAudio:function(Xr){return this.audioFactory?this.audioFactory(Xr):window.Howl?new window.Howl({src:[Xr]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(Xr){this.audioFactory=Xr},setVolume:function(Xr){this._volume=Xr,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var Xr,rn=this.audios.length;for(Xr=0;Xr<rn;Xr+=1)this.audios[Xr].volume(this._volume*(this._isMuted?0:1))}},function(){return new st}}(),createTypedArray=function(){function st(Xr,rn){var nn=0,an=[],on;switch(Xr){case"int16":case"uint8c":on=1;break;default:on=1.1;break}for(nn=0;nn<rn;nn+=1)an.push(on);return an}function Mt(Xr,rn){return Xr==="float32"?new Float32Array(rn):Xr==="int16"?new Int16Array(rn):Xr==="uint8c"?new Uint8ClampedArray(rn):st(Xr,rn)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?Mt:st}();function createSizedArray(st){return Array.apply(null,{length:st})}function _typeof$6(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(Xr){return typeof Xr}:_typeof$6=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$6(st)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var st=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)BMMath[st[Mt]]=Math[st[Mt]]})(),BMMath.random=Math.random,BMMath.abs=function(st){var Mt=_typeof$6(st);if(Mt==="object"&&st.length){var Xr=createSizedArray(st.length),rn,nn=st.length;for(rn=0;rn<nn;rn+=1)Xr[rn]=Math.abs(st[rn]);return Xr}return Math.abs(st)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(st){st.style.position="absolute",st.style.top=0,st.style.left=0,st.style.display="block",st.style.transformOrigin="0 0",st.style.webkitTransformOrigin="0 0",st.style.backfaceVisibility="visible",st.style.webkitBackfaceVisibility="visible",st.style.transformStyle="preserve-3d",st.style.webkitTransformStyle="preserve-3d",st.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(st,Mt,Xr,rn){this.type=st,this.currentTime=Mt,this.totalTime=Xr,this.direction=rn<0?-1:1}function BMCompleteEvent(st,Mt){this.type=st,this.direction=Mt<0?-1:1}function BMCompleteLoopEvent(st,Mt,Xr,rn){this.type=st,this.currentLoop=Xr,this.totalLoops=Mt,this.direction=rn<0?-1:1}function BMSegmentStartEvent(st,Mt,Xr){this.type=st,this.firstFrame=Mt,this.totalFrames=Xr}function BMDestroyEvent(st,Mt){this.type=st,this.target=Mt}function BMRenderFrameErrorEvent(st,Mt){this.type="renderFrameError",this.nativeError=st,this.currentTime=Mt}function BMConfigErrorEvent(st){this.type="configError",this.nativeError=st}var createElementID=function(){var st=0;return function(){return st+=1,idPrefix$1+"__lottie_element_"+st}}();function HSVtoRGB(st,Mt,Xr){var rn,nn,an,on,sn,ln,un,cn;switch(on=Math.floor(st*6),sn=st*6-on,ln=Xr*(1-Mt),un=Xr*(1-sn*Mt),cn=Xr*(1-(1-sn)*Mt),on%6){case 0:rn=Xr,nn=cn,an=ln;break;case 1:rn=un,nn=Xr,an=ln;break;case 2:rn=ln,nn=Xr,an=cn;break;case 3:rn=ln,nn=un,an=Xr;break;case 4:rn=cn,nn=ln,an=Xr;break;case 5:rn=Xr,nn=ln,an=un;break}return[rn,nn,an]}function RGBtoHSV(st,Mt,Xr){var rn=Math.max(st,Mt,Xr),nn=Math.min(st,Mt,Xr),an=rn-nn,on,sn=rn===0?0:an/rn,ln=rn/255;switch(rn){case nn:on=0;break;case st:on=Mt-Xr+an*(Mt<Xr?6:0),on/=6*an;break;case Mt:on=Xr-st+an*2,on/=6*an;break;case Xr:on=st-Mt+an*4,on/=6*an;break}return[on,sn,ln]}function addSaturationToRGB(st,Mt){var Xr=RGBtoHSV(st[0]*255,st[1]*255,st[2]*255);return Xr[1]+=Mt,Xr[1]>1?Xr[1]=1:Xr[1]<=0&&(Xr[1]=0),HSVtoRGB(Xr[0],Xr[1],Xr[2])}function addBrightnessToRGB(st,Mt){var Xr=RGBtoHSV(st[0]*255,st[1]*255,st[2]*255);return Xr[2]+=Mt,Xr[2]>1?Xr[2]=1:Xr[2]<0&&(Xr[2]=0),HSVtoRGB(Xr[0],Xr[1],Xr[2])}function addHueToRGB(st,Mt){var Xr=RGBtoHSV(st[0]*255,st[1]*255,st[2]*255);return Xr[0]+=Mt/360,Xr[0]>1?Xr[0]-=1:Xr[0]<0&&(Xr[0]+=1),HSVtoRGB(Xr[0],Xr[1],Xr[2])}var rgbToHex=function(){var st=[],Mt,Xr;for(Mt=0;Mt<256;Mt+=1)Xr=Mt.toString(16),st[Mt]=Xr.length===1?"0"+Xr:Xr;return function(rn,nn,an){return rn<0&&(rn=0),nn<0&&(nn=0),an<0&&(an=0),"#"+st[rn]+st[nn]+st[an]}}(),setSubframeEnabled=function(Mt){subframeEnabled=!!Mt},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(Mt){expressionsPlugin=Mt},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(Mt){expressionsInterfaces=Mt},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(Mt){defaultCurveSegments=Mt},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(Mt){idPrefix$1=Mt};function createNS(st){return document.createElementNS(svgNS,st)}function _typeof$5(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(Xr){return typeof Xr}:_typeof$5=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$5(st)}var dataManager=function(){var st=1,Mt=[],Xr,rn,nn={onmessage:function(){},postMessage:function(to){Xr({data:to})}},an={postMessage:function(to){nn.onmessage({data:to})}};function on(fn){if(window.Worker&&window.Blob&&getWebWorker()){var to=new Blob(["var _workerSelf = self; self.onmessage = ",fn.toString()],{type:"text/javascript"}),uo=URL.createObjectURL(to);return new Worker(uo)}return Xr=fn,nn}function sn(){rn||(rn=on(function(to){function uo(){function Uo(mp,lp){var cp,tp,np=mp.length,fp,dp,yp,bp;for(tp=0;tp<np;tp+=1)if(cp=mp[tp],"ks"in cp&&!cp.completed){if(cp.completed=!0,cp.hasMask){var _p=cp.masksProperties;for(dp=_p.length,fp=0;fp<dp;fp+=1)if(_p[fp].pt.k.i)_d(_p[fp].pt.k);else for(bp=_p[fp].pt.k.length,yp=0;yp<bp;yp+=1)_p[fp].pt.k[yp].s&&_d(_p[fp].pt.k[yp].s[0]),_p[fp].pt.k[yp].e&&_d(_p[fp].pt.k[yp].e[0])}cp.ty===0?(cp.layers=fo(cp.refId,lp),Uo(cp.layers,lp)):cp.ty===4?mo(cp.shapes):cp.ty===5&&vp(cp)}}function lo(mp,lp){if(mp){var cp=0,tp=mp.length;for(cp=0;cp<tp;cp+=1)mp[cp].t===1&&(mp[cp].data.layers=fo(mp[cp].data.refId,lp),Uo(mp[cp].data.layers,lp))}}function ho(mp,lp){for(var cp=0,tp=lp.length;cp<tp;){if(lp[cp].id===mp)return lp[cp];cp+=1}return null}function fo(mp,lp){var cp=ho(mp,lp);return cp?cp.layers.__used?JSON.parse(JSON.stringify(cp.layers)):(cp.layers.__used=!0,cp.layers):null}function mo(mp){var lp,cp=mp.length,tp,np;for(lp=cp-1;lp>=0;lp-=1)if(mp[lp].ty==="sh")if(mp[lp].ks.k.i)_d(mp[lp].ks.k);else for(np=mp[lp].ks.k.length,tp=0;tp<np;tp+=1)mp[lp].ks.k[tp].s&&_d(mp[lp].ks.k[tp].s[0]),mp[lp].ks.k[tp].e&&_d(mp[lp].ks.k[tp].e[0]);else mp[lp].ty==="gr"&&mo(mp[lp].it)}function _d(mp){var lp,cp=mp.i.length;for(lp=0;lp<cp;lp+=1)mp.i[lp][0]+=mp.v[lp][0],mp.i[lp][1]+=mp.v[lp][1],mp.o[lp][0]+=mp.v[lp][0],mp.o[lp][1]+=mp.v[lp][1]}function ep(mp,lp){var cp=lp?lp.split("."):[100,100,100];return mp[0]>cp[0]?!0:cp[0]>mp[0]?!1:mp[1]>cp[1]?!0:cp[1]>mp[1]?!1:mp[2]>cp[2]?!0:cp[2]>mp[2]?!1:null}var rp=function(){var mp=[4,4,14];function lp(tp){var np=tp.t.d;tp.t.d={k:[{s:np,t:0}]}}function cp(tp){var np,fp=tp.length;for(np=0;np<fp;np+=1)tp[np].ty===5&&lp(tp[np])}return function(tp){if(ep(mp,tp.v)&&(cp(tp.layers),tp.assets)){var np,fp=tp.assets.length;for(np=0;np<fp;np+=1)tp.assets[np].layers&&cp(tp.assets[np].layers)}}}(),ap=function(){var mp=[4,7,99];return function(lp){if(lp.chars&&!ep(mp,lp.v)){var cp,tp=lp.chars.length;for(cp=0;cp<tp;cp+=1){var np=lp.chars[cp];np.data&&np.data.shapes&&(mo(np.data.shapes),np.data.ip=0,np.data.op=99999,np.data.st=0,np.data.sr=1,np.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},lp.chars[cp].t||(np.data.shapes.push({ty:"no"}),np.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),sp=function(){var mp=[5,7,15];function lp(tp){var np=tp.t.p;typeof np.a=="number"&&(np.a={a:0,k:np.a}),typeof np.p=="number"&&(np.p={a:0,k:np.p}),typeof np.r=="number"&&(np.r={a:0,k:np.r})}function cp(tp){var np,fp=tp.length;for(np=0;np<fp;np+=1)tp[np].ty===5&&lp(tp[np])}return function(tp){if(ep(mp,tp.v)&&(cp(tp.layers),tp.assets)){var np,fp=tp.assets.length;for(np=0;np<fp;np+=1)tp.assets[np].layers&&cp(tp.assets[np].layers)}}}(),up=function(){var mp=[4,1,9];function lp(tp){var np,fp=tp.length,dp,yp;for(np=0;np<fp;np+=1)if(tp[np].ty==="gr")lp(tp[np].it);else if(tp[np].ty==="fl"||tp[np].ty==="st")if(tp[np].c.k&&tp[np].c.k[0].i)for(yp=tp[np].c.k.length,dp=0;dp<yp;dp+=1)tp[np].c.k[dp].s&&(tp[np].c.k[dp].s[0]/=255,tp[np].c.k[dp].s[1]/=255,tp[np].c.k[dp].s[2]/=255,tp[np].c.k[dp].s[3]/=255),tp[np].c.k[dp].e&&(tp[np].c.k[dp].e[0]/=255,tp[np].c.k[dp].e[1]/=255,tp[np].c.k[dp].e[2]/=255,tp[np].c.k[dp].e[3]/=255);else tp[np].c.k[0]/=255,tp[np].c.k[1]/=255,tp[np].c.k[2]/=255,tp[np].c.k[3]/=255}function cp(tp){var np,fp=tp.length;for(np=0;np<fp;np+=1)tp[np].ty===4&&lp(tp[np].shapes)}return function(tp){if(ep(mp,tp.v)&&(cp(tp.layers),tp.assets)){var np,fp=tp.assets.length;for(np=0;np<fp;np+=1)tp.assets[np].layers&&cp(tp.assets[np].layers)}}}(),pp=function(){var mp=[4,4,18];function lp(tp){var np,fp=tp.length,dp,yp;for(np=fp-1;np>=0;np-=1)if(tp[np].ty==="sh")if(tp[np].ks.k.i)tp[np].ks.k.c=tp[np].closed;else for(yp=tp[np].ks.k.length,dp=0;dp<yp;dp+=1)tp[np].ks.k[dp].s&&(tp[np].ks.k[dp].s[0].c=tp[np].closed),tp[np].ks.k[dp].e&&(tp[np].ks.k[dp].e[0].c=tp[np].closed);else tp[np].ty==="gr"&&lp(tp[np].it)}function cp(tp){var np,fp,dp=tp.length,yp,bp,_p,Cp;for(fp=0;fp<dp;fp+=1){if(np=tp[fp],np.hasMask){var Sp=np.masksProperties;for(bp=Sp.length,yp=0;yp<bp;yp+=1)if(Sp[yp].pt.k.i)Sp[yp].pt.k.c=Sp[yp].cl;else for(Cp=Sp[yp].pt.k.length,_p=0;_p<Cp;_p+=1)Sp[yp].pt.k[_p].s&&(Sp[yp].pt.k[_p].s[0].c=Sp[yp].cl),Sp[yp].pt.k[_p].e&&(Sp[yp].pt.k[_p].e[0].c=Sp[yp].cl)}np.ty===4&&lp(np.shapes)}}return function(tp){if(ep(mp,tp.v)&&(cp(tp.layers),tp.assets)){var np,fp=tp.assets.length;for(np=0;np<fp;np+=1)tp.assets[np].layers&&cp(tp.assets[np].layers)}}}();function hp(mp){mp.__complete||(up(mp),rp(mp),ap(mp),sp(mp),pp(mp),Uo(mp.layers,mp.assets),lo(mp.chars,mp.assets),mp.__complete=!0)}function vp(mp){mp.t.a.length===0&&"m"in mp.t.p}var gp={};return gp.completeData=hp,gp.checkColors=up,gp.checkChars=ap,gp.checkPathProperties=sp,gp.checkShapes=pp,gp.completeLayers=Uo,gp}if(an.dataManager||(an.dataManager=uo()),an.assetLoader||(an.assetLoader=function(){function Uo(ho){var fo=ho.getResponseHeader("content-type");return fo&&ho.responseType==="json"&&fo.indexOf("json")!==-1||ho.response&&_typeof$5(ho.response)==="object"?ho.response:ho.response&&typeof ho.response=="string"?JSON.parse(ho.response):ho.responseText?JSON.parse(ho.responseText):null}function lo(ho,fo,mo,_d){var ep,rp=new XMLHttpRequest;try{rp.responseType="json"}catch{}rp.onreadystatechange=function(){if(rp.readyState===4)if(rp.status===200)ep=Uo(rp),mo(ep);else try{ep=Uo(rp),mo(ep)}catch(ap){_d&&_d(ap)}};try{rp.open(["G","E","T"].join(""),ho,!0)}catch{rp.open(["G","E","T"].join(""),fo+"/"+ho,!0)}rp.send()}return{load:lo}}()),to.data.type==="loadAnimation")an.assetLoader.load(to.data.path,to.data.fullPath,function(Uo){an.dataManager.completeData(Uo),an.postMessage({id:to.data.id,payload:Uo,status:"success"})},function(){an.postMessage({id:to.data.id,status:"error"})});else if(to.data.type==="complete"){var co=to.data.animation;an.dataManager.completeData(co),an.postMessage({id:to.data.id,payload:co,status:"success"})}else to.data.type==="loadData"&&an.assetLoader.load(to.data.path,to.data.fullPath,function(Uo){an.postMessage({id:to.data.id,payload:Uo,status:"success"})},function(){an.postMessage({id:to.data.id,status:"error"})})}),rn.onmessage=function(fn){var to=fn.data,uo=to.id,co=Mt[uo];Mt[uo]=null,to.status==="success"?co.onComplete(to.payload):co.onError&&co.onError()})}function ln(fn,to){st+=1;var uo="processId_"+st;return Mt[uo]={onComplete:fn,onError:to},uo}function un(fn,to,uo){sn();var co=ln(to,uo);rn.postMessage({type:"loadAnimation",path:fn,fullPath:window.location.origin+window.location.pathname,id:co})}function cn(fn,to,uo){sn();var co=ln(to,uo);rn.postMessage({type:"loadData",path:fn,fullPath:window.location.origin+window.location.pathname,id:co})}function hn(fn,to,uo){sn();var co=ln(to,uo);rn.postMessage({type:"complete",animation:fn,id:co})}return{loadAnimation:un,loadData:cn,completeAnimation:hn}}(),ImagePreloader=function(){var st=function(){var lo=createTag("canvas");lo.width=1,lo.height=1;var ho=lo.getContext("2d");return ho.fillStyle="rgba(0,0,0,0)",ho.fillRect(0,0,1,1),lo}();function Mt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Xr(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function rn(lo,ho,fo){var mo="";if(lo.e)mo=lo.p;else if(ho){var _d=lo.p;_d.indexOf("images/")!==-1&&(_d=_d.split("/")[1]),mo=ho+_d}else mo=fo,mo+=lo.u?lo.u:"",mo+=lo.p;return mo}function nn(lo){var ho=0,fo=setInterval(function(){var mo=lo.getBBox();(mo.width||ho>500)&&(this._imageLoaded(),clearInterval(fo)),ho+=1}.bind(this),50)}function an(lo){var ho=rn(lo,this.assetsPath,this.path),fo=createNS("image");isSafari?this.testImageLoaded(fo):fo.addEventListener("load",this._imageLoaded,!1),fo.addEventListener("error",function(){mo.img=st,this._imageLoaded()}.bind(this),!1),fo.setAttributeNS("http://www.w3.org/1999/xlink","href",ho),this._elementHelper.append?this._elementHelper.append(fo):this._elementHelper.appendChild(fo);var mo={img:fo,assetData:lo};return mo}function on(lo){var ho=rn(lo,this.assetsPath,this.path),fo=createTag("img");fo.crossOrigin="anonymous",fo.addEventListener("load",this._imageLoaded,!1),fo.addEventListener("error",function(){mo.img=st,this._imageLoaded()}.bind(this),!1),fo.src=ho;var mo={img:fo,assetData:lo};return mo}function sn(lo){var ho={assetData:lo},fo=rn(lo,this.assetsPath,this.path);return dataManager.loadData(fo,function(mo){ho.img=mo,this._footageLoaded()}.bind(this),function(){ho.img={},this._footageLoaded()}.bind(this)),ho}function ln(lo,ho){this.imagesLoadedCb=ho;var fo,mo=lo.length;for(fo=0;fo<mo;fo+=1)lo[fo].layers||(!lo[fo].t||lo[fo].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(lo[fo]))):lo[fo].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(lo[fo]))))}function un(lo){this.path=lo||""}function cn(lo){this.assetsPath=lo||""}function hn(lo){for(var ho=0,fo=this.images.length;ho<fo;){if(this.images[ho].assetData===lo)return this.images[ho].img;ho+=1}return null}function fn(){this.imagesLoadedCb=null,this.images.length=0}function to(){return this.totalImages===this.loadedAssets}function uo(){return this.totalFootages===this.loadedFootagesCount}function co(lo,ho){lo==="svg"?(this._elementHelper=ho,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Uo(){this._imageLoaded=Mt.bind(this),this._footageLoaded=Xr.bind(this),this.testImageLoaded=nn.bind(this),this.createFootageData=sn.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Uo.prototype={loadAssets:ln,setAssetsPath:cn,setPath:un,loadedImages:to,loadedFootages:uo,destroy:fn,getAsset:hn,createImgData:on,createImageData:an,imageLoaded:Mt,footageLoaded:Xr,setCacheType:co},Uo}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(Mt,Xr){if(this._cbs[Mt])for(var rn=this._cbs[Mt],nn=0;nn<rn.length;nn+=1)rn[nn](Xr)},addEventListener:function(Mt,Xr){return this._cbs[Mt]||(this._cbs[Mt]=[]),this._cbs[Mt].push(Xr),function(){this.removeEventListener(Mt,Xr)}.bind(this)},removeEventListener:function(Mt,Xr){if(!Xr)this._cbs[Mt]=null;else if(this._cbs[Mt]){for(var rn=0,nn=this._cbs[Mt].length;rn<nn;)this._cbs[Mt][rn]===Xr&&(this._cbs[Mt].splice(rn,1),rn-=1,nn-=1),rn+=1;this._cbs[Mt].length||(this._cbs[Mt]=null)}}};var markerParser=function(){function st(Mt){for(var Xr=Mt.split(`\r
`),rn={},nn,an=0,on=0;on<Xr.length;on+=1)nn=Xr[on].split(":"),nn.length===2&&(rn[nn[0]]=nn[1].trim(),an+=1);if(an===0)throw new Error;return rn}return function(Mt){for(var Xr=[],rn=0;rn<Mt.length;rn+=1){var nn=Mt[rn],an={time:nn.tm,duration:nn.dr};try{an.payload=JSON.parse(Mt[rn].cm)}catch{try{an.payload=st(Mt[rn].cm)}catch{an.payload={name:Mt[rn].cm}}}Xr.push(an)}return Xr}}(),ProjectInterface=function(){function st(Mt){this.compositions.push(Mt)}return function(){function Mt(Xr){for(var rn=0,nn=this.compositions.length;rn<nn;){if(this.compositions[rn].data&&this.compositions[rn].data.nm===Xr)return this.compositions[rn].prepareFrame&&this.compositions[rn].data.xt&&this.compositions[rn].prepareFrame(this.currentFrame),this.compositions[rn].compInterface;rn+=1}return null}return Mt.compositions=[],Mt.currentFrame=0,Mt.registerComposition=st,Mt}}(),renderers={},registerRenderer=function(Mt,Xr){renderers[Mt]=Xr};function getRenderer(st){return renderers[st]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var st in renderers)if(renderers[st])return st;return""}function _typeof$4(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(Xr){return typeof Xr}:_typeof$4=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$4(st)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(st){(st.wrapper||st.container)&&(this.wrapper=st.wrapper||st.container);var Mt="svg";st.animType?Mt=st.animType:st.renderer&&(Mt=st.renderer);var Xr=getRenderer(Mt);this.renderer=new Xr(this,st.rendererSettings),this.imagePreloader.setCacheType(Mt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=Mt,st.loop===""||st.loop===null||st.loop===void 0||st.loop===!0?this.loop=!0:st.loop===!1?this.loop=!1:this.loop=parseInt(st.loop,10),this.autoplay="autoplay"in st?st.autoplay:!0,this.name=st.name?st.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(st,"autoloadSegments")?st.autoloadSegments:!0,this.assetsPath=st.assetsPath,this.initialSegment=st.initialSegment,st.audioFactory&&this.audioController.setAudioFactory(st.audioFactory),st.animationData?this.setupAnimation(st.animationData):st.path&&(st.path.lastIndexOf("\\")!==-1?this.path=st.path.substr(0,st.path.lastIndexOf("\\")+1):this.path=st.path.substr(0,st.path.lastIndexOf("/")+1),this.fileName=st.path.substr(st.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(st.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(st){dataManager.completeAnimation(st,this.configAnimation)},AnimationItem.prototype.setData=function(st,Mt){Mt&&_typeof$4(Mt)!=="object"&&(Mt=JSON.parse(Mt));var Xr={wrapper:st,animationData:Mt},rn=st.attributes;Xr.path=rn.getNamedItem("data-animation-path")?rn.getNamedItem("data-animation-path").value:rn.getNamedItem("data-bm-path")?rn.getNamedItem("data-bm-path").value:rn.getNamedItem("bm-path")?rn.getNamedItem("bm-path").value:"",Xr.animType=rn.getNamedItem("data-anim-type")?rn.getNamedItem("data-anim-type").value:rn.getNamedItem("data-bm-type")?rn.getNamedItem("data-bm-type").value:rn.getNamedItem("bm-type")?rn.getNamedItem("bm-type").value:rn.getNamedItem("data-bm-renderer")?rn.getNamedItem("data-bm-renderer").value:rn.getNamedItem("bm-renderer")?rn.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var nn=rn.getNamedItem("data-anim-loop")?rn.getNamedItem("data-anim-loop").value:rn.getNamedItem("data-bm-loop")?rn.getNamedItem("data-bm-loop").value:rn.getNamedItem("bm-loop")?rn.getNamedItem("bm-loop").value:"";nn==="false"?Xr.loop=!1:nn==="true"?Xr.loop=!0:nn!==""&&(Xr.loop=parseInt(nn,10));var an=rn.getNamedItem("data-anim-autoplay")?rn.getNamedItem("data-anim-autoplay").value:rn.getNamedItem("data-bm-autoplay")?rn.getNamedItem("data-bm-autoplay").value:rn.getNamedItem("bm-autoplay")?rn.getNamedItem("bm-autoplay").value:!0;Xr.autoplay=an!=="false",Xr.name=rn.getNamedItem("data-name")?rn.getNamedItem("data-name").value:rn.getNamedItem("data-bm-name")?rn.getNamedItem("data-bm-name").value:rn.getNamedItem("bm-name")?rn.getNamedItem("bm-name").value:"";var on=rn.getNamedItem("data-anim-prerender")?rn.getNamedItem("data-anim-prerender").value:rn.getNamedItem("data-bm-prerender")?rn.getNamedItem("data-bm-prerender").value:rn.getNamedItem("bm-prerender")?rn.getNamedItem("bm-prerender").value:"";on==="false"&&(Xr.prerender=!1),Xr.path?this.setParams(Xr):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(st){st.op>this.animationData.op&&(this.animationData.op=st.op,this.totalFrames=Math.floor(st.op-this.animationData.ip));var Mt=this.animationData.layers,Xr,rn=Mt.length,nn=st.layers,an,on=nn.length;for(an=0;an<on;an+=1)for(Xr=0;Xr<rn;){if(Mt[Xr].id===nn[an].id){Mt[Xr]=nn[an];break}Xr+=1}if((st.chars||st.fonts)&&(this.renderer.globalData.fontManager.addChars(st.chars),this.renderer.globalData.fontManager.addFonts(st.fonts,this.renderer.globalData.defs)),st.assets)for(rn=st.assets.length,Xr=0;Xr<rn;Xr+=1)this.animationData.assets.push(st.assets[Xr]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(st){this.animationData=st;var Mt=getExpressionsPlugin();Mt&&Mt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var st=this.animationData.segments;if(!st||st.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var Mt=st.shift();this.timeCompleted=Mt.time*this.frameRate;var Xr=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(Xr,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var st=this.animationData.segments;st||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(st){if(this.renderer)try{this.animationData=st,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(st),st.assets||(st.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(st.assets),this.markers=markerParser(st.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(Mt){this.triggerConfigError(Mt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var st=getExpressionsPlugin();st&&st.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(st,Mt){var Xr=typeof st=="number"?st:void 0,rn=typeof Mt=="number"?Mt:void 0;this.renderer.updateContainerSize(Xr,rn)},AnimationItem.prototype.setSubframe=function(st){this.isSubframeEnabled=!!st},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(st){this.triggerRenderFrameError(st)}},AnimationItem.prototype.play=function(st){st&&this.name!==st||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(st){st&&this.name!==st||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(st){st&&this.name!==st||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(st){st&&this.name!==st||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(st){for(var Mt,Xr=0;Xr<this.markers.length;Xr+=1)if(Mt=this.markers[Xr],Mt.payload&&Mt.payload.name===st)return Mt;return null},AnimationItem.prototype.goToAndStop=function(st,Mt,Xr){if(!(Xr&&this.name!==Xr)){var rn=Number(st);if(isNaN(rn)){var nn=this.getMarkerData(st);nn&&this.goToAndStop(nn.time,!0)}else Mt?this.setCurrentRawFrameValue(st):this.setCurrentRawFrameValue(st*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(st,Mt,Xr){if(!(Xr&&this.name!==Xr)){var rn=Number(st);if(isNaN(rn)){var nn=this.getMarkerData(st);nn&&(nn.duration?this.playSegments([nn.time,nn.time+nn.duration],!0):this.goToAndStop(nn.time,!0))}else this.goToAndStop(rn,Mt,Xr);this.play()}},AnimationItem.prototype.advanceTime=function(st){if(!(this.isPaused===!0||this.isLoaded===!1)){var Mt=this.currentRawFrame+st*this.frameModifier,Xr=!1;Mt>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(Mt>this.totalFrames?Mt%this.totalFrames:0)||(Xr=!0,Mt=this.totalFrames-1):Mt>=this.totalFrames?(this.playCount+=1,this.checkSegments(Mt%this.totalFrames)||(this.setCurrentRawFrameValue(Mt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(Mt):Mt<0?this.checkSegments(Mt%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+Mt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(Xr=!0,Mt=0)):this.setCurrentRawFrameValue(Mt),Xr&&(this.setCurrentRawFrameValue(Mt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(st,Mt){this.playCount=0,st[1]<st[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=st[0]-st[1],this.timeCompleted=this.totalFrames,this.firstFrame=st[1],this.setCurrentRawFrameValue(this.totalFrames-.001-Mt)):st[1]>st[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=st[1]-st[0],this.timeCompleted=this.totalFrames,this.firstFrame=st[0],this.setCurrentRawFrameValue(.001+Mt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(st,Mt){var Xr=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<st?Xr=st:this.currentRawFrame+this.firstFrame>Mt&&(Xr=Mt-st)),this.firstFrame=st,this.totalFrames=Mt-st,this.timeCompleted=this.totalFrames,Xr!==-1&&this.goToAndStop(Xr,!0)},AnimationItem.prototype.playSegments=function(st,Mt){if(Mt&&(this.segments.length=0),_typeof$4(st[0])==="object"){var Xr,rn=st.length;for(Xr=0;Xr<rn;Xr+=1)this.segments.push(st[Xr])}else this.segments.push(st);this.segments.length&&Mt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(st){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),st&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(st){return this.segments.length?(this.adjustSegment(this.segments.shift(),st),!0):!1},AnimationItem.prototype.destroy=function(st){st&&this.name!==st||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(st){this.currentRawFrame=st,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(st){this.playSpeed=st,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(st){this.playDirection=st<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(st){this.loop=st},AnimationItem.prototype.setVolume=function(st,Mt){Mt&&this.name!==Mt||this.audioController.setVolume(st)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(st){st&&this.name!==st||this.audioController.mute()},AnimationItem.prototype.unmute=function(st){st&&this.name!==st||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(st){var Mt="";if(st.e)Mt=st.p;else if(this.assetsPath){var Xr=st.p;Xr.indexOf("images/")!==-1&&(Xr=Xr.split("/")[1]),Mt=this.assetsPath+Xr}else Mt=this.path,Mt+=st.u?st.u:"",Mt+=st.p;return Mt},AnimationItem.prototype.getAssetData=function(st){for(var Mt=0,Xr=this.assets.length;Mt<Xr;){if(st===this.assets[Mt].id)return this.assets[Mt];Mt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(st){return st?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(st,Mt,Xr){try{var rn=this.renderer.getElementByPath(st);rn.updateDocumentData(Mt,Xr)}catch{}},AnimationItem.prototype.trigger=function(st){if(this._cbs&&this._cbs[st])switch(st){case"enterFrame":this.triggerEvent(st,new BMEnterFrameEvent(st,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(st,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(st,new BMCompleteLoopEvent(st,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(st,new BMCompleteEvent(st,this.frameMult));break;case"segmentStart":this.triggerEvent(st,new BMSegmentStartEvent(st,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(st,new BMDestroyEvent(st,this));break;default:this.triggerEvent(st)}st==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(st,this.currentFrame,this.totalFrames,this.frameMult)),st==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(st,this.loop,this.playCount,this.frameMult)),st==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(st,this.frameMult)),st==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(st,this.firstFrame,this.totalFrames)),st==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(st,this))},AnimationItem.prototype.triggerRenderFrameError=function(st){var Mt=new BMRenderFrameErrorEvent(st,this.currentFrame);this.triggerEvent("error",Mt),this.onError&&this.onError.call(this,Mt)},AnimationItem.prototype.triggerConfigError=function(st){var Mt=new BMConfigErrorEvent(st,this.currentFrame);this.triggerEvent("error",Mt),this.onError&&this.onError.call(this,Mt)};var animationManager=function(){var st={},Mt=[],Xr=0,rn=0,nn=0,an=!0,on=!1;function sn(lp){for(var cp=0,tp=lp.target;cp<rn;)Mt[cp].animation===tp&&(Mt.splice(cp,1),cp-=1,rn-=1,tp.isPaused||hn()),cp+=1}function ln(lp,cp){if(!lp)return null;for(var tp=0;tp<rn;){if(Mt[tp].elem===lp&&Mt[tp].elem!==null)return Mt[tp].animation;tp+=1}var np=new AnimationItem;return fn(np,lp),np.setData(lp,cp),np}function un(){var lp,cp=Mt.length,tp=[];for(lp=0;lp<cp;lp+=1)tp.push(Mt[lp].animation);return tp}function cn(){nn+=1,up()}function hn(){nn-=1}function fn(lp,cp){lp.addEventListener("destroy",sn),lp.addEventListener("_active",cn),lp.addEventListener("_idle",hn),Mt.push({elem:cp,animation:lp}),rn+=1}function to(lp){var cp=new AnimationItem;return fn(cp,null),cp.setParams(lp),cp}function uo(lp,cp){var tp;for(tp=0;tp<rn;tp+=1)Mt[tp].animation.setSpeed(lp,cp)}function co(lp,cp){var tp;for(tp=0;tp<rn;tp+=1)Mt[tp].animation.setDirection(lp,cp)}function Uo(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.play(lp)}function lo(lp){var cp=lp-Xr,tp;for(tp=0;tp<rn;tp+=1)Mt[tp].animation.advanceTime(cp);Xr=lp,nn&&!on?window.requestAnimationFrame(lo):an=!0}function ho(lp){Xr=lp,window.requestAnimationFrame(lo)}function fo(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.pause(lp)}function mo(lp,cp,tp){var np;for(np=0;np<rn;np+=1)Mt[np].animation.goToAndStop(lp,cp,tp)}function _d(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.stop(lp)}function ep(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.togglePause(lp)}function rp(lp){var cp;for(cp=rn-1;cp>=0;cp-=1)Mt[cp].animation.destroy(lp)}function ap(lp,cp,tp){var np=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),fp,dp=np.length;for(fp=0;fp<dp;fp+=1)tp&&np[fp].setAttribute("data-bm-type",tp),ln(np[fp],lp);if(cp&&dp===0){tp||(tp="svg");var yp=document.getElementsByTagName("body")[0];yp.innerText="";var bp=createTag("div");bp.style.width="100%",bp.style.height="100%",bp.setAttribute("data-bm-type",tp),yp.appendChild(bp),ln(bp,lp)}}function sp(){var lp;for(lp=0;lp<rn;lp+=1)Mt[lp].animation.resize()}function up(){!on&&nn&&an&&(window.requestAnimationFrame(ho),an=!1)}function pp(){on=!0}function hp(){on=!1,up()}function vp(lp,cp){var tp;for(tp=0;tp<rn;tp+=1)Mt[tp].animation.setVolume(lp,cp)}function gp(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.mute(lp)}function mp(lp){var cp;for(cp=0;cp<rn;cp+=1)Mt[cp].animation.unmute(lp)}return st.registerAnimation=ln,st.loadAnimation=to,st.setSpeed=uo,st.setDirection=co,st.play=Uo,st.pause=fo,st.stop=_d,st.togglePause=ep,st.searchAnimations=ap,st.resize=sp,st.goToAndStop=mo,st.destroy=rp,st.freeze=pp,st.unfreeze=hp,st.setVolume=vp,st.mute=gp,st.unmute=mp,st.getRegisteredAnimations=un,st}(),BezierFactory=function(){var st={};st.getBezierEasing=Xr;var Mt={};function Xr(ho,fo,mo,_d,ep){var rp=ep||("bez_"+ho+"_"+fo+"_"+mo+"_"+_d).replace(/\./g,"p");if(Mt[rp])return Mt[rp];var ap=new lo([ho,fo,mo,_d]);return Mt[rp]=ap,ap}var rn=4,nn=.001,an=1e-7,on=10,sn=11,ln=1/(sn-1),un=typeof Float32Array=="function";function cn(ho,fo){return 1-3*fo+3*ho}function hn(ho,fo){return 3*fo-6*ho}function fn(ho){return 3*ho}function to(ho,fo,mo){return((cn(fo,mo)*ho+hn(fo,mo))*ho+fn(fo))*ho}function uo(ho,fo,mo){return 3*cn(fo,mo)*ho*ho+2*hn(fo,mo)*ho+fn(fo)}function co(ho,fo,mo,_d,ep){var rp,ap,sp=0;do ap=fo+(mo-fo)/2,rp=to(ap,_d,ep)-ho,rp>0?mo=ap:fo=ap;while(Math.abs(rp)>an&&++sp<on);return ap}function Uo(ho,fo,mo,_d){for(var ep=0;ep<rn;++ep){var rp=uo(fo,mo,_d);if(rp===0)return fo;var ap=to(fo,mo,_d)-ho;fo-=ap/rp}return fo}function lo(ho){this._p=ho,this._mSampleValues=un?new Float32Array(sn):new Array(sn),this._precomputed=!1,this.get=this.get.bind(this)}return lo.prototype={get:function(fo){var mo=this._p[0],_d=this._p[1],ep=this._p[2],rp=this._p[3];return this._precomputed||this._precompute(),mo===_d&&ep===rp?fo:fo===0?0:fo===1?1:to(this._getTForX(fo),_d,rp)},_precompute:function(){var fo=this._p[0],mo=this._p[1],_d=this._p[2],ep=this._p[3];this._precomputed=!0,(fo!==mo||_d!==ep)&&this._calcSampleValues()},_calcSampleValues:function(){for(var fo=this._p[0],mo=this._p[2],_d=0;_d<sn;++_d)this._mSampleValues[_d]=to(_d*ln,fo,mo)},_getTForX:function(fo){for(var mo=this._p[0],_d=this._p[2],ep=this._mSampleValues,rp=0,ap=1,sp=sn-1;ap!==sp&&ep[ap]<=fo;++ap)rp+=ln;--ap;var up=(fo-ep[ap])/(ep[ap+1]-ep[ap]),pp=rp+up*ln,hp=uo(pp,mo,_d);return hp>=nn?Uo(fo,pp,mo,_d):hp===0?pp:co(fo,rp,rp+ln,mo,_d)}},st}(),pooling=function(){function st(Mt){return Mt.concat(createSizedArray(Mt.length))}return{double:st}}(),poolFactory=function(){return function(st,Mt,Xr){var rn=0,nn=st,an=createSizedArray(nn),on={newElement:sn,release:ln};function sn(){var un;return rn?(rn-=1,un=an[rn]):un=Mt(),un}function ln(un){rn===nn&&(an=pooling.double(an),nn*=2),Xr&&Xr(un),an[rn]=un,rn+=1}return on}}(),bezierLengthPool=function(){function st(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,st)}(),segmentsLengthPool=function(){function st(){return{lengths:[],totalLength:0}}function Mt(Xr){var rn,nn=Xr.lengths.length;for(rn=0;rn<nn;rn+=1)bezierLengthPool.release(Xr.lengths[rn]);Xr.lengths.length=0}return poolFactory(8,st,Mt)}();function bezFunction(){var st=Math;function Mt(fn,to,uo,co,Uo,lo){var ho=fn*co+to*Uo+uo*lo-Uo*co-lo*fn-uo*to;return ho>-.001&&ho<.001}function Xr(fn,to,uo,co,Uo,lo,ho,fo,mo){if(uo===0&&lo===0&&mo===0)return Mt(fn,to,co,Uo,ho,fo);var _d=st.sqrt(st.pow(co-fn,2)+st.pow(Uo-to,2)+st.pow(lo-uo,2)),ep=st.sqrt(st.pow(ho-fn,2)+st.pow(fo-to,2)+st.pow(mo-uo,2)),rp=st.sqrt(st.pow(ho-co,2)+st.pow(fo-Uo,2)+st.pow(mo-lo,2)),ap;return _d>ep?_d>rp?ap=_d-ep-rp:ap=rp-ep-_d:rp>ep?ap=rp-ep-_d:ap=ep-_d-rp,ap>-1e-4&&ap<1e-4}var rn=function(){return function(fn,to,uo,co){var Uo=getDefaultCurveSegments(),lo,ho,fo,mo,_d,ep=0,rp,ap=[],sp=[],up=bezierLengthPool.newElement();for(fo=uo.length,lo=0;lo<Uo;lo+=1){for(_d=lo/(Uo-1),rp=0,ho=0;ho<fo;ho+=1)mo=bmPow(1-_d,3)*fn[ho]+3*bmPow(1-_d,2)*_d*uo[ho]+3*(1-_d)*bmPow(_d,2)*co[ho]+bmPow(_d,3)*to[ho],ap[ho]=mo,sp[ho]!==null&&(rp+=bmPow(ap[ho]-sp[ho],2)),sp[ho]=ap[ho];rp&&(rp=bmSqrt(rp),ep+=rp),up.percents[lo]=_d,up.lengths[lo]=ep}return up.addedLength=ep,up}}();function nn(fn){var to=segmentsLengthPool.newElement(),uo=fn.c,co=fn.v,Uo=fn.o,lo=fn.i,ho,fo=fn._length,mo=to.lengths,_d=0;for(ho=0;ho<fo-1;ho+=1)mo[ho]=rn(co[ho],co[ho+1],Uo[ho],lo[ho+1]),_d+=mo[ho].addedLength;return uo&&fo&&(mo[ho]=rn(co[ho],co[0],Uo[ho],lo[0]),_d+=mo[ho].addedLength),to.totalLength=_d,to}function an(fn){this.segmentLength=0,this.points=new Array(fn)}function on(fn,to){this.partialLength=fn,this.point=to}var sn=function(){var fn={};return function(to,uo,co,Uo){var lo=(to[0]+"_"+to[1]+"_"+uo[0]+"_"+uo[1]+"_"+co[0]+"_"+co[1]+"_"+Uo[0]+"_"+Uo[1]).replace(/\./g,"p");if(!fn[lo]){var ho=getDefaultCurveSegments(),fo,mo,_d,ep,rp,ap=0,sp,up,pp=null;to.length===2&&(to[0]!==uo[0]||to[1]!==uo[1])&&Mt(to[0],to[1],uo[0],uo[1],to[0]+co[0],to[1]+co[1])&&Mt(to[0],to[1],uo[0],uo[1],uo[0]+Uo[0],uo[1]+Uo[1])&&(ho=2);var hp=new an(ho);for(_d=co.length,fo=0;fo<ho;fo+=1){for(up=createSizedArray(_d),rp=fo/(ho-1),sp=0,mo=0;mo<_d;mo+=1)ep=bmPow(1-rp,3)*to[mo]+3*bmPow(1-rp,2)*rp*(to[mo]+co[mo])+3*(1-rp)*bmPow(rp,2)*(uo[mo]+Uo[mo])+bmPow(rp,3)*uo[mo],up[mo]=ep,pp!==null&&(sp+=bmPow(up[mo]-pp[mo],2));sp=bmSqrt(sp),ap+=sp,hp.points[fo]=new on(sp,up),pp=up}hp.segmentLength=ap,fn[lo]=hp}return fn[lo]}}();function ln(fn,to){var uo=to.percents,co=to.lengths,Uo=uo.length,lo=bmFloor((Uo-1)*fn),ho=fn*to.addedLength,fo=0;if(lo===Uo-1||lo===0||ho===co[lo])return uo[lo];for(var mo=co[lo]>ho?-1:1,_d=!0;_d;)if(co[lo]<=ho&&co[lo+1]>ho?(fo=(ho-co[lo])/(co[lo+1]-co[lo]),_d=!1):lo+=mo,lo<0||lo>=Uo-1){if(lo===Uo-1)return uo[lo];_d=!1}return uo[lo]+(uo[lo+1]-uo[lo])*fo}function un(fn,to,uo,co,Uo,lo){var ho=ln(Uo,lo),fo=1-ho,mo=st.round((fo*fo*fo*fn[0]+(ho*fo*fo+fo*ho*fo+fo*fo*ho)*uo[0]+(ho*ho*fo+fo*ho*ho+ho*fo*ho)*co[0]+ho*ho*ho*to[0])*1e3)/1e3,_d=st.round((fo*fo*fo*fn[1]+(ho*fo*fo+fo*ho*fo+fo*fo*ho)*uo[1]+(ho*ho*fo+fo*ho*ho+ho*fo*ho)*co[1]+ho*ho*ho*to[1])*1e3)/1e3;return[mo,_d]}var cn=createTypedArray("float32",8);function hn(fn,to,uo,co,Uo,lo,ho){Uo<0?Uo=0:Uo>1&&(Uo=1);var fo=ln(Uo,ho);lo=lo>1?1:lo;var mo=ln(lo,ho),_d,ep=fn.length,rp=1-fo,ap=1-mo,sp=rp*rp*rp,up=fo*rp*rp*3,pp=fo*fo*rp*3,hp=fo*fo*fo,vp=rp*rp*ap,gp=fo*rp*ap+rp*fo*ap+rp*rp*mo,mp=fo*fo*ap+rp*fo*mo+fo*rp*mo,lp=fo*fo*mo,cp=rp*ap*ap,tp=fo*ap*ap+rp*mo*ap+rp*ap*mo,np=fo*mo*ap+rp*mo*mo+fo*ap*mo,fp=fo*mo*mo,dp=ap*ap*ap,yp=mo*ap*ap+ap*mo*ap+ap*ap*mo,bp=mo*mo*ap+ap*mo*mo+mo*ap*mo,_p=mo*mo*mo;for(_d=0;_d<ep;_d+=1)cn[_d*4]=st.round((sp*fn[_d]+up*uo[_d]+pp*co[_d]+hp*to[_d])*1e3)/1e3,cn[_d*4+1]=st.round((vp*fn[_d]+gp*uo[_d]+mp*co[_d]+lp*to[_d])*1e3)/1e3,cn[_d*4+2]=st.round((cp*fn[_d]+tp*uo[_d]+np*co[_d]+fp*to[_d])*1e3)/1e3,cn[_d*4+3]=st.round((dp*fn[_d]+yp*uo[_d]+bp*co[_d]+_p*to[_d])*1e3)/1e3;return cn}return{getSegmentsLength:nn,getNewSegment:hn,getPointInSegment:un,buildBezierData:sn,pointOnLine2D:Mt,pointOnLine3D:Xr}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(st,Mt){var Xr=this.offsetTime,rn;this.propType==="multidimensional"&&(rn=createTypedArray("float32",this.pv.length));for(var nn=Mt.lastIndex,an=nn,on=this.keyframes.length-1,sn=!0,ln,un,cn;sn;){if(ln=this.keyframes[an],un=this.keyframes[an+1],an===on-1&&st>=un.t-Xr){ln.h&&(ln=un),nn=0;break}if(un.t-Xr>st){nn=an;break}an<on-1?an+=1:(nn=0,sn=!1)}cn=this.keyframesMetadata[an]||{};var hn,fn,to,uo,co,Uo,lo=un.t-Xr,ho=ln.t-Xr,fo;if(ln.to){cn.bezierData||(cn.bezierData=bez.buildBezierData(ln.s,un.s||ln.e,ln.to,ln.ti));var mo=cn.bezierData;if(st>=lo||st<ho){var _d=st>=lo?mo.points.length-1:0;for(fn=mo.points[_d].point.length,hn=0;hn<fn;hn+=1)rn[hn]=mo.points[_d].point[hn]}else{cn.__fnct?Uo=cn.__fnct:(Uo=BezierFactory.getBezierEasing(ln.o.x,ln.o.y,ln.i.x,ln.i.y,ln.n).get,cn.__fnct=Uo),to=Uo((st-ho)/(lo-ho));var ep=mo.segmentLength*to,rp,ap=Mt.lastFrame<st&&Mt._lastKeyframeIndex===an?Mt._lastAddedLength:0;for(co=Mt.lastFrame<st&&Mt._lastKeyframeIndex===an?Mt._lastPoint:0,sn=!0,uo=mo.points.length;sn;){if(ap+=mo.points[co].partialLength,ep===0||to===0||co===mo.points.length-1){for(fn=mo.points[co].point.length,hn=0;hn<fn;hn+=1)rn[hn]=mo.points[co].point[hn];break}else if(ep>=ap&&ep<ap+mo.points[co+1].partialLength){for(rp=(ep-ap)/mo.points[co+1].partialLength,fn=mo.points[co].point.length,hn=0;hn<fn;hn+=1)rn[hn]=mo.points[co].point[hn]+(mo.points[co+1].point[hn]-mo.points[co].point[hn])*rp;break}co<uo-1?co+=1:sn=!1}Mt._lastPoint=co,Mt._lastAddedLength=ap-mo.points[co].partialLength,Mt._lastKeyframeIndex=an}}else{var sp,up,pp,hp,vp;if(on=ln.s.length,fo=un.s||ln.e,this.sh&&ln.h!==1)if(st>=lo)rn[0]=fo[0],rn[1]=fo[1],rn[2]=fo[2];else if(st<=ho)rn[0]=ln.s[0],rn[1]=ln.s[1],rn[2]=ln.s[2];else{var gp=createQuaternion(ln.s),mp=createQuaternion(fo),lp=(st-ho)/(lo-ho);quaternionToEuler(rn,slerp(gp,mp,lp))}else for(an=0;an<on;an+=1)ln.h!==1&&(st>=lo?to=1:st<ho?to=0:(ln.o.x.constructor===Array?(cn.__fnct||(cn.__fnct=[]),cn.__fnct[an]?Uo=cn.__fnct[an]:(sp=ln.o.x[an]===void 0?ln.o.x[0]:ln.o.x[an],up=ln.o.y[an]===void 0?ln.o.y[0]:ln.o.y[an],pp=ln.i.x[an]===void 0?ln.i.x[0]:ln.i.x[an],hp=ln.i.y[an]===void 0?ln.i.y[0]:ln.i.y[an],Uo=BezierFactory.getBezierEasing(sp,up,pp,hp).get,cn.__fnct[an]=Uo)):cn.__fnct?Uo=cn.__fnct:(sp=ln.o.x,up=ln.o.y,pp=ln.i.x,hp=ln.i.y,Uo=BezierFactory.getBezierEasing(sp,up,pp,hp).get,ln.keyframeMetadata=Uo),to=Uo((st-ho)/(lo-ho)))),fo=un.s||ln.e,vp=ln.h===1?ln.s[an]:ln.s[an]+(fo[an]-ln.s[an])*to,this.propType==="multidimensional"?rn[an]=vp:rn=vp}return Mt.lastIndex=nn,rn}function slerp(st,Mt,Xr){var rn=[],nn=st[0],an=st[1],on=st[2],sn=st[3],ln=Mt[0],un=Mt[1],cn=Mt[2],hn=Mt[3],fn,to,uo,co,Uo;return to=nn*ln+an*un+on*cn+sn*hn,to<0&&(to=-to,ln=-ln,un=-un,cn=-cn,hn=-hn),1-to>1e-6?(fn=Math.acos(to),uo=Math.sin(fn),co=Math.sin((1-Xr)*fn)/uo,Uo=Math.sin(Xr*fn)/uo):(co=1-Xr,Uo=Xr),rn[0]=co*nn+Uo*ln,rn[1]=co*an+Uo*un,rn[2]=co*on+Uo*cn,rn[3]=co*sn+Uo*hn,rn}function quaternionToEuler(st,Mt){var Xr=Mt[0],rn=Mt[1],nn=Mt[2],an=Mt[3],on=Math.atan2(2*rn*an-2*Xr*nn,1-2*rn*rn-2*nn*nn),sn=Math.asin(2*Xr*rn+2*nn*an),ln=Math.atan2(2*Xr*an-2*rn*nn,1-2*Xr*Xr-2*nn*nn);st[0]=on/degToRads,st[1]=sn/degToRads,st[2]=ln/degToRads}function createQuaternion(st){var Mt=st[0]*degToRads,Xr=st[1]*degToRads,rn=st[2]*degToRads,nn=Math.cos(Mt/2),an=Math.cos(Xr/2),on=Math.cos(rn/2),sn=Math.sin(Mt/2),ln=Math.sin(Xr/2),un=Math.sin(rn/2),cn=nn*an*on-sn*ln*un,hn=sn*ln*on+nn*an*un,fn=sn*an*on+nn*ln*un,to=nn*ln*on-sn*an*un;return[hn,fn,to,cn]}function getValueAtCurrentTime(){var st=this.comp.renderedFrame-this.offsetTime,Mt=this.keyframes[0].t-this.offsetTime,Xr=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(st===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=Xr&&st>=Xr||this._caching.lastFrame<Mt&&st<Mt))){this._caching.lastFrame>=st&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var rn=this.interpolateValue(st,this._caching);this.pv=rn}return this._caching.lastFrame=st,this.pv}function setVValue(st){var Mt;if(this.propType==="unidimensional")Mt=st*this.mult,mathAbs(this.v-Mt)>1e-5&&(this.v=Mt,this._mdf=!0);else for(var Xr=0,rn=this.v.length;Xr<rn;)Mt=st[Xr]*this.mult,mathAbs(this.v[Xr]-Mt)>1e-5&&(this.v[Xr]=Mt,this._mdf=!0),Xr+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var st,Mt=this.effectsSequence.length,Xr=this.kf?this.pv:this.data.k;for(st=0;st<Mt;st+=1)Xr=this.effectsSequence[st](Xr);this.setVValue(Xr),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(st){this.effectsSequence.push(st),this.container.addDynamicProperty(this)}function ValueProperty(st,Mt,Xr,rn){this.propType="unidimensional",this.mult=Xr||1,this.data=Mt,this.v=Xr?Mt.k*Xr:Mt.k,this.pv=Mt.k,this._mdf=!1,this.elem=st,this.container=rn,this.comp=st.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(st,Mt,Xr,rn){this.propType="multidimensional",this.mult=Xr||1,this.data=Mt,this._mdf=!1,this.elem=st,this.container=rn,this.comp=st.comp,this.k=!1,this.kf=!1,this.frameId=-1;var nn,an=Mt.k.length;for(this.v=createTypedArray("float32",an),this.pv=createTypedArray("float32",an),this.vel=createTypedArray("float32",an),nn=0;nn<an;nn+=1)this.v[nn]=Mt.k[nn]*this.mult,this.pv[nn]=Mt.k[nn];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(st,Mt,Xr,rn){this.propType="unidimensional",this.keyframes=Mt.k,this.keyframesMetadata=[],this.offsetTime=st.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=Mt,this.mult=Xr||1,this.elem=st,this.container=rn,this.comp=st.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(st,Mt,Xr,rn){this.propType="multidimensional";var nn,an=Mt.k.length,on,sn,ln,un;for(nn=0;nn<an-1;nn+=1)Mt.k[nn].to&&Mt.k[nn].s&&Mt.k[nn+1]&&Mt.k[nn+1].s&&(on=Mt.k[nn].s,sn=Mt.k[nn+1].s,ln=Mt.k[nn].to,un=Mt.k[nn].ti,(on.length===2&&!(on[0]===sn[0]&&on[1]===sn[1])&&bez.pointOnLine2D(on[0],on[1],sn[0],sn[1],on[0]+ln[0],on[1]+ln[1])&&bez.pointOnLine2D(on[0],on[1],sn[0],sn[1],sn[0]+un[0],sn[1]+un[1])||on.length===3&&!(on[0]===sn[0]&&on[1]===sn[1]&&on[2]===sn[2])&&bez.pointOnLine3D(on[0],on[1],on[2],sn[0],sn[1],sn[2],on[0]+ln[0],on[1]+ln[1],on[2]+ln[2])&&bez.pointOnLine3D(on[0],on[1],on[2],sn[0],sn[1],sn[2],sn[0]+un[0],sn[1]+un[1],sn[2]+un[2]))&&(Mt.k[nn].to=null,Mt.k[nn].ti=null),on[0]===sn[0]&&on[1]===sn[1]&&ln[0]===0&&ln[1]===0&&un[0]===0&&un[1]===0&&(on.length===2||on[2]===sn[2]&&ln[2]===0&&un[2]===0)&&(Mt.k[nn].to=null,Mt.k[nn].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=Mt,this.keyframes=Mt.k,this.keyframesMetadata=[],this.offsetTime=st.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=Xr||1,this.elem=st,this.container=rn,this.comp=st.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var cn=Mt.k[0].s.length;for(this.v=createTypedArray("float32",cn),this.pv=createTypedArray("float32",cn),nn=0;nn<cn;nn+=1)this.v[nn]=initFrame,this.pv[nn]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",cn)},this.addEffect=addEffect}var PropertyFactory=function(){function st(Xr,rn,nn,an,on){rn.sid&&(rn=Xr.globalData.slotManager.getProp(rn));var sn;if(!rn.k.length)sn=new ValueProperty(Xr,rn,an,on);else if(typeof rn.k[0]=="number")sn=new MultiDimensionalProperty(Xr,rn,an,on);else switch(nn){case 0:sn=new KeyframedValueProperty(Xr,rn,an,on);break;case 1:sn=new KeyframedMultidimensionalProperty(Xr,rn,an,on);break}return sn.effectsSequence.length&&on.addDynamicProperty(sn),sn}var Mt={getProp:st};return Mt}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(Mt){this.dynamicProperties.indexOf(Mt)===-1&&(this.dynamicProperties.push(Mt),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var Mt,Xr=this.dynamicProperties.length;for(Mt=0;Mt<Xr;Mt+=1)this.dynamicProperties[Mt].getValue(),this.dynamicProperties[Mt]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(Mt){this.container=Mt,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function st(){return createTypedArray("float32",2)}return poolFactory(8,st)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(st,Mt){this.c=st,this.setLength(Mt);for(var Xr=0;Xr<Mt;)this.v[Xr]=pointPool.newElement(),this.o[Xr]=pointPool.newElement(),this.i[Xr]=pointPool.newElement(),Xr+=1},ShapePath.prototype.setLength=function(st){for(;this._maxLength<st;)this.doubleArrayLength();this._length=st},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(st,Mt,Xr,rn,nn){var an;switch(this._length=Math.max(this._length,rn+1),this._length>=this._maxLength&&this.doubleArrayLength(),Xr){case"v":an=this.v;break;case"i":an=this.i;break;case"o":an=this.o;break;default:an=[];break}(!an[rn]||an[rn]&&!nn)&&(an[rn]=pointPool.newElement()),an[rn][0]=st,an[rn][1]=Mt},ShapePath.prototype.setTripleAt=function(st,Mt,Xr,rn,nn,an,on,sn){this.setXYAt(st,Mt,"v",on,sn),this.setXYAt(Xr,rn,"o",on,sn),this.setXYAt(nn,an,"i",on,sn)},ShapePath.prototype.reverse=function(){var st=new ShapePath;st.setPathData(this.c,this._length);var Mt=this.v,Xr=this.o,rn=this.i,nn=0;this.c&&(st.setTripleAt(Mt[0][0],Mt[0][1],rn[0][0],rn[0][1],Xr[0][0],Xr[0][1],0,!1),nn=1);var an=this._length-1,on=this._length,sn;for(sn=nn;sn<on;sn+=1)st.setTripleAt(Mt[an][0],Mt[an][1],rn[an][0],rn[an][1],Xr[an][0],Xr[an][1],sn,!1),an-=1;return st},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function st(){return new ShapePath}function Mt(nn){var an=nn._length,on;for(on=0;on<an;on+=1)pointPool.release(nn.v[on]),pointPool.release(nn.i[on]),pointPool.release(nn.o[on]),nn.v[on]=null,nn.i[on]=null,nn.o[on]=null;nn._length=0,nn.c=!1}function Xr(nn){var an=rn.newElement(),on,sn=nn._length===void 0?nn.v.length:nn._length;for(an.setLength(sn),an.c=nn.c,on=0;on<sn;on+=1)an.setTripleAt(nn.v[on][0],nn.v[on][1],nn.o[on][0],nn.o[on][1],nn.i[on][0],nn.i[on][1],on);return an}var rn=poolFactory(4,st,Mt);return rn.clone=Xr,rn}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(st){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=st,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var st;for(st=0;st<this._length;st+=1)shapePool.release(this.shapes[st]);this._length=0};var shapeCollectionPool=function(){var st={newShapeCollection:nn,release:an},Mt=0,Xr=4,rn=createSizedArray(Xr);function nn(){var on;return Mt?(Mt-=1,on=rn[Mt]):on=new ShapeCollection,on}function an(on){var sn,ln=on._length;for(sn=0;sn<ln;sn+=1)shapePool.release(on.shapes[sn]);on._length=0,Mt===Xr&&(rn=pooling.double(rn),Xr*=2),rn[Mt]=on,Mt+=1}return st}(),ShapePropertyFactory=function(){var st=-999999;function Mt(lo,ho,fo){var mo=fo.lastIndex,_d,ep,rp,ap,sp,up,pp,hp,vp,gp=this.keyframes;if(lo<gp[0].t-this.offsetTime)_d=gp[0].s[0],rp=!0,mo=0;else if(lo>=gp[gp.length-1].t-this.offsetTime)_d=gp[gp.length-1].s?gp[gp.length-1].s[0]:gp[gp.length-2].e[0],rp=!0;else{for(var mp=mo,lp=gp.length-1,cp=!0,tp,np,fp;cp&&(tp=gp[mp],np=gp[mp+1],!(np.t-this.offsetTime>lo));)mp<lp-1?mp+=1:cp=!1;if(fp=this.keyframesMetadata[mp]||{},rp=tp.h===1,mo=mp,!rp){if(lo>=np.t-this.offsetTime)hp=1;else if(lo<tp.t-this.offsetTime)hp=0;else{var dp;fp.__fnct?dp=fp.__fnct:(dp=BezierFactory.getBezierEasing(tp.o.x,tp.o.y,tp.i.x,tp.i.y).get,fp.__fnct=dp),hp=dp((lo-(tp.t-this.offsetTime))/(np.t-this.offsetTime-(tp.t-this.offsetTime)))}ep=np.s?np.s[0]:tp.e[0]}_d=tp.s[0]}for(up=ho._length,pp=_d.i[0].length,fo.lastIndex=mo,ap=0;ap<up;ap+=1)for(sp=0;sp<pp;sp+=1)vp=rp?_d.i[ap][sp]:_d.i[ap][sp]+(ep.i[ap][sp]-_d.i[ap][sp])*hp,ho.i[ap][sp]=vp,vp=rp?_d.o[ap][sp]:_d.o[ap][sp]+(ep.o[ap][sp]-_d.o[ap][sp])*hp,ho.o[ap][sp]=vp,vp=rp?_d.v[ap][sp]:_d.v[ap][sp]+(ep.v[ap][sp]-_d.v[ap][sp])*hp,ho.v[ap][sp]=vp}function Xr(){var lo=this.comp.renderedFrame-this.offsetTime,ho=this.keyframes[0].t-this.offsetTime,fo=this.keyframes[this.keyframes.length-1].t-this.offsetTime,mo=this._caching.lastFrame;return mo!==st&&(mo<ho&&lo<ho||mo>fo&&lo>fo)||(this._caching.lastIndex=mo<lo?this._caching.lastIndex:0,this.interpolateShape(lo,this.pv,this._caching)),this._caching.lastFrame=lo,this.pv}function rn(){this.paths=this.localShapeCollection}function nn(lo,ho){if(lo._length!==ho._length||lo.c!==ho.c)return!1;var fo,mo=lo._length;for(fo=0;fo<mo;fo+=1)if(lo.v[fo][0]!==ho.v[fo][0]||lo.v[fo][1]!==ho.v[fo][1]||lo.o[fo][0]!==ho.o[fo][0]||lo.o[fo][1]!==ho.o[fo][1]||lo.i[fo][0]!==ho.i[fo][0]||lo.i[fo][1]!==ho.i[fo][1])return!1;return!0}function an(lo){nn(this.v,lo)||(this.v=shapePool.clone(lo),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function on(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var lo;this.kf?lo=this.pv:this.data.ks?lo=this.data.ks.k:lo=this.data.pt.k;var ho,fo=this.effectsSequence.length;for(ho=0;ho<fo;ho+=1)lo=this.effectsSequence[ho](lo);this.setVValue(lo),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function sn(lo,ho,fo){this.propType="shape",this.comp=lo.comp,this.container=lo,this.elem=lo,this.data=ho,this.k=!1,this.kf=!1,this._mdf=!1;var mo=fo===3?ho.pt.k:ho.ks.k;this.v=shapePool.clone(mo),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=rn,this.effectsSequence=[]}function ln(lo){this.effectsSequence.push(lo),this.container.addDynamicProperty(this)}sn.prototype.interpolateShape=Mt,sn.prototype.getValue=on,sn.prototype.setVValue=an,sn.prototype.addEffect=ln;function un(lo,ho,fo){this.propType="shape",this.comp=lo.comp,this.elem=lo,this.container=lo,this.offsetTime=lo.data.st,this.keyframes=fo===3?ho.pt.k:ho.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var mo=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,mo),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=st,this.reset=rn,this._caching={lastFrame:st,lastIndex:0},this.effectsSequence=[Xr.bind(this)]}un.prototype.getValue=on,un.prototype.interpolateShape=Mt,un.prototype.setVValue=an,un.prototype.addEffect=ln;var cn=function(){var lo=roundCorner;function ho(fo,mo){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=mo.d,this.elem=fo,this.comp=fo.comp,this.frameId=-1,this.initDynamicPropertyContainer(fo),this.p=PropertyFactory.getProp(fo,mo.p,1,0,this),this.s=PropertyFactory.getProp(fo,mo.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ho.prototype={reset:rn,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var mo=this.p.v[0],_d=this.p.v[1],ep=this.s.v[0]/2,rp=this.s.v[1]/2,ap=this.d!==3,sp=this.v;sp.v[0][0]=mo,sp.v[0][1]=_d-rp,sp.v[1][0]=ap?mo+ep:mo-ep,sp.v[1][1]=_d,sp.v[2][0]=mo,sp.v[2][1]=_d+rp,sp.v[3][0]=ap?mo-ep:mo+ep,sp.v[3][1]=_d,sp.i[0][0]=ap?mo-ep*lo:mo+ep*lo,sp.i[0][1]=_d-rp,sp.i[1][0]=ap?mo+ep:mo-ep,sp.i[1][1]=_d-rp*lo,sp.i[2][0]=ap?mo+ep*lo:mo-ep*lo,sp.i[2][1]=_d+rp,sp.i[3][0]=ap?mo-ep:mo+ep,sp.i[3][1]=_d+rp*lo,sp.o[0][0]=ap?mo+ep*lo:mo-ep*lo,sp.o[0][1]=_d-rp,sp.o[1][0]=ap?mo+ep:mo-ep,sp.o[1][1]=_d+rp*lo,sp.o[2][0]=ap?mo-ep*lo:mo+ep*lo,sp.o[2][1]=_d+rp,sp.o[3][0]=ap?mo-ep:mo+ep,sp.o[3][1]=_d-rp*lo}},extendPrototype([DynamicPropertyContainer],ho),ho}(),hn=function(){function lo(ho,fo){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ho,this.comp=ho.comp,this.data=fo,this.frameId=-1,this.d=fo.d,this.initDynamicPropertyContainer(ho),fo.sy===1?(this.ir=PropertyFactory.getProp(ho,fo.ir,0,0,this),this.is=PropertyFactory.getProp(ho,fo.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ho,fo.pt,0,0,this),this.p=PropertyFactory.getProp(ho,fo.p,1,0,this),this.r=PropertyFactory.getProp(ho,fo.r,0,degToRads,this),this.or=PropertyFactory.getProp(ho,fo.or,0,0,this),this.os=PropertyFactory.getProp(ho,fo.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return lo.prototype={reset:rn,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var fo=Math.floor(this.pt.v)*2,mo=Math.PI*2/fo,_d=!0,ep=this.or.v,rp=this.ir.v,ap=this.os.v,sp=this.is.v,up=2*Math.PI*ep/(fo*2),pp=2*Math.PI*rp/(fo*2),hp,vp,gp,mp,lp=-Math.PI/2;lp+=this.r.v;var cp=this.data.d===3?-1:1;for(this.v._length=0,hp=0;hp<fo;hp+=1){vp=_d?ep:rp,gp=_d?ap:sp,mp=_d?up:pp;var tp=vp*Math.cos(lp),np=vp*Math.sin(lp),fp=tp===0&&np===0?0:np/Math.sqrt(tp*tp+np*np),dp=tp===0&&np===0?0:-tp/Math.sqrt(tp*tp+np*np);tp+=+this.p.v[0],np+=+this.p.v[1],this.v.setTripleAt(tp,np,tp-fp*mp*gp*cp,np-dp*mp*gp*cp,tp+fp*mp*gp*cp,np+dp*mp*gp*cp,hp,!0),_d=!_d,lp+=mo*cp}},convertPolygonToPath:function(){var fo=Math.floor(this.pt.v),mo=Math.PI*2/fo,_d=this.or.v,ep=this.os.v,rp=2*Math.PI*_d/(fo*4),ap,sp=-Math.PI*.5,up=this.data.d===3?-1:1;for(sp+=this.r.v,this.v._length=0,ap=0;ap<fo;ap+=1){var pp=_d*Math.cos(sp),hp=_d*Math.sin(sp),vp=pp===0&&hp===0?0:hp/Math.sqrt(pp*pp+hp*hp),gp=pp===0&&hp===0?0:-pp/Math.sqrt(pp*pp+hp*hp);pp+=+this.p.v[0],hp+=+this.p.v[1],this.v.setTripleAt(pp,hp,pp-vp*rp*ep*up,hp-gp*rp*ep*up,pp+vp*rp*ep*up,hp+gp*rp*ep*up,ap,!0),sp+=mo*up}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],lo),lo}(),fn=function(){function lo(ho,fo){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ho,this.comp=ho.comp,this.frameId=-1,this.d=fo.d,this.initDynamicPropertyContainer(ho),this.p=PropertyFactory.getProp(ho,fo.p,1,0,this),this.s=PropertyFactory.getProp(ho,fo.s,1,0,this),this.r=PropertyFactory.getProp(ho,fo.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return lo.prototype={convertRectToPath:function(){var fo=this.p.v[0],mo=this.p.v[1],_d=this.s.v[0]/2,ep=this.s.v[1]/2,rp=bmMin(_d,ep,this.r.v),ap=rp*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(fo+_d,mo-ep+rp,fo+_d,mo-ep+rp,fo+_d,mo-ep+ap,0,!0),this.v.setTripleAt(fo+_d,mo+ep-rp,fo+_d,mo+ep-ap,fo+_d,mo+ep-rp,1,!0),rp!==0?(this.v.setTripleAt(fo+_d-rp,mo+ep,fo+_d-rp,mo+ep,fo+_d-ap,mo+ep,2,!0),this.v.setTripleAt(fo-_d+rp,mo+ep,fo-_d+ap,mo+ep,fo-_d+rp,mo+ep,3,!0),this.v.setTripleAt(fo-_d,mo+ep-rp,fo-_d,mo+ep-rp,fo-_d,mo+ep-ap,4,!0),this.v.setTripleAt(fo-_d,mo-ep+rp,fo-_d,mo-ep+ap,fo-_d,mo-ep+rp,5,!0),this.v.setTripleAt(fo-_d+rp,mo-ep,fo-_d+rp,mo-ep,fo-_d+ap,mo-ep,6,!0),this.v.setTripleAt(fo+_d-rp,mo-ep,fo+_d-ap,mo-ep,fo+_d-rp,mo-ep,7,!0)):(this.v.setTripleAt(fo-_d,mo+ep,fo-_d+ap,mo+ep,fo-_d,mo+ep,2),this.v.setTripleAt(fo-_d,mo-ep,fo-_d,mo-ep+ap,fo-_d,mo-ep,3))):(this.v.setTripleAt(fo+_d,mo-ep+rp,fo+_d,mo-ep+ap,fo+_d,mo-ep+rp,0,!0),rp!==0?(this.v.setTripleAt(fo+_d-rp,mo-ep,fo+_d-rp,mo-ep,fo+_d-ap,mo-ep,1,!0),this.v.setTripleAt(fo-_d+rp,mo-ep,fo-_d+ap,mo-ep,fo-_d+rp,mo-ep,2,!0),this.v.setTripleAt(fo-_d,mo-ep+rp,fo-_d,mo-ep+rp,fo-_d,mo-ep+ap,3,!0),this.v.setTripleAt(fo-_d,mo+ep-rp,fo-_d,mo+ep-ap,fo-_d,mo+ep-rp,4,!0),this.v.setTripleAt(fo-_d+rp,mo+ep,fo-_d+rp,mo+ep,fo-_d+ap,mo+ep,5,!0),this.v.setTripleAt(fo+_d-rp,mo+ep,fo+_d-ap,mo+ep,fo+_d-rp,mo+ep,6,!0),this.v.setTripleAt(fo+_d,mo+ep-rp,fo+_d,mo+ep-rp,fo+_d,mo+ep-ap,7,!0)):(this.v.setTripleAt(fo-_d,mo-ep,fo-_d+ap,mo-ep,fo-_d,mo-ep,1,!0),this.v.setTripleAt(fo-_d,mo+ep,fo-_d,mo+ep-ap,fo-_d,mo+ep,2,!0),this.v.setTripleAt(fo+_d,mo+ep,fo+_d-ap,mo+ep,fo+_d,mo+ep,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:rn},extendPrototype([DynamicPropertyContainer],lo),lo}();function to(lo,ho,fo){var mo;if(fo===3||fo===4){var _d=fo===3?ho.pt:ho.ks,ep=_d.k;ep.length?mo=new un(lo,ho,fo):mo=new sn(lo,ho,fo)}else fo===5?mo=new fn(lo,ho):fo===6?mo=new cn(lo,ho):fo===7&&(mo=new hn(lo,ho));return mo.k&&lo.addDynamicProperty(mo),mo}function uo(){return sn}function co(){return un}var Uo={};return Uo.getShapeProp=to,Uo.getConstructorFunction=uo,Uo.getKeyframedConstructorFunction=co,Uo}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var st=Math.cos,Mt=Math.sin,Xr=Math.tan,rn=Math.round;function nn(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function an(tp){if(tp===0)return this;var np=st(tp),fp=Mt(tp);return this._t(np,-fp,0,0,fp,np,0,0,0,0,1,0,0,0,0,1)}function on(tp){if(tp===0)return this;var np=st(tp),fp=Mt(tp);return this._t(1,0,0,0,0,np,-fp,0,0,fp,np,0,0,0,0,1)}function sn(tp){if(tp===0)return this;var np=st(tp),fp=Mt(tp);return this._t(np,0,fp,0,0,1,0,0,-fp,0,np,0,0,0,0,1)}function ln(tp){if(tp===0)return this;var np=st(tp),fp=Mt(tp);return this._t(np,-fp,0,0,fp,np,0,0,0,0,1,0,0,0,0,1)}function un(tp,np){return this._t(1,np,tp,1,0,0)}function cn(tp,np){return this.shear(Xr(tp),Xr(np))}function hn(tp,np){var fp=st(np),dp=Mt(np);return this._t(fp,dp,0,0,-dp,fp,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Xr(tp),1,0,0,0,0,1,0,0,0,0,1)._t(fp,-dp,0,0,dp,fp,0,0,0,0,1,0,0,0,0,1)}function fn(tp,np,fp){return!fp&&fp!==0&&(fp=1),tp===1&&np===1&&fp===1?this:this._t(tp,0,0,0,0,np,0,0,0,0,fp,0,0,0,0,1)}function to(tp,np,fp,dp,yp,bp,_p,Cp,Sp,Rp,Dp,Lp,Bp,Tp,Mp,Ap){return this.props[0]=tp,this.props[1]=np,this.props[2]=fp,this.props[3]=dp,this.props[4]=yp,this.props[5]=bp,this.props[6]=_p,this.props[7]=Cp,this.props[8]=Sp,this.props[9]=Rp,this.props[10]=Dp,this.props[11]=Lp,this.props[12]=Bp,this.props[13]=Tp,this.props[14]=Mp,this.props[15]=Ap,this}function uo(tp,np,fp){return fp=fp||0,tp!==0||np!==0||fp!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,tp,np,fp,1):this}function co(tp,np,fp,dp,yp,bp,_p,Cp,Sp,Rp,Dp,Lp,Bp,Tp,Mp,Ap){var kp=this.props;if(tp===1&&np===0&&fp===0&&dp===0&&yp===0&&bp===1&&_p===0&&Cp===0&&Sp===0&&Rp===0&&Dp===1&&Lp===0)return kp[12]=kp[12]*tp+kp[15]*Bp,kp[13]=kp[13]*bp+kp[15]*Tp,kp[14]=kp[14]*Dp+kp[15]*Mp,kp[15]*=Ap,this._identityCalculated=!1,this;var jp=kp[0],Vp=kp[1],Wp=kp[2],qp=kp[3],Up=kp[4],Qp=kp[5],Hp=kp[6],Kp=kp[7],Xp=kp[8],Zp=kp[9],Jp=kp[10],n0=kp[11],i0=kp[12],e0=kp[13],u0=kp[14],xp=kp[15];return kp[0]=jp*tp+Vp*yp+Wp*Sp+qp*Bp,kp[1]=jp*np+Vp*bp+Wp*Rp+qp*Tp,kp[2]=jp*fp+Vp*_p+Wp*Dp+qp*Mp,kp[3]=jp*dp+Vp*Cp+Wp*Lp+qp*Ap,kp[4]=Up*tp+Qp*yp+Hp*Sp+Kp*Bp,kp[5]=Up*np+Qp*bp+Hp*Rp+Kp*Tp,kp[6]=Up*fp+Qp*_p+Hp*Dp+Kp*Mp,kp[7]=Up*dp+Qp*Cp+Hp*Lp+Kp*Ap,kp[8]=Xp*tp+Zp*yp+Jp*Sp+n0*Bp,kp[9]=Xp*np+Zp*bp+Jp*Rp+n0*Tp,kp[10]=Xp*fp+Zp*_p+Jp*Dp+n0*Mp,kp[11]=Xp*dp+Zp*Cp+Jp*Lp+n0*Ap,kp[12]=i0*tp+e0*yp+u0*Sp+xp*Bp,kp[13]=i0*np+e0*bp+u0*Rp+xp*Tp,kp[14]=i0*fp+e0*_p+u0*Dp+xp*Mp,kp[15]=i0*dp+e0*Cp+u0*Lp+xp*Ap,this._identityCalculated=!1,this}function Uo(tp){var np=tp.props;return this.transform(np[0],np[1],np[2],np[3],np[4],np[5],np[6],np[7],np[8],np[9],np[10],np[11],np[12],np[13],np[14],np[15])}function lo(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ho(tp){for(var np=0;np<16;){if(tp.props[np]!==this.props[np])return!1;np+=1}return!0}function fo(tp){var np;for(np=0;np<16;np+=1)tp.props[np]=this.props[np];return tp}function mo(tp){var np;for(np=0;np<16;np+=1)this.props[np]=tp[np]}function _d(tp,np,fp){return{x:tp*this.props[0]+np*this.props[4]+fp*this.props[8]+this.props[12],y:tp*this.props[1]+np*this.props[5]+fp*this.props[9]+this.props[13],z:tp*this.props[2]+np*this.props[6]+fp*this.props[10]+this.props[14]}}function ep(tp,np,fp){return tp*this.props[0]+np*this.props[4]+fp*this.props[8]+this.props[12]}function rp(tp,np,fp){return tp*this.props[1]+np*this.props[5]+fp*this.props[9]+this.props[13]}function ap(tp,np,fp){return tp*this.props[2]+np*this.props[6]+fp*this.props[10]+this.props[14]}function sp(){var tp=this.props[0]*this.props[5]-this.props[1]*this.props[4],np=this.props[5]/tp,fp=-this.props[1]/tp,dp=-this.props[4]/tp,yp=this.props[0]/tp,bp=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/tp,_p=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/tp,Cp=new Matrix;return Cp.props[0]=np,Cp.props[1]=fp,Cp.props[4]=dp,Cp.props[5]=yp,Cp.props[12]=bp,Cp.props[13]=_p,Cp}function up(tp){var np=this.getInverseMatrix();return np.applyToPointArray(tp[0],tp[1],tp[2]||0)}function pp(tp){var np,fp=tp.length,dp=[];for(np=0;np<fp;np+=1)dp[np]=up(tp[np]);return dp}function hp(tp,np,fp){var dp=createTypedArray("float32",6);if(this.isIdentity())dp[0]=tp[0],dp[1]=tp[1],dp[2]=np[0],dp[3]=np[1],dp[4]=fp[0],dp[5]=fp[1];else{var yp=this.props[0],bp=this.props[1],_p=this.props[4],Cp=this.props[5],Sp=this.props[12],Rp=this.props[13];dp[0]=tp[0]*yp+tp[1]*_p+Sp,dp[1]=tp[0]*bp+tp[1]*Cp+Rp,dp[2]=np[0]*yp+np[1]*_p+Sp,dp[3]=np[0]*bp+np[1]*Cp+Rp,dp[4]=fp[0]*yp+fp[1]*_p+Sp,dp[5]=fp[0]*bp+fp[1]*Cp+Rp}return dp}function vp(tp,np,fp){var dp;return this.isIdentity()?dp=[tp,np,fp]:dp=[tp*this.props[0]+np*this.props[4]+fp*this.props[8]+this.props[12],tp*this.props[1]+np*this.props[5]+fp*this.props[9]+this.props[13],tp*this.props[2]+np*this.props[6]+fp*this.props[10]+this.props[14]],dp}function gp(tp,np){if(this.isIdentity())return tp+","+np;var fp=this.props;return Math.round((tp*fp[0]+np*fp[4]+fp[12])*100)/100+","+Math.round((tp*fp[1]+np*fp[5]+fp[13])*100)/100}function mp(){for(var tp=0,np=this.props,fp="matrix3d(",dp=1e4;tp<16;)fp+=rn(np[tp]*dp)/dp,fp+=tp===15?")":",",tp+=1;return fp}function lp(tp){var np=1e4;return tp<1e-6&&tp>0||tp>-1e-6&&tp<0?rn(tp*np)/np:tp}function cp(){var tp=this.props,np=lp(tp[0]),fp=lp(tp[1]),dp=lp(tp[4]),yp=lp(tp[5]),bp=lp(tp[12]),_p=lp(tp[13]);return"matrix("+np+","+fp+","+dp+","+yp+","+bp+","+_p+")"}return function(){this.reset=nn,this.rotate=an,this.rotateX=on,this.rotateY=sn,this.rotateZ=ln,this.skew=cn,this.skewFromAxis=hn,this.shear=un,this.scale=fn,this.setTransform=to,this.translate=uo,this.transform=co,this.multiply=Uo,this.applyToPoint=_d,this.applyToX=ep,this.applyToY=rp,this.applyToZ=ap,this.applyToPointArray=vp,this.applyToTriplePoints=hp,this.applyToPointStringified=gp,this.toCSS=mp,this.to2dCSS=cp,this.clone=fo,this.cloneFromProps=mo,this.equals=ho,this.inversePoints=pp,this.inversePoint=up,this.getInverseMatrix=sp,this._t=this.transform,this.isIdentity=lo,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(Xr){return typeof Xr}:_typeof$3=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$3(st)}var lottie={};function setLocation(st){setLocationHref(st)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(st){setSubframeEnabled(st)}function setPrefix(st){setIdPrefix(st)}function loadAnimation(st){return animationManager.loadAnimation(st)}function setQuality(st){if(typeof st=="string")switch(st){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(st)&&st>1&&setDefaultCurveSegments(st)}function inBrowser(){return typeof navigator<"u"}function installPlugin(st,Mt){st==="expressions"&&setExpressionsPlugin(Mt)}function getFactory(st){switch(st){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(st){for(var Mt=queryString.split("&"),Xr=0;Xr<Mt.length;Xr+=1){var rn=Mt[Xr].split("=");if(decodeURIComponent(rn[0])==st)return decodeURIComponent(rn[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(st){}var ShapeModifiers=function(){var st={},Mt={};st.registerModifier=Xr,st.getModifier=rn;function Xr(nn,an){Mt[nn]||(Mt[nn]=an)}function rn(nn,an,on){return new Mt[nn](an,on)}return st}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(st){if(!this.closed){st.sh.container.addDynamicProperty(st.sh);var Mt={shape:st.sh,data:st,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(Mt),this.addShapeToModifier(Mt),this._isAnimated&&st.setAsAnimated()}},ShapeModifier.prototype.init=function(st,Mt){this.shapes=[],this.elem=st,this.initDynamicPropertyContainer(st),this.initModifierProperties(st,Mt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(st,Mt){this.s=PropertyFactory.getProp(st,Mt.s,0,.01,this),this.e=PropertyFactory.getProp(st,Mt.e,0,.01,this),this.o=PropertyFactory.getProp(st,Mt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=Mt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(st){st.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(st,Mt,Xr,rn,nn){var an=[];Mt<=1?an.push({s:st,e:Mt}):st>=1?an.push({s:st-1,e:Mt-1}):(an.push({s:st,e:1}),an.push({s:0,e:Mt-1}));var on=[],sn,ln=an.length,un;for(sn=0;sn<ln;sn+=1)if(un=an[sn],!(un.e*nn<rn||un.s*nn>rn+Xr)){var cn,hn;un.s*nn<=rn?cn=0:cn=(un.s*nn-rn)/Xr,un.e*nn>=rn+Xr?hn=1:hn=(un.e*nn-rn)/Xr,on.push([cn,hn])}return on.length||on.push([0,0]),on},TrimModifier.prototype.releasePathsData=function(st){var Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)segmentsLengthPool.release(st[Mt]);return st.length=0,st},TrimModifier.prototype.processShapes=function(st){var Mt,Xr;if(this._mdf||st){var rn=this.o.v%360/360;if(rn<0&&(rn+=1),this.s.v>1?Mt=1+rn:this.s.v<0?Mt=0+rn:Mt=this.s.v+rn,this.e.v>1?Xr=1+rn:this.e.v<0?Xr=0+rn:Xr=this.e.v+rn,Mt>Xr){var nn=Mt;Mt=Xr,Xr=nn}Mt=Math.round(Mt*1e4)*1e-4,Xr=Math.round(Xr*1e4)*1e-4,this.sValue=Mt,this.eValue=Xr}else Mt=this.sValue,Xr=this.eValue;var an,on,sn=this.shapes.length,ln,un,cn,hn,fn,to=0;if(Xr===Mt)for(on=0;on<sn;on+=1)this.shapes[on].localShapeCollection.releaseShapes(),this.shapes[on].shape._mdf=!0,this.shapes[on].shape.paths=this.shapes[on].localShapeCollection,this._mdf&&(this.shapes[on].pathsData.length=0);else if(Xr===1&&Mt===0||Xr===0&&Mt===1){if(this._mdf)for(on=0;on<sn;on+=1)this.shapes[on].pathsData.length=0,this.shapes[on].shape._mdf=!0}else{var uo=[],co,Uo;for(on=0;on<sn;on+=1)if(co=this.shapes[on],!co.shape._mdf&&!this._mdf&&!st&&this.m!==2)co.shape.paths=co.localShapeCollection;else{if(an=co.shape.paths,un=an._length,fn=0,!co.shape._mdf&&co.pathsData.length)fn=co.totalShapeLength;else{for(cn=this.releasePathsData(co.pathsData),ln=0;ln<un;ln+=1)hn=bez.getSegmentsLength(an.shapes[ln]),cn.push(hn),fn+=hn.totalLength;co.totalShapeLength=fn,co.pathsData=cn}to+=fn,co.shape._mdf=!0}var lo=Mt,ho=Xr,fo=0,mo;for(on=sn-1;on>=0;on-=1)if(co=this.shapes[on],co.shape._mdf){for(Uo=co.localShapeCollection,Uo.releaseShapes(),this.m===2&&sn>1?(mo=this.calculateShapeEdges(Mt,Xr,co.totalShapeLength,fo,to),fo+=co.totalShapeLength):mo=[[lo,ho]],un=mo.length,ln=0;ln<un;ln+=1){lo=mo[ln][0],ho=mo[ln][1],uo.length=0,ho<=1?uo.push({s:co.totalShapeLength*lo,e:co.totalShapeLength*ho}):lo>=1?uo.push({s:co.totalShapeLength*(lo-1),e:co.totalShapeLength*(ho-1)}):(uo.push({s:co.totalShapeLength*lo,e:co.totalShapeLength}),uo.push({s:0,e:co.totalShapeLength*(ho-1)}));var _d=this.addShapes(co,uo[0]);if(uo[0].s!==uo[0].e){if(uo.length>1){var ep=co.shape.paths.shapes[co.shape.paths._length-1];if(ep.c){var rp=_d.pop();this.addPaths(_d,Uo),_d=this.addShapes(co,uo[1],rp)}else this.addPaths(_d,Uo),_d=this.addShapes(co,uo[1])}this.addPaths(_d,Uo)}}co.shape.paths=Uo}}},TrimModifier.prototype.addPaths=function(st,Mt){var Xr,rn=st.length;for(Xr=0;Xr<rn;Xr+=1)Mt.addShape(st[Xr])},TrimModifier.prototype.addSegment=function(st,Mt,Xr,rn,nn,an,on){nn.setXYAt(Mt[0],Mt[1],"o",an),nn.setXYAt(Xr[0],Xr[1],"i",an+1),on&&nn.setXYAt(st[0],st[1],"v",an),nn.setXYAt(rn[0],rn[1],"v",an+1)},TrimModifier.prototype.addSegmentFromArray=function(st,Mt,Xr,rn){Mt.setXYAt(st[1],st[5],"o",Xr),Mt.setXYAt(st[2],st[6],"i",Xr+1),rn&&Mt.setXYAt(st[0],st[4],"v",Xr),Mt.setXYAt(st[3],st[7],"v",Xr+1)},TrimModifier.prototype.addShapes=function(st,Mt,Xr){var rn=st.pathsData,nn=st.shape.paths.shapes,an,on=st.shape.paths._length,sn,ln,un=0,cn,hn,fn,to,uo=[],co,Uo=!0;for(Xr?(hn=Xr._length,co=Xr._length):(Xr=shapePool.newElement(),hn=0,co=0),uo.push(Xr),an=0;an<on;an+=1){for(fn=rn[an].lengths,Xr.c=nn[an].c,ln=nn[an].c?fn.length:fn.length+1,sn=1;sn<ln;sn+=1)if(cn=fn[sn-1],un+cn.addedLength<Mt.s)un+=cn.addedLength,Xr.c=!1;else if(un>Mt.e){Xr.c=!1;break}else Mt.s<=un&&Mt.e>=un+cn.addedLength?(this.addSegment(nn[an].v[sn-1],nn[an].o[sn-1],nn[an].i[sn],nn[an].v[sn],Xr,hn,Uo),Uo=!1):(to=bez.getNewSegment(nn[an].v[sn-1],nn[an].v[sn],nn[an].o[sn-1],nn[an].i[sn],(Mt.s-un)/cn.addedLength,(Mt.e-un)/cn.addedLength,fn[sn-1]),this.addSegmentFromArray(to,Xr,hn,Uo),Uo=!1,Xr.c=!1),un+=cn.addedLength,hn+=1;if(nn[an].c&&fn.length){if(cn=fn[sn-1],un<=Mt.e){var lo=fn[sn-1].addedLength;Mt.s<=un&&Mt.e>=un+lo?(this.addSegment(nn[an].v[sn-1],nn[an].o[sn-1],nn[an].i[0],nn[an].v[0],Xr,hn,Uo),Uo=!1):(to=bez.getNewSegment(nn[an].v[sn-1],nn[an].v[0],nn[an].o[sn-1],nn[an].i[0],(Mt.s-un)/lo,(Mt.e-un)/lo,fn[sn-1]),this.addSegmentFromArray(to,Xr,hn,Uo),Uo=!1,Xr.c=!1)}else Xr.c=!1;un+=cn.addedLength,hn+=1}if(Xr._length&&(Xr.setXYAt(Xr.v[co][0],Xr.v[co][1],"i",co),Xr.setXYAt(Xr.v[Xr._length-1][0],Xr.v[Xr._length-1][1],"o",Xr._length-1)),un>Mt.e)break;an<on-1&&(Xr=shapePool.newElement(),Uo=!0,uo.push(Xr),hn=0)}return uo};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(st,Mt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(st,Mt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(st,Mt){var Xr=Mt/100,rn=[0,0],nn=st._length,an=0;for(an=0;an<nn;an+=1)rn[0]+=st.v[an][0],rn[1]+=st.v[an][1];rn[0]/=nn,rn[1]/=nn;var on=shapePool.newElement();on.c=st.c;var sn,ln,un,cn,hn,fn;for(an=0;an<nn;an+=1)sn=st.v[an][0]+(rn[0]-st.v[an][0])*Xr,ln=st.v[an][1]+(rn[1]-st.v[an][1])*Xr,un=st.o[an][0]+(rn[0]-st.o[an][0])*-Xr,cn=st.o[an][1]+(rn[1]-st.o[an][1])*-Xr,hn=st.i[an][0]+(rn[0]-st.i[an][0])*-Xr,fn=st.i[an][1]+(rn[1]-st.i[an][1])*-Xr,on.setTripleAt(sn,ln,un,cn,hn,fn,an);return on},PuckerAndBloatModifier.prototype.processShapes=function(st){var Mt,Xr,rn=this.shapes.length,nn,an,on=this.amount.v;if(on!==0){var sn,ln;for(Xr=0;Xr<rn;Xr+=1){if(sn=this.shapes[Xr],ln=sn.localShapeCollection,!(!sn.shape._mdf&&!this._mdf&&!st))for(ln.releaseShapes(),sn.shape._mdf=!0,Mt=sn.shape.paths.shapes,an=sn.shape.paths._length,nn=0;nn<an;nn+=1)ln.addShape(this.processPath(Mt[nn],on));sn.shape.paths=sn.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var st=[0,0];function Mt(ln){var un=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||un,this.a&&ln.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ln.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ln.skewFromAxis(-this.sk.v,this.sa.v),this.r?ln.rotate(-this.r.v):ln.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ln.translate(this.px.v,this.py.v,-this.pz.v):ln.translate(this.px.v,this.py.v,0):ln.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function Xr(ln){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ln){var un;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var cn,hn;if(un=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(cn=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/un,0),hn=this.p.getValueAtTime(this.p.keyframes[0].t/un,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(cn=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/un,0),hn=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/un,0)):(cn=this.p.pv,hn=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/un,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){cn=[],hn=[];var fn=this.px,to=this.py;fn._caching.lastFrame+fn.offsetTime<=fn.keyframes[0].t?(cn[0]=fn.getValueAtTime((fn.keyframes[0].t+.01)/un,0),cn[1]=to.getValueAtTime((to.keyframes[0].t+.01)/un,0),hn[0]=fn.getValueAtTime(fn.keyframes[0].t/un,0),hn[1]=to.getValueAtTime(to.keyframes[0].t/un,0)):fn._caching.lastFrame+fn.offsetTime>=fn.keyframes[fn.keyframes.length-1].t?(cn[0]=fn.getValueAtTime(fn.keyframes[fn.keyframes.length-1].t/un,0),cn[1]=to.getValueAtTime(to.keyframes[to.keyframes.length-1].t/un,0),hn[0]=fn.getValueAtTime((fn.keyframes[fn.keyframes.length-1].t-.01)/un,0),hn[1]=to.getValueAtTime((to.keyframes[to.keyframes.length-1].t-.01)/un,0)):(cn=[fn.pv,to.pv],hn[0]=fn.getValueAtTime((fn._caching.lastFrame+fn.offsetTime-.01)/un,fn.offsetTime),hn[1]=to.getValueAtTime((to._caching.lastFrame+to.offsetTime-.01)/un,to.offsetTime))}else hn=st,cn=hn;this.v.rotate(-Math.atan2(cn[1]-hn[1],cn[0]-hn[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function rn(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function nn(){}function an(ln){this._addDynamicProperty(ln),this.elem.addDynamicProperty(ln),this._isDirty=!0}function on(ln,un,cn){if(this.elem=ln,this.frameId=-1,this.propType="transform",this.data=un,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(cn||ln),un.p&&un.p.s?(this.px=PropertyFactory.getProp(ln,un.p.x,0,0,this),this.py=PropertyFactory.getProp(ln,un.p.y,0,0,this),un.p.z&&(this.pz=PropertyFactory.getProp(ln,un.p.z,0,0,this))):this.p=PropertyFactory.getProp(ln,un.p||{k:[0,0,0]},1,0,this),un.rx){if(this.rx=PropertyFactory.getProp(ln,un.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ln,un.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ln,un.rz,0,degToRads,this),un.or.k[0].ti){var hn,fn=un.or.k.length;for(hn=0;hn<fn;hn+=1)un.or.k[hn].to=null,un.or.k[hn].ti=null}this.or=PropertyFactory.getProp(ln,un.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ln,un.r||{k:0},0,degToRads,this);un.sk&&(this.sk=PropertyFactory.getProp(ln,un.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ln,un.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ln,un.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ln,un.s||{k:[100,100,100]},1,.01,this),un.o?this.o=PropertyFactory.getProp(ln,un.o,0,.01,ln):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}on.prototype={applyToMatrix:Mt,getValue:Xr,precalculateMatrix:rn,autoOrient:nn},extendPrototype([DynamicPropertyContainer],on),on.prototype.addDynamicProperty=an,on.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function sn(ln,un,cn){return new on(ln,un,cn)}return{getTransformProperty:sn}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(st,Mt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(st,Mt.c,0,null,this),this.o=PropertyFactory.getProp(st,Mt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(st,Mt.tr,this),this.so=PropertyFactory.getProp(st,Mt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(st,Mt.tr.eo,0,.01,this),this.data=Mt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(st,Mt,Xr,rn,nn,an){var on=an?-1:1,sn=rn.s.v[0]+(1-rn.s.v[0])*(1-nn),ln=rn.s.v[1]+(1-rn.s.v[1])*(1-nn);st.translate(rn.p.v[0]*on*nn,rn.p.v[1]*on*nn,rn.p.v[2]),Mt.translate(-rn.a.v[0],-rn.a.v[1],rn.a.v[2]),Mt.rotate(-rn.r.v*on*nn),Mt.translate(rn.a.v[0],rn.a.v[1],rn.a.v[2]),Xr.translate(-rn.a.v[0],-rn.a.v[1],rn.a.v[2]),Xr.scale(an?1/sn:sn,an?1/ln:ln),Xr.translate(rn.a.v[0],rn.a.v[1],rn.a.v[2])},RepeaterModifier.prototype.init=function(st,Mt,Xr,rn){for(this.elem=st,this.arr=Mt,this.pos=Xr,this.elemsData=rn,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(st),this.initModifierProperties(st,Mt[Xr]);Xr>0;)Xr-=1,this._elements.unshift(Mt[Xr]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(st){var Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)st[Mt]._processed=!1,st[Mt].ty==="gr"&&this.resetElements(st[Mt].it)},RepeaterModifier.prototype.cloneElements=function(st){var Mt=JSON.parse(JSON.stringify(st));return this.resetElements(Mt),Mt},RepeaterModifier.prototype.changeGroupRender=function(st,Mt){var Xr,rn=st.length;for(Xr=0;Xr<rn;Xr+=1)st[Xr]._render=Mt,st[Xr].ty==="gr"&&this.changeGroupRender(st[Xr].it,Mt)},RepeaterModifier.prototype.processShapes=function(st){var Mt,Xr,rn,nn,an,on=!1;if(this._mdf||st){var sn=Math.ceil(this.c.v);if(this._groups.length<sn){for(;this._groups.length<sn;){var ln={it:this.cloneElements(this._elements),ty:"gr"};ln.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ln),this._groups.splice(0,0,ln),this._currentCopies+=1}this.elem.reloadShapes(),on=!0}an=0;var un;for(rn=0;rn<=this._groups.length-1;rn+=1){if(un=an<sn,this._groups[rn]._render=un,this.changeGroupRender(this._groups[rn].it,un),!un){var cn=this.elemsData[rn].it,hn=cn[cn.length-1];hn.transform.op.v!==0?(hn.transform.op._mdf=!0,hn.transform.op.v=0):hn.transform.op._mdf=!1}an+=1}this._currentCopies=sn;var fn=this.o.v,to=fn%1,uo=fn>0?Math.floor(fn):Math.ceil(fn),co=this.pMatrix.props,Uo=this.rMatrix.props,lo=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ho=0;if(fn>0){for(;ho<uo;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ho+=1;to&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,to,!1),ho+=to)}else if(fn<0){for(;ho>uo;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ho-=1;to&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-to,!0),ho-=to)}rn=this.data.m===1?0:this._currentCopies-1,nn=this.data.m===1?1:-1,an=this._currentCopies;for(var fo,mo;an;){if(Mt=this.elemsData[rn].it,Xr=Mt[Mt.length-1].transform.mProps.v.props,mo=Xr.length,Mt[Mt.length-1].transform.mProps._mdf=!0,Mt[Mt.length-1].transform.op._mdf=!0,Mt[Mt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(rn/(this._currentCopies-1)),ho!==0){for((rn!==0&&nn===1||rn!==this._currentCopies-1&&nn===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Uo[0],Uo[1],Uo[2],Uo[3],Uo[4],Uo[5],Uo[6],Uo[7],Uo[8],Uo[9],Uo[10],Uo[11],Uo[12],Uo[13],Uo[14],Uo[15]),this.matrix.transform(lo[0],lo[1],lo[2],lo[3],lo[4],lo[5],lo[6],lo[7],lo[8],lo[9],lo[10],lo[11],lo[12],lo[13],lo[14],lo[15]),this.matrix.transform(co[0],co[1],co[2],co[3],co[4],co[5],co[6],co[7],co[8],co[9],co[10],co[11],co[12],co[13],co[14],co[15]),fo=0;fo<mo;fo+=1)Xr[fo]=this.matrix.props[fo];this.matrix.reset()}else for(this.matrix.reset(),fo=0;fo<mo;fo+=1)Xr[fo]=this.matrix.props[fo];ho+=1,an-=1,rn+=nn}}else for(an=this._currentCopies,rn=0,nn=1;an;)Mt=this.elemsData[rn].it,Xr=Mt[Mt.length-1].transform.mProps.v.props,Mt[Mt.length-1].transform.mProps._mdf=!1,Mt[Mt.length-1].transform.op._mdf=!1,an-=1,rn+=nn;return on},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(st,Mt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(st,Mt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(st,Mt){var Xr=shapePool.newElement();Xr.c=st.c;var rn,nn=st._length,an,on,sn,ln,un,cn,hn=0,fn,to,uo,co,Uo,lo;for(rn=0;rn<nn;rn+=1)an=st.v[rn],sn=st.o[rn],on=st.i[rn],an[0]===sn[0]&&an[1]===sn[1]&&an[0]===on[0]&&an[1]===on[1]?(rn===0||rn===nn-1)&&!st.c?(Xr.setTripleAt(an[0],an[1],sn[0],sn[1],on[0],on[1],hn),hn+=1):(rn===0?ln=st.v[nn-1]:ln=st.v[rn-1],un=Math.sqrt(Math.pow(an[0]-ln[0],2)+Math.pow(an[1]-ln[1],2)),cn=un?Math.min(un/2,Mt)/un:0,Uo=an[0]+(ln[0]-an[0])*cn,fn=Uo,lo=an[1]-(an[1]-ln[1])*cn,to=lo,uo=fn-(fn-an[0])*roundCorner,co=to-(to-an[1])*roundCorner,Xr.setTripleAt(fn,to,uo,co,Uo,lo,hn),hn+=1,rn===nn-1?ln=st.v[0]:ln=st.v[rn+1],un=Math.sqrt(Math.pow(an[0]-ln[0],2)+Math.pow(an[1]-ln[1],2)),cn=un?Math.min(un/2,Mt)/un:0,uo=an[0]+(ln[0]-an[0])*cn,fn=uo,co=an[1]+(ln[1]-an[1])*cn,to=co,Uo=fn-(fn-an[0])*roundCorner,lo=to-(to-an[1])*roundCorner,Xr.setTripleAt(fn,to,uo,co,Uo,lo,hn),hn+=1):(Xr.setTripleAt(st.v[rn][0],st.v[rn][1],st.o[rn][0],st.o[rn][1],st.i[rn][0],st.i[rn][1],hn),hn+=1);return Xr},RoundCornersModifier.prototype.processShapes=function(st){var Mt,Xr,rn=this.shapes.length,nn,an,on=this.rd.v;if(on!==0){var sn,ln;for(Xr=0;Xr<rn;Xr+=1){if(sn=this.shapes[Xr],ln=sn.localShapeCollection,!(!sn.shape._mdf&&!this._mdf&&!st))for(ln.releaseShapes(),sn.shape._mdf=!0,Mt=sn.shape.paths.shapes,an=sn.shape.paths._length,nn=0;nn<an;nn+=1)ln.addShape(this.processPath(Mt[nn],on));sn.shape.paths=sn.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(st,Mt){return Math.abs(st-Mt)*1e5<=Math.min(Math.abs(st),Math.abs(Mt))}function floatZero(st){return Math.abs(st)<=1e-5}function lerp(st,Mt,Xr){return st*(1-Xr)+Mt*Xr}function lerpPoint(st,Mt,Xr){return[lerp(st[0],Mt[0],Xr),lerp(st[1],Mt[1],Xr)]}function quadRoots(st,Mt,Xr){if(st===0)return[];var rn=Mt*Mt-4*st*Xr;if(rn<0)return[];var nn=-Mt/(2*st);if(rn===0)return[nn];var an=Math.sqrt(rn)/(2*st);return[nn-an,nn+an]}function polynomialCoefficients(st,Mt,Xr,rn){return[-st+3*Mt-3*Xr+rn,3*st-6*Mt+3*Xr,-3*st+3*Mt,st]}function singlePoint(st){return new PolynomialBezier(st,st,st,st,!1)}function PolynomialBezier(st,Mt,Xr,rn,nn){nn&&pointEqual(st,Mt)&&(Mt=lerpPoint(st,rn,1/3)),nn&&pointEqual(Xr,rn)&&(Xr=lerpPoint(st,rn,2/3));var an=polynomialCoefficients(st[0],Mt[0],Xr[0],rn[0]),on=polynomialCoefficients(st[1],Mt[1],Xr[1],rn[1]);this.a=[an[0],on[0]],this.b=[an[1],on[1]],this.c=[an[2],on[2]],this.d=[an[3],on[3]],this.points=[st,Mt,Xr,rn]}PolynomialBezier.prototype.point=function(st){return[((this.a[0]*st+this.b[0])*st+this.c[0])*st+this.d[0],((this.a[1]*st+this.b[1])*st+this.c[1])*st+this.d[1]]},PolynomialBezier.prototype.derivative=function(st){return[(3*st*this.a[0]+2*this.b[0])*st+this.c[0],(3*st*this.a[1]+2*this.b[1])*st+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(st){var Mt=this.derivative(st);return Math.atan2(Mt[1],Mt[0])},PolynomialBezier.prototype.normalAngle=function(st){var Mt=this.derivative(st);return Math.atan2(Mt[0],Mt[1])},PolynomialBezier.prototype.inflectionPoints=function(){var st=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(st))return[];var Mt=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/st,Xr=Mt*Mt-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/st;if(Xr<0)return[];var rn=Math.sqrt(Xr);return floatZero(rn)?rn>0&&rn<1?[Mt]:[]:[Mt-rn,Mt+rn].filter(function(nn){return nn>0&&nn<1})},PolynomialBezier.prototype.split=function(st){if(st<=0)return[singlePoint(this.points[0]),this];if(st>=1)return[this,singlePoint(this.points[this.points.length-1])];var Mt=lerpPoint(this.points[0],this.points[1],st),Xr=lerpPoint(this.points[1],this.points[2],st),rn=lerpPoint(this.points[2],this.points[3],st),nn=lerpPoint(Mt,Xr,st),an=lerpPoint(Xr,rn,st),on=lerpPoint(nn,an,st);return[new PolynomialBezier(this.points[0],Mt,nn,on,!0),new PolynomialBezier(on,an,rn,this.points[3],!0)]};function extrema(st,Mt){var Xr=st.points[0][Mt],rn=st.points[st.points.length-1][Mt];if(Xr>rn){var nn=rn;rn=Xr,Xr=nn}for(var an=quadRoots(3*st.a[Mt],2*st.b[Mt],st.c[Mt]),on=0;on<an.length;on+=1)if(an[on]>0&&an[on]<1){var sn=st.point(an[on])[Mt];sn<Xr?Xr=sn:sn>rn&&(rn=sn)}return{min:Xr,max:rn}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var st=this.bounds();return{left:st.x.min,right:st.x.max,top:st.y.min,bottom:st.y.max,width:st.x.max-st.x.min,height:st.y.max-st.y.min,cx:(st.x.max+st.x.min)/2,cy:(st.y.max+st.y.min)/2}};function intersectData(st,Mt,Xr){var rn=st.boundingBox();return{cx:rn.cx,cy:rn.cy,width:rn.width,height:rn.height,bez:st,t:(Mt+Xr)/2,t1:Mt,t2:Xr}}function splitData(st){var Mt=st.bez.split(.5);return[intersectData(Mt[0],st.t1,st.t),intersectData(Mt[1],st.t,st.t2)]}function boxIntersect(st,Mt){return Math.abs(st.cx-Mt.cx)*2<st.width+Mt.width&&Math.abs(st.cy-Mt.cy)*2<st.height+Mt.height}function intersectsImpl(st,Mt,Xr,rn,nn,an){if(boxIntersect(st,Mt)){if(Xr>=an||st.width<=rn&&st.height<=rn&&Mt.width<=rn&&Mt.height<=rn){nn.push([st.t,Mt.t]);return}var on=splitData(st),sn=splitData(Mt);intersectsImpl(on[0],sn[0],Xr+1,rn,nn,an),intersectsImpl(on[0],sn[1],Xr+1,rn,nn,an),intersectsImpl(on[1],sn[0],Xr+1,rn,nn,an),intersectsImpl(on[1],sn[1],Xr+1,rn,nn,an)}}PolynomialBezier.prototype.intersections=function(st,Mt,Xr){Mt===void 0&&(Mt=2),Xr===void 0&&(Xr=7);var rn=[];return intersectsImpl(intersectData(this,0,1),intersectData(st,0,1),0,Mt,rn,Xr),rn},PolynomialBezier.shapeSegment=function(st,Mt){var Xr=(Mt+1)%st.length();return new PolynomialBezier(st.v[Mt],st.o[Mt],st.i[Xr],st.v[Xr],!0)},PolynomialBezier.shapeSegmentInverted=function(st,Mt){var Xr=(Mt+1)%st.length();return new PolynomialBezier(st.v[Xr],st.i[Xr],st.o[Mt],st.v[Mt],!0)};function crossProduct(st,Mt){return[st[1]*Mt[2]-st[2]*Mt[1],st[2]*Mt[0]-st[0]*Mt[2],st[0]*Mt[1]-st[1]*Mt[0]]}function lineIntersection(st,Mt,Xr,rn){var nn=[st[0],st[1],1],an=[Mt[0],Mt[1],1],on=[Xr[0],Xr[1],1],sn=[rn[0],rn[1],1],ln=crossProduct(crossProduct(nn,an),crossProduct(on,sn));return floatZero(ln[2])?null:[ln[0]/ln[2],ln[1]/ln[2]]}function polarOffset(st,Mt,Xr){return[st[0]+Math.cos(Mt)*Xr,st[1]-Math.sin(Mt)*Xr]}function pointDistance(st,Mt){return Math.hypot(st[0]-Mt[0],st[1]-Mt[1])}function pointEqual(st,Mt){return floatEqual(st[0],Mt[0])&&floatEqual(st[1],Mt[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(st,Mt){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(st,Mt.s,0,null,this),this.frequency=PropertyFactory.getProp(st,Mt.r,0,null,this),this.pointsType=PropertyFactory.getProp(st,Mt.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(st,Mt,Xr,rn,nn,an,on){var sn=Xr-Math.PI/2,ln=Xr+Math.PI/2,un=Mt[0]+Math.cos(Xr)*rn*nn,cn=Mt[1]-Math.sin(Xr)*rn*nn;st.setTripleAt(un,cn,un+Math.cos(sn)*an,cn-Math.sin(sn)*an,un+Math.cos(ln)*on,cn-Math.sin(ln)*on,st.length())}function getPerpendicularVector(st,Mt){var Xr=[Mt[0]-st[0],Mt[1]-st[1]],rn=-Math.PI*.5,nn=[Math.cos(rn)*Xr[0]-Math.sin(rn)*Xr[1],Math.sin(rn)*Xr[0]+Math.cos(rn)*Xr[1]];return nn}function getProjectingAngle(st,Mt){var Xr=Mt===0?st.length()-1:Mt-1,rn=(Mt+1)%st.length(),nn=st.v[Xr],an=st.v[rn],on=getPerpendicularVector(nn,an);return Math.atan2(0,1)-Math.atan2(on[1],on[0])}function zigZagCorner(st,Mt,Xr,rn,nn,an,on){var sn=getProjectingAngle(Mt,Xr),ln=Mt.v[Xr%Mt._length],un=Mt.v[Xr===0?Mt._length-1:Xr-1],cn=Mt.v[(Xr+1)%Mt._length],hn=an===2?Math.sqrt(Math.pow(ln[0]-un[0],2)+Math.pow(ln[1]-un[1],2)):0,fn=an===2?Math.sqrt(Math.pow(ln[0]-cn[0],2)+Math.pow(ln[1]-cn[1],2)):0;setPoint(st,Mt.v[Xr%Mt._length],sn,on,rn,fn/((nn+1)*2),hn/((nn+1)*2))}function zigZagSegment(st,Mt,Xr,rn,nn,an){for(var on=0;on<rn;on+=1){var sn=(on+1)/(rn+1),ln=nn===2?Math.sqrt(Math.pow(Mt.points[3][0]-Mt.points[0][0],2)+Math.pow(Mt.points[3][1]-Mt.points[0][1],2)):0,un=Mt.normalAngle(sn),cn=Mt.point(sn);setPoint(st,cn,un,an,Xr,ln/((rn+1)*2),ln/((rn+1)*2)),an=-an}return an}ZigZagModifier.prototype.processPath=function(st,Mt,Xr,rn){var nn=st._length,an=shapePool.newElement();if(an.c=st.c,st.c||(nn-=1),nn===0)return an;var on=-1,sn=PolynomialBezier.shapeSegment(st,0);zigZagCorner(an,st,0,Mt,Xr,rn,on);for(var ln=0;ln<nn;ln+=1)on=zigZagSegment(an,sn,Mt,Xr,rn,-on),ln===nn-1&&!st.c?sn=null:sn=PolynomialBezier.shapeSegment(st,(ln+1)%nn),zigZagCorner(an,st,ln+1,Mt,Xr,rn,on);return an},ZigZagModifier.prototype.processShapes=function(st){var Mt,Xr,rn=this.shapes.length,nn,an,on=this.amplitude.v,sn=Math.max(0,Math.round(this.frequency.v)),ln=this.pointsType.v;if(on!==0){var un,cn;for(Xr=0;Xr<rn;Xr+=1){if(un=this.shapes[Xr],cn=un.localShapeCollection,!(!un.shape._mdf&&!this._mdf&&!st))for(cn.releaseShapes(),un.shape._mdf=!0,Mt=un.shape.paths.shapes,an=un.shape.paths._length,nn=0;nn<an;nn+=1)cn.addShape(this.processPath(Mt[nn],on,sn,ln));un.shape.paths=un.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(st,Mt,Xr){var rn=Math.atan2(Mt[0]-st[0],Mt[1]-st[1]);return[polarOffset(st,rn,Xr),polarOffset(Mt,rn,Xr)]}function offsetSegment(st,Mt){var Xr,rn,nn,an,on,sn,ln;ln=linearOffset(st.points[0],st.points[1],Mt),Xr=ln[0],rn=ln[1],ln=linearOffset(st.points[1],st.points[2],Mt),nn=ln[0],an=ln[1],ln=linearOffset(st.points[2],st.points[3],Mt),on=ln[0],sn=ln[1];var un=lineIntersection(Xr,rn,nn,an);un===null&&(un=rn);var cn=lineIntersection(on,sn,nn,an);return cn===null&&(cn=on),new PolynomialBezier(Xr,un,cn,sn)}function joinLines(st,Mt,Xr,rn,nn){var an=Mt.points[3],on=Xr.points[0];if(rn===3||pointEqual(an,on))return an;if(rn===2){var sn=-Mt.tangentAngle(1),ln=-Xr.tangentAngle(0)+Math.PI,un=lineIntersection(an,polarOffset(an,sn+Math.PI/2,100),on,polarOffset(on,sn+Math.PI/2,100)),cn=un?pointDistance(un,an):pointDistance(an,on)/2,hn=polarOffset(an,sn,2*cn*roundCorner);return st.setXYAt(hn[0],hn[1],"o",st.length()-1),hn=polarOffset(on,ln,2*cn*roundCorner),st.setTripleAt(on[0],on[1],on[0],on[1],hn[0],hn[1],st.length()),on}var fn=pointEqual(an,Mt.points[2])?Mt.points[0]:Mt.points[2],to=pointEqual(on,Xr.points[1])?Xr.points[3]:Xr.points[1],uo=lineIntersection(fn,an,on,to);return uo&&pointDistance(uo,an)<nn?(st.setTripleAt(uo[0],uo[1],uo[0],uo[1],uo[0],uo[1],st.length()),uo):an}function getIntersection(st,Mt){var Xr=st.intersections(Mt);return Xr.length&&floatEqual(Xr[0][0],1)&&Xr.shift(),Xr.length?Xr[0]:null}function pruneSegmentIntersection(st,Mt){var Xr=st.slice(),rn=Mt.slice(),nn=getIntersection(st[st.length-1],Mt[0]);return nn&&(Xr[st.length-1]=st[st.length-1].split(nn[0])[0],rn[0]=Mt[0].split(nn[1])[1]),st.length>1&&Mt.length>1&&(nn=getIntersection(st[0],Mt[Mt.length-1]),nn)?[[st[0].split(nn[0])[0]],[Mt[Mt.length-1].split(nn[1])[1]]]:[Xr,rn]}function pruneIntersections(st){for(var Mt,Xr=1;Xr<st.length;Xr+=1)Mt=pruneSegmentIntersection(st[Xr-1],st[Xr]),st[Xr-1]=Mt[0],st[Xr]=Mt[1];return st.length>1&&(Mt=pruneSegmentIntersection(st[st.length-1],st[0]),st[st.length-1]=Mt[0],st[0]=Mt[1]),st}function offsetSegmentSplit(st,Mt){var Xr=st.inflectionPoints(),rn,nn,an,on;if(Xr.length===0)return[offsetSegment(st,Mt)];if(Xr.length===1||floatEqual(Xr[1],1))return an=st.split(Xr[0]),rn=an[0],nn=an[1],[offsetSegment(rn,Mt),offsetSegment(nn,Mt)];an=st.split(Xr[0]),rn=an[0];var sn=(Xr[1]-Xr[0])/(1-Xr[0]);return an=an[1].split(sn),on=an[0],nn=an[1],[offsetSegment(rn,Mt),offsetSegment(on,Mt),offsetSegment(nn,Mt)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(st,Mt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(st,Mt.a,0,null,this),this.miterLimit=PropertyFactory.getProp(st,Mt.ml,0,null,this),this.lineJoin=Mt.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(st,Mt,Xr,rn){var nn=shapePool.newElement();nn.c=st.c;var an=st.length();st.c||(an-=1);var on,sn,ln,un=[];for(on=0;on<an;on+=1)ln=PolynomialBezier.shapeSegment(st,on),un.push(offsetSegmentSplit(ln,Mt));if(!st.c)for(on=an-1;on>=0;on-=1)ln=PolynomialBezier.shapeSegmentInverted(st,on),un.push(offsetSegmentSplit(ln,Mt));un=pruneIntersections(un);var cn=null,hn=null;for(on=0;on<un.length;on+=1){var fn=un[on];for(hn&&(cn=joinLines(nn,hn,fn[0],Xr,rn)),hn=fn[fn.length-1],sn=0;sn<fn.length;sn+=1)ln=fn[sn],cn&&pointEqual(ln.points[0],cn)?nn.setXYAt(ln.points[1][0],ln.points[1][1],"o",nn.length()-1):nn.setTripleAt(ln.points[0][0],ln.points[0][1],ln.points[1][0],ln.points[1][1],ln.points[0][0],ln.points[0][1],nn.length()),nn.setTripleAt(ln.points[3][0],ln.points[3][1],ln.points[3][0],ln.points[3][1],ln.points[2][0],ln.points[2][1],nn.length()),cn=ln.points[3]}return un.length&&joinLines(nn,hn,un[0][0],Xr,rn),nn},OffsetPathModifier.prototype.processShapes=function(st){var Mt,Xr,rn=this.shapes.length,nn,an,on=this.amount.v,sn=this.miterLimit.v,ln=this.lineJoin;if(on!==0){var un,cn;for(Xr=0;Xr<rn;Xr+=1){if(un=this.shapes[Xr],cn=un.localShapeCollection,!(!un.shape._mdf&&!this._mdf&&!st))for(cn.releaseShapes(),un.shape._mdf=!0,Mt=un.shape.paths.shapes,an=un.shape.paths._length,nn=0;nn<an;nn+=1)cn.addShape(this.processPath(Mt[nn],on,ln,sn));un.shape.paths=un.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(st){for(var Mt=st.fStyle?st.fStyle.split(" "):[],Xr="normal",rn="normal",nn=Mt.length,an,on=0;on<nn;on+=1)switch(an=Mt[on].toLowerCase(),an){case"italic":rn="italic";break;case"bold":Xr="700";break;case"black":Xr="900";break;case"medium":Xr="500";break;case"regular":case"normal":Xr="400";break;case"light":case"thin":Xr="200";break}return{style:rn,weight:st.fWeight||Xr}}var FontManager=function(){var st=5e3,Mt={w:0,size:0,shapes:[],data:{shapes:[]}},Xr=[];Xr=Xr.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var rn=127988,nn=917631,an=917601,on=917626,sn=65039,ln=8205,un=127462,cn=127487,hn=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function fn(lp){var cp=lp.split(","),tp,np=cp.length,fp=[];for(tp=0;tp<np;tp+=1)cp[tp]!=="sans-serif"&&cp[tp]!=="monospace"&&fp.push(cp[tp]);return fp.join(",")}function to(lp,cp){var tp=createTag("span");tp.setAttribute("aria-hidden",!0),tp.style.fontFamily=cp;var np=createTag("span");np.innerText="giItT1WQy@!-/#",tp.style.position="absolute",tp.style.left="-10000px",tp.style.top="-10000px",tp.style.fontSize="300px",tp.style.fontVariant="normal",tp.style.fontStyle="normal",tp.style.fontWeight="normal",tp.style.letterSpacing="0",tp.appendChild(np),document.body.appendChild(tp);var fp=np.offsetWidth;return np.style.fontFamily=fn(lp)+", "+cp,{node:np,w:fp,parent:tp}}function uo(){var lp,cp=this.fonts.length,tp,np,fp=cp;for(lp=0;lp<cp;lp+=1)this.fonts[lp].loaded?fp-=1:this.fonts[lp].fOrigin==="n"||this.fonts[lp].origin===0?this.fonts[lp].loaded=!0:(tp=this.fonts[lp].monoCase.node,np=this.fonts[lp].monoCase.w,tp.offsetWidth!==np?(fp-=1,this.fonts[lp].loaded=!0):(tp=this.fonts[lp].sansCase.node,np=this.fonts[lp].sansCase.w,tp.offsetWidth!==np&&(fp-=1,this.fonts[lp].loaded=!0)),this.fonts[lp].loaded&&(this.fonts[lp].sansCase.parent.parentNode.removeChild(this.fonts[lp].sansCase.parent),this.fonts[lp].monoCase.parent.parentNode.removeChild(this.fonts[lp].monoCase.parent)));fp!==0&&Date.now()-this.initTime<st?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function co(lp,cp){var tp=document.body&&cp?"svg":"canvas",np,fp=getFontProperties(lp);if(tp==="svg"){var dp=createNS("text");dp.style.fontSize="100px",dp.setAttribute("font-family",lp.fFamily),dp.setAttribute("font-style",fp.style),dp.setAttribute("font-weight",fp.weight),dp.textContent="1",lp.fClass?(dp.style.fontFamily="inherit",dp.setAttribute("class",lp.fClass)):dp.style.fontFamily=lp.fFamily,cp.appendChild(dp),np=dp}else{var yp=new OffscreenCanvas(500,500).getContext("2d");yp.font=fp.style+" "+fp.weight+" 100px "+lp.fFamily,np=yp}function bp(_p){return tp==="svg"?(np.textContent=_p,np.getComputedTextLength()):np.measureText(_p).width}return{measureText:bp}}function Uo(lp,cp){if(!lp){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=lp.list;return}if(!document.body){this.isLoaded=!0,lp.list.forEach(function(Dp){Dp.helper=co(Dp),Dp.cache={}}),this.fonts=lp.list;return}var tp=lp.list,np,fp=tp.length,dp=fp;for(np=0;np<fp;np+=1){var yp=!0,bp,_p;if(tp[np].loaded=!1,tp[np].monoCase=to(tp[np].fFamily,"monospace"),tp[np].sansCase=to(tp[np].fFamily,"sans-serif"),!tp[np].fPath)tp[np].loaded=!0,dp-=1;else if(tp[np].fOrigin==="p"||tp[np].origin===3){if(bp=document.querySelectorAll('style[f-forigin="p"][f-family="'+tp[np].fFamily+'"], style[f-origin="3"][f-family="'+tp[np].fFamily+'"]'),bp.length>0&&(yp=!1),yp){var Cp=createTag("style");Cp.setAttribute("f-forigin",tp[np].fOrigin),Cp.setAttribute("f-origin",tp[np].origin),Cp.setAttribute("f-family",tp[np].fFamily),Cp.type="text/css",Cp.innerText="@font-face {font-family: "+tp[np].fFamily+"; font-style: normal; src: url('"+tp[np].fPath+"');}",cp.appendChild(Cp)}}else if(tp[np].fOrigin==="g"||tp[np].origin===1){for(bp=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),_p=0;_p<bp.length;_p+=1)bp[_p].href.indexOf(tp[np].fPath)!==-1&&(yp=!1);if(yp){var Sp=createTag("link");Sp.setAttribute("f-forigin",tp[np].fOrigin),Sp.setAttribute("f-origin",tp[np].origin),Sp.type="text/css",Sp.rel="stylesheet",Sp.href=tp[np].fPath,document.body.appendChild(Sp)}}else if(tp[np].fOrigin==="t"||tp[np].origin===2){for(bp=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),_p=0;_p<bp.length;_p+=1)tp[np].fPath===bp[_p].src&&(yp=!1);if(yp){var Rp=createTag("link");Rp.setAttribute("f-forigin",tp[np].fOrigin),Rp.setAttribute("f-origin",tp[np].origin),Rp.setAttribute("rel","stylesheet"),Rp.setAttribute("href",tp[np].fPath),cp.appendChild(Rp)}}tp[np].helper=co(tp[np],cp),tp[np].cache={},this.fonts.push(tp[np])}dp===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function lo(lp){if(lp){this.chars||(this.chars=[]);var cp,tp=lp.length,np,fp=this.chars.length,dp;for(cp=0;cp<tp;cp+=1){for(np=0,dp=!1;np<fp;)this.chars[np].style===lp[cp].style&&this.chars[np].fFamily===lp[cp].fFamily&&this.chars[np].ch===lp[cp].ch&&(dp=!0),np+=1;dp||(this.chars.push(lp[cp]),fp+=1)}}}function ho(lp,cp,tp){for(var np=0,fp=this.chars.length;np<fp;){if(this.chars[np].ch===lp&&this.chars[np].style===cp&&this.chars[np].fFamily===tp)return this.chars[np];np+=1}return(typeof lp=="string"&&lp.charCodeAt(0)!==13||!lp)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",lp,cp,tp)),Mt}function fo(lp,cp,tp){var np=this.getFontByName(cp),fp=lp;if(!np.cache[fp]){var dp=np.helper;if(lp===" "){var yp=dp.measureText("|"+lp+"|"),bp=dp.measureText("||");np.cache[fp]=(yp-bp)/100}else np.cache[fp]=dp.measureText(lp)/100}return np.cache[fp]*tp}function mo(lp){for(var cp=0,tp=this.fonts.length;cp<tp;){if(this.fonts[cp].fName===lp)return this.fonts[cp];cp+=1}return this.fonts[0]}function _d(lp){var cp=0,tp=lp.charCodeAt(0);if(tp>=55296&&tp<=56319){var np=lp.charCodeAt(1);np>=56320&&np<=57343&&(cp=(tp-55296)*1024+np-56320+65536)}return cp}function ep(lp,cp){var tp=lp.toString(16)+cp.toString(16);return hn.indexOf(tp)!==-1}function rp(lp){return lp===ln}function ap(lp){return lp===sn}function sp(lp){var cp=_d(lp);return cp>=un&&cp<=cn}function up(lp){return sp(lp.substr(0,2))&&sp(lp.substr(2,2))}function pp(lp){return Xr.indexOf(lp)!==-1}function hp(lp,cp){var tp=_d(lp.substr(cp,2));if(tp!==rn)return!1;var np=0;for(cp+=2;np<5;){if(tp=_d(lp.substr(cp,2)),tp<an||tp>on)return!1;np+=1,cp+=2}return _d(lp.substr(cp,2))===nn}function vp(){this.isLoaded=!0}var gp=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};gp.isModifier=ep,gp.isZeroWidthJoiner=rp,gp.isFlagEmoji=up,gp.isRegionalCode=sp,gp.isCombinedCharacter=pp,gp.isRegionalFlag=hp,gp.isVariationSelector=ap,gp.BLACK_FLAG_CODE_POINT=rn;var mp={addChars:lo,addFonts:Uo,getCharData:ho,getFontByName:mo,measureText:fo,checkLoadedFonts:uo,setIsLoaded:vp};return gp.prototype=mp,gp}();function SlotManager(st){this.animationData=st}SlotManager.prototype.getProp=function(st){return this.animationData.slots&&this.animationData.slots[st.sid]?Object.assign(st,this.animationData.slots[st.sid].p):st};function slotFactory(st){return new SlotManager(st)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(Mt){this.renderableComponents.indexOf(Mt)===-1&&this.renderableComponents.push(Mt)},removeRenderableComponent:function(Mt){this.renderableComponents.indexOf(Mt)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(Mt),1)},prepareRenderableFrame:function(Mt){this.checkLayerLimits(Mt)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(Mt){this.data.ip-this.data.st<=Mt&&this.data.op-this.data.st>Mt?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var Mt,Xr=this.renderableComponents.length;for(Mt=0;Mt<Xr;Mt+=1)this.renderableComponents[Mt].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var st={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(Mt){return st[Mt]||""}}();function SliderEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,0,0,Xr)}function AngleEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,0,0,Xr)}function ColorEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,1,0,Xr)}function PointEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,1,0,Xr)}function LayerIndexEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,0,0,Xr)}function MaskIndexEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,0,0,Xr)}function CheckboxEffect(st,Mt,Xr){this.p=PropertyFactory.getProp(Mt,st.v,0,0,Xr)}function NoValueEffect(){this.p={}}function EffectsManager(st,Mt){var Xr=st.ef||[];this.effectElements=[];var rn,nn=Xr.length,an;for(rn=0;rn<nn;rn+=1)an=new GroupEffect(Xr[rn],Mt),this.effectElements.push(an)}function GroupEffect(st,Mt){this.init(st,Mt)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(st,Mt){this.data=st,this.effectElements=[],this.initDynamicPropertyContainer(Mt);var Xr,rn=this.data.ef.length,nn,an=this.data.ef;for(Xr=0;Xr<rn;Xr+=1){switch(nn=null,an[Xr].ty){case 0:nn=new SliderEffect(an[Xr],Mt,this);break;case 1:nn=new AngleEffect(an[Xr],Mt,this);break;case 2:nn=new ColorEffect(an[Xr],Mt,this);break;case 3:nn=new PointEffect(an[Xr],Mt,this);break;case 4:case 7:nn=new CheckboxEffect(an[Xr],Mt,this);break;case 10:nn=new LayerIndexEffect(an[Xr],Mt,this);break;case 11:nn=new MaskIndexEffect(an[Xr],Mt,this);break;case 5:nn=new EffectsManager(an[Xr],Mt);break;default:nn=new NoValueEffect(an[Xr]);break}nn&&this.effectElements.push(nn)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var Mt=0,Xr=this.data.masksProperties.length;Mt<Xr;){if(this.data.masksProperties[Mt].mode!=="n"&&this.data.masksProperties[Mt].cl!==!1)return!0;Mt+=1}return!1},initExpressions:function(){var Mt=getExpressionInterfaces();if(Mt){var Xr=Mt("layer"),rn=Mt("effects"),nn=Mt("shape"),an=Mt("text"),on=Mt("comp");this.layerInterface=Xr(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var sn=rn.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(sn),this.data.ty===0||this.data.xt?this.compInterface=on(this):this.data.ty===4?(this.layerInterface.shapeInterface=nn(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=an(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var Mt=getBlendMode(this.data.bm),Xr=this.baseElement||this.layerElement;Xr.style["mix-blend-mode"]=Mt},initBaseData:function(Mt,Xr,rn){this.globalData=Xr,this.comp=rn,this.data=Mt,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(Mt,Xr){var rn,nn=this.dynamicProperties.length;for(rn=0;rn<nn;rn+=1)(Xr||this._isParent&&this.dynamicProperties[rn].propType==="transform")&&(this.dynamicProperties[rn].getValue(),this.dynamicProperties[rn]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(Mt){this.dynamicProperties.indexOf(Mt)===-1&&this.dynamicProperties.push(Mt)}};function FootageElement(st,Mt,Xr){this.initFrame(),this.initRenderable(),this.assetData=Mt.getAssetData(st.refId),this.footageData=Mt.imageLoader.getAsset(this.assetData),this.initBaseData(st,Mt,Xr)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var st=getExpressionInterfaces();if(st){var Mt=st("footage");this.layerInterface=Mt(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(st,Mt,Xr){this.initFrame(),this.initRenderable(),this.assetData=Mt.getAssetData(st.refId),this.initBaseData(st,Mt,Xr),this._isPlaying=!1,this._canPlay=!1;var rn=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(rn),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=st.tm?PropertyFactory.getProp(this,st.tm,0,Mt.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,st.au&&st.au.lv?st.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(st){if(this.prepareRenderableFrame(st,!0),this.prepareProperties(st,!0),this.tm._placeholder)this._currentTime=st/this.data.sr;else{var Mt=this.tm.v;this._currentTime=Mt}this._volume=this.lv.v[0];var Xr=this._volume*this._volumeMultiplier;this._previousVolume!==Xr&&(this._previousVolume=Xr,this.audio.volume(Xr))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(st){this.audio.rate(st)},AudioElement.prototype.volume=function(st){this._volumeMultiplier=st,this._previousVolume=st*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(st){var Mt,Xr=this.layers.length,rn;for(this.completeLayers=!0,Mt=Xr-1;Mt>=0;Mt-=1)this.elements[Mt]||(rn=this.layers[Mt],rn.ip-rn.st<=st-this.layers[Mt].st&&rn.op-rn.st>st-this.layers[Mt].st&&this.buildItem(Mt)),this.completeLayers=this.elements[Mt]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(st){switch(st.ty){case 2:return this.createImage(st);case 0:return this.createComp(st);case 1:return this.createSolid(st);case 3:return this.createNull(st);case 4:return this.createShape(st);case 5:return this.createText(st);case 6:return this.createAudio(st);case 13:return this.createCamera(st);case 15:return this.createFootage(st);default:return this.createNull(st)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(st){return new AudioElement(st,this.globalData,this)},BaseRenderer.prototype.createFootage=function(st){return new FootageElement(st,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var st,Mt=this.layers.length;for(st=0;st<Mt;st+=1)this.buildItem(st);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(st){this.completeLayers=!1;var Mt,Xr=st.length,rn,nn=this.layers.length;for(Mt=0;Mt<Xr;Mt+=1)for(rn=0;rn<nn;){if(this.layers[rn].id===st[Mt].id){this.layers[rn]=st[Mt];break}rn+=1}},BaseRenderer.prototype.setProjectInterface=function(st){this.globalData.projectInterface=st},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(st,Mt,Xr){for(var rn=this.elements,nn=this.layers,an=0,on=nn.length;an<on;)nn[an].ind==Mt&&(!rn[an]||rn[an]===!0?(this.buildItem(an),this.addPendingElement(st)):(Xr.push(rn[an]),rn[an].setAsParent(),nn[an].parent!==void 0?this.buildElementParenting(st,nn[an].parent,Xr):st.setHierarchy(Xr))),an+=1},BaseRenderer.prototype.addPendingElement=function(st){this.pendingElements.push(st)},BaseRenderer.prototype.searchExtraCompositions=function(st){var Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)if(st[Mt].xt){var rn=this.createComp(st[Mt]);rn.initExpressions(),this.globalData.projectInterface.registerComposition(rn)}},BaseRenderer.prototype.getElementById=function(st){var Mt,Xr=this.elements.length;for(Mt=0;Mt<Xr;Mt+=1)if(this.elements[Mt].data.ind===st)return this.elements[Mt];return null},BaseRenderer.prototype.getElementByPath=function(st){var Mt=st.shift(),Xr;if(typeof Mt=="number")Xr=this.elements[Mt];else{var rn,nn=this.elements.length;for(rn=0;rn<nn;rn+=1)if(this.elements[rn].data.nm===Mt){Xr=this.elements[rn];break}}return st.length===0?Xr:Xr.getElementByPath(st)},BaseRenderer.prototype.setupGlobalData=function(st,Mt){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(st),this.globalData.fontManager.addChars(st.chars),this.globalData.fontManager.addFonts(st.fonts,Mt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=st.fr,this.globalData.nm=st.nm,this.globalData.compSize={w:st.w,h:st.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var Mt=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:Mt,localMat:Mt,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var Mt,Xr=this.finalTransform.mat,rn=0,nn=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;rn<nn;){if(this.hierarchy[rn].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}rn+=1}if(this.finalTransform._matMdf)for(Mt=this.finalTransform.mProp.v.props,Xr.cloneFromProps(Mt),rn=0;rn<nn;rn+=1)Xr.multiply(this.hierarchy[rn].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var Mt=0,Xr=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;Mt<Xr;)this.localTransforms[Mt]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[Mt]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),Mt+=1;if(this.finalTransform._localMatMdf){var rn=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(rn),Mt=1;Mt<Xr;Mt+=1){var nn=this.localTransforms[Mt].matrix;rn.multiply(nn)}rn.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var an=this.finalTransform.localOpacity;for(Mt=0;Mt<Xr;Mt+=1)an*=this.localTransforms[Mt].opacity*.01;this.finalTransform.localOpacity=an}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var Mt=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(Mt.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var Xr=0,rn=Mt.length;for(Xr=0;Xr<rn;Xr+=1)this.localTransforms.push(Mt[Xr])}}},globalToLocal:function(Mt){var Xr=[];Xr.push(this.finalTransform);for(var rn=!0,nn=this.comp;rn;)nn.finalTransform?(nn.data.hasMask&&Xr.splice(0,0,nn.finalTransform),nn=nn.comp):rn=!1;var an,on=Xr.length,sn;for(an=0;an<on;an+=1)sn=Xr[an].mat.applyToPointArray(0,0,0),Mt=[Mt[0]-sn[0],Mt[1]-sn[1],0];return Mt},mHelper:new Matrix};function MaskElement(st,Mt,Xr){this.data=st,this.element=Mt,this.globalData=Xr,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var rn=this.globalData.defs,nn,an=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(an),this.solidPath="";var on,sn=this.masksProperties,ln=0,un=[],cn,hn,fn=createElementID(),to,uo,co,Uo,lo="clipPath",ho="clip-path";for(nn=0;nn<an;nn+=1)if((sn[nn].mode!=="a"&&sn[nn].mode!=="n"||sn[nn].inv||sn[nn].o.k!==100||sn[nn].o.x)&&(lo="mask",ho="mask"),(sn[nn].mode==="s"||sn[nn].mode==="i")&&ln===0?(to=createNS("rect"),to.setAttribute("fill","#ffffff"),to.setAttribute("width",this.element.comp.data.w||0),to.setAttribute("height",this.element.comp.data.h||0),un.push(to)):to=null,on=createNS("path"),sn[nn].mode==="n")this.viewData[nn]={op:PropertyFactory.getProp(this.element,sn[nn].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,sn[nn],3),elem:on,lastPath:""},rn.appendChild(on);else{ln+=1,on.setAttribute("fill",sn[nn].mode==="s"?"#000000":"#ffffff"),on.setAttribute("clip-rule","nonzero");var fo;if(sn[nn].x.k!==0?(lo="mask",ho="mask",Uo=PropertyFactory.getProp(this.element,sn[nn].x,0,null,this.element),fo=createElementID(),uo=createNS("filter"),uo.setAttribute("id",fo),co=createNS("feMorphology"),co.setAttribute("operator","erode"),co.setAttribute("in","SourceGraphic"),co.setAttribute("radius","0"),uo.appendChild(co),rn.appendChild(uo),on.setAttribute("stroke",sn[nn].mode==="s"?"#000000":"#ffffff")):(co=null,Uo=null),this.storedData[nn]={elem:on,x:Uo,expan:co,lastPath:"",lastOperator:"",filterId:fo,lastRadius:0},sn[nn].mode==="i"){hn=un.length;var mo=createNS("g");for(cn=0;cn<hn;cn+=1)mo.appendChild(un[cn]);var _d=createNS("mask");_d.setAttribute("mask-type","alpha"),_d.setAttribute("id",fn+"_"+ln),_d.appendChild(on),rn.appendChild(_d),mo.setAttribute("mask","url("+getLocationHref()+"#"+fn+"_"+ln+")"),un.length=0,un.push(mo)}else un.push(on);sn[nn].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[nn]={elem:on,lastPath:"",op:PropertyFactory.getProp(this.element,sn[nn].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,sn[nn],3),invRect:to},this.viewData[nn].prop.k||this.drawPath(sn[nn],this.viewData[nn].prop.v,this.viewData[nn])}for(this.maskElement=createNS(lo),an=un.length,nn=0;nn<an;nn+=1)this.maskElement.appendChild(un[nn]);ln>0&&(this.maskElement.setAttribute("id",fn),this.element.maskedElement.setAttribute(ho,"url("+getLocationHref()+"#"+fn+")"),rn.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(st){return this.viewData[st].prop},MaskElement.prototype.renderFrame=function(st){var Mt=this.element.finalTransform.mat,Xr,rn=this.masksProperties.length;for(Xr=0;Xr<rn;Xr+=1)if((this.viewData[Xr].prop._mdf||st)&&this.drawPath(this.masksProperties[Xr],this.viewData[Xr].prop.v,this.viewData[Xr]),(this.viewData[Xr].op._mdf||st)&&this.viewData[Xr].elem.setAttribute("fill-opacity",this.viewData[Xr].op.v),this.masksProperties[Xr].mode!=="n"&&(this.viewData[Xr].invRect&&(this.element.finalTransform.mProp._mdf||st)&&this.viewData[Xr].invRect.setAttribute("transform",Mt.getInverseMatrix().to2dCSS()),this.storedData[Xr].x&&(this.storedData[Xr].x._mdf||st))){var nn=this.storedData[Xr].expan;this.storedData[Xr].x.v<0?(this.storedData[Xr].lastOperator!=="erode"&&(this.storedData[Xr].lastOperator="erode",this.storedData[Xr].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[Xr].filterId+")")),nn.setAttribute("radius",-this.storedData[Xr].x.v)):(this.storedData[Xr].lastOperator!=="dilate"&&(this.storedData[Xr].lastOperator="dilate",this.storedData[Xr].elem.setAttribute("filter",null)),this.storedData[Xr].elem.setAttribute("stroke-width",this.storedData[Xr].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var st="M0,0 ";return st+=" h"+this.globalData.compSize.w,st+=" v"+this.globalData.compSize.h,st+=" h-"+this.globalData.compSize.w,st+=" v-"+this.globalData.compSize.h+" ",st},MaskElement.prototype.drawPath=function(st,Mt,Xr){var rn=" M"+Mt.v[0][0]+","+Mt.v[0][1],nn,an;for(an=Mt._length,nn=1;nn<an;nn+=1)rn+=" C"+Mt.o[nn-1][0]+","+Mt.o[nn-1][1]+" "+Mt.i[nn][0]+","+Mt.i[nn][1]+" "+Mt.v[nn][0]+","+Mt.v[nn][1];if(Mt.c&&an>1&&(rn+=" C"+Mt.o[nn-1][0]+","+Mt.o[nn-1][1]+" "+Mt.i[0][0]+","+Mt.i[0][1]+" "+Mt.v[0][0]+","+Mt.v[0][1]),Xr.lastPath!==rn){var on="";Xr.elem&&(Mt.c&&(on=st.inv?this.solidPath+rn:rn),Xr.elem.setAttribute("d",on)),Xr.lastPath=rn}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var st={};st.createFilter=Mt,st.createAlphaToLuminanceFilter=Xr;function Mt(rn,nn){var an=createNS("filter");return an.setAttribute("id",rn),nn!==!0&&(an.setAttribute("filterUnits","objectBoundingBox"),an.setAttribute("x","0%"),an.setAttribute("y","0%"),an.setAttribute("width","100%"),an.setAttribute("height","100%")),an}function Xr(){var rn=createNS("feColorMatrix");return rn.setAttribute("type","matrix"),rn.setAttribute("color-interpolation-filters","sRGB"),rn.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),rn}return st}(),featureSupport=function(){var st={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(st.maskType=!1),/firefox/i.test(navigator.userAgent)&&(st.svgLumaHidden=!1),st}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(st){var Mt,Xr="SourceGraphic",rn=st.data.ef?st.data.ef.length:0,nn=createElementID(),an=filtersFactory.createFilter(nn,!0),on=0;this.filters=[];var sn;for(Mt=0;Mt<rn;Mt+=1){sn=null;var ln=st.data.ef[Mt].ty;if(registeredEffects$1[ln]){var un=registeredEffects$1[ln].effect;sn=new un(an,st.effectsManager.effectElements[Mt],st,idPrefix+on,Xr),Xr=idPrefix+on,registeredEffects$1[ln].countsAsEffect&&(on+=1)}sn&&this.filters.push(sn)}on&&(st.globalData.defs.appendChild(an),st.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+nn+")")),this.filters.length&&st.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(st){var Mt,Xr=this.filters.length;for(Mt=0;Mt<Xr;Mt+=1)this.filters[Mt].renderFrame(st)},SVGEffects.prototype.getEffects=function(st){var Mt,Xr=this.filters.length,rn=[];for(Mt=0;Mt<Xr;Mt+=1)this.filters[Mt].type===st&&rn.push(this.filters[Mt]);return rn};function registerEffect$1(st,Mt,Xr){registeredEffects$1[st]={effect:Mt,countsAsEffect:Xr}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var Mt=null;if(this.data.td){this.matteMasks={};var Xr=createNS("g");Xr.setAttribute("id",this.layerId),Xr.appendChild(this.layerElement),Mt=Xr,this.globalData.defs.appendChild(Xr)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),Mt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var rn=createNS("clipPath"),nn=createNS("path");nn.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var an=createElementID();if(rn.setAttribute("id",an),rn.appendChild(nn),this.globalData.defs.appendChild(rn),this.checkMasks()){var on=createNS("g");on.setAttribute("clip-path","url("+getLocationHref()+"#"+an+")"),on.appendChild(this.layerElement),this.transformedElement=on,Mt?Mt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+an+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(Mt){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[Mt]){var Xr=this.layerId+"_"+Mt,rn,nn,an,on;if(Mt===1||Mt===3){var sn=createNS("mask");sn.setAttribute("id",Xr),sn.setAttribute("mask-type",Mt===3?"luminance":"alpha"),an=createNS("use"),an.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),sn.appendChild(an),this.globalData.defs.appendChild(sn),!featureSupport.maskType&&Mt===1&&(sn.setAttribute("mask-type","luminance"),rn=createElementID(),nn=filtersFactory.createFilter(rn),this.globalData.defs.appendChild(nn),nn.appendChild(filtersFactory.createAlphaToLuminanceFilter()),on=createNS("g"),on.appendChild(an),sn.appendChild(on),on.setAttribute("filter","url("+getLocationHref()+"#"+rn+")"))}else if(Mt===2){var ln=createNS("mask");ln.setAttribute("id",Xr),ln.setAttribute("mask-type","alpha");var un=createNS("g");ln.appendChild(un),rn=createElementID(),nn=filtersFactory.createFilter(rn);var cn=createNS("feComponentTransfer");cn.setAttribute("in","SourceGraphic"),nn.appendChild(cn);var hn=createNS("feFuncA");hn.setAttribute("type","table"),hn.setAttribute("tableValues","1.0 0.0"),cn.appendChild(hn),this.globalData.defs.appendChild(nn);var fn=createNS("rect");fn.setAttribute("width",this.comp.data.w),fn.setAttribute("height",this.comp.data.h),fn.setAttribute("x","0"),fn.setAttribute("y","0"),fn.setAttribute("fill","#ffffff"),fn.setAttribute("opacity","0"),un.setAttribute("filter","url("+getLocationHref()+"#"+rn+")"),un.appendChild(fn),an=createNS("use"),an.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),un.appendChild(an),featureSupport.maskType||(ln.setAttribute("mask-type","luminance"),nn.appendChild(filtersFactory.createAlphaToLuminanceFilter()),on=createNS("g"),un.appendChild(fn),on.appendChild(this.layerElement),un.appendChild(on)),this.globalData.defs.appendChild(ln)}this.matteMasks[Mt]=Xr}return this.matteMasks[Mt]},setMatte:function(Mt){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+Mt+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(Mt){this.hierarchy=Mt},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var st={initElement:function(Xr,rn,nn){this.initFrame(),this.initBaseData(Xr,rn,nn),this.initTransform(Xr,rn,nn),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var Xr=this.baseElement||this.layerElement;Xr.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var Xr=this.baseElement||this.layerElement;Xr.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(Xr){this._mdf=!1,this.prepareRenderableFrame(Xr),this.prepareProperties(Xr,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(st)],RenderableDOMElement)})();function IImageElement(st,Mt,Xr){this.assetData=Mt.getAssetData(st.refId),this.assetData&&this.assetData.sid&&(this.assetData=Mt.slotManager.getProp(this.assetData)),this.initElement(st,Mt,Xr),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var st=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",st),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(st,Mt){this.elem=st,this.pos=Mt}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(Mt){var Xr,rn=this.shapeModifiers.length;for(Xr=0;Xr<rn;Xr+=1)this.shapeModifiers[Xr].addShape(Mt)},isShapeInAnimatedModifiers:function(Mt){for(var Xr=0,rn=this.shapeModifiers.length;Xr<rn;)if(this.shapeModifiers[Xr].isAnimatedWithShape(Mt))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var Mt,Xr=this.shapes.length;for(Mt=0;Mt<Xr;Mt+=1)this.shapes[Mt].sh.reset();Xr=this.shapeModifiers.length;var rn;for(Mt=Xr-1;Mt>=0&&(rn=this.shapeModifiers[Mt].processShapes(this._isFirstFrame),!rn);Mt-=1);}},searchProcessedElement:function(Mt){for(var Xr=this.processedElements,rn=0,nn=Xr.length;rn<nn;){if(Xr[rn].elem===Mt)return Xr[rn].pos;rn+=1}return 0},addProcessedElement:function(Mt,Xr){for(var rn=this.processedElements,nn=rn.length;nn;)if(nn-=1,rn[nn].elem===Mt){rn[nn].pos=Xr;return}rn.push(new ProcessedElement(Mt,Xr))},prepareFrame:function(Mt){this.prepareRenderableFrame(Mt),this.prepareProperties(Mt,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(st,Mt,Xr){this.caches=[],this.styles=[],this.transformers=st,this.lStr="",this.sh=Xr,this.lvl=Mt,this._isAnimated=!!Xr.k;for(var rn=0,nn=st.length;rn<nn;){if(st[rn].mProps.dynamicProperties.length){this._isAnimated=!0;break}rn+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(st,Mt){this.data=st,this.type=st.ty,this.d="",this.lvl=Mt,this._mdf=!1,this.closed=st.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(st,Mt,Xr,rn){this.elem=st,this.frameId=-1,this.dataProps=createSizedArray(Mt.length),this.renderer=Xr,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",Mt.length?Mt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(rn);var nn,an=Mt.length||0,on;for(nn=0;nn<an;nn+=1)on=PropertyFactory.getProp(st,Mt[nn].v,0,0,this),this.k=on.k||this.k,this.dataProps[nn]={n:Mt[nn].n,p:on};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(st){if(!(this.elem.globalData.frameId===this.frameId&&!st)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||st,this._mdf)){var Mt=0,Xr=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),Mt=0;Mt<Xr;Mt+=1)this.dataProps[Mt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[Mt].p.v:this.dashArray[Mt]=this.dataProps[Mt].p.v:this.dashoffset[0]=this.dataProps[Mt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(st,Mt,Xr){this.initDynamicPropertyContainer(st),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(st,Mt.o,0,.01,this),this.w=PropertyFactory.getProp(st,Mt.w,0,null,this),this.d=new DashProperty(st,Mt.d||{},"svg",this),this.c=PropertyFactory.getProp(st,Mt.c,1,255,this),this.style=Xr,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(st,Mt,Xr){this.initDynamicPropertyContainer(st),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(st,Mt.o,0,.01,this),this.c=PropertyFactory.getProp(st,Mt.c,1,255,this),this.style=Xr}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(st,Mt,Xr){this.initDynamicPropertyContainer(st),this.getValue=this.iterateDynamicProperties,this.style=Xr}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(st,Mt,Xr){this.data=Mt,this.c=createTypedArray("uint8c",Mt.p*4);var rn=Mt.k.k[0].s?Mt.k.k[0].s.length-Mt.p*4:Mt.k.k.length-Mt.p*4;this.o=createTypedArray("float32",rn),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=rn,this.initDynamicPropertyContainer(Xr),this.prop=PropertyFactory.getProp(st,Mt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(st,Mt){for(var Xr=0,rn=this.o.length/2,nn;Xr<rn;){if(nn=Math.abs(st[Xr*4]-st[Mt*4+Xr*2]),nn>.01)return!1;Xr+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var st=0,Mt=this.data.k.k.length;st<Mt;){if(!this.comparePoints(this.data.k.k[st].s,this.data.p))return!1;st+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(st){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||st){var Mt,Xr=this.data.p*4,rn,nn;for(Mt=0;Mt<Xr;Mt+=1)rn=Mt%4===0?100:255,nn=Math.round(this.prop.v[Mt]*rn),this.c[Mt]!==nn&&(this.c[Mt]=nn,this._cmdf=!st);if(this.o.length)for(Xr=this.prop.v.length,Mt=this.data.p*4;Mt<Xr;Mt+=1)rn=Mt%2===0?100:1,nn=Mt%2===0?Math.round(this.prop.v[Mt]*100):this.prop.v[Mt],this.o[Mt-this.data.p*4]!==nn&&(this.o[Mt-this.data.p*4]=nn,this._omdf=!st);this._mdf=!st}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(st,Mt,Xr){this.initDynamicPropertyContainer(st),this.getValue=this.iterateDynamicProperties,this.initGradientData(st,Mt,Xr)}SVGGradientFillStyleData.prototype.initGradientData=function(st,Mt,Xr){this.o=PropertyFactory.getProp(st,Mt.o,0,.01,this),this.s=PropertyFactory.getProp(st,Mt.s,1,null,this),this.e=PropertyFactory.getProp(st,Mt.e,1,null,this),this.h=PropertyFactory.getProp(st,Mt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(st,Mt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(st,Mt.g,this),this.style=Xr,this.stops=[],this.setGradientData(Xr.pElem,Mt),this.setGradientOpacity(Mt,Xr),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(st,Mt){var Xr=createElementID(),rn=createNS(Mt.t===1?"linearGradient":"radialGradient");rn.setAttribute("id",Xr),rn.setAttribute("spreadMethod","pad"),rn.setAttribute("gradientUnits","userSpaceOnUse");var nn=[],an,on,sn;for(sn=Mt.g.p*4,on=0;on<sn;on+=4)an=createNS("stop"),rn.appendChild(an),nn.push(an);st.setAttribute(Mt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Xr+")"),this.gf=rn,this.cst=nn},SVGGradientFillStyleData.prototype.setGradientOpacity=function(st,Mt){if(this.g._hasOpacity&&!this.g._collapsable){var Xr,rn,nn,an=createNS("mask"),on=createNS("path");an.appendChild(on);var sn=createElementID(),ln=createElementID();an.setAttribute("id",ln);var un=createNS(st.t===1?"linearGradient":"radialGradient");un.setAttribute("id",sn),un.setAttribute("spreadMethod","pad"),un.setAttribute("gradientUnits","userSpaceOnUse"),nn=st.g.k.k[0].s?st.g.k.k[0].s.length:st.g.k.k.length;var cn=this.stops;for(rn=st.g.p*4;rn<nn;rn+=2)Xr=createNS("stop"),Xr.setAttribute("stop-color","rgb(255,255,255)"),un.appendChild(Xr),cn.push(Xr);on.setAttribute(st.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+sn+")"),st.ty==="gs"&&(on.setAttribute("stroke-linecap",lineCapEnum[st.lc||2]),on.setAttribute("stroke-linejoin",lineJoinEnum[st.lj||2]),st.lj===1&&on.setAttribute("stroke-miterlimit",st.ml)),this.of=un,this.ms=an,this.ost=cn,this.maskId=ln,Mt.msElem=on}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(st,Mt,Xr){this.initDynamicPropertyContainer(st),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(st,Mt.w,0,null,this),this.d=new DashProperty(st,Mt.d||{},"svg",this),this.initGradientData(st,Mt,Xr),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(st,Mt,Xr){this.transform={mProps:st,op:Mt,container:Xr},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(Mt,Xr,rn,nn){if(Xr===0)return"";var an=Mt.o,on=Mt.i,sn=Mt.v,ln,un=" M"+nn.applyToPointStringified(sn[0][0],sn[0][1]);for(ln=1;ln<Xr;ln+=1)un+=" C"+nn.applyToPointStringified(an[ln-1][0],an[ln-1][1])+" "+nn.applyToPointStringified(on[ln][0],on[ln][1])+" "+nn.applyToPointStringified(sn[ln][0],sn[ln][1]);return rn&&Xr&&(un+=" C"+nn.applyToPointStringified(an[ln-1][0],an[ln-1][1])+" "+nn.applyToPointStringified(on[0][0],on[0][1])+" "+nn.applyToPointStringified(sn[0][0],sn[0][1]),un+="z"),un},SVGElementsRenderer=function(){var st=new Matrix,Mt=new Matrix,Xr={createRenderFunction:rn};function rn(hn){switch(hn.ty){case"fl":return sn;case"gf":return un;case"gs":return ln;case"st":return cn;case"sh":case"el":case"rc":case"sr":return on;case"tr":return nn;case"no":return an;default:return null}}function nn(hn,fn,to){(to||fn.transform.op._mdf)&&fn.transform.container.setAttribute("opacity",fn.transform.op.v),(to||fn.transform.mProps._mdf)&&fn.transform.container.setAttribute("transform",fn.transform.mProps.v.to2dCSS())}function an(){}function on(hn,fn,to){var uo,co,Uo,lo,ho,fo,mo=fn.styles.length,_d=fn.lvl,ep,rp,ap,sp;for(fo=0;fo<mo;fo+=1){if(lo=fn.sh._mdf||to,fn.styles[fo].lvl<_d){for(rp=Mt.reset(),ap=_d-fn.styles[fo].lvl,sp=fn.transformers.length-1;!lo&&ap>0;)lo=fn.transformers[sp].mProps._mdf||lo,ap-=1,sp-=1;if(lo)for(ap=_d-fn.styles[fo].lvl,sp=fn.transformers.length-1;ap>0;)rp.multiply(fn.transformers[sp].mProps.v),ap-=1,sp-=1}else rp=st;if(ep=fn.sh.paths,co=ep._length,lo){for(Uo="",uo=0;uo<co;uo+=1)ho=ep.shapes[uo],ho&&ho._length&&(Uo+=buildShapeString(ho,ho._length,ho.c,rp));fn.caches[fo]=Uo}else Uo=fn.caches[fo];fn.styles[fo].d+=hn.hd===!0?"":Uo,fn.styles[fo]._mdf=lo||fn.styles[fo]._mdf}}function sn(hn,fn,to){var uo=fn.style;(fn.c._mdf||to)&&uo.pElem.setAttribute("fill","rgb("+bmFloor(fn.c.v[0])+","+bmFloor(fn.c.v[1])+","+bmFloor(fn.c.v[2])+")"),(fn.o._mdf||to)&&uo.pElem.setAttribute("fill-opacity",fn.o.v)}function ln(hn,fn,to){un(hn,fn,to),cn(hn,fn,to)}function un(hn,fn,to){var uo=fn.gf,co=fn.g._hasOpacity,Uo=fn.s.v,lo=fn.e.v;if(fn.o._mdf||to){var ho=hn.ty==="gf"?"fill-opacity":"stroke-opacity";fn.style.pElem.setAttribute(ho,fn.o.v)}if(fn.s._mdf||to){var fo=hn.t===1?"x1":"cx",mo=fo==="x1"?"y1":"cy";uo.setAttribute(fo,Uo[0]),uo.setAttribute(mo,Uo[1]),co&&!fn.g._collapsable&&(fn.of.setAttribute(fo,Uo[0]),fn.of.setAttribute(mo,Uo[1]))}var _d,ep,rp,ap;if(fn.g._cmdf||to){_d=fn.cst;var sp=fn.g.c;for(rp=_d.length,ep=0;ep<rp;ep+=1)ap=_d[ep],ap.setAttribute("offset",sp[ep*4]+"%"),ap.setAttribute("stop-color","rgb("+sp[ep*4+1]+","+sp[ep*4+2]+","+sp[ep*4+3]+")")}if(co&&(fn.g._omdf||to)){var up=fn.g.o;for(fn.g._collapsable?_d=fn.cst:_d=fn.ost,rp=_d.length,ep=0;ep<rp;ep+=1)ap=_d[ep],fn.g._collapsable||ap.setAttribute("offset",up[ep*2]+"%"),ap.setAttribute("stop-opacity",up[ep*2+1])}if(hn.t===1)(fn.e._mdf||to)&&(uo.setAttribute("x2",lo[0]),uo.setAttribute("y2",lo[1]),co&&!fn.g._collapsable&&(fn.of.setAttribute("x2",lo[0]),fn.of.setAttribute("y2",lo[1])));else{var pp;if((fn.s._mdf||fn.e._mdf||to)&&(pp=Math.sqrt(Math.pow(Uo[0]-lo[0],2)+Math.pow(Uo[1]-lo[1],2)),uo.setAttribute("r",pp),co&&!fn.g._collapsable&&fn.of.setAttribute("r",pp)),fn.e._mdf||fn.h._mdf||fn.a._mdf||to){pp||(pp=Math.sqrt(Math.pow(Uo[0]-lo[0],2)+Math.pow(Uo[1]-lo[1],2)));var hp=Math.atan2(lo[1]-Uo[1],lo[0]-Uo[0]),vp=fn.h.v;vp>=1?vp=.99:vp<=-1&&(vp=-.99);var gp=pp*vp,mp=Math.cos(hp+fn.a.v)*gp+Uo[0],lp=Math.sin(hp+fn.a.v)*gp+Uo[1];uo.setAttribute("fx",mp),uo.setAttribute("fy",lp),co&&!fn.g._collapsable&&(fn.of.setAttribute("fx",mp),fn.of.setAttribute("fy",lp))}}}function cn(hn,fn,to){var uo=fn.style,co=fn.d;co&&(co._mdf||to)&&co.dashStr&&(uo.pElem.setAttribute("stroke-dasharray",co.dashStr),uo.pElem.setAttribute("stroke-dashoffset",co.dashoffset[0])),fn.c&&(fn.c._mdf||to)&&uo.pElem.setAttribute("stroke","rgb("+bmFloor(fn.c.v[0])+","+bmFloor(fn.c.v[1])+","+bmFloor(fn.c.v[2])+")"),(fn.o._mdf||to)&&uo.pElem.setAttribute("stroke-opacity",fn.o.v),(fn.w._mdf||to)&&(uo.pElem.setAttribute("stroke-width",fn.w.v),uo.msElem&&uo.msElem.setAttribute("stroke-width",fn.w.v))}return Xr}();function SVGShapeElement(st,Mt,Xr){this.shapes=[],this.shapesData=st.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(st,Mt,Xr),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var st,Mt=this.shapes.length,Xr,rn,nn=this.stylesList.length,an,on=[],sn=!1;for(rn=0;rn<nn;rn+=1){for(an=this.stylesList[rn],sn=!1,on.length=0,st=0;st<Mt;st+=1)Xr=this.shapes[st],Xr.styles.indexOf(an)!==-1&&(on.push(Xr),sn=Xr._isAnimated||sn);on.length>1&&sn&&this.setShapesAsAnimated(on)}},SVGShapeElement.prototype.setShapesAsAnimated=function(st){var Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)st[Mt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(st,Mt){var Xr,rn=new SVGStyleData(st,Mt),nn=rn.pElem;if(st.ty==="st")Xr=new SVGStrokeStyleData(this,st,rn);else if(st.ty==="fl")Xr=new SVGFillStyleData(this,st,rn);else if(st.ty==="gf"||st.ty==="gs"){var an=st.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;Xr=new an(this,st,rn),this.globalData.defs.appendChild(Xr.gf),Xr.maskId&&(this.globalData.defs.appendChild(Xr.ms),this.globalData.defs.appendChild(Xr.of),nn.setAttribute("mask","url("+getLocationHref()+"#"+Xr.maskId+")"))}else st.ty==="no"&&(Xr=new SVGNoStyleData(this,st,rn));return(st.ty==="st"||st.ty==="gs")&&(nn.setAttribute("stroke-linecap",lineCapEnum[st.lc||2]),nn.setAttribute("stroke-linejoin",lineJoinEnum[st.lj||2]),nn.setAttribute("fill-opacity","0"),st.lj===1&&nn.setAttribute("stroke-miterlimit",st.ml)),st.r===2&&nn.setAttribute("fill-rule","evenodd"),st.ln&&nn.setAttribute("id",st.ln),st.cl&&nn.setAttribute("class",st.cl),st.bm&&(nn.style["mix-blend-mode"]=getBlendMode(st.bm)),this.stylesList.push(rn),this.addToAnimatedContents(st,Xr),Xr},SVGShapeElement.prototype.createGroupElement=function(st){var Mt=new ShapeGroupData;return st.ln&&Mt.gr.setAttribute("id",st.ln),st.cl&&Mt.gr.setAttribute("class",st.cl),st.bm&&(Mt.gr.style["mix-blend-mode"]=getBlendMode(st.bm)),Mt},SVGShapeElement.prototype.createTransformElement=function(st,Mt){var Xr=TransformPropertyFactory.getTransformProperty(this,st,this),rn=new SVGTransformData(Xr,Xr.o,Mt);return this.addToAnimatedContents(st,rn),rn},SVGShapeElement.prototype.createShapeElement=function(st,Mt,Xr){var rn=4;st.ty==="rc"?rn=5:st.ty==="el"?rn=6:st.ty==="sr"&&(rn=7);var nn=ShapePropertyFactory.getShapeProp(this,st,rn,this),an=new SVGShapeData(Mt,Xr,nn);return this.shapes.push(an),this.addShapeToModifiers(an),this.addToAnimatedContents(st,an),an},SVGShapeElement.prototype.addToAnimatedContents=function(st,Mt){for(var Xr=0,rn=this.animatedContents.length;Xr<rn;){if(this.animatedContents[Xr].element===Mt)return;Xr+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(st),element:Mt,data:st})},SVGShapeElement.prototype.setElementStyles=function(st){var Mt=st.styles,Xr,rn=this.stylesList.length;for(Xr=0;Xr<rn;Xr+=1)this.stylesList[Xr].closed||Mt.push(this.stylesList[Xr])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var st,Mt=this.itemsData.length;for(st=0;st<Mt;st+=1)this.prevViewData[st]=this.itemsData[st];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),Mt=this.dynamicProperties.length,st=0;st<Mt;st+=1)this.dynamicProperties[st].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(st,Mt,Xr,rn,nn,an,on){var sn=[].concat(an),ln,un=st.length-1,cn,hn,fn=[],to=[],uo,co,Uo;for(ln=un;ln>=0;ln-=1){if(Uo=this.searchProcessedElement(st[ln]),Uo?Mt[ln]=Xr[Uo-1]:st[ln]._render=on,st[ln].ty==="fl"||st[ln].ty==="st"||st[ln].ty==="gf"||st[ln].ty==="gs"||st[ln].ty==="no")Uo?Mt[ln].style.closed=!1:Mt[ln]=this.createStyleElement(st[ln],nn),st[ln]._render&&Mt[ln].style.pElem.parentNode!==rn&&rn.appendChild(Mt[ln].style.pElem),fn.push(Mt[ln].style);else if(st[ln].ty==="gr"){if(!Uo)Mt[ln]=this.createGroupElement(st[ln]);else for(hn=Mt[ln].it.length,cn=0;cn<hn;cn+=1)Mt[ln].prevViewData[cn]=Mt[ln].it[cn];this.searchShapes(st[ln].it,Mt[ln].it,Mt[ln].prevViewData,Mt[ln].gr,nn+1,sn,on),st[ln]._render&&Mt[ln].gr.parentNode!==rn&&rn.appendChild(Mt[ln].gr)}else st[ln].ty==="tr"?(Uo||(Mt[ln]=this.createTransformElement(st[ln],rn)),uo=Mt[ln].transform,sn.push(uo)):st[ln].ty==="sh"||st[ln].ty==="rc"||st[ln].ty==="el"||st[ln].ty==="sr"?(Uo||(Mt[ln]=this.createShapeElement(st[ln],sn,nn)),this.setElementStyles(Mt[ln])):st[ln].ty==="tm"||st[ln].ty==="rd"||st[ln].ty==="ms"||st[ln].ty==="pb"||st[ln].ty==="zz"||st[ln].ty==="op"?(Uo?(co=Mt[ln],co.closed=!1):(co=ShapeModifiers.getModifier(st[ln].ty),co.init(this,st[ln]),Mt[ln]=co,this.shapeModifiers.push(co)),to.push(co)):st[ln].ty==="rp"&&(Uo?(co=Mt[ln],co.closed=!0):(co=ShapeModifiers.getModifier(st[ln].ty),Mt[ln]=co,co.init(this,st,ln,Mt),this.shapeModifiers.push(co),on=!1),to.push(co));this.addProcessedElement(st[ln],ln+1)}for(un=fn.length,ln=0;ln<un;ln+=1)fn[ln].closed=!0;for(un=to.length,ln=0;ln<un;ln+=1)to[ln].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var st,Mt=this.stylesList.length;for(st=0;st<Mt;st+=1)this.stylesList[st].reset();for(this.renderShape(),st=0;st<Mt;st+=1)(this.stylesList[st]._mdf||this._isFirstFrame)&&(this.stylesList[st].msElem&&(this.stylesList[st].msElem.setAttribute("d",this.stylesList[st].d),this.stylesList[st].d="M0 0"+this.stylesList[st].d),this.stylesList[st].pElem.setAttribute("d",this.stylesList[st].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var st,Mt=this.animatedContents.length,Xr;for(st=0;st<Mt;st+=1)Xr=this.animatedContents[st],(this._isFirstFrame||Xr.element._isAnimated)&&Xr.data!==!0&&Xr.fn(Xr.data,Xr.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(st,Mt,Xr,rn,nn,an){this.o=st,this.sw=Mt,this.sc=Xr,this.fc=rn,this.m=nn,this.p=an,this._mdf={o:!0,sw:!!Mt,sc:!!Xr,fc:!!rn,m:!0,p:!0}}LetterProps.prototype.update=function(st,Mt,Xr,rn,nn,an){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var on=!1;return this.o!==st&&(this.o=st,this._mdf.o=!0,on=!0),this.sw!==Mt&&(this.sw=Mt,this._mdf.sw=!0,on=!0),this.sc!==Xr&&(this.sc=Xr,this._mdf.sc=!0,on=!0),this.fc!==rn&&(this.fc=rn,this._mdf.fc=!0,on=!0),this.m!==nn&&(this.m=nn,this._mdf.m=!0,on=!0),an.length&&(this.p[0]!==an[0]||this.p[1]!==an[1]||this.p[4]!==an[4]||this.p[5]!==an[5]||this.p[12]!==an[12]||this.p[13]!==an[13])&&(this.p=an,this._mdf.p=!0,on=!0),on};function TextProperty(st,Mt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,Mt.d&&Mt.d.sid&&(Mt.d=st.globalData.slotManager.getProp(Mt.d)),this.data=Mt,this.elem=st,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(st,Mt){for(var Xr in Mt)Object.prototype.hasOwnProperty.call(Mt,Xr)&&(st[Xr]=Mt[Xr]);return st},TextProperty.prototype.setCurrentData=function(st){st.__complete||this.completeTextData(st),this.currentData=st,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(st){this.effectsSequence.push(st),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(st){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!st)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var Mt=this.currentData,Xr=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var rn,nn=this.effectsSequence.length,an=st||this.data.d.k[this.keysIndex].s;for(rn=0;rn<nn;rn+=1)Xr!==this.keysIndex?an=this.effectsSequence[rn](an,an.t):an=this.effectsSequence[rn](this.currentData,an.t);Mt!==an&&this.setCurrentData(an),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var st=this.data.d.k,Mt=this.elem.comp.renderedFrame,Xr=0,rn=st.length;Xr<=rn-1&&!(Xr===rn-1||st[Xr+1].t>Mt);)Xr+=1;return this.keysIndex!==Xr&&(this.keysIndex=Xr),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(st){for(var Mt=[],Xr=0,rn=st.length,nn,an,on=!1,sn=!1,ln="";Xr<rn;)on=sn,sn=!1,nn=st.charCodeAt(Xr),ln=st.charAt(Xr),FontManager.isCombinedCharacter(nn)?on=!0:nn>=55296&&nn<=56319?FontManager.isRegionalFlag(st,Xr)?ln=st.substr(Xr,14):(an=st.charCodeAt(Xr+1),an>=56320&&an<=57343&&(FontManager.isModifier(nn,an)?(ln=st.substr(Xr,2),on=!0):FontManager.isFlagEmoji(st.substr(Xr,4))?ln=st.substr(Xr,4):ln=st.substr(Xr,2))):nn>56319?(an=st.charCodeAt(Xr+1),FontManager.isVariationSelector(nn)&&(on=!0)):FontManager.isZeroWidthJoiner(nn)&&(on=!0,sn=!0),on?(Mt[Mt.length-1]+=ln,on=!1):Mt.push(ln),Xr+=ln.length;return Mt},TextProperty.prototype.completeTextData=function(st){st.__complete=!0;var Mt=this.elem.globalData.fontManager,Xr=this.data,rn=[],nn,an,on,sn=0,ln,un=Xr.m.g,cn=0,hn=0,fn=0,to=[],uo=0,co=0,Uo,lo,ho=Mt.getFontByName(st.f),fo,mo=0,_d=getFontProperties(ho);st.fWeight=_d.weight,st.fStyle=_d.style,st.finalSize=st.s,st.finalText=this.buildFinalText(st.t),an=st.finalText.length,st.finalLineHeight=st.lh;var ep=st.tr/1e3*st.finalSize,rp;if(st.sz)for(var ap=!0,sp=st.sz[0],up=st.sz[1],pp,hp;ap;){hp=this.buildFinalText(st.t),pp=0,uo=0,an=hp.length,ep=st.tr/1e3*st.finalSize;var vp=-1;for(nn=0;nn<an;nn+=1)rp=hp[nn].charCodeAt(0),on=!1,hp[nn]===" "?vp=nn:(rp===13||rp===3)&&(uo=0,on=!0,pp+=st.finalLineHeight||st.finalSize*1.2),Mt.chars?(fo=Mt.getCharData(hp[nn],ho.fStyle,ho.fFamily),mo=on?0:fo.w*st.finalSize/100):mo=Mt.measureText(hp[nn],st.f,st.finalSize),uo+mo>sp&&hp[nn]!==" "?(vp===-1?an+=1:nn=vp,pp+=st.finalLineHeight||st.finalSize*1.2,hp.splice(nn,vp===nn?1:0,"\r"),vp=-1,uo=0):(uo+=mo,uo+=ep);pp+=ho.ascent*st.finalSize/100,this.canResize&&st.finalSize>this.minimumFontSize&&up<pp?(st.finalSize-=1,st.finalLineHeight=st.finalSize*st.lh/st.s):(st.finalText=hp,an=st.finalText.length,ap=!1)}uo=-ep,mo=0;var gp=0,mp;for(nn=0;nn<an;nn+=1)if(on=!1,mp=st.finalText[nn],rp=mp.charCodeAt(0),rp===13||rp===3?(gp=0,to.push(uo),co=uo>co?uo:co,uo=-2*ep,ln="",on=!0,fn+=1):ln=mp,Mt.chars?(fo=Mt.getCharData(mp,ho.fStyle,Mt.getFontByName(st.f).fFamily),mo=on?0:fo.w*st.finalSize/100):mo=Mt.measureText(ln,st.f,st.finalSize),mp===" "?gp+=mo+ep:(uo+=mo+ep+gp,gp=0),rn.push({l:mo,an:mo,add:cn,n:on,anIndexes:[],val:ln,line:fn,animatorJustifyOffset:0}),un==2){if(cn+=mo,ln===""||ln===" "||nn===an-1){for((ln===""||ln===" ")&&(cn-=mo);hn<=nn;)rn[hn].an=cn,rn[hn].ind=sn,rn[hn].extra=mo,hn+=1;sn+=1,cn=0}}else if(un==3){if(cn+=mo,ln===""||nn===an-1){for(ln===""&&(cn-=mo);hn<=nn;)rn[hn].an=cn,rn[hn].ind=sn,rn[hn].extra=mo,hn+=1;cn=0,sn+=1}}else rn[sn].ind=sn,rn[sn].extra=0,sn+=1;if(st.l=rn,co=uo>co?uo:co,to.push(uo),st.sz)st.boxWidth=st.sz[0],st.justifyOffset=0;else switch(st.boxWidth=co,st.j){case 1:st.justifyOffset=-st.boxWidth;break;case 2:st.justifyOffset=-st.boxWidth/2;break;default:st.justifyOffset=0}st.lineWidths=to;var lp=Xr.a,cp,tp;lo=lp.length;var np,fp,dp=[];for(Uo=0;Uo<lo;Uo+=1){for(cp=lp[Uo],cp.a.sc&&(st.strokeColorAnim=!0),cp.a.sw&&(st.strokeWidthAnim=!0),(cp.a.fc||cp.a.fh||cp.a.fs||cp.a.fb)&&(st.fillColorAnim=!0),fp=0,np=cp.s.b,nn=0;nn<an;nn+=1)tp=rn[nn],tp.anIndexes[Uo]=fp,(np==1&&tp.val!==""||np==2&&tp.val!==""&&tp.val!==" "||np==3&&(tp.n||tp.val==" "||nn==an-1)||np==4&&(tp.n||nn==an-1))&&(cp.s.rn===1&&dp.push(fp),fp+=1);Xr.a[Uo].s.totalChars=fp;var yp=-1,bp;if(cp.s.rn===1)for(nn=0;nn<an;nn+=1)tp=rn[nn],yp!=tp.anIndexes[Uo]&&(yp=tp.anIndexes[Uo],bp=dp.splice(Math.floor(Math.random()*dp.length),1)[0]),tp.anIndexes[Uo]=bp}st.yOffset=st.finalLineHeight||st.finalSize*1.2,st.ls=st.ls||0,st.ascent=ho.ascent*st.finalSize/100},TextProperty.prototype.updateDocumentData=function(st,Mt){Mt=Mt===void 0?this.keysIndex:Mt;var Xr=this.copyData({},this.data.d.k[Mt].s);Xr=this.copyData(Xr,st),this.data.d.k[Mt].s=Xr,this.recalculate(Mt),this.setCurrentData(Xr),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(st){var Mt=this.data.d.k[st].s;Mt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(Mt)},TextProperty.prototype.canResizeFont=function(st){this.canResize=st,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(st){this.minimumFontSize=Math.floor(st)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var st=Math.max,Mt=Math.min,Xr=Math.floor;function rn(an,on){this._currentTextLength=-1,this.k=!1,this.data=on,this.elem=an,this.comp=an.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(an),this.s=PropertyFactory.getProp(an,on.s||{k:0},0,0,this),"e"in on?this.e=PropertyFactory.getProp(an,on.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(an,on.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(an,on.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(an,on.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(an,on.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(an,on.a,0,.01,this),this.dynamicProperties.length||this.getValue()}rn.prototype={getMult:function(on){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var sn=0,ln=0,un=1,cn=1;this.ne.v>0?sn=this.ne.v/100:ln=-this.ne.v/100,this.xe.v>0?un=1-this.xe.v/100:cn=1+this.xe.v/100;var hn=BezierFactory.getBezierEasing(sn,ln,un,cn).get,fn=0,to=this.finalS,uo=this.finalE,co=this.data.sh;if(co===2)uo===to?fn=on>=uo?1:0:fn=st(0,Mt(.5/(uo-to)+(on-to)/(uo-to),1)),fn=hn(fn);else if(co===3)uo===to?fn=on>=uo?0:1:fn=1-st(0,Mt(.5/(uo-to)+(on-to)/(uo-to),1)),fn=hn(fn);else if(co===4)uo===to?fn=0:(fn=st(0,Mt(.5/(uo-to)+(on-to)/(uo-to),1)),fn<.5?fn*=2:fn=1-2*(fn-.5)),fn=hn(fn);else if(co===5){if(uo===to)fn=0;else{var Uo=uo-to;on=Mt(st(0,on+.5-to),uo-to);var lo=-Uo/2+on,ho=Uo/2;fn=Math.sqrt(1-lo*lo/(ho*ho))}fn=hn(fn)}else co===6?(uo===to?fn=0:(on=Mt(st(0,on+.5-to),uo-to),fn=(1+Math.cos(Math.PI+Math.PI*2*on/(uo-to)))/2),fn=hn(fn)):(on>=Xr(to)&&(on-to<0?fn=st(0,Mt(Mt(uo,1)-(to-on),1)):fn=st(0,Mt(uo-on,1))),fn=hn(fn));if(this.sm.v!==100){var fo=this.sm.v*.01;fo===0&&(fo=1e-8);var mo=.5-fo*.5;fn<mo?fn=0:(fn=(fn-mo)/fo,fn>1&&(fn=1))}return fn*this.a.v},getValue:function(on){this.iterateDynamicProperties(),this._mdf=on||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,on&&this.data.r===2&&(this.e.v=this._currentTextLength);var sn=this.data.r===2?1:100/this.data.totalChars,ln=this.o.v/sn,un=this.s.v/sn+ln,cn=this.e.v/sn+ln;if(un>cn){var hn=un;un=cn,cn=hn}this.finalS=un,this.finalE=cn}},extendPrototype([DynamicPropertyContainer],rn);function nn(an,on,sn){return new rn(an,on)}return{getTextSelectorProp:nn}}();function TextAnimatorDataProperty(st,Mt,Xr){var rn={propType:!1},nn=PropertyFactory.getProp,an=Mt.a;this.a={r:an.r?nn(st,an.r,0,degToRads,Xr):rn,rx:an.rx?nn(st,an.rx,0,degToRads,Xr):rn,ry:an.ry?nn(st,an.ry,0,degToRads,Xr):rn,sk:an.sk?nn(st,an.sk,0,degToRads,Xr):rn,sa:an.sa?nn(st,an.sa,0,degToRads,Xr):rn,s:an.s?nn(st,an.s,1,.01,Xr):rn,a:an.a?nn(st,an.a,1,0,Xr):rn,o:an.o?nn(st,an.o,0,.01,Xr):rn,p:an.p?nn(st,an.p,1,0,Xr):rn,sw:an.sw?nn(st,an.sw,0,0,Xr):rn,sc:an.sc?nn(st,an.sc,1,0,Xr):rn,fc:an.fc?nn(st,an.fc,1,0,Xr):rn,fh:an.fh?nn(st,an.fh,0,0,Xr):rn,fs:an.fs?nn(st,an.fs,0,.01,Xr):rn,fb:an.fb?nn(st,an.fb,0,.01,Xr):rn,t:an.t?nn(st,an.t,0,0,Xr):rn},this.s=TextSelectorProp.getTextSelectorProp(st,Mt.s,Xr),this.s.t=Mt.s.t}function TextAnimatorProperty(st,Mt,Xr){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=st,this._renderType=Mt,this._elem=Xr,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(Xr)}TextAnimatorProperty.prototype.searchProperties=function(){var st,Mt=this._textData.a.length,Xr,rn=PropertyFactory.getProp;for(st=0;st<Mt;st+=1)Xr=this._textData.a[st],this._animatorsData[st]=new TextAnimatorDataProperty(this._elem,Xr,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:rn(this._elem,this._textData.p.a,0,0,this),f:rn(this._elem,this._textData.p.f,0,0,this),l:rn(this._elem,this._textData.p.l,0,0,this),r:rn(this._elem,this._textData.p.r,0,0,this),p:rn(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=rn(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(st,Mt){if(this.lettersChangedFlag=Mt,!(!this._mdf&&!this._isFirstFrame&&!Mt&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var Xr=this._moreOptions.alignment.v,rn=this._animatorsData,nn=this._textData,an=this.mHelper,on=this._renderType,sn=this.renderedLetters.length,ln,un,cn,hn,fn=st.l,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap,sp,up,pp;if(this._hasMaskedPath){if(pp=this._pathData.m,!this._pathData.n||this._pathData._mdf){var hp=pp.v;this._pathData.r.v&&(hp=hp.reverse()),to={tLength:0,segments:[]},hn=hp._length-1;var vp;for(ap=0,cn=0;cn<hn;cn+=1)vp=bez.buildBezierData(hp.v[cn],hp.v[cn+1],[hp.o[cn][0]-hp.v[cn][0],hp.o[cn][1]-hp.v[cn][1]],[hp.i[cn+1][0]-hp.v[cn+1][0],hp.i[cn+1][1]-hp.v[cn+1][1]]),to.tLength+=vp.segmentLength,to.segments.push(vp),ap+=vp.segmentLength;cn=hn,pp.v.c&&(vp=bez.buildBezierData(hp.v[cn],hp.v[0],[hp.o[cn][0]-hp.v[cn][0],hp.o[cn][1]-hp.v[cn][1]],[hp.i[0][0]-hp.v[0][0],hp.i[0][1]-hp.v[0][1]]),to.tLength+=vp.segmentLength,to.segments.push(vp),ap+=vp.segmentLength),this._pathData.pi=to}if(to=this._pathData.pi,uo=this._pathData.f.v,fo=0,ho=1,Uo=0,lo=!0,ep=to.segments,uo<0&&pp.v.c)for(to.tLength<Math.abs(uo)&&(uo=-Math.abs(uo)%to.tLength),fo=ep.length-1,_d=ep[fo].points,ho=_d.length-1;uo<0;)uo+=_d[ho].partialLength,ho-=1,ho<0&&(fo-=1,_d=ep[fo].points,ho=_d.length-1);_d=ep[fo].points,mo=_d[ho-1],co=_d[ho],rp=co.partialLength}hn=fn.length,ln=0,un=0;var gp=st.finalSize*1.2*.714,mp=!0,lp,cp,tp,np,fp;np=rn.length;var dp,yp=-1,bp,_p,Cp,Sp=uo,Rp=fo,Dp=ho,Lp=-1,Bp,Tp,Mp,Ap,kp,jp,Vp,Wp,qp="",Up=this.defaultPropsArray,Qp;if(st.j===2||st.j===1){var Hp=0,Kp=0,Xp=st.j===2?-.5:-1,Zp=0,Jp=!0;for(cn=0;cn<hn;cn+=1)if(fn[cn].n){for(Hp&&(Hp+=Kp);Zp<cn;)fn[Zp].animatorJustifyOffset=Hp,Zp+=1;Hp=0,Jp=!0}else{for(tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.t.propType&&(Jp&&st.j===2&&(Kp+=lp.t.v*Xp),cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),dp.length?Hp+=lp.t.v*dp[0]*Xp:Hp+=lp.t.v*dp*Xp);Jp=!1}for(Hp&&(Hp+=Kp);Zp<cn;)fn[Zp].animatorJustifyOffset=Hp,Zp+=1}for(cn=0;cn<hn;cn+=1){if(an.reset(),Bp=1,fn[cn].n)ln=0,un+=st.yOffset,un+=mp?1:0,uo=Sp,mp=!1,this._hasMaskedPath&&(fo=Rp,ho=Dp,_d=ep[fo].points,mo=_d[ho-1],co=_d[ho],rp=co.partialLength,Uo=0),qp="",Wp="",jp="",Qp="",Up=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Lp!==fn[cn].line){switch(st.j){case 1:uo+=ap-st.lineWidths[fn[cn].line];break;case 2:uo+=(ap-st.lineWidths[fn[cn].line])/2;break}Lp=fn[cn].line}yp!==fn[cn].ind&&(fn[yp]&&(uo+=fn[yp].extra),uo+=fn[cn].an/2,yp=fn[cn].ind),uo+=Xr[0]*fn[cn].an*.005;var n0=0;for(tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.p.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),dp.length?n0+=lp.p.v[0]*dp[0]:n0+=lp.p.v[0]*dp),lp.a.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),dp.length?n0+=lp.a.v[0]*dp[0]:n0+=lp.a.v[0]*dp);for(lo=!0,this._pathData.a.v&&(uo=fn[0].an*.5+(ap-this._pathData.f.v-fn[0].an*.5-fn[fn.length-1].an*.5)*yp/(hn-1),uo+=this._pathData.f.v);lo;)Uo+rp>=uo+n0||!_d?(sp=(uo+n0-Uo)/co.partialLength,_p=mo.point[0]+(co.point[0]-mo.point[0])*sp,Cp=mo.point[1]+(co.point[1]-mo.point[1])*sp,an.translate(-Xr[0]*fn[cn].an*.005,-(Xr[1]*gp)*.01),lo=!1):_d&&(Uo+=co.partialLength,ho+=1,ho>=_d.length&&(ho=0,fo+=1,ep[fo]?_d=ep[fo].points:pp.v.c?(ho=0,fo=0,_d=ep[fo].points):(Uo-=co.partialLength,_d=null)),_d&&(mo=co,co=_d[ho],rp=co.partialLength));bp=fn[cn].an/2-fn[cn].add,an.translate(-bp,0,0)}else bp=fn[cn].an/2-fn[cn].add,an.translate(-bp,0,0),an.translate(-Xr[0]*fn[cn].an*.005,-Xr[1]*gp*.01,0);for(tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.t.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),(ln!==0||st.j!==0)&&(this._hasMaskedPath?dp.length?uo+=lp.t.v*dp[0]:uo+=lp.t.v*dp:dp.length?ln+=lp.t.v*dp[0]:ln+=lp.t.v*dp));for(st.strokeWidthAnim&&(Mp=st.sw||0),st.strokeColorAnim&&(st.sc?Tp=[st.sc[0],st.sc[1],st.sc[2]]:Tp=[0,0,0]),st.fillColorAnim&&st.fc&&(Ap=[st.fc[0],st.fc[1],st.fc[2]]),tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.a.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),dp.length?an.translate(-lp.a.v[0]*dp[0],-lp.a.v[1]*dp[1],lp.a.v[2]*dp[2]):an.translate(-lp.a.v[0]*dp,-lp.a.v[1]*dp,lp.a.v[2]*dp));for(tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.s.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),dp.length?an.scale(1+(lp.s.v[0]-1)*dp[0],1+(lp.s.v[1]-1)*dp[1],1):an.scale(1+(lp.s.v[0]-1)*dp,1+(lp.s.v[1]-1)*dp,1));for(tp=0;tp<np;tp+=1){if(lp=rn[tp].a,cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),lp.sk.propType&&(dp.length?an.skewFromAxis(-lp.sk.v*dp[0],lp.sa.v*dp[1]):an.skewFromAxis(-lp.sk.v*dp,lp.sa.v*dp)),lp.r.propType&&(dp.length?an.rotateZ(-lp.r.v*dp[2]):an.rotateZ(-lp.r.v*dp)),lp.ry.propType&&(dp.length?an.rotateY(lp.ry.v*dp[1]):an.rotateY(lp.ry.v*dp)),lp.rx.propType&&(dp.length?an.rotateX(lp.rx.v*dp[0]):an.rotateX(lp.rx.v*dp)),lp.o.propType&&(dp.length?Bp+=(lp.o.v*dp[0]-Bp)*dp[0]:Bp+=(lp.o.v*dp-Bp)*dp),st.strokeWidthAnim&&lp.sw.propType&&(dp.length?Mp+=lp.sw.v*dp[0]:Mp+=lp.sw.v*dp),st.strokeColorAnim&&lp.sc.propType)for(kp=0;kp<3;kp+=1)dp.length?Tp[kp]+=(lp.sc.v[kp]-Tp[kp])*dp[0]:Tp[kp]+=(lp.sc.v[kp]-Tp[kp])*dp;if(st.fillColorAnim&&st.fc){if(lp.fc.propType)for(kp=0;kp<3;kp+=1)dp.length?Ap[kp]+=(lp.fc.v[kp]-Ap[kp])*dp[0]:Ap[kp]+=(lp.fc.v[kp]-Ap[kp])*dp;lp.fh.propType&&(dp.length?Ap=addHueToRGB(Ap,lp.fh.v*dp[0]):Ap=addHueToRGB(Ap,lp.fh.v*dp)),lp.fs.propType&&(dp.length?Ap=addSaturationToRGB(Ap,lp.fs.v*dp[0]):Ap=addSaturationToRGB(Ap,lp.fs.v*dp)),lp.fb.propType&&(dp.length?Ap=addBrightnessToRGB(Ap,lp.fb.v*dp[0]):Ap=addBrightnessToRGB(Ap,lp.fb.v*dp))}}for(tp=0;tp<np;tp+=1)lp=rn[tp].a,lp.p.propType&&(cp=rn[tp].s,dp=cp.getMult(fn[cn].anIndexes[tp],nn.a[tp].s.totalChars),this._hasMaskedPath?dp.length?an.translate(0,lp.p.v[1]*dp[0],-lp.p.v[2]*dp[1]):an.translate(0,lp.p.v[1]*dp,-lp.p.v[2]*dp):dp.length?an.translate(lp.p.v[0]*dp[0],lp.p.v[1]*dp[1],-lp.p.v[2]*dp[2]):an.translate(lp.p.v[0]*dp,lp.p.v[1]*dp,-lp.p.v[2]*dp));if(st.strokeWidthAnim&&(jp=Mp<0?0:Mp),st.strokeColorAnim&&(Vp="rgb("+Math.round(Tp[0]*255)+","+Math.round(Tp[1]*255)+","+Math.round(Tp[2]*255)+")"),st.fillColorAnim&&st.fc&&(Wp="rgb("+Math.round(Ap[0]*255)+","+Math.round(Ap[1]*255)+","+Math.round(Ap[2]*255)+")"),this._hasMaskedPath){if(an.translate(0,-st.ls),an.translate(0,Xr[1]*gp*.01+un,0),this._pathData.p.v){up=(co.point[1]-mo.point[1])/(co.point[0]-mo.point[0]);var i0=Math.atan(up)*180/Math.PI;co.point[0]<mo.point[0]&&(i0+=180),an.rotate(-i0*Math.PI/180)}an.translate(_p,Cp,0),uo-=Xr[0]*fn[cn].an*.005,fn[cn+1]&&yp!==fn[cn+1].ind&&(uo+=fn[cn].an/2,uo+=st.tr*.001*st.finalSize)}else{switch(an.translate(ln,un,0),st.ps&&an.translate(st.ps[0],st.ps[1]+st.ascent,0),st.j){case 1:an.translate(fn[cn].animatorJustifyOffset+st.justifyOffset+(st.boxWidth-st.lineWidths[fn[cn].line]),0,0);break;case 2:an.translate(fn[cn].animatorJustifyOffset+st.justifyOffset+(st.boxWidth-st.lineWidths[fn[cn].line])/2,0,0);break}an.translate(0,-st.ls),an.translate(bp,0,0),an.translate(Xr[0]*fn[cn].an*.005,Xr[1]*gp*.01,0),ln+=fn[cn].l+st.tr*.001*st.finalSize}on==="html"?qp=an.toCSS():on==="svg"?qp=an.to2dCSS():Up=[an.props[0],an.props[1],an.props[2],an.props[3],an.props[4],an.props[5],an.props[6],an.props[7],an.props[8],an.props[9],an.props[10],an.props[11],an.props[12],an.props[13],an.props[14],an.props[15]],Qp=Bp}sn<=cn?(fp=new LetterProps(Qp,jp,Vp,Wp,qp,Up),this.renderedLetters.push(fp),sn+=1,this.lettersChangedFlag=!0):(fp=this.renderedLetters[cn],this.lettersChangedFlag=fp.update(Qp,jp,Vp,Wp,qp,Up)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(st,Mt,Xr){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(st,Mt,Xr),this.textProperty=new TextProperty(this,st.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(st.t,this.renderType,this),this.initTransform(st,Mt,Xr),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(st){this._mdf=!1,this.prepareRenderableFrame(st),this.prepareProperties(st,this.isInRange)},ITextElement.prototype.createPathShape=function(st,Mt){var Xr,rn=Mt.length,nn,an="";for(Xr=0;Xr<rn;Xr+=1)Mt[Xr].ty==="sh"&&(nn=Mt[Xr].ks.k,an+=buildShapeString(nn,nn.i.length,!0,st));return an},ITextElement.prototype.updateDocumentData=function(st,Mt){this.textProperty.updateDocumentData(st,Mt)},ITextElement.prototype.canResizeFont=function(st){this.textProperty.canResizeFont(st)},ITextElement.prototype.setMinimumFontSize=function(st){this.textProperty.setMinimumFontSize(st)},ITextElement.prototype.applyTextPropertiesToMatrix=function(st,Mt,Xr,rn,nn){switch(st.ps&&Mt.translate(st.ps[0],st.ps[1]+st.ascent,0),Mt.translate(0,-st.ls,0),st.j){case 1:Mt.translate(st.justifyOffset+(st.boxWidth-st.lineWidths[Xr]),0,0);break;case 2:Mt.translate(st.justifyOffset+(st.boxWidth-st.lineWidths[Xr])/2,0,0);break}Mt.translate(rn,nn,0)},ITextElement.prototype.buildColor=function(st){return"rgb("+Math.round(st[0]*255)+","+Math.round(st[1]*255)+","+Math.round(st[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(st,Mt,Xr){this.textSpans=[],this.renderType="svg",this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(st){for(var Mt=0,Xr=st.length,rn=[],nn="";Mt<Xr;)st[Mt]===String.fromCharCode(13)||st[Mt]===String.fromCharCode(3)?(rn.push(nn),nn=""):nn+=st[Mt],Mt+=1;return rn.push(nn),rn},SVGTextLottieElement.prototype.buildShapeData=function(st,Mt){if(st.shapes&&st.shapes.length){var Xr=st.shapes[0];if(Xr.it){var rn=Xr.it[Xr.it.length-1];rn.s&&(rn.s.k[0]=Mt,rn.s.k[1]=Mt)}}return st},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var st,Mt,Xr=this.textProperty.currentData;this.renderedLetters=createSizedArray(Xr?Xr.l.length:0),Xr.fc?this.layerElement.setAttribute("fill",this.buildColor(Xr.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),Xr.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(Xr.sc)),this.layerElement.setAttribute("stroke-width",Xr.sw)),this.layerElement.setAttribute("font-size",Xr.finalSize);var rn=this.globalData.fontManager.getFontByName(Xr.f);if(rn.fClass)this.layerElement.setAttribute("class",rn.fClass);else{this.layerElement.setAttribute("font-family",rn.fFamily);var nn=Xr.fWeight,an=Xr.fStyle;this.layerElement.setAttribute("font-style",an),this.layerElement.setAttribute("font-weight",nn)}this.layerElement.setAttribute("aria-label",Xr.t);var on=Xr.l||[],sn=!!this.globalData.fontManager.chars;Mt=on.length;var ln,un=this.mHelper,cn="",hn=this.data.singleShape,fn=0,to=0,uo=!0,co=Xr.tr*.001*Xr.finalSize;if(hn&&!sn&&!Xr.sz){var Uo=this.textContainer,lo="start";switch(Xr.j){case 1:lo="end";break;case 2:lo="middle";break;default:lo="start";break}Uo.setAttribute("text-anchor",lo),Uo.setAttribute("letter-spacing",co);var ho=this.buildTextContents(Xr.finalText);for(Mt=ho.length,to=Xr.ps?Xr.ps[1]+Xr.ascent:0,st=0;st<Mt;st+=1)ln=this.textSpans[st].span||createNS("tspan"),ln.textContent=ho[st],ln.setAttribute("x",0),ln.setAttribute("y",to),ln.style.display="inherit",Uo.appendChild(ln),this.textSpans[st]||(this.textSpans[st]={span:null,glyph:null}),this.textSpans[st].span=ln,to+=Xr.finalLineHeight;this.layerElement.appendChild(Uo)}else{var fo=this.textSpans.length,mo;for(st=0;st<Mt;st+=1){if(this.textSpans[st]||(this.textSpans[st]={span:null,childSpan:null,glyph:null}),!sn||!hn||st===0){if(ln=fo>st?this.textSpans[st].span:createNS(sn?"g":"text"),fo<=st){if(ln.setAttribute("stroke-linecap","butt"),ln.setAttribute("stroke-linejoin","round"),ln.setAttribute("stroke-miterlimit","4"),this.textSpans[st].span=ln,sn){var _d=createNS("g");ln.appendChild(_d),this.textSpans[st].childSpan=_d}this.textSpans[st].span=ln,this.layerElement.appendChild(ln)}ln.style.display="inherit"}if(un.reset(),hn&&(on[st].n&&(fn=-co,to+=Xr.yOffset,to+=uo?1:0,uo=!1),this.applyTextPropertiesToMatrix(Xr,un,on[st].line,fn,to),fn+=on[st].l||0,fn+=co),sn){mo=this.globalData.fontManager.getCharData(Xr.finalText[st],rn.fStyle,this.globalData.fontManager.getFontByName(Xr.f).fFamily);var ep;if(mo.t===1)ep=new SVGCompElement(mo.data,this.globalData,this);else{var rp=emptyShapeData;mo.data&&mo.data.shapes&&(rp=this.buildShapeData(mo.data,Xr.finalSize)),ep=new SVGShapeElement(rp,this.globalData,this)}if(this.textSpans[st].glyph){var ap=this.textSpans[st].glyph;this.textSpans[st].childSpan.removeChild(ap.layerElement),ap.destroy()}this.textSpans[st].glyph=ep,ep._debug=!0,ep.prepareFrame(0),ep.renderFrame(),this.textSpans[st].childSpan.appendChild(ep.layerElement),mo.t===1&&this.textSpans[st].childSpan.setAttribute("transform","scale("+Xr.finalSize/100+","+Xr.finalSize/100+")")}else hn&&ln.setAttribute("transform","translate("+un.props[12]+","+un.props[13]+")"),ln.textContent=on[st].val,ln.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}hn&&ln&&ln.setAttribute("d",cn)}for(;st<this.textSpans.length;)this.textSpans[st].span.style.display="none",st+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var st=this.layerElement.getBBox();this.bbox={top:st.y,left:st.x,width:st.width,height:st.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var st,Mt=this.textSpans.length,Xr;for(this.renderedFrame=this.comp.renderedFrame,st=0;st<Mt;st+=1)Xr=this.textSpans[st].glyph,Xr&&(Xr.prepareFrame(this.comp.renderedFrame-this.data.st),Xr._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var st,Mt,Xr=this.textAnimator.renderedLetters,rn=this.textProperty.currentData.l;Mt=rn.length;var nn,an,on;for(st=0;st<Mt;st+=1)rn[st].n||(nn=Xr[st],an=this.textSpans[st].span,on=this.textSpans[st].glyph,on&&on.renderFrame(),nn._mdf.m&&an.setAttribute("transform",nn.m),nn._mdf.o&&an.setAttribute("opacity",nn.o),nn._mdf.sw&&an.setAttribute("stroke-width",nn.sw),nn._mdf.sc&&an.setAttribute("stroke",nn.sc),nn._mdf.fc&&an.setAttribute("fill",nn.fc))}};function ISolidElement(st,Mt,Xr){this.initElement(st,Mt,Xr)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var st=createNS("rect");st.setAttribute("width",this.data.sw),st.setAttribute("height",this.data.sh),st.setAttribute("fill",this.data.sc),this.layerElement.appendChild(st)};function NullElement(st,Mt,Xr){this.initFrame(),this.initBaseData(st,Mt,Xr),this.initFrame(),this.initTransform(st,Mt,Xr),this.initHierarchy()}NullElement.prototype.prepareFrame=function(st){this.prepareProperties(st,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(st){return new NullElement(st,this.globalData,this)},SVGRendererBase.prototype.createShape=function(st){return new SVGShapeElement(st,this.globalData,this)},SVGRendererBase.prototype.createText=function(st){return new SVGTextLottieElement(st,this.globalData,this)},SVGRendererBase.prototype.createImage=function(st){return new IImageElement(st,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(st){return new ISolidElement(st,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(st){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+st.w+" "+st.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",st.w),this.svgElement.setAttribute("height",st.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var Mt=this.globalData.defs;this.setupGlobalData(st,Mt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=st;var Xr=createNS("clipPath"),rn=createNS("rect");rn.setAttribute("width",st.w),rn.setAttribute("height",st.h),rn.setAttribute("x",0),rn.setAttribute("y",0);var nn=createElementID();Xr.setAttribute("id",nn),Xr.appendChild(rn),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+nn+")"),Mt.appendChild(Xr),this.layers=st.layers,this.elements=createSizedArray(st.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var st,Mt=this.layers?this.layers.length:0;for(st=0;st<Mt;st+=1)this.elements[st]&&this.elements[st].destroy&&this.elements[st].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(st){var Mt=0,Xr=this.layers.length;for(Mt=0;Mt<Xr;Mt+=1)if(this.layers[Mt].ind===st)return Mt;return-1},SVGRendererBase.prototype.buildItem=function(st){var Mt=this.elements;if(!(Mt[st]||this.layers[st].ty===99)){Mt[st]=!0;var Xr=this.createItem(this.layers[st]);if(Mt[st]=Xr,getExpressionsPlugin()&&(this.layers[st].ty===0&&this.globalData.projectInterface.registerComposition(Xr),Xr.initExpressions()),this.appendElementInPos(Xr,st),this.layers[st].tt){var rn="tp"in this.layers[st]?this.findIndexByInd(this.layers[st].tp):st-1;if(rn===-1)return;if(!this.elements[rn]||this.elements[rn]===!0)this.buildItem(rn),this.addPendingElement(Xr);else{var nn=Mt[rn],an=nn.getMatte(this.layers[st].tt);Xr.setMatte(an)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var st=this.pendingElements.pop();if(st.checkParenting(),st.data.tt)for(var Mt=0,Xr=this.elements.length;Mt<Xr;){if(this.elements[Mt]===st){var rn="tp"in st.data?this.findIndexByInd(st.data.tp):Mt-1,nn=this.elements[rn],an=nn.getMatte(this.layers[Mt].tt);st.setMatte(an);break}Mt+=1}}},SVGRendererBase.prototype.renderFrame=function(st){if(!(this.renderedFrame===st||this.destroyed)){st===null?st=this.renderedFrame:this.renderedFrame=st,this.globalData.frameNum=st,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=st,this.globalData._mdf=!1;var Mt,Xr=this.layers.length;for(this.completeLayers||this.checkLayers(st),Mt=Xr-1;Mt>=0;Mt-=1)(this.completeLayers||this.elements[Mt])&&this.elements[Mt].prepareFrame(st-this.layers[Mt].st);if(this.globalData._mdf)for(Mt=0;Mt<Xr;Mt+=1)(this.completeLayers||this.elements[Mt])&&this.elements[Mt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(st,Mt){var Xr=st.getBaseElement();if(Xr){for(var rn=0,nn;rn<Mt;)this.elements[rn]&&this.elements[rn]!==!0&&this.elements[rn].getBaseElement()&&(nn=this.elements[rn].getBaseElement()),rn+=1;nn?this.layerElement.insertBefore(Xr,nn):this.layerElement.appendChild(Xr)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(st,Mt,Xr){this.initFrame(),this.initBaseData(st,Mt,Xr),this.initTransform(st,Mt,Xr),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!Mt.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(st){if(this._mdf=!1,this.prepareRenderableFrame(st),this.prepareProperties(st,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=st/this.data.sr;else{var Mt=this.tm.v;Mt===this.data.op&&(Mt=this.data.op-1),this.renderedFrame=Mt}var Xr,rn=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),Xr=rn-1;Xr>=0;Xr-=1)(this.completeLayers||this.elements[Xr])&&(this.elements[Xr].prepareFrame(this.renderedFrame-this.layers[Xr].st),this.elements[Xr]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var st,Mt=this.layers.length;for(st=0;st<Mt;st+=1)(this.completeLayers||this.elements[st])&&this.elements[st].renderFrame()},ICompElement.prototype.setElements=function(st){this.elements=st},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var st,Mt=this.layers.length;for(st=0;st<Mt;st+=1)this.elements[st]&&this.elements[st].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(st,Mt,Xr){this.layers=st.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(st,Mt,Xr),this.tm=st.tm?PropertyFactory.getProp(this,st.tm,0,Mt.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(st){return new SVGCompElement(st,this.globalData,this)};function SVGRenderer(st,Mt){this.animationItem=st,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var Xr="";if(Mt&&Mt.title){var rn=createNS("title"),nn=createElementID();rn.setAttribute("id",nn),rn.textContent=Mt.title,this.svgElement.appendChild(rn),Xr+=nn}if(Mt&&Mt.description){var an=createNS("desc"),on=createElementID();an.setAttribute("id",on),an.textContent=Mt.description,this.svgElement.appendChild(an),Xr+=" "+on}Xr&&this.svgElement.setAttribute("aria-labelledby",Xr);var sn=createNS("defs");this.svgElement.appendChild(sn);var ln=createNS("g");this.svgElement.appendChild(ln),this.layerElement=ln,this.renderConfig={preserveAspectRatio:Mt&&Mt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Mt&&Mt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Mt&&Mt.contentVisibility||"visible",progressiveLoad:Mt&&Mt.progressiveLoad||!1,hideOnTransparent:!(Mt&&Mt.hideOnTransparent===!1),viewBoxOnly:Mt&&Mt.viewBoxOnly||!1,viewBoxSize:Mt&&Mt.viewBoxSize||!1,className:Mt&&Mt.className||"",id:Mt&&Mt.id||"",focusable:Mt&&Mt.focusable,filterSize:{width:Mt&&Mt.filterSize&&Mt.filterSize.width||"100%",height:Mt&&Mt.filterSize&&Mt.filterSize.height||"100%",x:Mt&&Mt.filterSize&&Mt.filterSize.x||"0%",y:Mt&&Mt.filterSize&&Mt.filterSize.y||"0%"},width:Mt&&Mt.width,height:Mt&&Mt.height,runExpressions:!Mt||Mt.runExpressions===void 0||Mt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:sn,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(st){return new SVGCompElement(st,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(Mt){var Xr,rn=Mt.length,nn="_";for(Xr=0;Xr<rn;Xr+=1)nn+=Mt[Xr].transform.key+"_";var an=this.sequences[nn];return an||(an={transforms:[].concat(Mt),finalTransform:new Matrix,_mdf:!1},this.sequences[nn]=an,this.sequenceList.push(an)),an},processSequence:function(Mt,Xr){for(var rn=0,nn=Mt.transforms.length,an=Xr;rn<nn&&!Xr;){if(Mt.transforms[rn].transform.mProps._mdf){an=!0;break}rn+=1}if(an)for(Mt.finalTransform.reset(),rn=nn-1;rn>=0;rn-=1)Mt.finalTransform.multiply(Mt.transforms[rn].transform.mProps.v);Mt._mdf=an},processSequences:function(Mt){var Xr,rn=this.sequenceList.length;for(Xr=0;Xr<rn;Xr+=1)this.processSequence(this.sequenceList[Xr],Mt)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var Mt="__lottie_element_luma_buffer",Xr=null,rn=null,nn=null;function an(){var ln=createNS("svg"),un=createNS("filter"),cn=createNS("feColorMatrix");return un.setAttribute("id",Mt),cn.setAttribute("type","matrix"),cn.setAttribute("color-interpolation-filters","sRGB"),cn.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),un.appendChild(cn),ln.appendChild(un),ln.setAttribute("id",Mt+"_svg"),featureSupport.svgLumaHidden&&(ln.style.display="none"),ln}function on(){Xr||(nn=an(),document.body.appendChild(nn),Xr=createTag("canvas"),rn=Xr.getContext("2d"),rn.filter="url(#"+Mt+")",rn.fillStyle="rgba(0,0,0,0)",rn.fillRect(0,0,1,1))}function sn(ln){return Xr||on(),Xr.width=ln.width,Xr.height=ln.height,rn.filter="url(#"+Mt+")",Xr}return{load:on,get:sn}};function createCanvas(st,Mt){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(st,Mt);var Xr=createTag("canvas");return Xr.width=st,Xr.height=Mt,Xr}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(st){var Mt,Xr=st.data.ef?st.data.ef.length:0;this.filters=[];var rn;for(Mt=0;Mt<Xr;Mt+=1){rn=null;var nn=st.data.ef[Mt].ty;if(registeredEffects[nn]){var an=registeredEffects[nn].effect;rn=new an(st.effectsManager.effectElements[Mt],st)}rn&&this.filters.push(rn)}this.filters.length&&st.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(st){var Mt,Xr=this.filters.length;for(Mt=0;Mt<Xr;Mt+=1)this.filters[Mt].renderFrame(st)},CVEffects.prototype.getEffects=function(st){var Mt,Xr=this.filters.length,rn=[];for(Mt=0;Mt<Xr;Mt+=1)this.filters[Mt].type===st&&rn.push(this.filters[Mt]);return rn};function registerEffect(st,Mt){registeredEffects[st]={effect:Mt}}function CVMaskElement(st,Mt){this.data=st,this.element=Mt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var Xr,rn=this.masksProperties.length,nn=!1;for(Xr=0;Xr<rn;Xr+=1)this.masksProperties[Xr].mode!=="n"&&(nn=!0),this.viewData[Xr]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[Xr],3);this.hasMasks=nn,nn&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var st=this.element.finalTransform.mat,Mt=this.element.canvasContext,Xr,rn=this.masksProperties.length,nn,an,on;for(Mt.beginPath(),Xr=0;Xr<rn;Xr+=1)if(this.masksProperties[Xr].mode!=="n"){this.masksProperties[Xr].inv&&(Mt.moveTo(0,0),Mt.lineTo(this.element.globalData.compSize.w,0),Mt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),Mt.lineTo(0,this.element.globalData.compSize.h),Mt.lineTo(0,0)),on=this.viewData[Xr].v,nn=st.applyToPointArray(on.v[0][0],on.v[0][1],0),Mt.moveTo(nn[0],nn[1]);var sn,ln=on._length;for(sn=1;sn<ln;sn+=1)an=st.applyToTriplePoints(on.o[sn-1],on.i[sn],on.v[sn]),Mt.bezierCurveTo(an[0],an[1],an[2],an[3],an[4],an[5]);an=st.applyToTriplePoints(on.o[sn-1],on.i[0],on.v[0]),Mt.bezierCurveTo(an[0],an[1],an[2],an[3],an[4],an[5])}this.element.globalData.renderer.save(!0),Mt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var Mt=this.globalData.canvasContext,Xr=assetLoader.createCanvas(Mt.canvas.width,Mt.canvas.height);this.buffers.push(Xr);var rn=assetLoader.createCanvas(Mt.canvas.width,Mt.canvas.height);this.buffers.push(rn),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var Mt=this.globalData;if(Mt.blendMode!==this.data.bm){Mt.blendMode=this.data.bm;var Xr=getBlendMode(this.data.bm);Mt.canvasContext.globalCompositeOperation=Xr}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(Mt){Mt.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var Mt=this.buffers[0],Xr=Mt.getContext("2d");this.clearCanvas(Xr),Xr.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var Mt=this.buffers[1],Xr=Mt.getContext("2d");this.clearCanvas(Xr),Xr.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var rn=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(rn.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var nn=assetLoader.getLumaCanvas(this.canvasContext.canvas),an=nn.getContext("2d");an.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(nn,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(Mt,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(Mt){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!Mt)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var Xr=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(Xr),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(Xr),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(st,Mt,Xr,rn){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var nn=4;Mt.ty==="rc"?nn=5:Mt.ty==="el"?nn=6:Mt.ty==="sr"&&(nn=7),this.sh=ShapePropertyFactory.getShapeProp(st,Mt,nn,st);var an,on=Xr.length,sn;for(an=0;an<on;an+=1)Xr[an].closed||(sn={transforms:rn.addTransformSequence(Xr[an].transforms),trNodes:[]},this.styledShapes.push(sn),Xr[an].elements.push(sn))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(st,Mt,Xr){this.shapes=[],this.shapesData=st.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(st,Mt){var Xr={data:st,type:st.ty,preTransforms:this.transformsManager.addTransformSequence(Mt),transforms:[],elements:[],closed:st.hd===!0},rn={};if(st.ty==="fl"||st.ty==="st"?(rn.c=PropertyFactory.getProp(this,st.c,1,255,this),rn.c.k||(Xr.co="rgb("+bmFloor(rn.c.v[0])+","+bmFloor(rn.c.v[1])+","+bmFloor(rn.c.v[2])+")")):(st.ty==="gf"||st.ty==="gs")&&(rn.s=PropertyFactory.getProp(this,st.s,1,null,this),rn.e=PropertyFactory.getProp(this,st.e,1,null,this),rn.h=PropertyFactory.getProp(this,st.h||{k:0},0,.01,this),rn.a=PropertyFactory.getProp(this,st.a||{k:0},0,degToRads,this),rn.g=new GradientProperty(this,st.g,this)),rn.o=PropertyFactory.getProp(this,st.o,0,.01,this),st.ty==="st"||st.ty==="gs"){if(Xr.lc=lineCapEnum[st.lc||2],Xr.lj=lineJoinEnum[st.lj||2],st.lj==1&&(Xr.ml=st.ml),rn.w=PropertyFactory.getProp(this,st.w,0,null,this),rn.w.k||(Xr.wi=rn.w.v),st.d){var nn=new DashProperty(this,st.d,"canvas",this);rn.d=nn,rn.d.k||(Xr.da=rn.d.dashArray,Xr.do=rn.d.dashoffset[0])}}else Xr.r=st.r===2?"evenodd":"nonzero";return this.stylesList.push(Xr),rn.style=Xr,rn},CVShapeElement.prototype.createGroupElement=function(){var st={it:[],prevViewData:[]};return st},CVShapeElement.prototype.createTransformElement=function(st){var Mt={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,st.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,st,this)}};return Mt},CVShapeElement.prototype.createShapeElement=function(st){var Mt=new CVShapeData(this,st,this.stylesList,this.transformsManager);return this.shapes.push(Mt),this.addShapeToModifiers(Mt),Mt},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var st,Mt=this.itemsData.length;for(st=0;st<Mt;st+=1)this.prevViewData[st]=this.itemsData[st];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),Mt=this.dynamicProperties.length,st=0;st<Mt;st+=1)this.dynamicProperties[st].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(st){var Mt,Xr=this.stylesList.length;for(Mt=0;Mt<Xr;Mt+=1)this.stylesList[Mt].closed||this.stylesList[Mt].transforms.push(st)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var st,Mt=this.stylesList.length;for(st=0;st<Mt;st+=1)this.stylesList[st].closed||this.stylesList[st].transforms.pop()},CVShapeElement.prototype.closeStyles=function(st){var Mt,Xr=st.length;for(Mt=0;Mt<Xr;Mt+=1)st[Mt].closed=!0},CVShapeElement.prototype.searchShapes=function(st,Mt,Xr,rn,nn){var an,on=st.length-1,sn,ln,un=[],cn=[],hn,fn,to,uo=[].concat(nn);for(an=on;an>=0;an-=1){if(hn=this.searchProcessedElement(st[an]),hn?Mt[an]=Xr[hn-1]:st[an]._shouldRender=rn,st[an].ty==="fl"||st[an].ty==="st"||st[an].ty==="gf"||st[an].ty==="gs")hn?Mt[an].style.closed=!1:Mt[an]=this.createStyleElement(st[an],uo),un.push(Mt[an].style);else if(st[an].ty==="gr"){if(!hn)Mt[an]=this.createGroupElement(st[an]);else for(ln=Mt[an].it.length,sn=0;sn<ln;sn+=1)Mt[an].prevViewData[sn]=Mt[an].it[sn];this.searchShapes(st[an].it,Mt[an].it,Mt[an].prevViewData,rn,uo)}else st[an].ty==="tr"?(hn||(to=this.createTransformElement(st[an]),Mt[an]=to),uo.push(Mt[an]),this.addTransformToStyleList(Mt[an])):st[an].ty==="sh"||st[an].ty==="rc"||st[an].ty==="el"||st[an].ty==="sr"?hn||(Mt[an]=this.createShapeElement(st[an])):st[an].ty==="tm"||st[an].ty==="rd"||st[an].ty==="pb"||st[an].ty==="zz"||st[an].ty==="op"?(hn?(fn=Mt[an],fn.closed=!1):(fn=ShapeModifiers.getModifier(st[an].ty),fn.init(this,st[an]),Mt[an]=fn,this.shapeModifiers.push(fn)),cn.push(fn)):st[an].ty==="rp"&&(hn?(fn=Mt[an],fn.closed=!0):(fn=ShapeModifiers.getModifier(st[an].ty),Mt[an]=fn,fn.init(this,st,an,Mt),this.shapeModifiers.push(fn),rn=!1),cn.push(fn));this.addProcessedElement(st[an],an+1)}for(this.removeTransformFromStyleList(),this.closeStyles(un),on=cn.length,an=0;an<on;an+=1)cn[an].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(st,Mt){(st._opMdf||Mt.op._mdf||this._isFirstFrame)&&(Mt.opacity=st.opacity,Mt.opacity*=Mt.op.v,Mt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var st,Mt=this.stylesList.length,Xr,rn,nn,an,on,sn,ln=this.globalData.renderer,un=this.globalData.canvasContext,cn,hn;for(st=0;st<Mt;st+=1)if(hn=this.stylesList[st],cn=hn.type,!((cn==="st"||cn==="gs")&&hn.wi===0||!hn.data._shouldRender||hn.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ln.save(),on=hn.elements,cn==="st"||cn==="gs"?(ln.ctxStrokeStyle(cn==="st"?hn.co:hn.grd),ln.ctxLineWidth(hn.wi),ln.ctxLineCap(hn.lc),ln.ctxLineJoin(hn.lj),ln.ctxMiterLimit(hn.ml||0)):ln.ctxFillStyle(cn==="fl"?hn.co:hn.grd),ln.ctxOpacity(hn.coOp),cn!=="st"&&cn!=="gs"&&un.beginPath(),ln.ctxTransform(hn.preTransforms.finalTransform.props),rn=on.length,Xr=0;Xr<rn;Xr+=1){for((cn==="st"||cn==="gs")&&(un.beginPath(),hn.da&&(un.setLineDash(hn.da),un.lineDashOffset=hn.do)),sn=on[Xr].trNodes,an=sn.length,nn=0;nn<an;nn+=1)sn[nn].t==="m"?un.moveTo(sn[nn].p[0],sn[nn].p[1]):sn[nn].t==="c"?un.bezierCurveTo(sn[nn].pts[0],sn[nn].pts[1],sn[nn].pts[2],sn[nn].pts[3],sn[nn].pts[4],sn[nn].pts[5]):un.closePath();(cn==="st"||cn==="gs")&&(ln.ctxStroke(),hn.da&&un.setLineDash(this.dashResetter))}cn!=="st"&&cn!=="gs"&&this.globalData.renderer.ctxFill(hn.r),ln.restore()}},CVShapeElement.prototype.renderShape=function(st,Mt,Xr,rn){var nn,an=Mt.length-1,on;for(on=st,nn=an;nn>=0;nn-=1)Mt[nn].ty==="tr"?(on=Xr[nn].transform,this.renderShapeTransform(st,on)):Mt[nn].ty==="sh"||Mt[nn].ty==="el"||Mt[nn].ty==="rc"||Mt[nn].ty==="sr"?this.renderPath(Mt[nn],Xr[nn]):Mt[nn].ty==="fl"?this.renderFill(Mt[nn],Xr[nn],on):Mt[nn].ty==="st"?this.renderStroke(Mt[nn],Xr[nn],on):Mt[nn].ty==="gf"||Mt[nn].ty==="gs"?this.renderGradientFill(Mt[nn],Xr[nn],on):Mt[nn].ty==="gr"?this.renderShape(on,Mt[nn].it,Xr[nn].it):Mt[nn].ty;rn&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(st,Mt){if(this._isFirstFrame||Mt._mdf||st.transforms._mdf){var Xr=st.trNodes,rn=Mt.paths,nn,an,on,sn=rn._length;Xr.length=0;var ln=st.transforms.finalTransform;for(on=0;on<sn;on+=1){var un=rn.shapes[on];if(un&&un.v){for(an=un._length,nn=1;nn<an;nn+=1)nn===1&&Xr.push({t:"m",p:ln.applyToPointArray(un.v[0][0],un.v[0][1],0)}),Xr.push({t:"c",pts:ln.applyToTriplePoints(un.o[nn-1],un.i[nn],un.v[nn])});an===1&&Xr.push({t:"m",p:ln.applyToPointArray(un.v[0][0],un.v[0][1],0)}),un.c&&an&&(Xr.push({t:"c",pts:ln.applyToTriplePoints(un.o[nn-1],un.i[0],un.v[0])}),Xr.push({t:"z"}))}}st.trNodes=Xr}},CVShapeElement.prototype.renderPath=function(st,Mt){if(st.hd!==!0&&st._shouldRender){var Xr,rn=Mt.styledShapes.length;for(Xr=0;Xr<rn;Xr+=1)this.renderStyledShape(Mt.styledShapes[Xr],Mt.sh)}},CVShapeElement.prototype.renderFill=function(st,Mt,Xr){var rn=Mt.style;(Mt.c._mdf||this._isFirstFrame)&&(rn.co="rgb("+bmFloor(Mt.c.v[0])+","+bmFloor(Mt.c.v[1])+","+bmFloor(Mt.c.v[2])+")"),(Mt.o._mdf||Xr._opMdf||this._isFirstFrame)&&(rn.coOp=Mt.o.v*Xr.opacity)},CVShapeElement.prototype.renderGradientFill=function(st,Mt,Xr){var rn=Mt.style,nn;if(!rn.grd||Mt.g._mdf||Mt.s._mdf||Mt.e._mdf||st.t!==1&&(Mt.h._mdf||Mt.a._mdf)){var an=this.globalData.canvasContext,on=Mt.s.v,sn=Mt.e.v;if(st.t===1)nn=an.createLinearGradient(on[0],on[1],sn[0],sn[1]);else{var ln=Math.sqrt(Math.pow(on[0]-sn[0],2)+Math.pow(on[1]-sn[1],2)),un=Math.atan2(sn[1]-on[1],sn[0]-on[0]),cn=Mt.h.v;cn>=1?cn=.99:cn<=-1&&(cn=-.99);var hn=ln*cn,fn=Math.cos(un+Mt.a.v)*hn+on[0],to=Math.sin(un+Mt.a.v)*hn+on[1];nn=an.createRadialGradient(fn,to,0,on[0],on[1],ln)}var uo,co=st.g.p,Uo=Mt.g.c,lo=1;for(uo=0;uo<co;uo+=1)Mt.g._hasOpacity&&Mt.g._collapsable&&(lo=Mt.g.o[uo*2+1]),nn.addColorStop(Uo[uo*4]/100,"rgba("+Uo[uo*4+1]+","+Uo[uo*4+2]+","+Uo[uo*4+3]+","+lo+")");rn.grd=nn}rn.coOp=Mt.o.v*Xr.opacity},CVShapeElement.prototype.renderStroke=function(st,Mt,Xr){var rn=Mt.style,nn=Mt.d;nn&&(nn._mdf||this._isFirstFrame)&&(rn.da=nn.dashArray,rn.do=nn.dashoffset[0]),(Mt.c._mdf||this._isFirstFrame)&&(rn.co="rgb("+bmFloor(Mt.c.v[0])+","+bmFloor(Mt.c.v[1])+","+bmFloor(Mt.c.v[2])+")"),(Mt.o._mdf||Xr._opMdf||this._isFirstFrame)&&(rn.coOp=Mt.o.v*Xr.opacity),(Mt.w._mdf||this._isFirstFrame)&&(rn.wi=Mt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(st,Mt,Xr){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var st=this.textProperty.currentData;this.renderedLetters=createSizedArray(st.l?st.l.length:0);var Mt=!1;st.fc?(Mt=!0,this.values.fill=this.buildColor(st.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=Mt;var Xr=!1;st.sc&&(Xr=!0,this.values.stroke=this.buildColor(st.sc),this.values.sWidth=st.sw);var rn=this.globalData.fontManager.getFontByName(st.f),nn,an,on=st.l,sn=this.mHelper;this.stroke=Xr,this.values.fValue=st.finalSize+"px "+this.globalData.fontManager.getFontByName(st.f).fFamily,an=st.finalText.length;var ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho=this.data.singleShape,fo=st.tr*.001*st.finalSize,mo=0,_d=0,ep=!0,rp=0;for(nn=0;nn<an;nn+=1){ln=this.globalData.fontManager.getCharData(st.finalText[nn],rn.fStyle,this.globalData.fontManager.getFontByName(st.f).fFamily),un=ln&&ln.data||{},sn.reset(),ho&&on[nn].n&&(mo=-fo,_d+=st.yOffset,_d+=ep?1:0,ep=!1),fn=un.shapes?un.shapes[0].it:[],uo=fn.length,sn.scale(st.finalSize/100,st.finalSize/100),ho&&this.applyTextPropertiesToMatrix(st,sn,on[nn].line,mo,_d),Uo=createSizedArray(uo-1);var ap=0;for(to=0;to<uo;to+=1)if(fn[to].ty==="sh"){for(hn=fn[to].ks.k.i.length,co=fn[to].ks.k,lo=[],cn=1;cn<hn;cn+=1)cn===1&&lo.push(sn.applyToX(co.v[0][0],co.v[0][1],0),sn.applyToY(co.v[0][0],co.v[0][1],0)),lo.push(sn.applyToX(co.o[cn-1][0],co.o[cn-1][1],0),sn.applyToY(co.o[cn-1][0],co.o[cn-1][1],0),sn.applyToX(co.i[cn][0],co.i[cn][1],0),sn.applyToY(co.i[cn][0],co.i[cn][1],0),sn.applyToX(co.v[cn][0],co.v[cn][1],0),sn.applyToY(co.v[cn][0],co.v[cn][1],0));lo.push(sn.applyToX(co.o[cn-1][0],co.o[cn-1][1],0),sn.applyToY(co.o[cn-1][0],co.o[cn-1][1],0),sn.applyToX(co.i[0][0],co.i[0][1],0),sn.applyToY(co.i[0][0],co.i[0][1],0),sn.applyToX(co.v[0][0],co.v[0][1],0),sn.applyToY(co.v[0][0],co.v[0][1],0)),Uo[ap]=lo,ap+=1}ho&&(mo+=on[nn].l,mo+=fo),this.textSpans[rp]?this.textSpans[rp].elem=Uo:this.textSpans[rp]={elem:Uo},rp+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var st=this.canvasContext;st.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var Mt,Xr,rn,nn,an,on,sn=this.textAnimator.renderedLetters,ln=this.textProperty.currentData.l;Xr=ln.length;var un,cn=null,hn=null,fn=null,to,uo,co=this.globalData.renderer;for(Mt=0;Mt<Xr;Mt+=1)if(!ln[Mt].n){if(un=sn[Mt],un&&(co.save(),co.ctxTransform(un.p),co.ctxOpacity(un.o)),this.fill){for(un&&un.fc?cn!==un.fc&&(co.ctxFillStyle(un.fc),cn=un.fc):cn!==this.values.fill&&(cn=this.values.fill,co.ctxFillStyle(this.values.fill)),to=this.textSpans[Mt].elem,nn=to.length,this.globalData.canvasContext.beginPath(),rn=0;rn<nn;rn+=1)for(uo=to[rn],on=uo.length,this.globalData.canvasContext.moveTo(uo[0],uo[1]),an=2;an<on;an+=6)this.globalData.canvasContext.bezierCurveTo(uo[an],uo[an+1],uo[an+2],uo[an+3],uo[an+4],uo[an+5]);this.globalData.canvasContext.closePath(),co.ctxFill()}if(this.stroke){for(un&&un.sw?fn!==un.sw&&(fn=un.sw,co.ctxLineWidth(un.sw)):fn!==this.values.sWidth&&(fn=this.values.sWidth,co.ctxLineWidth(this.values.sWidth)),un&&un.sc?hn!==un.sc&&(hn=un.sc,co.ctxStrokeStyle(un.sc)):hn!==this.values.stroke&&(hn=this.values.stroke,co.ctxStrokeStyle(this.values.stroke)),to=this.textSpans[Mt].elem,nn=to.length,this.globalData.canvasContext.beginPath(),rn=0;rn<nn;rn+=1)for(uo=to[rn],on=uo.length,this.globalData.canvasContext.moveTo(uo[0],uo[1]),an=2;an<on;an+=6)this.globalData.canvasContext.bezierCurveTo(uo[an],uo[an+1],uo[an+2],uo[an+3],uo[an+4],uo[an+5]);this.globalData.canvasContext.closePath(),co.ctxStroke()}un&&this.globalData.renderer.restore()}};function CVImageElement(st,Mt,Xr){this.assetData=Mt.getAssetData(st.refId),this.img=Mt.imageLoader.getAsset(this.assetData),this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var st=createTag("canvas");st.width=this.assetData.w,st.height=this.assetData.h;var Mt=st.getContext("2d"),Xr=this.img.width,rn=this.img.height,nn=Xr/rn,an=this.assetData.w/this.assetData.h,on,sn,ln=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;nn>an&&ln==="xMidYMid slice"||nn<an&&ln!=="xMidYMid slice"?(sn=rn,on=sn*an):(on=Xr,sn=on/an),Mt.drawImage(this.img,(Xr-on)/2,(rn-sn)/2,on,sn,0,0,this.assetData.w,this.assetData.h),this.img=st}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(st,Mt,Xr){this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(st){return new CVShapeElement(st,this.globalData,this)},CanvasRendererBase.prototype.createText=function(st){return new CVTextElement(st,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(st){return new CVImageElement(st,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(st){return new CVSolidElement(st,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(st){st[0]===1&&st[1]===0&&st[4]===0&&st[5]===1&&st[12]===0&&st[13]===0||this.canvasContext.transform(st[0],st[1],st[4],st[5],st[12],st[13])},CanvasRendererBase.prototype.ctxOpacity=function(st){this.canvasContext.globalAlpha*=st<0?0:st},CanvasRendererBase.prototype.ctxFillStyle=function(st){this.canvasContext.fillStyle=st},CanvasRendererBase.prototype.ctxStrokeStyle=function(st){this.canvasContext.strokeStyle=st},CanvasRendererBase.prototype.ctxLineWidth=function(st){this.canvasContext.lineWidth=st},CanvasRendererBase.prototype.ctxLineCap=function(st){this.canvasContext.lineCap=st},CanvasRendererBase.prototype.ctxLineJoin=function(st){this.canvasContext.lineJoin=st},CanvasRendererBase.prototype.ctxMiterLimit=function(st){this.canvasContext.miterLimit=st},CanvasRendererBase.prototype.ctxFill=function(st){this.canvasContext.fill(st)},CanvasRendererBase.prototype.ctxFillRect=function(st,Mt,Xr,rn){this.canvasContext.fillRect(st,Mt,Xr,rn)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(st){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}st&&(this.globalData.blendMode="source-over"),this.contextData.restore(st)},CanvasRendererBase.prototype.configAnimation=function(st){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var Mt=this.animationItem.container.style;Mt.width="100%",Mt.height="100%";var Xr="0px 0px 0px";Mt.transformOrigin=Xr,Mt.mozTransformOrigin=Xr,Mt.webkitTransformOrigin=Xr,Mt["-webkit-transform"]=Xr,Mt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=st,this.layers=st.layers,this.transformCanvas={w:st.w,h:st.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(st,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(st.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(st,Mt){this.reset();var Xr,rn;st?(Xr=st,rn=Mt,this.canvasContext.canvas.width=Xr,this.canvasContext.canvas.height=rn):(this.animationItem.wrapper&&this.animationItem.container?(Xr=this.animationItem.wrapper.offsetWidth,rn=this.animationItem.wrapper.offsetHeight):(Xr=this.canvasContext.canvas.width,rn=this.canvasContext.canvas.height),this.canvasContext.canvas.width=Xr*this.renderConfig.dpr,this.canvasContext.canvas.height=rn*this.renderConfig.dpr);var nn,an;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var on=this.renderConfig.preserveAspectRatio.split(" "),sn=on[1]||"meet",ln=on[0]||"xMidYMid",un=ln.substr(0,4),cn=ln.substr(4);nn=Xr/rn,an=this.transformCanvas.w/this.transformCanvas.h,an>nn&&sn==="meet"||an<nn&&sn==="slice"?(this.transformCanvas.sx=Xr/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=Xr/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=rn/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=rn/(this.transformCanvas.h/this.renderConfig.dpr)),un==="xMid"&&(an<nn&&sn==="meet"||an>nn&&sn==="slice")?this.transformCanvas.tx=(Xr-this.transformCanvas.w*(rn/this.transformCanvas.h))/2*this.renderConfig.dpr:un==="xMax"&&(an<nn&&sn==="meet"||an>nn&&sn==="slice")?this.transformCanvas.tx=(Xr-this.transformCanvas.w*(rn/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,cn==="YMid"&&(an>nn&&sn==="meet"||an<nn&&sn==="slice")?this.transformCanvas.ty=(rn-this.transformCanvas.h*(Xr/this.transformCanvas.w))/2*this.renderConfig.dpr:cn==="YMax"&&(an>nn&&sn==="meet"||an<nn&&sn==="slice")?this.transformCanvas.ty=(rn-this.transformCanvas.h*(Xr/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=Xr/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=rn/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var st,Mt=this.layers?this.layers.length:0;for(st=Mt-1;st>=0;st-=1)this.elements[st]&&this.elements[st].destroy&&this.elements[st].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(st,Mt){if(!(this.renderedFrame===st&&this.renderConfig.clearCanvas===!0&&!Mt||this.destroyed||st===-1)){this.renderedFrame=st,this.globalData.frameNum=st-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||Mt,this.globalData.projectInterface.currentFrame=st;var Xr,rn=this.layers.length;for(this.completeLayers||this.checkLayers(st),Xr=rn-1;Xr>=0;Xr-=1)(this.completeLayers||this.elements[Xr])&&this.elements[Xr].prepareFrame(st-this.layers[Xr].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),Xr=rn-1;Xr>=0;Xr-=1)(this.completeLayers||this.elements[Xr])&&this.elements[Xr].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(st){var Mt=this.elements;if(!(Mt[st]||this.layers[st].ty===99)){var Xr=this.createItem(this.layers[st],this,this.globalData);Mt[st]=Xr,Xr.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var st=this.pendingElements.pop();st.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var st,Mt=15;for(st=0;st<Mt;st+=1){var Xr=new CanvasContext;this.stack[st]=Xr}this._length=Mt,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var st=this._length*2,Mt=0;for(Mt=this._length;Mt<st;Mt+=1)this.stack[Mt]=new CanvasContext;this._length=st},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(st){this.cArrPos-=1;var Mt=this.stack[this.cArrPos],Xr=Mt.transform,rn,nn=this.cTr.props;for(rn=0;rn<16;rn+=1)nn[rn]=Xr[rn];if(st){this.nativeContext.restore();var an=this.stack[this.cArrPos+1];this.appliedFillStyle=an.fillStyle,this.appliedStrokeStyle=an.strokeStyle,this.appliedLineWidth=an.lineWidth,this.appliedLineCap=an.lineCap,this.appliedLineJoin=an.lineJoin,this.appliedMiterLimit=an.miterLimit}this.nativeContext.setTransform(Xr[0],Xr[1],Xr[4],Xr[5],Xr[12],Xr[13]),(st||Mt.opacity!==-1&&this.currentOpacity!==Mt.opacity)&&(this.nativeContext.globalAlpha=Mt.opacity,this.currentOpacity=Mt.opacity),this.currentFillStyle=Mt.fillStyle,this.currentStrokeStyle=Mt.strokeStyle,this.currentLineWidth=Mt.lineWidth,this.currentLineCap=Mt.lineCap,this.currentLineJoin=Mt.lineJoin,this.currentMiterLimit=Mt.miterLimit},CVContextData.prototype.save=function(st){st&&this.nativeContext.save();var Mt=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var Xr=this.stack[this.cArrPos],rn;for(rn=0;rn<16;rn+=1)Xr.transform[rn]=Mt[rn];this.cArrPos+=1;var nn=this.stack[this.cArrPos];nn.opacity=Xr.opacity,nn.fillStyle=Xr.fillStyle,nn.strokeStyle=Xr.strokeStyle,nn.lineWidth=Xr.lineWidth,nn.lineCap=Xr.lineCap,nn.lineJoin=Xr.lineJoin,nn.miterLimit=Xr.miterLimit},CVContextData.prototype.setOpacity=function(st){this.stack[this.cArrPos].opacity=st},CVContextData.prototype.setContext=function(st){this.nativeContext=st},CVContextData.prototype.fillStyle=function(st){this.stack[this.cArrPos].fillStyle!==st&&(this.currentFillStyle=st,this.stack[this.cArrPos].fillStyle=st)},CVContextData.prototype.strokeStyle=function(st){this.stack[this.cArrPos].strokeStyle!==st&&(this.currentStrokeStyle=st,this.stack[this.cArrPos].strokeStyle=st)},CVContextData.prototype.lineWidth=function(st){this.stack[this.cArrPos].lineWidth!==st&&(this.currentLineWidth=st,this.stack[this.cArrPos].lineWidth=st)},CVContextData.prototype.lineCap=function(st){this.stack[this.cArrPos].lineCap!==st&&(this.currentLineCap=st,this.stack[this.cArrPos].lineCap=st)},CVContextData.prototype.lineJoin=function(st){this.stack[this.cArrPos].lineJoin!==st&&(this.currentLineJoin=st,this.stack[this.cArrPos].lineJoin=st)},CVContextData.prototype.miterLimit=function(st){this.stack[this.cArrPos].miterLimit!==st&&(this.currentMiterLimit=st,this.stack[this.cArrPos].miterLimit=st)},CVContextData.prototype.transform=function(st){this.transformMat.cloneFromProps(st);var Mt=this.cTr;this.transformMat.multiply(Mt),Mt.cloneFromProps(this.transformMat.props);var Xr=Mt.props;this.nativeContext.setTransform(Xr[0],Xr[1],Xr[4],Xr[5],Xr[12],Xr[13])},CVContextData.prototype.opacity=function(st){var Mt=this.stack[this.cArrPos].opacity;Mt*=st<0?0:st,this.stack[this.cArrPos].opacity!==Mt&&(this.currentOpacity!==st&&(this.nativeContext.globalAlpha=st,this.currentOpacity=st),this.stack[this.cArrPos].opacity=Mt)},CVContextData.prototype.fill=function(st){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(st)},CVContextData.prototype.fillRect=function(st,Mt,Xr,rn){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(st,Mt,Xr,rn)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(st,Mt,Xr){this.completeLayers=!1,this.layers=st.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(st,Mt,Xr),this.tm=st.tm?PropertyFactory.getProp(this,st.tm,0,Mt.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var st=this.canvasContext;st.beginPath(),st.moveTo(0,0),st.lineTo(this.data.w,0),st.lineTo(this.data.w,this.data.h),st.lineTo(0,this.data.h),st.lineTo(0,0),st.clip();var Mt,Xr=this.layers.length;for(Mt=Xr-1;Mt>=0;Mt-=1)(this.completeLayers||this.elements[Mt])&&this.elements[Mt].renderFrame()},CVCompElement.prototype.destroy=function(){var st,Mt=this.layers.length;for(st=Mt-1;st>=0;st-=1)this.elements[st]&&this.elements[st].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(st){return new CVCompElement(st,this.globalData,this)};function CanvasRenderer(st,Mt){this.animationItem=st,this.renderConfig={clearCanvas:Mt&&Mt.clearCanvas!==void 0?Mt.clearCanvas:!0,context:Mt&&Mt.context||null,progressiveLoad:Mt&&Mt.progressiveLoad||!1,preserveAspectRatio:Mt&&Mt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Mt&&Mt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Mt&&Mt.contentVisibility||"visible",className:Mt&&Mt.className||"",id:Mt&&Mt.id||"",runExpressions:!Mt||Mt.runExpressions===void 0||Mt.runExpressions},this.renderConfig.dpr=Mt&&Mt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=Mt&&Mt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(st){return new CVCompElement(st,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var Mt=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var Xr=this.finalTransform.mat.toCSS();Mt.transform=Xr,Mt.webkitTransform=Xr}this.finalTransform._opMdf&&(Mt.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(st,Mt,Xr){this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var st;this.data.hasMask?(st=createNS("rect"),st.setAttribute("width",this.data.sw),st.setAttribute("height",this.data.sh),st.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(st=createTag("div"),st.style.width=this.data.sw+"px",st.style.height=this.data.sh+"px",st.style.backgroundColor=this.data.sc),this.layerElement.appendChild(st)};function HShapeElement(st,Mt,Xr){this.shapes=[],this.shapesData=st.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(st,Mt,Xr),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var st;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),st=this.svgElement;else{st=createNS("svg");var Mt=this.comp.data?this.comp.data:this.globalData.compSize;st.setAttribute("width",Mt.w),st.setAttribute("height",Mt.h),st.appendChild(this.shapesContainer),this.layerElement.appendChild(st)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=st},HShapeElement.prototype.getTransformedPoint=function(st,Mt){var Xr,rn=st.length;for(Xr=0;Xr<rn;Xr+=1)Mt=st[Xr].mProps.v.applyToPointArray(Mt[0],Mt[1],0);return Mt},HShapeElement.prototype.calculateShapeBoundingBox=function(st,Mt){var Xr=st.sh.v,rn=st.transformers,nn,an=Xr._length,on,sn,ln,un;if(!(an<=1)){for(nn=0;nn<an-1;nn+=1)on=this.getTransformedPoint(rn,Xr.v[nn]),sn=this.getTransformedPoint(rn,Xr.o[nn]),ln=this.getTransformedPoint(rn,Xr.i[nn+1]),un=this.getTransformedPoint(rn,Xr.v[nn+1]),this.checkBounds(on,sn,ln,un,Mt);Xr.c&&(on=this.getTransformedPoint(rn,Xr.v[nn]),sn=this.getTransformedPoint(rn,Xr.o[nn]),ln=this.getTransformedPoint(rn,Xr.i[0]),un=this.getTransformedPoint(rn,Xr.v[0]),this.checkBounds(on,sn,ln,un,Mt))}},HShapeElement.prototype.checkBounds=function(st,Mt,Xr,rn,nn){this.getBoundsOfCurve(st,Mt,Xr,rn);var an=this.shapeBoundingBox;nn.x=bmMin(an.left,nn.x),nn.xMax=bmMax(an.right,nn.xMax),nn.y=bmMin(an.top,nn.y),nn.yMax=bmMax(an.bottom,nn.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(st,Mt,Xr,rn){for(var nn=[[st[0],rn[0]],[st[1],rn[1]]],an,on,sn,ln,un,cn,hn,fn=0;fn<2;++fn)on=6*st[fn]-12*Mt[fn]+6*Xr[fn],an=-3*st[fn]+9*Mt[fn]-9*Xr[fn]+3*rn[fn],sn=3*Mt[fn]-3*st[fn],on|=0,an|=0,sn|=0,an===0&&on===0||(an===0?(ln=-sn/on,ln>0&&ln<1&&nn[fn].push(this.calculateF(ln,st,Mt,Xr,rn,fn))):(un=on*on-4*sn*an,un>=0&&(cn=(-on+bmSqrt(un))/(2*an),cn>0&&cn<1&&nn[fn].push(this.calculateF(cn,st,Mt,Xr,rn,fn)),hn=(-on-bmSqrt(un))/(2*an),hn>0&&hn<1&&nn[fn].push(this.calculateF(hn,st,Mt,Xr,rn,fn)))));this.shapeBoundingBox.left=bmMin.apply(null,nn[0]),this.shapeBoundingBox.top=bmMin.apply(null,nn[1]),this.shapeBoundingBox.right=bmMax.apply(null,nn[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,nn[1])},HShapeElement.prototype.calculateF=function(st,Mt,Xr,rn,nn,an){return bmPow(1-st,3)*Mt[an]+3*bmPow(1-st,2)*st*Xr[an]+3*(1-st)*bmPow(st,2)*rn[an]+bmPow(st,3)*nn[an]},HShapeElement.prototype.calculateBoundingBox=function(st,Mt){var Xr,rn=st.length;for(Xr=0;Xr<rn;Xr+=1)st[Xr]&&st[Xr].sh?this.calculateShapeBoundingBox(st[Xr],Mt):st[Xr]&&st[Xr].it?this.calculateBoundingBox(st[Xr].it,Mt):st[Xr]&&st[Xr].style&&st[Xr].w&&this.expandStrokeBoundingBox(st[Xr].w,Mt)},HShapeElement.prototype.expandStrokeBoundingBox=function(st,Mt){var Xr=0;if(st.keyframes){for(var rn=0;rn<st.keyframes.length;rn+=1){var nn=st.keyframes[rn].s;nn>Xr&&(Xr=nn)}Xr*=st.mult}else Xr=st.v*st.mult;Mt.x-=Xr,Mt.xMax+=Xr,Mt.y-=Xr,Mt.yMax+=Xr},HShapeElement.prototype.currentBoxContains=function(st){return this.currentBBox.x<=st.x&&this.currentBBox.y<=st.y&&this.currentBBox.width+this.currentBBox.x>=st.x+st.width&&this.currentBBox.height+this.currentBBox.y>=st.y+st.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var st=this.tempBoundingBox,Mt=999999;if(st.x=Mt,st.xMax=-Mt,st.y=Mt,st.yMax=-Mt,this.calculateBoundingBox(this.itemsData,st),st.width=st.xMax<st.x?0:st.xMax-st.x,st.height=st.yMax<st.y?0:st.yMax-st.y,this.currentBoxContains(st))return;var Xr=!1;if(this.currentBBox.w!==st.width&&(this.currentBBox.w=st.width,this.shapeCont.setAttribute("width",st.width),Xr=!0),this.currentBBox.h!==st.height&&(this.currentBBox.h=st.height,this.shapeCont.setAttribute("height",st.height),Xr=!0),Xr||this.currentBBox.x!==st.x||this.currentBBox.y!==st.y){this.currentBBox.w=st.width,this.currentBBox.h=st.height,this.currentBBox.x=st.x,this.currentBBox.y=st.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var rn=this.shapeCont.style,nn="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";rn.transform=nn,rn.webkitTransform=nn}}};function HTextElement(st,Mt,Xr){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var st=createNS("g");this.maskedElement.appendChild(st),this.innerElem=st}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var st=this.textProperty.currentData;this.renderedLetters=createSizedArray(st.l?st.l.length:0);var Mt=this.innerElem.style,Xr=st.fc?this.buildColor(st.fc):"rgba(0,0,0,0)";Mt.fill=Xr,Mt.color=Xr,st.sc&&(Mt.stroke=this.buildColor(st.sc),Mt.strokeWidth=st.sw+"px");var rn=this.globalData.fontManager.getFontByName(st.f);if(!this.globalData.fontManager.chars)if(Mt.fontSize=st.finalSize+"px",Mt.lineHeight=st.finalSize+"px",rn.fClass)this.innerElem.className=rn.fClass;else{Mt.fontFamily=rn.fFamily;var nn=st.fWeight,an=st.fStyle;Mt.fontStyle=an,Mt.fontWeight=nn}var on,sn,ln=st.l;sn=ln.length;var un,cn,hn,fn=this.mHelper,to,uo="",co=0;for(on=0;on<sn;on+=1){if(this.globalData.fontManager.chars?(this.textPaths[co]?un=this.textPaths[co]:(un=createNS("path"),un.setAttribute("stroke-linecap",lineCapEnum[1]),un.setAttribute("stroke-linejoin",lineJoinEnum[2]),un.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[co]?(cn=this.textSpans[co],hn=cn.children[0]):(cn=createTag("div"),cn.style.lineHeight=0,hn=createNS("svg"),hn.appendChild(un),styleDiv(cn)))):this.isMasked?un=this.textPaths[co]?this.textPaths[co]:createNS("text"):this.textSpans[co]?(cn=this.textSpans[co],un=this.textPaths[co]):(cn=createTag("span"),styleDiv(cn),un=createTag("span"),styleDiv(un),cn.appendChild(un)),this.globalData.fontManager.chars){var Uo=this.globalData.fontManager.getCharData(st.finalText[on],rn.fStyle,this.globalData.fontManager.getFontByName(st.f).fFamily),lo;if(Uo?lo=Uo.data:lo=null,fn.reset(),lo&&lo.shapes&&lo.shapes.length&&(to=lo.shapes[0].it,fn.scale(st.finalSize/100,st.finalSize/100),uo=this.createPathShape(fn,to),un.setAttribute("d",uo)),this.isMasked)this.innerElem.appendChild(un);else{if(this.innerElem.appendChild(cn),lo&&lo.shapes){document.body.appendChild(hn);var ho=hn.getBBox();hn.setAttribute("width",ho.width+2),hn.setAttribute("height",ho.height+2),hn.setAttribute("viewBox",ho.x-1+" "+(ho.y-1)+" "+(ho.width+2)+" "+(ho.height+2));var fo=hn.style,mo="translate("+(ho.x-1)+"px,"+(ho.y-1)+"px)";fo.transform=mo,fo.webkitTransform=mo,ln[on].yOffset=ho.y-1}else hn.setAttribute("width",1),hn.setAttribute("height",1);cn.appendChild(hn)}}else if(un.textContent=ln[on].val,un.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(un);else{this.innerElem.appendChild(cn);var _d=un.style,ep="translate3d(0,"+-st.finalSize/1.2+"px,0)";_d.transform=ep,_d.webkitTransform=ep}this.isMasked?this.textSpans[co]=un:this.textSpans[co]=cn,this.textSpans[co].style.display="block",this.textPaths[co]=un,co+=1}for(;co<this.textSpans.length;)this.textSpans[co].style.display="none",co+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var st;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),st=this.svgElement.style;var Mt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";st.transform=Mt,st.webkitTransform=Mt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var Xr,rn,nn=0,an=this.textAnimator.renderedLetters,on=this.textProperty.currentData.l;rn=on.length;var sn,ln,un;for(Xr=0;Xr<rn;Xr+=1)on[Xr].n?nn+=1:(ln=this.textSpans[Xr],un=this.textPaths[Xr],sn=an[nn],nn+=1,sn._mdf.m&&(this.isMasked?ln.setAttribute("transform",sn.m):(ln.style.webkitTransform=sn.m,ln.style.transform=sn.m)),ln.style.opacity=sn.o,sn.sw&&sn._mdf.sw&&un.setAttribute("stroke-width",sn.sw),sn.sc&&sn._mdf.sc&&un.setAttribute("stroke",sn.sc),sn.fc&&sn._mdf.fc&&(un.setAttribute("fill",sn.fc),un.style.color=sn.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var cn=this.innerElem.getBBox();this.currentBBox.w!==cn.width&&(this.currentBBox.w=cn.width,this.svgElement.setAttribute("width",cn.width)),this.currentBBox.h!==cn.height&&(this.currentBBox.h=cn.height,this.svgElement.setAttribute("height",cn.height));var hn=1;if(this.currentBBox.w!==cn.width+hn*2||this.currentBBox.h!==cn.height+hn*2||this.currentBBox.x!==cn.x-hn||this.currentBBox.y!==cn.y-hn){this.currentBBox.w=cn.width+hn*2,this.currentBBox.h=cn.height+hn*2,this.currentBBox.x=cn.x-hn,this.currentBBox.y=cn.y-hn,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),st=this.svgElement.style;var fn="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";st.transform=fn,st.webkitTransform=fn}}}};function HCameraElement(st,Mt,Xr){this.initFrame(),this.initBaseData(st,Mt,Xr),this.initHierarchy();var rn=PropertyFactory.getProp;if(this.pe=rn(this,st.pe,0,0,this),st.ks.p.s?(this.px=rn(this,st.ks.p.x,1,0,this),this.py=rn(this,st.ks.p.y,1,0,this),this.pz=rn(this,st.ks.p.z,1,0,this)):this.p=rn(this,st.ks.p,1,0,this),st.ks.a&&(this.a=rn(this,st.ks.a,1,0,this)),st.ks.or.k.length&&st.ks.or.k[0].to){var nn,an=st.ks.or.k.length;for(nn=0;nn<an;nn+=1)st.ks.or.k[nn].to=null,st.ks.or.k[nn].ti=null}this.or=rn(this,st.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=rn(this,st.ks.rx,0,degToRads,this),this.ry=rn(this,st.ks.ry,0,degToRads,this),this.rz=rn(this,st.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var st,Mt=this.comp.threeDElements.length,Xr,rn,nn;for(st=0;st<Mt;st+=1)if(Xr=this.comp.threeDElements[st],Xr.type==="3d"){rn=Xr.perspectiveElem.style,nn=Xr.container.style;var an=this.pe.v+"px",on="0px 0px 0px",sn="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";rn.perspective=an,rn.webkitPerspective=an,nn.transformOrigin=on,nn.mozTransformOrigin=on,nn.webkitTransformOrigin=on,rn.transform=sn,rn.webkitTransform=sn}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var st=this._isFirstFrame,Mt,Xr;if(this.hierarchy)for(Xr=this.hierarchy.length,Mt=0;Mt<Xr;Mt+=1)st=this.hierarchy[Mt].finalTransform.mProp._mdf||st;if(st||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(Xr=this.hierarchy.length-1,Mt=Xr;Mt>=0;Mt-=1){var rn=this.hierarchy[Mt].finalTransform.mProp;this.mat.translate(-rn.p.v[0],-rn.p.v[1],rn.p.v[2]),this.mat.rotateX(-rn.or.v[0]).rotateY(-rn.or.v[1]).rotateZ(rn.or.v[2]),this.mat.rotateX(-rn.rx.v).rotateY(-rn.ry.v).rotateZ(rn.rz.v),this.mat.scale(1/rn.s.v[0],1/rn.s.v[1],1/rn.s.v[2]),this.mat.translate(rn.a.v[0],rn.a.v[1],rn.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var nn;this.p?nn=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:nn=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var an=Math.sqrt(Math.pow(nn[0],2)+Math.pow(nn[1],2)+Math.pow(nn[2],2)),on=[nn[0]/an,nn[1]/an,nn[2]/an],sn=Math.sqrt(on[2]*on[2]+on[0]*on[0]),ln=Math.atan2(on[1],sn),un=Math.atan2(on[0],-on[2]);this.mat.rotateY(un).rotateX(-ln)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var cn=!this._prevMat.equals(this.mat);if((cn||this.pe._mdf)&&this.comp.threeDElements){Xr=this.comp.threeDElements.length;var hn,fn,to;for(Mt=0;Mt<Xr;Mt+=1)if(hn=this.comp.threeDElements[Mt],hn.type==="3d"){if(cn){var uo=this.mat.toCSS();to=hn.container.style,to.transform=uo,to.webkitTransform=uo}this.pe._mdf&&(fn=hn.perspectiveElem.style,fn.perspective=this.pe.v+"px",fn.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(st){this.prepareProperties(st,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(st,Mt,Xr){this.assetData=Mt.getAssetData(st.refId),this.initElement(st,Mt,Xr)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var st=this.globalData.getAssetsPath(this.assetData),Mt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",st),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(Mt),Mt.crossOrigin="anonymous",Mt.src=st,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(st,Mt){this.animationItem=st,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:Mt&&Mt.className||"",imagePreserveAspectRatio:Mt&&Mt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(Mt&&Mt.hideOnTransparent===!1),filterSize:{width:Mt&&Mt.filterSize&&Mt.filterSize.width||"400%",height:Mt&&Mt.filterSize&&Mt.filterSize.height||"400%",x:Mt&&Mt.filterSize&&Mt.filterSize.x||"-100%",y:Mt&&Mt.filterSize&&Mt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var st=this.pendingElements.pop();st.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(st,Mt){var Xr=st.getBaseElement();if(Xr){var rn=this.layers[Mt];if(!rn.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(Xr,Mt);else{for(var nn=0,an,on,sn;nn<Mt;)this.elements[nn]&&this.elements[nn]!==!0&&this.elements[nn].getBaseElement&&(on=this.elements[nn],sn=this.layers[nn].ddd?this.getThreeDContainerByPos(nn):on.getBaseElement(),an=sn||an),nn+=1;an?(!rn.ddd||!this.supports3d)&&this.layerElement.insertBefore(Xr,an):(!rn.ddd||!this.supports3d)&&this.layerElement.appendChild(Xr)}else this.addTo3dContainer(Xr,Mt)}},HybridRendererBase.prototype.createShape=function(st){return this.supports3d?new HShapeElement(st,this.globalData,this):new SVGShapeElement(st,this.globalData,this)},HybridRendererBase.prototype.createText=function(st){return this.supports3d?new HTextElement(st,this.globalData,this):new SVGTextLottieElement(st,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(st){return this.camera=new HCameraElement(st,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(st){return this.supports3d?new HImageElement(st,this.globalData,this):new IImageElement(st,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(st){return this.supports3d?new HSolidElement(st,this.globalData,this):new ISolidElement(st,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(st){for(var Mt=0,Xr=this.threeDElements.length;Mt<Xr;){if(this.threeDElements[Mt].startPos<=st&&this.threeDElements[Mt].endPos>=st)return this.threeDElements[Mt].perspectiveElem;Mt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(st,Mt){var Xr=createTag("div"),rn,nn;styleDiv(Xr);var an=createTag("div");if(styleDiv(an),Mt==="3d"){rn=Xr.style,rn.width=this.globalData.compSize.w+"px",rn.height=this.globalData.compSize.h+"px";var on="50% 50%";rn.webkitTransformOrigin=on,rn.mozTransformOrigin=on,rn.transformOrigin=on,nn=an.style;var sn="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";nn.transform=sn,nn.webkitTransform=sn}Xr.appendChild(an);var ln={container:an,perspectiveElem:Xr,startPos:st,endPos:st,type:Mt};return this.threeDElements.push(ln),ln},HybridRendererBase.prototype.build3dContainers=function(){var st,Mt=this.layers.length,Xr,rn="";for(st=0;st<Mt;st+=1)this.layers[st].ddd&&this.layers[st].ty!==3?(rn!=="3d"&&(rn="3d",Xr=this.createThreeDContainer(st,"3d")),Xr.endPos=Math.max(Xr.endPos,st)):(rn!=="2d"&&(rn="2d",Xr=this.createThreeDContainer(st,"2d")),Xr.endPos=Math.max(Xr.endPos,st));for(Mt=this.threeDElements.length,st=Mt-1;st>=0;st-=1)this.resizerElem.appendChild(this.threeDElements[st].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(st,Mt){for(var Xr=0,rn=this.threeDElements.length;Xr<rn;){if(Mt<=this.threeDElements[Xr].endPos){for(var nn=this.threeDElements[Xr].startPos,an;nn<Mt;)this.elements[nn]&&this.elements[nn].getBaseElement&&(an=this.elements[nn].getBaseElement()),nn+=1;an?this.threeDElements[Xr].container.insertBefore(st,an):this.threeDElements[Xr].container.appendChild(st);break}Xr+=1}},HybridRendererBase.prototype.configAnimation=function(st){var Mt=createTag("div"),Xr=this.animationItem.wrapper,rn=Mt.style;rn.width=st.w+"px",rn.height=st.h+"px",this.resizerElem=Mt,styleDiv(Mt),rn.transformStyle="flat",rn.mozTransformStyle="flat",rn.webkitTransformStyle="flat",this.renderConfig.className&&Mt.setAttribute("class",this.renderConfig.className),Xr.appendChild(Mt),rn.overflow="hidden";var nn=createNS("svg");nn.setAttribute("width","1"),nn.setAttribute("height","1"),styleDiv(nn),this.resizerElem.appendChild(nn);var an=createNS("defs");nn.appendChild(an),this.data=st,this.setupGlobalData(st,nn),this.globalData.defs=an,this.layers=st.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var st,Mt=this.layers?this.layers.length:0;for(st=0;st<Mt;st+=1)this.elements[st]&&this.elements[st].destroy&&this.elements[st].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var st=this.animationItem.wrapper.offsetWidth,Mt=this.animationItem.wrapper.offsetHeight,Xr=st/Mt,rn=this.globalData.compSize.w/this.globalData.compSize.h,nn,an,on,sn;rn>Xr?(nn=st/this.globalData.compSize.w,an=st/this.globalData.compSize.w,on=0,sn=(Mt-this.globalData.compSize.h*(st/this.globalData.compSize.w))/2):(nn=Mt/this.globalData.compSize.h,an=Mt/this.globalData.compSize.h,on=(st-this.globalData.compSize.w*(Mt/this.globalData.compSize.h))/2,sn=0);var ln=this.resizerElem.style;ln.webkitTransform="matrix3d("+nn+",0,0,0,0,"+an+",0,0,0,0,1,0,"+on+","+sn+",0,1)",ln.transform=ln.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var st=this.globalData.compSize.w,Mt=this.globalData.compSize.h,Xr,rn=this.threeDElements.length;for(Xr=0;Xr<rn;Xr+=1){var nn=this.threeDElements[Xr].perspectiveElem.style;nn.webkitPerspective=Math.sqrt(Math.pow(st,2)+Math.pow(Mt,2))+"px",nn.perspective=nn.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(st){var Mt,Xr=st.length,rn=createTag("div");for(Mt=0;Mt<Xr;Mt+=1)if(st[Mt].xt){var nn=this.createComp(st[Mt],rn,this.globalData.comp,null);nn.initExpressions(),this.globalData.projectInterface.registerComposition(nn)}};function HCompElement(st,Mt,Xr){this.layers=st.layers,this.supports3d=!st.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(st,Mt,Xr),this.tm=st.tm?PropertyFactory.getProp(this,st.tm,0,Mt.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(st,Mt){for(var Xr=0,rn;Xr<Mt;)this.elements[Xr]&&this.elements[Xr].getBaseElement&&(rn=this.elements[Xr].getBaseElement()),Xr+=1;rn?this.layerElement.insertBefore(st,rn):this.layerElement.appendChild(st)},HCompElement.prototype.createComp=function(st){return this.supports3d?new HCompElement(st,this.globalData,this):new SVGCompElement(st,this.globalData,this)};function HybridRenderer(st,Mt){this.animationItem=st,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:Mt&&Mt.className||"",imagePreserveAspectRatio:Mt&&Mt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(Mt&&Mt.hideOnTransparent===!1),filterSize:{width:Mt&&Mt.filterSize&&Mt.filterSize.width||"400%",height:Mt&&Mt.filterSize&&Mt.filterSize.height||"400%",x:Mt&&Mt.filterSize&&Mt.filterSize.x||"-100%",y:Mt&&Mt.filterSize&&Mt.filterSize.y||"-100%"},runExpressions:!Mt||Mt.runExpressions===void 0||Mt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(st){return this.supports3d?new HCompElement(st,this.globalData,this):new SVGCompElement(st,this.globalData,this)};var CompExpressionInterface=function(){return function(st){function Mt(Xr){for(var rn=0,nn=st.layers.length;rn<nn;){if(st.layers[rn].nm===Xr||st.layers[rn].ind===Xr)return st.elements[rn].layerInterface;rn+=1}return null}return Object.defineProperty(Mt,"_name",{value:st.data.nm}),Mt.layer=Mt,Mt.pixelAspect=1,Mt.height=st.data.h||st.globalData.compSize.h,Mt.width=st.data.w||st.globalData.compSize.w,Mt.pixelAspect=1,Mt.frameDuration=1/st.globalData.frameRate,Mt.displayStartTime=0,Mt.numLayers=st.layers.length,Mt}}();function _typeof$2(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(Xr){return typeof Xr}:_typeof$2=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$2(st)}function seedRandom(st,Mt){var Xr=this,rn=256,nn=6,an=52,on="random",sn=Mt.pow(rn,nn),ln=Mt.pow(2,an),un=ln*2,cn=rn-1,hn;function fn(fo,mo,_d){var ep=[];mo=mo===!0?{entropy:!0}:mo||{};var rp=Uo(co(mo.entropy?[fo,ho(st)]:fo===null?lo():fo,3),ep),ap=new to(ep),sp=function(){for(var pp=ap.g(nn),hp=sn,vp=0;pp<ln;)pp=(pp+vp)*rn,hp*=rn,vp=ap.g(1);for(;pp>=un;)pp/=2,hp/=2,vp>>>=1;return(pp+vp)/hp};return sp.int32=function(){return ap.g(4)|0},sp.quick=function(){return ap.g(4)/4294967296},sp.double=sp,Uo(ho(ap.S),st),(mo.pass||_d||function(up,pp,hp,vp){return vp&&(vp.S&&uo(vp,ap),up.state=function(){return uo(ap,{})}),hp?(Mt[on]=up,pp):up})(sp,rp,"global"in mo?mo.global:this==Mt,mo.state)}Mt["seed"+on]=fn;function to(fo){var mo,_d=fo.length,ep=this,rp=0,ap=ep.i=ep.j=0,sp=ep.S=[];for(_d||(fo=[_d++]);rp<rn;)sp[rp]=rp++;for(rp=0;rp<rn;rp++)sp[rp]=sp[ap=cn&ap+fo[rp%_d]+(mo=sp[rp])],sp[ap]=mo;ep.g=function(up){for(var pp,hp=0,vp=ep.i,gp=ep.j,mp=ep.S;up--;)pp=mp[vp=cn&vp+1],hp=hp*rn+mp[cn&(mp[vp]=mp[gp=cn&gp+pp])+(mp[gp]=pp)];return ep.i=vp,ep.j=gp,hp}}function uo(fo,mo){return mo.i=fo.i,mo.j=fo.j,mo.S=fo.S.slice(),mo}function co(fo,mo){var _d=[],ep=_typeof$2(fo),rp;if(mo&&ep=="object")for(rp in fo)try{_d.push(co(fo[rp],mo-1))}catch{}return _d.length?_d:ep=="string"?fo:fo+"\0"}function Uo(fo,mo){for(var _d=fo+"",ep,rp=0;rp<_d.length;)mo[cn&rp]=cn&(ep^=mo[cn&rp]*19)+_d.charCodeAt(rp++);return ho(mo)}function lo(){try{var fo=new Uint8Array(rn);return(Xr.crypto||Xr.msCrypto).getRandomValues(fo),ho(fo)}catch{var mo=Xr.navigator,_d=mo&&mo.plugins;return[+new Date,Xr,_d,Xr.screen,ho(st)]}}function ho(fo){return String.fromCharCode.apply(0,fo)}Uo(Mt.random(),st)}function initialize$2(st){seedRandom([],st)}var propTypes={SHAPE:"shape"};function _typeof$1(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(Xr){return typeof Xr}:_typeof$1=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof$1(st)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(st){return st.constructor===Array||st.constructor===Float32Array}function isNumerable(st,Mt){return st==="number"||Mt instanceof Number||st==="boolean"||st==="string"}function $bm_neg(st){var Mt=_typeof$1(st);if(Mt==="number"||st instanceof Number||Mt==="boolean")return-st;if($bm_isInstanceOfArray(st)){var Xr,rn=st.length,nn=[];for(Xr=0;Xr<rn;Xr+=1)nn[Xr]=-st[Xr];return nn}return st.propType?st.v:-st}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(st,Mt){var Xr=_typeof$1(st),rn=_typeof$1(Mt);if(isNumerable(Xr,st)&&isNumerable(rn,Mt)||Xr==="string"||rn==="string")return st+Mt;if($bm_isInstanceOfArray(st)&&isNumerable(rn,Mt))return st=st.slice(0),st[0]+=Mt,st;if(isNumerable(Xr,st)&&$bm_isInstanceOfArray(Mt))return Mt=Mt.slice(0),Mt[0]=st+Mt[0],Mt;if($bm_isInstanceOfArray(st)&&$bm_isInstanceOfArray(Mt)){for(var nn=0,an=st.length,on=Mt.length,sn=[];nn<an||nn<on;)(typeof st[nn]=="number"||st[nn]instanceof Number)&&(typeof Mt[nn]=="number"||Mt[nn]instanceof Number)?sn[nn]=st[nn]+Mt[nn]:sn[nn]=Mt[nn]===void 0?st[nn]:st[nn]||Mt[nn],nn+=1;return sn}return 0}var add=sum;function sub(st,Mt){var Xr=_typeof$1(st),rn=_typeof$1(Mt);if(isNumerable(Xr,st)&&isNumerable(rn,Mt))return Xr==="string"&&(st=parseInt(st,10)),rn==="string"&&(Mt=parseInt(Mt,10)),st-Mt;if($bm_isInstanceOfArray(st)&&isNumerable(rn,Mt))return st=st.slice(0),st[0]-=Mt,st;if(isNumerable(Xr,st)&&$bm_isInstanceOfArray(Mt))return Mt=Mt.slice(0),Mt[0]=st-Mt[0],Mt;if($bm_isInstanceOfArray(st)&&$bm_isInstanceOfArray(Mt)){for(var nn=0,an=st.length,on=Mt.length,sn=[];nn<an||nn<on;)(typeof st[nn]=="number"||st[nn]instanceof Number)&&(typeof Mt[nn]=="number"||Mt[nn]instanceof Number)?sn[nn]=st[nn]-Mt[nn]:sn[nn]=Mt[nn]===void 0?st[nn]:st[nn]||Mt[nn],nn+=1;return sn}return 0}function mul(st,Mt){var Xr=_typeof$1(st),rn=_typeof$1(Mt),nn;if(isNumerable(Xr,st)&&isNumerable(rn,Mt))return st*Mt;var an,on;if($bm_isInstanceOfArray(st)&&isNumerable(rn,Mt)){for(on=st.length,nn=createTypedArray("float32",on),an=0;an<on;an+=1)nn[an]=st[an]*Mt;return nn}if(isNumerable(Xr,st)&&$bm_isInstanceOfArray(Mt)){for(on=Mt.length,nn=createTypedArray("float32",on),an=0;an<on;an+=1)nn[an]=st*Mt[an];return nn}return 0}function div(st,Mt){var Xr=_typeof$1(st),rn=_typeof$1(Mt),nn;if(isNumerable(Xr,st)&&isNumerable(rn,Mt))return st/Mt;var an,on;if($bm_isInstanceOfArray(st)&&isNumerable(rn,Mt)){for(on=st.length,nn=createTypedArray("float32",on),an=0;an<on;an+=1)nn[an]=st[an]/Mt;return nn}if(isNumerable(Xr,st)&&$bm_isInstanceOfArray(Mt)){for(on=Mt.length,nn=createTypedArray("float32",on),an=0;an<on;an+=1)nn[an]=st/Mt[an];return nn}return 0}function mod(st,Mt){return typeof st=="string"&&(st=parseInt(st,10)),typeof Mt=="string"&&(Mt=parseInt(Mt,10)),st%Mt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(st,Mt,Xr){if(Mt>Xr){var rn=Xr;Xr=Mt,Mt=rn}return Math.min(Math.max(st,Mt),Xr)}function radiansToDegrees(st){return st/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(st){return st*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(st,Mt){if(typeof st=="number"||st instanceof Number)return Mt=Mt||0,Math.abs(st-Mt);Mt||(Mt=helperLengthArray);var Xr,rn=Math.min(st.length,Mt.length),nn=0;for(Xr=0;Xr<rn;Xr+=1)nn+=Math.pow(Mt[Xr]-st[Xr],2);return Math.sqrt(nn)}function normalize(st){return div(st,length(st))}function rgbToHsl(st){var Mt=st[0],Xr=st[1],rn=st[2],nn=Math.max(Mt,Xr,rn),an=Math.min(Mt,Xr,rn),on,sn,ln=(nn+an)/2;if(nn===an)on=0,sn=0;else{var un=nn-an;switch(sn=ln>.5?un/(2-nn-an):un/(nn+an),nn){case Mt:on=(Xr-rn)/un+(Xr<rn?6:0);break;case Xr:on=(rn-Mt)/un+2;break;case rn:on=(Mt-Xr)/un+4;break}on/=6}return[on,sn,ln,st[3]]}function hue2rgb(st,Mt,Xr){return Xr<0&&(Xr+=1),Xr>1&&(Xr-=1),Xr<1/6?st+(Mt-st)*6*Xr:Xr<1/2?Mt:Xr<2/3?st+(Mt-st)*(2/3-Xr)*6:st}function hslToRgb(st){var Mt=st[0],Xr=st[1],rn=st[2],nn,an,on;if(Xr===0)nn=rn,on=rn,an=rn;else{var sn=rn<.5?rn*(1+Xr):rn+Xr-rn*Xr,ln=2*rn-sn;nn=hue2rgb(ln,sn,Mt+1/3),an=hue2rgb(ln,sn,Mt),on=hue2rgb(ln,sn,Mt-1/3)}return[nn,an,on,st[3]]}function linear(st,Mt,Xr,rn,nn){if((rn===void 0||nn===void 0)&&(rn=Mt,nn=Xr,Mt=0,Xr=1),Xr<Mt){var an=Xr;Xr=Mt,Mt=an}if(st<=Mt)return rn;if(st>=Xr)return nn;var on=Xr===Mt?0:(st-Mt)/(Xr-Mt);if(!rn.length)return rn+(nn-rn)*on;var sn,ln=rn.length,un=createTypedArray("float32",ln);for(sn=0;sn<ln;sn+=1)un[sn]=rn[sn]+(nn[sn]-rn[sn])*on;return un}function random(st,Mt){if(Mt===void 0&&(st===void 0?(st=0,Mt=1):(Mt=st,st=void 0)),Mt.length){var Xr,rn=Mt.length;st||(st=createTypedArray("float32",rn));var nn=createTypedArray("float32",rn),an=BMMath.random();for(Xr=0;Xr<rn;Xr+=1)nn[Xr]=st[Xr]+an*(Mt[Xr]-st[Xr]);return nn}st===void 0&&(st=0);var on=BMMath.random();return st+on*(Mt-st)}function createPath(st,Mt,Xr,rn){var nn,an=st.length,on=shapePool.newElement();on.setPathData(!!rn,an);var sn=[0,0],ln,un;for(nn=0;nn<an;nn+=1)ln=Mt&&Mt[nn]?Mt[nn]:sn,un=Xr&&Xr[nn]?Xr[nn]:sn,on.setTripleAt(st[nn][0],st[nn][1],un[0]+st[nn][0],un[1]+st[nn][1],ln[0]+st[nn][0],ln[1]+st[nn][1],nn,!0);return on}function initiateExpression(elem,data,property){function noOp(st){return st}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function st(Mt,Xr){var rn,nn,an=this.pv.length?this.pv.length:1,on=createTypedArray("float32",an);Mt=5;var sn=Math.floor(time*Mt);for(rn=0,nn=0;rn<sn;){for(nn=0;nn<an;nn+=1)on[nn]+=-Xr+Xr*2*BMMath.random();rn+=1}var ln=time*Mt,un=ln-Math.floor(ln),cn=createTypedArray("float32",an);if(an>1){for(nn=0;nn<an;nn+=1)cn[nn]=this.pv[nn]+on[nn]+(-Xr+Xr*2*BMMath.random())*un;return cn}return this.pv+on[0]+(-Xr+Xr*2*BMMath.random())*un}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(st,Mt){return loopIn(st,Mt,!0)}function loopOutDuration(st,Mt){return loopOut(st,Mt,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(st,Mt){var Xr=[Mt[0]-st[0],Mt[1]-st[1],Mt[2]-st[2]],rn=Math.atan2(Xr[0],Math.sqrt(Xr[1]*Xr[1]+Xr[2]*Xr[2]))/degToRads,nn=-Math.atan2(Xr[1],Xr[2])/degToRads;return[nn,rn,0]}function easeOut(st,Mt,Xr,rn,nn){return applyEase(easeOutBez,st,Mt,Xr,rn,nn)}function easeIn(st,Mt,Xr,rn,nn){return applyEase(easeInBez,st,Mt,Xr,rn,nn)}function ease(st,Mt,Xr,rn,nn){return applyEase(easeInOutBez,st,Mt,Xr,rn,nn)}function applyEase(st,Mt,Xr,rn,nn,an){nn===void 0?(nn=Xr,an=rn):Mt=(Mt-Xr)/(rn-Xr),Mt>1?Mt=1:Mt<0&&(Mt=0);var on=st(Mt);if($bm_isInstanceOfArray(nn)){var sn,ln=nn.length,un=createTypedArray("float32",ln);for(sn=0;sn<ln;sn+=1)un[sn]=(an[sn]-nn[sn])*on+nn[sn];return un}return(an-nn)*on+nn}function nearestKey(st){var Mt,Xr=data.k.length,rn,nn;if(!data.k.length||typeof data.k[0]=="number")rn=0,nn=0;else if(rn=-1,st*=elem.comp.globalData.frameRate,st<data.k[0].t)rn=1,nn=data.k[0].t;else{for(Mt=0;Mt<Xr-1;Mt+=1)if(st===data.k[Mt].t){rn=Mt+1,nn=data.k[Mt].t;break}else if(st>data.k[Mt].t&&st<data.k[Mt+1].t){st-data.k[Mt].t>data.k[Mt+1].t-st?(rn=Mt+2,nn=data.k[Mt+1].t):(rn=Mt+1,nn=data.k[Mt].t);break}rn===-1&&(rn=Mt+1,nn=data.k[Mt].t)}var an={};return an.index=rn,an.time=nn/elem.comp.globalData.frameRate,an}function key(st){var Mt,Xr,rn;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+st);st-=1,Mt={time:data.k[st].t/elem.comp.globalData.frameRate,value:[]};var nn=Object.prototype.hasOwnProperty.call(data.k[st],"s")?data.k[st].s:data.k[st-1].e;for(rn=nn.length,Xr=0;Xr<rn;Xr+=1)Mt[Xr]=nn[Xr],Mt.value[Xr]=nn[Xr];return Mt}function framesToTime(st,Mt){return Mt||(Mt=elem.comp.globalData.frameRate),st/Mt}function timeToFrames(st,Mt){return!st&&st!==0&&(st=time),Mt||(Mt=elem.comp.globalData.frameRate),st*Mt}function seedRandom(st){BMMath.seedrandom(randSeed+st)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(st,Mt){return typeof value=="string"?Mt===void 0?value.substring(st):value.substring(st,Mt):""}function substr(st,Mt){return typeof value=="string"?Mt===void 0?value.substr(st):value.substr(st,Mt):""}function posterizeTime(st){time=st===0?0:Math.floor(time*st)/st,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(st){return value=st,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var st={};st.initExpressions=Mt,st.resetFrame=ExpressionManager.resetFrame;function Mt(Xr){var rn=0,nn=[];function an(){rn+=1}function on(){rn-=1,rn===0&&ln()}function sn(un){nn.indexOf(un)===-1&&nn.push(un)}function ln(){var un,cn=nn.length;for(un=0;un<cn;un+=1)nn[un].release();nn.length=0}Xr.renderer.compInterface=CompExpressionInterface(Xr.renderer),Xr.renderer.globalData.projectInterface.registerComposition(Xr.renderer),Xr.renderer.globalData.pushExpression=an,Xr.renderer.globalData.popExpression=on,Xr.renderer.globalData.registerExpressionProperty=sn}return st}(),MaskManagerInterface=function(){function st(Xr,rn){this._mask=Xr,this._data=rn}Object.defineProperty(st.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(st.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var Mt=function(rn){var nn=createSizedArray(rn.viewData.length),an,on=rn.viewData.length;for(an=0;an<on;an+=1)nn[an]=new st(rn.viewData[an],rn.masksProperties[an]);var sn=function(un){for(an=0;an<on;){if(rn.masksProperties[an].nm===un)return nn[an];an+=1}return null};return sn};return Mt}(),ExpressionPropertyInterface=function(){var st={pv:0,v:0,mult:1},Mt={pv:[0,0,0],v:[0,0,0],mult:1};function Xr(on,sn,ln){Object.defineProperty(on,"velocity",{get:function(){return sn.getVelocityAtTime(sn.comp.currentFrame)}}),on.numKeys=sn.keyframes?sn.keyframes.length:0,on.key=function(un){if(!on.numKeys)return 0;var cn="";"s"in sn.keyframes[un-1]?cn=sn.keyframes[un-1].s:"e"in sn.keyframes[un-2]?cn=sn.keyframes[un-2].e:cn=sn.keyframes[un-2].s;var hn=ln==="unidimensional"?new Number(cn):Object.assign({},cn);return hn.time=sn.keyframes[un-1].t/sn.elem.comp.globalData.frameRate,hn.value=ln==="unidimensional"?cn[0]:cn,hn},on.valueAtTime=sn.getValueAtTime,on.speedAtTime=sn.getSpeedAtTime,on.velocityAtTime=sn.getVelocityAtTime,on.propertyGroup=sn.propertyGroup}function rn(on){(!on||!("pv"in on))&&(on=st);var sn=1/on.mult,ln=on.pv*sn,un=new Number(ln);return un.value=ln,Xr(un,on,"unidimensional"),function(){return on.k&&on.getValue(),ln=on.v*sn,un.value!==ln&&(un=new Number(ln),un.value=ln,Xr(un,on,"unidimensional")),un}}function nn(on){(!on||!("pv"in on))&&(on=Mt);var sn=1/on.mult,ln=on.data&&on.data.l||on.pv.length,un=createTypedArray("float32",ln),cn=createTypedArray("float32",ln);return un.value=cn,Xr(un,on,"multidimensional"),function(){on.k&&on.getValue();for(var hn=0;hn<ln;hn+=1)cn[hn]=on.v[hn]*sn,un[hn]=cn[hn];return un}}function an(){return st}return function(on){return on?on.propType==="unidimensional"?rn(on):nn(on):an}}(),TransformExpressionInterface=function(){return function(st){function Mt(on){switch(on){case"scale":case"Scale":case"ADBE Scale":case 6:return Mt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return Mt.rotation;case"ADBE Rotate X":return Mt.xRotation;case"ADBE Rotate Y":return Mt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return Mt.position;case"ADBE Position_0":return Mt.xPosition;case"ADBE Position_1":return Mt.yPosition;case"ADBE Position_2":return Mt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return Mt.anchorPoint;case"opacity":case"Opacity":case 11:return Mt.opacity;default:return null}}Object.defineProperty(Mt,"rotation",{get:ExpressionPropertyInterface(st.r||st.rz)}),Object.defineProperty(Mt,"zRotation",{get:ExpressionPropertyInterface(st.rz||st.r)}),Object.defineProperty(Mt,"xRotation",{get:ExpressionPropertyInterface(st.rx)}),Object.defineProperty(Mt,"yRotation",{get:ExpressionPropertyInterface(st.ry)}),Object.defineProperty(Mt,"scale",{get:ExpressionPropertyInterface(st.s)});var Xr,rn,nn,an;return st.p?an=ExpressionPropertyInterface(st.p):(Xr=ExpressionPropertyInterface(st.px),rn=ExpressionPropertyInterface(st.py),st.pz&&(nn=ExpressionPropertyInterface(st.pz))),Object.defineProperty(Mt,"position",{get:function(){return st.p?an():[Xr(),rn(),nn?nn():0]}}),Object.defineProperty(Mt,"xPosition",{get:ExpressionPropertyInterface(st.px)}),Object.defineProperty(Mt,"yPosition",{get:ExpressionPropertyInterface(st.py)}),Object.defineProperty(Mt,"zPosition",{get:ExpressionPropertyInterface(st.pz)}),Object.defineProperty(Mt,"anchorPoint",{get:ExpressionPropertyInterface(st.a)}),Object.defineProperty(Mt,"opacity",{get:ExpressionPropertyInterface(st.o)}),Object.defineProperty(Mt,"skew",{get:ExpressionPropertyInterface(st.sk)}),Object.defineProperty(Mt,"skewAxis",{get:ExpressionPropertyInterface(st.sa)}),Object.defineProperty(Mt,"orientation",{get:ExpressionPropertyInterface(st.or)}),Mt}}(),LayerExpressionInterface=function(){function st(un){var cn=new Matrix;if(un!==void 0){var hn=this._elem.finalTransform.mProp.getValueAtTime(un);hn.clone(cn)}else{var fn=this._elem.finalTransform.mProp;fn.applyToMatrix(cn)}return cn}function Mt(un,cn){var hn=this.getMatrix(cn);return hn.props[12]=0,hn.props[13]=0,hn.props[14]=0,this.applyPoint(hn,un)}function Xr(un,cn){var hn=this.getMatrix(cn);return this.applyPoint(hn,un)}function rn(un,cn){var hn=this.getMatrix(cn);return hn.props[12]=0,hn.props[13]=0,hn.props[14]=0,this.invertPoint(hn,un)}function nn(un,cn){var hn=this.getMatrix(cn);return this.invertPoint(hn,un)}function an(un,cn){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hn,fn=this._elem.hierarchy.length;for(hn=0;hn<fn;hn+=1)this._elem.hierarchy[hn].finalTransform.mProp.applyToMatrix(un)}return un.applyToPointArray(cn[0],cn[1],cn[2]||0)}function on(un,cn){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hn,fn=this._elem.hierarchy.length;for(hn=0;hn<fn;hn+=1)this._elem.hierarchy[hn].finalTransform.mProp.applyToMatrix(un)}return un.inversePoint(cn)}function sn(un){var cn=new Matrix;if(cn.reset(),this._elem.finalTransform.mProp.applyToMatrix(cn),this._elem.hierarchy&&this._elem.hierarchy.length){var hn,fn=this._elem.hierarchy.length;for(hn=0;hn<fn;hn+=1)this._elem.hierarchy[hn].finalTransform.mProp.applyToMatrix(cn);return cn.inversePoint(un)}return cn.inversePoint(un)}function ln(){return[1,1,1,1]}return function(un){var cn;function hn(co){to.mask=new MaskManagerInterface(co,un)}function fn(co){to.effect=co}function to(co){switch(co){case"ADBE Root Vectors Group":case"Contents":case 2:return to.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return cn;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return to.effect;case"ADBE Text Properties":return to.textInterface;default:return null}}to.getMatrix=st,to.invertPoint=on,to.applyPoint=an,to.toWorld=Xr,to.toWorldVec=Mt,to.fromWorld=nn,to.fromWorldVec=rn,to.toComp=Xr,to.fromComp=sn,to.sampleImage=ln,to.sourceRectAtTime=un.sourceRectAtTime.bind(un),to._elem=un,cn=TransformExpressionInterface(un.finalTransform.mProp);var uo=getDescriptor(cn,"anchorPoint");return Object.defineProperties(to,{hasParent:{get:function(){return un.hierarchy.length}},parent:{get:function(){return un.hierarchy[0].layerInterface}},rotation:getDescriptor(cn,"rotation"),scale:getDescriptor(cn,"scale"),position:getDescriptor(cn,"position"),opacity:getDescriptor(cn,"opacity"),anchorPoint:uo,anchor_point:uo,transform:{get:function(){return cn}},active:{get:function(){return un.isInRange}}}),to.startTime=un.data.st,to.index=un.data.ind,to.source=un.data.refId,to.height=un.data.ty===0?un.data.h:100,to.width=un.data.ty===0?un.data.w:100,to.inPoint=un.data.ip/un.comp.globalData.frameRate,to.outPoint=un.data.op/un.comp.globalData.frameRate,to._name=un.data.nm,to.registerMaskInterface=hn,to.registerEffectsInterface=fn,to}}(),propertyGroupFactory=function(){return function(st,Mt){return function(Xr){return Xr=Xr===void 0?1:Xr,Xr<=0?st:Mt(Xr-1)}}}(),PropertyInterface=function(){return function(st,Mt){var Xr={_name:st};function rn(nn){return nn=nn===void 0?1:nn,nn<=0?Xr:Mt(nn-1)}return rn}}(),EffectsExpressionInterface=function(){var st={createEffectsInterface:Mt};function Mt(nn,an){if(nn.effectsManager){var on=[],sn=nn.data.ef,ln,un=nn.effectsManager.effectElements.length;for(ln=0;ln<un;ln+=1)on.push(Xr(sn[ln],nn.effectsManager.effectElements[ln],an,nn));var cn=nn.data.ef||[],hn=function(to){for(ln=0,un=cn.length;ln<un;){if(to===cn[ln].nm||to===cn[ln].mn||to===cn[ln].ix)return on[ln];ln+=1}return null};return Object.defineProperty(hn,"numProperties",{get:function(){return cn.length}}),hn}return null}function Xr(nn,an,on,sn){function ln(to){for(var uo=nn.ef,co=0,Uo=uo.length;co<Uo;){if(to===uo[co].nm||to===uo[co].mn||to===uo[co].ix)return uo[co].ty===5?cn[co]:cn[co]();co+=1}throw new Error}var un=propertyGroupFactory(ln,on),cn=[],hn,fn=nn.ef.length;for(hn=0;hn<fn;hn+=1)nn.ef[hn].ty===5?cn.push(Xr(nn.ef[hn],an.effectElements[hn],an.effectElements[hn].propertyGroup,sn)):cn.push(rn(an.effectElements[hn],nn.ef[hn].ty,sn,un));return nn.mn==="ADBE Color Control"&&Object.defineProperty(ln,"color",{get:function(){return cn[0]()}}),Object.defineProperties(ln,{numProperties:{get:function(){return nn.np}},_name:{value:nn.nm},propertyGroup:{value:un}}),ln.enabled=nn.en!==0,ln.active=ln.enabled,ln}function rn(nn,an,on,sn){var ln=ExpressionPropertyInterface(nn.p);function un(){return an===10?on.comp.compInterface(nn.p.v):ln()}return nn.p.setGroupProperty&&nn.p.setGroupProperty(PropertyInterface("",sn)),un}return st}(),ShapePathInterface=function(){return function(Mt,Xr,rn){var nn=Xr.sh;function an(sn){return sn==="Shape"||sn==="shape"||sn==="Path"||sn==="path"||sn==="ADBE Vector Shape"||sn===2?an.path:null}var on=propertyGroupFactory(an,rn);return nn.setGroupProperty(PropertyInterface("Path",on)),Object.defineProperties(an,{path:{get:function(){return nn.k&&nn.getValue(),nn}},shape:{get:function(){return nn.k&&nn.getValue(),nn}},_name:{value:Mt.nm},ix:{value:Mt.ix},propertyIndex:{value:Mt.ix},mn:{value:Mt.mn},propertyGroup:{value:rn}}),an}}(),ShapeExpressionInterface=function(){function st(uo,co,Uo){var lo=[],ho,fo=uo?uo.length:0;for(ho=0;ho<fo;ho+=1)uo[ho].ty==="gr"?lo.push(Xr(uo[ho],co[ho],Uo)):uo[ho].ty==="fl"?lo.push(rn(uo[ho],co[ho],Uo)):uo[ho].ty==="st"?lo.push(on(uo[ho],co[ho],Uo)):uo[ho].ty==="tm"?lo.push(sn(uo[ho],co[ho],Uo)):uo[ho].ty==="tr"||(uo[ho].ty==="el"?lo.push(un(uo[ho],co[ho],Uo)):uo[ho].ty==="sr"?lo.push(cn(uo[ho],co[ho],Uo)):uo[ho].ty==="sh"?lo.push(ShapePathInterface(uo[ho],co[ho],Uo)):uo[ho].ty==="rc"?lo.push(hn(uo[ho],co[ho],Uo)):uo[ho].ty==="rd"?lo.push(fn(uo[ho],co[ho],Uo)):uo[ho].ty==="rp"?lo.push(to(uo[ho],co[ho],Uo)):uo[ho].ty==="gf"?lo.push(nn(uo[ho],co[ho],Uo)):lo.push(an(uo[ho],co[ho])));return lo}function Mt(uo,co,Uo){var lo,ho=function(_d){for(var ep=0,rp=lo.length;ep<rp;){if(lo[ep]._name===_d||lo[ep].mn===_d||lo[ep].propertyIndex===_d||lo[ep].ix===_d||lo[ep].ind===_d)return lo[ep];ep+=1}return typeof _d=="number"?lo[_d-1]:null};ho.propertyGroup=propertyGroupFactory(ho,Uo),lo=st(uo.it,co.it,ho.propertyGroup),ho.numProperties=lo.length;var fo=ln(uo.it[uo.it.length-1],co.it[co.it.length-1],ho.propertyGroup);return ho.transform=fo,ho.propertyIndex=uo.cix,ho._name=uo.nm,ho}function Xr(uo,co,Uo){var lo=function(_d){switch(_d){case"ADBE Vectors Group":case"Contents":case 2:return lo.content;default:return lo.transform}};lo.propertyGroup=propertyGroupFactory(lo,Uo);var ho=Mt(uo,co,lo.propertyGroup),fo=ln(uo.it[uo.it.length-1],co.it[co.it.length-1],lo.propertyGroup);return lo.content=ho,lo.transform=fo,Object.defineProperty(lo,"_name",{get:function(){return uo.nm}}),lo.numProperties=uo.np,lo.propertyIndex=uo.ix,lo.nm=uo.nm,lo.mn=uo.mn,lo}function rn(uo,co,Uo){function lo(ho){return ho==="Color"||ho==="color"?lo.color:ho==="Opacity"||ho==="opacity"?lo.opacity:null}return Object.defineProperties(lo,{color:{get:ExpressionPropertyInterface(co.c)},opacity:{get:ExpressionPropertyInterface(co.o)},_name:{value:uo.nm},mn:{value:uo.mn}}),co.c.setGroupProperty(PropertyInterface("Color",Uo)),co.o.setGroupProperty(PropertyInterface("Opacity",Uo)),lo}function nn(uo,co,Uo){function lo(ho){return ho==="Start Point"||ho==="start point"?lo.startPoint:ho==="End Point"||ho==="end point"?lo.endPoint:ho==="Opacity"||ho==="opacity"?lo.opacity:null}return Object.defineProperties(lo,{startPoint:{get:ExpressionPropertyInterface(co.s)},endPoint:{get:ExpressionPropertyInterface(co.e)},opacity:{get:ExpressionPropertyInterface(co.o)},type:{get:function(){return"a"}},_name:{value:uo.nm},mn:{value:uo.mn}}),co.s.setGroupProperty(PropertyInterface("Start Point",Uo)),co.e.setGroupProperty(PropertyInterface("End Point",Uo)),co.o.setGroupProperty(PropertyInterface("Opacity",Uo)),lo}function an(){function uo(){return null}return uo}function on(uo,co,Uo){var lo=propertyGroupFactory(rp,Uo),ho=propertyGroupFactory(ep,lo);function fo(ap){Object.defineProperty(ep,uo.d[ap].nm,{get:ExpressionPropertyInterface(co.d.dataProps[ap].p)})}var mo,_d=uo.d?uo.d.length:0,ep={};for(mo=0;mo<_d;mo+=1)fo(mo),co.d.dataProps[mo].p.setGroupProperty(ho);function rp(ap){return ap==="Color"||ap==="color"?rp.color:ap==="Opacity"||ap==="opacity"?rp.opacity:ap==="Stroke Width"||ap==="stroke width"?rp.strokeWidth:null}return Object.defineProperties(rp,{color:{get:ExpressionPropertyInterface(co.c)},opacity:{get:ExpressionPropertyInterface(co.o)},strokeWidth:{get:ExpressionPropertyInterface(co.w)},dash:{get:function(){return ep}},_name:{value:uo.nm},mn:{value:uo.mn}}),co.c.setGroupProperty(PropertyInterface("Color",lo)),co.o.setGroupProperty(PropertyInterface("Opacity",lo)),co.w.setGroupProperty(PropertyInterface("Stroke Width",lo)),rp}function sn(uo,co,Uo){function lo(fo){return fo===uo.e.ix||fo==="End"||fo==="end"?lo.end:fo===uo.s.ix?lo.start:fo===uo.o.ix?lo.offset:null}var ho=propertyGroupFactory(lo,Uo);return lo.propertyIndex=uo.ix,co.s.setGroupProperty(PropertyInterface("Start",ho)),co.e.setGroupProperty(PropertyInterface("End",ho)),co.o.setGroupProperty(PropertyInterface("Offset",ho)),lo.propertyIndex=uo.ix,lo.propertyGroup=Uo,Object.defineProperties(lo,{start:{get:ExpressionPropertyInterface(co.s)},end:{get:ExpressionPropertyInterface(co.e)},offset:{get:ExpressionPropertyInterface(co.o)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}function ln(uo,co,Uo){function lo(fo){return uo.a.ix===fo||fo==="Anchor Point"?lo.anchorPoint:uo.o.ix===fo||fo==="Opacity"?lo.opacity:uo.p.ix===fo||fo==="Position"?lo.position:uo.r.ix===fo||fo==="Rotation"||fo==="ADBE Vector Rotation"?lo.rotation:uo.s.ix===fo||fo==="Scale"?lo.scale:uo.sk&&uo.sk.ix===fo||fo==="Skew"?lo.skew:uo.sa&&uo.sa.ix===fo||fo==="Skew Axis"?lo.skewAxis:null}var ho=propertyGroupFactory(lo,Uo);return co.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ho)),co.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ho)),co.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ho)),co.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ho)),co.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ho)),co.transform.mProps.sk&&(co.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ho)),co.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ho))),co.transform.op.setGroupProperty(PropertyInterface("Opacity",ho)),Object.defineProperties(lo,{opacity:{get:ExpressionPropertyInterface(co.transform.mProps.o)},position:{get:ExpressionPropertyInterface(co.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(co.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(co.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(co.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(co.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(co.transform.mProps.sa)},_name:{value:uo.nm}}),lo.ty="tr",lo.mn=uo.mn,lo.propertyGroup=Uo,lo}function un(uo,co,Uo){function lo(mo){return uo.p.ix===mo?lo.position:uo.s.ix===mo?lo.size:null}var ho=propertyGroupFactory(lo,Uo);lo.propertyIndex=uo.ix;var fo=co.sh.ty==="tm"?co.sh.prop:co.sh;return fo.s.setGroupProperty(PropertyInterface("Size",ho)),fo.p.setGroupProperty(PropertyInterface("Position",ho)),Object.defineProperties(lo,{size:{get:ExpressionPropertyInterface(fo.s)},position:{get:ExpressionPropertyInterface(fo.p)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}function cn(uo,co,Uo){function lo(mo){return uo.p.ix===mo?lo.position:uo.r.ix===mo?lo.rotation:uo.pt.ix===mo?lo.points:uo.or.ix===mo||mo==="ADBE Vector Star Outer Radius"?lo.outerRadius:uo.os.ix===mo?lo.outerRoundness:uo.ir&&(uo.ir.ix===mo||mo==="ADBE Vector Star Inner Radius")?lo.innerRadius:uo.is&&uo.is.ix===mo?lo.innerRoundness:null}var ho=propertyGroupFactory(lo,Uo),fo=co.sh.ty==="tm"?co.sh.prop:co.sh;return lo.propertyIndex=uo.ix,fo.or.setGroupProperty(PropertyInterface("Outer Radius",ho)),fo.os.setGroupProperty(PropertyInterface("Outer Roundness",ho)),fo.pt.setGroupProperty(PropertyInterface("Points",ho)),fo.p.setGroupProperty(PropertyInterface("Position",ho)),fo.r.setGroupProperty(PropertyInterface("Rotation",ho)),uo.ir&&(fo.ir.setGroupProperty(PropertyInterface("Inner Radius",ho)),fo.is.setGroupProperty(PropertyInterface("Inner Roundness",ho))),Object.defineProperties(lo,{position:{get:ExpressionPropertyInterface(fo.p)},rotation:{get:ExpressionPropertyInterface(fo.r)},points:{get:ExpressionPropertyInterface(fo.pt)},outerRadius:{get:ExpressionPropertyInterface(fo.or)},outerRoundness:{get:ExpressionPropertyInterface(fo.os)},innerRadius:{get:ExpressionPropertyInterface(fo.ir)},innerRoundness:{get:ExpressionPropertyInterface(fo.is)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}function hn(uo,co,Uo){function lo(mo){return uo.p.ix===mo?lo.position:uo.r.ix===mo?lo.roundness:uo.s.ix===mo||mo==="Size"||mo==="ADBE Vector Rect Size"?lo.size:null}var ho=propertyGroupFactory(lo,Uo),fo=co.sh.ty==="tm"?co.sh.prop:co.sh;return lo.propertyIndex=uo.ix,fo.p.setGroupProperty(PropertyInterface("Position",ho)),fo.s.setGroupProperty(PropertyInterface("Size",ho)),fo.r.setGroupProperty(PropertyInterface("Rotation",ho)),Object.defineProperties(lo,{position:{get:ExpressionPropertyInterface(fo.p)},roundness:{get:ExpressionPropertyInterface(fo.r)},size:{get:ExpressionPropertyInterface(fo.s)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}function fn(uo,co,Uo){function lo(mo){return uo.r.ix===mo||mo==="Round Corners 1"?lo.radius:null}var ho=propertyGroupFactory(lo,Uo),fo=co;return lo.propertyIndex=uo.ix,fo.rd.setGroupProperty(PropertyInterface("Radius",ho)),Object.defineProperties(lo,{radius:{get:ExpressionPropertyInterface(fo.rd)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}function to(uo,co,Uo){function lo(mo){return uo.c.ix===mo||mo==="Copies"?lo.copies:uo.o.ix===mo||mo==="Offset"?lo.offset:null}var ho=propertyGroupFactory(lo,Uo),fo=co;return lo.propertyIndex=uo.ix,fo.c.setGroupProperty(PropertyInterface("Copies",ho)),fo.o.setGroupProperty(PropertyInterface("Offset",ho)),Object.defineProperties(lo,{copies:{get:ExpressionPropertyInterface(fo.c)},offset:{get:ExpressionPropertyInterface(fo.o)},_name:{value:uo.nm}}),lo.mn=uo.mn,lo}return function(uo,co,Uo){var lo;function ho(mo){if(typeof mo=="number")return mo=mo===void 0?1:mo,mo===0?Uo:lo[mo-1];for(var _d=0,ep=lo.length;_d<ep;){if(lo[_d]._name===mo)return lo[_d];_d+=1}return null}function fo(){return Uo}return ho.propertyGroup=propertyGroupFactory(ho,fo),lo=st(uo,co,ho.propertyGroup),ho.numProperties=lo.length,ho._name="Contents",ho}}(),TextExpressionInterface=function(){return function(st){var Mt;function Xr(rn){switch(rn){case"ADBE Text Document":return Xr.sourceText;default:return null}}return Object.defineProperty(Xr,"sourceText",{get:function(){st.textProperty.getValue();var nn=st.textProperty.currentData.t;return(!Mt||nn!==Mt.value)&&(Mt=new String(nn),Mt.value=nn||new String(nn),Object.defineProperty(Mt,"style",{get:function(){return{fillColor:st.textProperty.currentData.fc}}})),Mt}}),Xr}}();function _typeof(st){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(Xr){return typeof Xr}:_typeof=function(Xr){return Xr&&typeof Symbol=="function"&&Xr.constructor===Symbol&&Xr!==Symbol.prototype?"symbol":typeof Xr},_typeof(st)}var FootageInterface=function(){var st=function(rn){var nn="",an=rn.getFootageData();function on(){return nn="",an=rn.getFootageData(),sn}function sn(ln){if(an[ln])return nn=ln,an=an[ln],_typeof(an)==="object"?sn:an;var un=ln.indexOf(nn);if(un!==-1){var cn=parseInt(ln.substr(un+nn.length),10);return an=an[cn],_typeof(an)==="object"?sn:an}return""}return on},Mt=function(rn){function nn(an){return an==="Outline"?nn.outlineInterface():null}return nn._name="Outline",nn.outlineInterface=st(rn),nn};return function(Xr){function rn(nn){return nn==="Data"?rn.dataInterface:null}return rn._name="Data",rn.dataInterface=Mt(Xr),rn}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(st){return interfaces[st]||null}var expressionHelpers=function(){function st(on,sn,ln){sn.x&&(ln.k=!0,ln.x=!0,ln.initiateExpression=ExpressionManager.initiateExpression,ln.effectsSequence.push(ln.initiateExpression(on,sn,ln).bind(ln)))}function Mt(on){return on*=this.elem.globalData.frameRate,on-=this.offsetTime,on!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<on?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(on,this._cachingAtTime),this._cachingAtTime.lastFrame=on),this._cachingAtTime.value}function Xr(on){var sn=-.01,ln=this.getValueAtTime(on),un=this.getValueAtTime(on+sn),cn=0;if(ln.length){var hn;for(hn=0;hn<ln.length;hn+=1)cn+=Math.pow(un[hn]-ln[hn],2);cn=Math.sqrt(cn)*100}else cn=0;return cn}function rn(on){if(this.vel!==void 0)return this.vel;var sn=-.001,ln=this.getValueAtTime(on),un=this.getValueAtTime(on+sn),cn;if(ln.length){cn=createTypedArray("float32",ln.length);var hn;for(hn=0;hn<ln.length;hn+=1)cn[hn]=(un[hn]-ln[hn])/sn}else cn=(un-ln)/sn;return cn}function nn(){return this.pv}function an(on){this.propertyGroup=on}return{searchExpressions:st,getSpeedAtTime:Xr,getVelocityAtTime:rn,getValueAtTime:Mt,getStaticValueAtTime:nn,setGroupProperty:an}}();function addPropertyDecorator(){function st(fn,to,uo){if(!this.k||!this.keyframes)return this.pv;fn=fn?fn.toLowerCase():"";var co=this.comp.renderedFrame,Uo=this.keyframes,lo=Uo[Uo.length-1].t;if(co<=lo)return this.pv;var ho,fo;uo?(to?ho=Math.abs(lo-this.elem.comp.globalData.frameRate*to):ho=Math.max(0,lo-this.elem.data.ip),fo=lo-ho):((!to||to>Uo.length-1)&&(to=Uo.length-1),fo=Uo[Uo.length-1-to].t,ho=lo-fo);var mo,_d,ep;if(fn==="pingpong"){var rp=Math.floor((co-fo)/ho);if(rp%2!==0)return this.getValueAtTime((ho-(co-fo)%ho+fo)/this.comp.globalData.frameRate,0)}else if(fn==="offset"){var ap=this.getValueAtTime(fo/this.comp.globalData.frameRate,0),sp=this.getValueAtTime(lo/this.comp.globalData.frameRate,0),up=this.getValueAtTime(((co-fo)%ho+fo)/this.comp.globalData.frameRate,0),pp=Math.floor((co-fo)/ho);if(this.pv.length){for(ep=new Array(ap.length),_d=ep.length,mo=0;mo<_d;mo+=1)ep[mo]=(sp[mo]-ap[mo])*pp+up[mo];return ep}return(sp-ap)*pp+up}else if(fn==="continue"){var hp=this.getValueAtTime(lo/this.comp.globalData.frameRate,0),vp=this.getValueAtTime((lo-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ep=new Array(hp.length),_d=ep.length,mo=0;mo<_d;mo+=1)ep[mo]=hp[mo]+(hp[mo]-vp[mo])*((co-lo)/this.comp.globalData.frameRate)/5e-4;return ep}return hp+(hp-vp)*((co-lo)/.001)}return this.getValueAtTime(((co-fo)%ho+fo)/this.comp.globalData.frameRate,0)}function Mt(fn,to,uo){if(!this.k)return this.pv;fn=fn?fn.toLowerCase():"";var co=this.comp.renderedFrame,Uo=this.keyframes,lo=Uo[0].t;if(co>=lo)return this.pv;var ho,fo;uo?(to?ho=Math.abs(this.elem.comp.globalData.frameRate*to):ho=Math.max(0,this.elem.data.op-lo),fo=lo+ho):((!to||to>Uo.length-1)&&(to=Uo.length-1),fo=Uo[to].t,ho=fo-lo);var mo,_d,ep;if(fn==="pingpong"){var rp=Math.floor((lo-co)/ho);if(rp%2===0)return this.getValueAtTime(((lo-co)%ho+lo)/this.comp.globalData.frameRate,0)}else if(fn==="offset"){var ap=this.getValueAtTime(lo/this.comp.globalData.frameRate,0),sp=this.getValueAtTime(fo/this.comp.globalData.frameRate,0),up=this.getValueAtTime((ho-(lo-co)%ho+lo)/this.comp.globalData.frameRate,0),pp=Math.floor((lo-co)/ho)+1;if(this.pv.length){for(ep=new Array(ap.length),_d=ep.length,mo=0;mo<_d;mo+=1)ep[mo]=up[mo]-(sp[mo]-ap[mo])*pp;return ep}return up-(sp-ap)*pp}else if(fn==="continue"){var hp=this.getValueAtTime(lo/this.comp.globalData.frameRate,0),vp=this.getValueAtTime((lo+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ep=new Array(hp.length),_d=ep.length,mo=0;mo<_d;mo+=1)ep[mo]=hp[mo]+(hp[mo]-vp[mo])*(lo-co)/.001;return ep}return hp+(hp-vp)*(lo-co)/.001}return this.getValueAtTime((ho-((lo-co)%ho+lo))/this.comp.globalData.frameRate,0)}function Xr(fn,to){if(!this.k)return this.pv;if(fn=(fn||.4)*.5,to=Math.floor(to||5),to<=1)return this.pv;var uo=this.comp.renderedFrame/this.comp.globalData.frameRate,co=uo-fn,Uo=uo+fn,lo=to>1?(Uo-co)/(to-1):1,ho=0,fo=0,mo;this.pv.length?mo=createTypedArray("float32",this.pv.length):mo=0;for(var _d;ho<to;){if(_d=this.getValueAtTime(co+ho*lo),this.pv.length)for(fo=0;fo<this.pv.length;fo+=1)mo[fo]+=_d[fo];else mo+=_d;ho+=1}if(this.pv.length)for(fo=0;fo<this.pv.length;fo+=1)mo[fo]/=to;else mo/=to;return mo}function rn(fn){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var to=this._transformCachingAtTime.v;if(to.cloneFromProps(this.pre.props),this.appliedTransformations<1){var uo=this.a.getValueAtTime(fn);to.translate(-uo[0]*this.a.mult,-uo[1]*this.a.mult,uo[2]*this.a.mult)}if(this.appliedTransformations<2){var co=this.s.getValueAtTime(fn);to.scale(co[0]*this.s.mult,co[1]*this.s.mult,co[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Uo=this.sk.getValueAtTime(fn),lo=this.sa.getValueAtTime(fn);to.skewFromAxis(-Uo*this.sk.mult,lo*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ho=this.r.getValueAtTime(fn);to.rotate(-ho*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var fo=this.rz.getValueAtTime(fn),mo=this.ry.getValueAtTime(fn),_d=this.rx.getValueAtTime(fn),ep=this.or.getValueAtTime(fn);to.rotateZ(-fo*this.rz.mult).rotateY(mo*this.ry.mult).rotateX(_d*this.rx.mult).rotateZ(-ep[2]*this.or.mult).rotateY(ep[1]*this.or.mult).rotateX(ep[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var rp=this.px.getValueAtTime(fn),ap=this.py.getValueAtTime(fn);if(this.data.p.z){var sp=this.pz.getValueAtTime(fn);to.translate(rp*this.px.mult,ap*this.py.mult,-sp*this.pz.mult)}else to.translate(rp*this.px.mult,ap*this.py.mult,0)}else{var up=this.p.getValueAtTime(fn);to.translate(up[0]*this.p.mult,up[1]*this.p.mult,-up[2]*this.p.mult)}return to}function nn(){return this.v.clone(new Matrix)}var an=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(fn,to,uo){var co=an(fn,to,uo);return co.dynamicProperties.length?co.getValueAtTime=rn.bind(co):co.getValueAtTime=nn.bind(co),co.setGroupProperty=expressionHelpers.setGroupProperty,co};var on=PropertyFactory.getProp;PropertyFactory.getProp=function(fn,to,uo,co,Uo){var lo=on(fn,to,uo,co,Uo);lo.kf?lo.getValueAtTime=expressionHelpers.getValueAtTime.bind(lo):lo.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(lo),lo.setGroupProperty=expressionHelpers.setGroupProperty,lo.loopOut=st,lo.loopIn=Mt,lo.smooth=Xr,lo.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(lo),lo.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(lo),lo.numKeys=to.a===1?to.k.length:0,lo.propertyIndex=to.ix;var ho=0;return uo!==0&&(ho=createTypedArray("float32",to.a===1?to.k[0].s.length:to.k.length)),lo._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ho},expressionHelpers.searchExpressions(fn,to,lo),lo.k&&Uo.addDynamicProperty(lo),lo};function sn(fn){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),fn*=this.elem.globalData.frameRate,fn-=this.offsetTime,fn!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<fn?this._caching.lastIndex:0,this._cachingAtTime.lastTime=fn,this.interpolateShape(fn,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ln=ShapePropertyFactory.getConstructorFunction(),un=ShapePropertyFactory.getKeyframedConstructorFunction();function cn(){}cn.prototype={vertices:function(to,uo){this.k&&this.getValue();var co=this.v;uo!==void 0&&(co=this.getValueAtTime(uo,0));var Uo,lo=co._length,ho=co[to],fo=co.v,mo=createSizedArray(lo);for(Uo=0;Uo<lo;Uo+=1)to==="i"||to==="o"?mo[Uo]=[ho[Uo][0]-fo[Uo][0],ho[Uo][1]-fo[Uo][1]]:mo[Uo]=[ho[Uo][0],ho[Uo][1]];return mo},points:function(to){return this.vertices("v",to)},inTangents:function(to){return this.vertices("i",to)},outTangents:function(to){return this.vertices("o",to)},isClosed:function(){return this.v.c},pointOnPath:function(to,uo){var co=this.v;uo!==void 0&&(co=this.getValueAtTime(uo,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(co));for(var Uo=this._segmentsLength,lo=Uo.lengths,ho=Uo.totalLength*to,fo=0,mo=lo.length,_d=0,ep;fo<mo;){if(_d+lo[fo].addedLength>ho){var rp=fo,ap=co.c&&fo===mo-1?0:fo+1,sp=(ho-_d)/lo[fo].addedLength;ep=bez.getPointInSegment(co.v[rp],co.v[ap],co.o[rp],co.i[ap],sp,lo[fo]);break}else _d+=lo[fo].addedLength;fo+=1}return ep||(ep=co.c?[co.v[0][0],co.v[0][1]]:[co.v[co._length-1][0],co.v[co._length-1][1]]),ep},vectorOnPath:function(to,uo,co){to==1?to=this.v.c:to==0&&(to=.999);var Uo=this.pointOnPath(to,uo),lo=this.pointOnPath(to+.001,uo),ho=lo[0]-Uo[0],fo=lo[1]-Uo[1],mo=Math.sqrt(Math.pow(ho,2)+Math.pow(fo,2));if(mo===0)return[0,0];var _d=co==="tangent"?[ho/mo,fo/mo]:[-fo/mo,ho/mo];return _d},tangentOnPath:function(to,uo){return this.vectorOnPath(to,uo,"tangent")},normalOnPath:function(to,uo){return this.vectorOnPath(to,uo,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([cn],ln),extendPrototype([cn],un),un.prototype.getValueAtTime=sn,un.prototype.initiateExpression=ExpressionManager.initiateExpression;var hn=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(fn,to,uo,co,Uo){var lo=hn(fn,to,uo,co,Uo);return lo.propertyIndex=to.ix,lo.lock=!1,uo===3?expressionHelpers.searchExpressions(fn,to.pt,lo):uo===4&&expressionHelpers.searchExpressions(fn,to.ks,lo),lo.k&&fn.addDynamicProperty(lo),lo}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function st(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(Mt,Xr){var rn=this.calculateExpression(Xr);if(Mt.t!==rn){var nn={};return this.copyData(nn,Mt),nn.t=rn.toString(),nn.__complete=!1,nn}return Mt},TextProperty.prototype.searchProperty=function(){var Mt=this.searchKeyframes(),Xr=this.searchExpressions();return this.kf=Mt||Xr,this.kf},TextProperty.prototype.searchExpressions=st}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function st(Mt,Xr){var rn=createNS("feMerge");rn.setAttribute("result",Mt);var nn,an;for(an=0;an<Xr.length;an+=1)nn=createNS("feMergeNode"),nn.setAttribute("in",Xr[an]),rn.appendChild(nn),rn.appendChild(nn);return rn}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(st,Mt,Xr,rn,nn){this.filterManager=Mt;var an=createNS("feColorMatrix");an.setAttribute("type","matrix"),an.setAttribute("color-interpolation-filters","linearRGB"),an.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=an,an.setAttribute("result",rn+"_tint_1"),st.appendChild(an),an=createNS("feColorMatrix"),an.setAttribute("type","matrix"),an.setAttribute("color-interpolation-filters","sRGB"),an.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),an.setAttribute("result",rn+"_tint_2"),st.appendChild(an),this.matrixFilter=an;var on=this.createMergeNode(rn,[nn,rn+"_tint_1",rn+"_tint_2"]);st.appendChild(on)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){var Mt=this.filterManager.effectElements[0].p.v,Xr=this.filterManager.effectElements[1].p.v,rn=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+rn+" 0"),this.matrixFilter.setAttribute("values",Xr[0]-Mt[0]+" 0 0 0 "+Mt[0]+" "+(Xr[1]-Mt[1])+" 0 0 0 "+Mt[1]+" "+(Xr[2]-Mt[2])+" 0 0 0 "+Mt[2]+" 0 0 0 1 0")}};function SVGFillFilter(st,Mt,Xr,rn){this.filterManager=Mt;var nn=createNS("feColorMatrix");nn.setAttribute("type","matrix"),nn.setAttribute("color-interpolation-filters","sRGB"),nn.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),nn.setAttribute("result",rn),st.appendChild(nn),this.matrixFilter=nn}SVGFillFilter.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){var Mt=this.filterManager.effectElements[2].p.v,Xr=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+Mt[0]+" 0 0 0 0 "+Mt[1]+" 0 0 0 0 "+Mt[2]+" 0 0 0 "+Xr+" 0")}};function SVGStrokeEffect(st,Mt,Xr){this.initialized=!1,this.filterManager=Mt,this.elem=Xr,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var st=this.elem.layerElement.children||this.elem.layerElement.childNodes,Mt,Xr,rn,nn;for(this.filterManager.effectElements[1].p.v===1?(nn=this.elem.maskManager.masksProperties.length,rn=0):(rn=this.filterManager.effectElements[0].p.v-1,nn=rn+1),Xr=createNS("g"),Xr.setAttribute("fill","none"),Xr.setAttribute("stroke-linecap","round"),Xr.setAttribute("stroke-dashoffset",1),rn;rn<nn;rn+=1)Mt=createNS("path"),Xr.appendChild(Mt),this.paths.push({p:Mt,m:rn});if(this.filterManager.effectElements[10].p.v===3){var an=createNS("mask"),on=createElementID();an.setAttribute("id",on),an.setAttribute("mask-type","alpha"),an.appendChild(Xr),this.elem.globalData.defs.appendChild(an);var sn=createNS("g");for(sn.setAttribute("mask","url("+getLocationHref()+"#"+on+")");st[0];)sn.appendChild(st[0]);this.elem.layerElement.appendChild(sn),this.masker=an,Xr.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(st=this.elem.layerElement.children||this.elem.layerElement.childNodes;st.length;)this.elem.layerElement.removeChild(st[0]);this.elem.layerElement.appendChild(Xr),this.elem.layerElement.removeAttribute("mask"),Xr.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=Xr},SVGStrokeEffect.prototype.renderFrame=function(st){this.initialized||this.initialize();var Mt,Xr=this.paths.length,rn,nn;for(Mt=0;Mt<Xr;Mt+=1)if(this.paths[Mt].m!==-1&&(rn=this.elem.maskManager.viewData[this.paths[Mt].m],nn=this.paths[Mt].p,(st||this.filterManager._mdf||rn.prop._mdf)&&nn.setAttribute("d",rn.lastPath),st||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||rn.prop._mdf)){var an;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var on=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,sn=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ln=nn.getTotalLength();an="0 0 0 "+ln*on+" ";var un=ln*(sn-on),cn=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,hn=Math.floor(un/cn),fn;for(fn=0;fn<hn;fn+=1)an+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";an+="0 "+ln*10+" 0 0"}else an="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;nn.setAttribute("stroke-dasharray",an)}if((st||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(st||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(st||this.filterManager.effectElements[3].p._mdf)){var to=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(to[0]*255)+","+bmFloor(to[1]*255)+","+bmFloor(to[2]*255)+")")}};function SVGTritoneFilter(st,Mt,Xr,rn){this.filterManager=Mt;var nn=createNS("feColorMatrix");nn.setAttribute("type","matrix"),nn.setAttribute("color-interpolation-filters","linearRGB"),nn.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),st.appendChild(nn);var an=createNS("feComponentTransfer");an.setAttribute("color-interpolation-filters","sRGB"),an.setAttribute("result",rn),this.matrixFilter=an;var on=createNS("feFuncR");on.setAttribute("type","table"),an.appendChild(on),this.feFuncR=on;var sn=createNS("feFuncG");sn.setAttribute("type","table"),an.appendChild(sn),this.feFuncG=sn;var ln=createNS("feFuncB");ln.setAttribute("type","table"),an.appendChild(ln),this.feFuncB=ln,st.appendChild(an)}SVGTritoneFilter.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){var Mt=this.filterManager.effectElements[0].p.v,Xr=this.filterManager.effectElements[1].p.v,rn=this.filterManager.effectElements[2].p.v,nn=rn[0]+" "+Xr[0]+" "+Mt[0],an=rn[1]+" "+Xr[1]+" "+Mt[1],on=rn[2]+" "+Xr[2]+" "+Mt[2];this.feFuncR.setAttribute("tableValues",nn),this.feFuncG.setAttribute("tableValues",an),this.feFuncB.setAttribute("tableValues",on)}};function SVGProLevelsFilter(st,Mt,Xr,rn){this.filterManager=Mt;var nn=this.filterManager.effectElements,an=createNS("feComponentTransfer");(nn[10].p.k||nn[10].p.v!==0||nn[11].p.k||nn[11].p.v!==1||nn[12].p.k||nn[12].p.v!==1||nn[13].p.k||nn[13].p.v!==0||nn[14].p.k||nn[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",an)),(nn[17].p.k||nn[17].p.v!==0||nn[18].p.k||nn[18].p.v!==1||nn[19].p.k||nn[19].p.v!==1||nn[20].p.k||nn[20].p.v!==0||nn[21].p.k||nn[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",an)),(nn[24].p.k||nn[24].p.v!==0||nn[25].p.k||nn[25].p.v!==1||nn[26].p.k||nn[26].p.v!==1||nn[27].p.k||nn[27].p.v!==0||nn[28].p.k||nn[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",an)),(nn[31].p.k||nn[31].p.v!==0||nn[32].p.k||nn[32].p.v!==1||nn[33].p.k||nn[33].p.v!==1||nn[34].p.k||nn[34].p.v!==0||nn[35].p.k||nn[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",an)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(an.setAttribute("color-interpolation-filters","sRGB"),st.appendChild(an)),(nn[3].p.k||nn[3].p.v!==0||nn[4].p.k||nn[4].p.v!==1||nn[5].p.k||nn[5].p.v!==1||nn[6].p.k||nn[6].p.v!==0||nn[7].p.k||nn[7].p.v!==1)&&(an=createNS("feComponentTransfer"),an.setAttribute("color-interpolation-filters","sRGB"),an.setAttribute("result",rn),st.appendChild(an),this.feFuncRComposed=this.createFeFunc("feFuncR",an),this.feFuncGComposed=this.createFeFunc("feFuncG",an),this.feFuncBComposed=this.createFeFunc("feFuncB",an))}SVGProLevelsFilter.prototype.createFeFunc=function(st,Mt){var Xr=createNS(st);return Xr.setAttribute("type","table"),Mt.appendChild(Xr),Xr},SVGProLevelsFilter.prototype.getTableValue=function(st,Mt,Xr,rn,nn){for(var an=0,on=256,sn,ln=Math.min(st,Mt),un=Math.max(st,Mt),cn=Array.call(null,{length:on}),hn,fn=0,to=nn-rn,uo=Mt-st;an<=256;)sn=an/256,sn<=ln?hn=uo<0?nn:rn:sn>=un?hn=uo<0?rn:nn:hn=rn+to*Math.pow((sn-st)/uo,1/Xr),cn[fn]=hn,fn+=1,an+=256/(on-1);return cn.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){var Mt,Xr=this.filterManager.effectElements;this.feFuncRComposed&&(st||Xr[3].p._mdf||Xr[4].p._mdf||Xr[5].p._mdf||Xr[6].p._mdf||Xr[7].p._mdf)&&(Mt=this.getTableValue(Xr[3].p.v,Xr[4].p.v,Xr[5].p.v,Xr[6].p.v,Xr[7].p.v),this.feFuncRComposed.setAttribute("tableValues",Mt),this.feFuncGComposed.setAttribute("tableValues",Mt),this.feFuncBComposed.setAttribute("tableValues",Mt)),this.feFuncR&&(st||Xr[10].p._mdf||Xr[11].p._mdf||Xr[12].p._mdf||Xr[13].p._mdf||Xr[14].p._mdf)&&(Mt=this.getTableValue(Xr[10].p.v,Xr[11].p.v,Xr[12].p.v,Xr[13].p.v,Xr[14].p.v),this.feFuncR.setAttribute("tableValues",Mt)),this.feFuncG&&(st||Xr[17].p._mdf||Xr[18].p._mdf||Xr[19].p._mdf||Xr[20].p._mdf||Xr[21].p._mdf)&&(Mt=this.getTableValue(Xr[17].p.v,Xr[18].p.v,Xr[19].p.v,Xr[20].p.v,Xr[21].p.v),this.feFuncG.setAttribute("tableValues",Mt)),this.feFuncB&&(st||Xr[24].p._mdf||Xr[25].p._mdf||Xr[26].p._mdf||Xr[27].p._mdf||Xr[28].p._mdf)&&(Mt=this.getTableValue(Xr[24].p.v,Xr[25].p.v,Xr[26].p.v,Xr[27].p.v,Xr[28].p.v),this.feFuncB.setAttribute("tableValues",Mt)),this.feFuncA&&(st||Xr[31].p._mdf||Xr[32].p._mdf||Xr[33].p._mdf||Xr[34].p._mdf||Xr[35].p._mdf)&&(Mt=this.getTableValue(Xr[31].p.v,Xr[32].p.v,Xr[33].p.v,Xr[34].p.v,Xr[35].p.v),this.feFuncA.setAttribute("tableValues",Mt))}};function SVGDropShadowEffect(st,Mt,Xr,rn,nn){var an=Mt.container.globalData.renderConfig.filterSize,on=Mt.data.fs||an;st.setAttribute("x",on.x||an.x),st.setAttribute("y",on.y||an.y),st.setAttribute("width",on.width||an.width),st.setAttribute("height",on.height||an.height),this.filterManager=Mt;var sn=createNS("feGaussianBlur");sn.setAttribute("in","SourceAlpha"),sn.setAttribute("result",rn+"_drop_shadow_1"),sn.setAttribute("stdDeviation","0"),this.feGaussianBlur=sn,st.appendChild(sn);var ln=createNS("feOffset");ln.setAttribute("dx","25"),ln.setAttribute("dy","0"),ln.setAttribute("in",rn+"_drop_shadow_1"),ln.setAttribute("result",rn+"_drop_shadow_2"),this.feOffset=ln,st.appendChild(ln);var un=createNS("feFlood");un.setAttribute("flood-color","#00ff00"),un.setAttribute("flood-opacity","1"),un.setAttribute("result",rn+"_drop_shadow_3"),this.feFlood=un,st.appendChild(un);var cn=createNS("feComposite");cn.setAttribute("in",rn+"_drop_shadow_3"),cn.setAttribute("in2",rn+"_drop_shadow_2"),cn.setAttribute("operator","in"),cn.setAttribute("result",rn+"_drop_shadow_4"),st.appendChild(cn);var hn=this.createMergeNode(rn,[rn+"_drop_shadow_4",nn]);st.appendChild(hn)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){if((st||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),st||this.filterManager.effectElements[0].p._mdf){var Mt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(Mt[0]*255),Math.round(Mt[1]*255),Math.round(Mt[2]*255)))}if((st||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),st||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var Xr=this.filterManager.effectElements[3].p.v,rn=(this.filterManager.effectElements[2].p.v-90)*degToRads,nn=Xr*Math.cos(rn),an=Xr*Math.sin(rn);this.feOffset.setAttribute("dx",nn),this.feOffset.setAttribute("dy",an)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(st,Mt,Xr){this.initialized=!1,this.filterManager=Mt,this.filterElem=st,this.elem=Xr,Xr.matteElement=createNS("g"),Xr.matteElement.appendChild(Xr.layerElement),Xr.matteElement.appendChild(Xr.transformedElement),Xr.baseElement=Xr.matteElement}SVGMatte3Effect.prototype.findSymbol=function(st){for(var Mt=0,Xr=_svgMatteSymbols.length;Mt<Xr;){if(_svgMatteSymbols[Mt]===st)return _svgMatteSymbols[Mt];Mt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(st,Mt){var Xr=st.layerElement.parentNode;if(Xr){for(var rn=Xr.children,nn=0,an=rn.length;nn<an&&rn[nn]!==st.layerElement;)nn+=1;var on;nn<=an-2&&(on=rn[nn+1]);var sn=createNS("use");sn.setAttribute("href","#"+Mt),on?Xr.insertBefore(sn,on):Xr.appendChild(sn)}},SVGMatte3Effect.prototype.setElementAsMask=function(st,Mt){if(!this.findSymbol(Mt)){var Xr=createElementID(),rn=createNS("mask");rn.setAttribute("id",Mt.layerId),rn.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(Mt);var nn=st.globalData.defs;nn.appendChild(rn);var an=createNS("symbol");an.setAttribute("id",Xr),this.replaceInParent(Mt,Xr),an.appendChild(Mt.layerElement),nn.appendChild(an);var on=createNS("use");on.setAttribute("href","#"+Xr),rn.appendChild(on),Mt.data.hd=!1,Mt.show()}st.setMatte(Mt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var st=this.filterManager.effectElements[0].p.v,Mt=this.elem.comp.elements,Xr=0,rn=Mt.length;Xr<rn;)Mt[Xr]&&Mt[Xr].data.ind===st&&this.setElementAsMask(this.elem,Mt[Xr]),Xr+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(st,Mt,Xr,rn){st.setAttribute("x","-100%"),st.setAttribute("y","-100%"),st.setAttribute("width","300%"),st.setAttribute("height","300%"),this.filterManager=Mt;var nn=createNS("feGaussianBlur");nn.setAttribute("result",rn),st.appendChild(nn),this.feGaussianBlur=nn}SVGGaussianBlurEffect.prototype.renderFrame=function(st){if(st||this.filterManager._mdf){var Mt=.3,Xr=this.filterManager.effectElements[0].p.v*Mt,rn=this.filterManager.effectElements[1].p.v,nn=rn==3?0:Xr,an=rn==2?0:Xr;this.feGaussianBlur.setAttribute("stdDeviation",nn+" "+an);var on=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",on)}};function TransformEffect(){}TransformEffect.prototype.init=function(st){this.effectsManager=st,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(st){if(this._opMdf=!1,this._mdf=!1,st||this.effectsManager._mdf){var Mt=this.effectsManager.effectElements,Xr=Mt[0].p.v,rn=Mt[1].p.v,nn=Mt[2].p.v===1,an=Mt[3].p.v,on=nn?an:Mt[4].p.v,sn=Mt[5].p.v,ln=Mt[6].p.v,un=Mt[7].p.v;this.matrix.reset(),this.matrix.translate(-Xr[0],-Xr[1],Xr[2]),this.matrix.scale(on*.01,an*.01,1),this.matrix.rotate(-un*degToRads),this.matrix.skewFromAxis(-sn*degToRads,(ln+90)*degToRads),this.matrix.translate(rn[0],rn[1],0),this._mdf=!0,this.opacity!==Mt[8].p.v&&(this.opacity=Mt[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(st,Mt){this.init(Mt)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(st){this.init(st)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;Object.defineProperty(dist,"__esModule",{value:!0});var _extends2=_extends,_extends3=_interopRequireDefault(_extends2),_getPrototypeOf=getPrototypeOf$1,_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=classCallCheck,_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=createClass,_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=possibleConstructorReturn,_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=inherits,_inherits3=_interopRequireDefault(_inherits2),_react=reactExports,_react2=_interopRequireDefault(_react),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_lottieWeb=lottieExports,_lottieWeb2=_interopRequireDefault(_lottieWeb);function _interopRequireDefault(st){return st&&st.__esModule?st:{default:st}}var Lottie=function(st){(0,_inherits3.default)(Mt,st);function Mt(){var Xr,rn,nn,an;(0,_classCallCheck3.default)(this,Mt);for(var on=arguments.length,sn=Array(on),ln=0;ln<on;ln++)sn[ln]=arguments[ln];return an=(rn=(nn=(0,_possibleConstructorReturn3.default)(this,(Xr=Mt.__proto__||(0,_getPrototypeOf2.default)(Mt)).call.apply(Xr,[this].concat(sn))),nn),nn.handleClickToPause=function(){nn.anim.isPaused?nn.anim.play():nn.anim.pause()},rn),(0,_possibleConstructorReturn3.default)(nn,an)}return(0,_createClass3.default)(Mt,[{key:"componentDidMount",value:function(){var rn=this.props,nn=rn.options,an=rn.eventListeners,on=nn.loop,sn=nn.autoplay,ln=nn.animationData,un=nn.rendererSettings,cn=nn.segments;this.options={container:this.el,renderer:"svg",loop:on!==!1,autoplay:sn!==!1,segments:cn!==!1,animationData:ln,rendererSettings:un},this.options=(0,_extends3.default)({},this.options,nn),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(an)}},{key:"componentWillUpdate",value:function(rn){this.options.animationData!==rn.options.animationData&&(this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options=(0,_extends3.default)({},this.options,rn.options),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(rn.eventListeners))}},{key:"componentDidUpdate",value:function(){this.props.isStopped?this.stop():this.props.segments?this.playSegments():this.play(),this.pause(),this.setSpeed(),this.setDirection()}},{key:"componentWillUnmount",value:function(){this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options.animationData=null,this.anim=null}},{key:"setSpeed",value:function(){this.anim.setSpeed(this.props.speed)}},{key:"setDirection",value:function(){this.anim.setDirection(this.props.direction)}},{key:"play",value:function(){this.anim.play()}},{key:"playSegments",value:function(){this.anim.playSegments(this.props.segments)}},{key:"stop",value:function(){this.anim.stop()}},{key:"pause",value:function(){this.props.isPaused&&!this.anim.isPaused?this.anim.pause():!this.props.isPaused&&this.anim.isPaused&&this.anim.pause()}},{key:"destroy",value:function(){this.anim.destroy()}},{key:"registerEvents",value:function(rn){var nn=this;rn.forEach(function(an){nn.anim.addEventListener(an.eventName,an.callback)})}},{key:"deRegisterEvents",value:function(rn){var nn=this;rn.forEach(function(an){nn.anim.removeEventListener(an.eventName,an.callback)})}},{key:"render",value:function(){var rn=this,nn=this.props,an=nn.width,on=nn.height,sn=nn.ariaRole,ln=nn.ariaLabel,un=nn.isClickToPauseDisabled,cn=nn.title,hn=function(co){var Uo=void 0;return typeof co=="number"?Uo=co+"px":Uo=co||"100%",Uo},fn=(0,_extends3.default)({width:hn(an),height:hn(on),overflow:"hidden",margin:"0 auto",outline:"none"},this.props.style),to=un?function(){return null}:this.handleClickToPause;return _react2.default.createElement("div",{ref:function(co){rn.el=co},style:fn,onClick:to,title:cn,role:sn,"aria-label":ln,tabIndex:"0"})}}]),Mt}(_react2.default.Component),_default=dist.default=Lottie;Lottie.propTypes={eventListeners:_propTypes2.default.arrayOf(_propTypes2.default.object),options:_propTypes2.default.object.isRequired,height:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),width:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),isStopped:_propTypes2.default.bool,isPaused:_propTypes2.default.bool,speed:_propTypes2.default.number,segments:_propTypes2.default.arrayOf(_propTypes2.default.number),direction:_propTypes2.default.number,ariaRole:_propTypes2.default.string,ariaLabel:_propTypes2.default.string,isClickToPauseDisabled:_propTypes2.default.bool,title:_propTypes2.default.string,style:_propTypes2.default.string};Lottie.defaultProps={eventListeners:[],isStopped:!1,isPaused:!1,speed:1,ariaRole:"button",ariaLabel:"animation",isClickToPauseDisabled:!1,title:""};const nm$2="Face Scan",ddd$2=0,h$5=1080,w$5=1080,meta$2={g:"@lottiefiles/toolkit-js 0.33.2"},layers$2=[{ty:4,nm:"Shape Layer 10",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-5,188,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100,100,100],t:40},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[91,91,100],t:50},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100,100,100],t:67},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[91,91,100],t:84},{s:[100,100,100],t:101}],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[539,728,0],t:40,ti:[.333,51.667,0],to:[-.333,-22.667,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[537,592,0],t:50,ti:[0,7.333,0],to:[-.333,-51.667,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[537,418,0],t:67,ti:[0,23,0],to:[0,-7.333,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[537,548,0],t:84,ti:[0,-29.833,0],to:[0,-23,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[537,280,0],t:101,ti:[0,-74.5,0],to:[0,29.833,0]},{s:[537,727,0],t:120}],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[56],t:101},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:120},{s:[0],t:126}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Rectangle 1",ix:1,cix:2,np:3,it:[{ty:"rc",bm:0,hd:!1,mn:"ADBE Vector Shape - Rect",nm:"Rectangle Path 1",d:1,p:{a:0,k:[0,0],ix:3},r:{a:0,k:41,ix:4},s:{a:0,k:[466.844,25.008],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.0588,.7529,.7765],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-5.523,187.012],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:30},{s:[100],t:40}],ix:2},o:{a:0,k:0,ix:3},s:{a:0,k:0,ix:1},m:1}],ind:1},{ty:4,nm:"Shape Layer 7",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.06,y:.639},i:{x:.717,y:.992},s:[0,0,100],t:18},{o:{x:.746,y:-.056},i:{x:.9,y:.697},s:[124.17,124.17,100],t:25.5},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[94.957,94.957,100],t:30},{o:{x:0,y:0},i:{x:.855,y:1},s:[94.957,94.957,100],t:40},{o:{x:.167,y:0},i:{x:.833,y:1},s:[83.957,83.957,100],t:50},{o:{x:.167,y:0},i:{x:.833,y:1},s:[95,95,100],t:67.001},{o:{x:.167,y:0},i:{x:.833,y:1},s:[83.957,83.957,100],t:83.999},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[95,95,100],t:101},{o:{x:.167,y:0},i:{x:.833,y:1},s:[95,95,100],t:142},{s:[0,0,100],t:149}],ix:6},sk:{a:0,k:0},p:{a:0,k:[540,506,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 4",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-.75,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[.75,0],[0,0],[0,0],[0,0],[0,0]],v:[[-291.25,-293.75],[-291.25,-165],[-275,-165],[-274.75,-276.25],[-162.25,-277],[-162.25,-293.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 2",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[-223.564,-224.502],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-223.793,223.023],ix:2},r:{a:0,k:270.399,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 3",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-.75,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[.75,0],[0,0],[0,0],[0,0],[0,0]],v:[[-291.25,-293.75],[-291.25,-165],[-275,-165],[-274.75,-276.25],[-162.25,-277],[-162.25,-293.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 2",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[-223.564,-224.502],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[224.207,222.023],ix:2},r:{a:0,k:180.303,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 2",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-.75,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[.75,0],[0,0],[0,0],[0,0],[0,0]],v:[[-291.25,-293.75],[-291.25,-165],[-275,-165],[-274.75,-276.25],[-162.25,-277],[-162.25,-293.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 2",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[-223.564,-224.502],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[223.707,-225.477],ix:2},r:{a:0,k:90.225,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-.75,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[.75,0],[0,0],[0,0],[0,0],[0,0]],v:[[-291.25,-293.75],[-291.25,-165],[-275,-165],[-274.75,-276.25],[-162.25,-277],[-162.25,-293.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 2",c:{a:0,k:[.2392,.9216,.0824],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"Shape Layer 6",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[540,540,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[1],t:101},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:126},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:142},{s:[0],t:149}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 4",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-70,-41.5],[9.5,-133]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.1059,.6784,.8706],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 3",ix:2,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[89,-41.5],[10,66],[140.5,109],[11.5,202]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.1059,.6784,.8706],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 2",ix:3,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[202,-46.5],[89.5,-42],[194,-190],[10,-133.5],[90.5,-243]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.1059,.6784,.8706],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:4,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-73,-243],[10,-132],[89,-42],[139,110],[210,-50],[192.5,-190.5],[90.5,-243.5],[-72,-244],[-175,-185.5],[-191,-50],[-123.5,105.5],[8.5,202.5],[9,65],[-123,106],[-70,-42.5],[8.5,65.5],[10,-133.5],[-174.5,-185],[-70,-42.75],[-190.5,-50]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.1059,.6784,.8706],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 13",ix:5,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.1059,.6784,.8706],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[8.866,202.856],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 12",ix:6,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[143.114,105.97],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 11",ix:7,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[8.376,66.204],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 10",ix:8,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-122.845,106.69],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 9",ix:9,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-191.739,-46.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 8",ix:10,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-69.821,-41.808],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 7",ix:11,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[88.776,-41.562],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 6",ix:12,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[211.163,-47.374],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 5",ix:13,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[193.011,-187.747],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 4",ix:14,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[92.198,-243.386],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 3",ix:15,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[9.522,-133.731],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 2",ix:16,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-72.014,-242.744],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:17,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[23.469,23.469],ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1059,.6784,.8706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-174.176,-187.343],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"Shape Layer 5",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,-6,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 2",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[113.5,-14.5],[0,0],[-9.5,-1.5],[-22.75,3.5],[-51.75,.5],[-16,-7.75],[-1,-28.5],[-13.75,-15.5],[-1.75,-4.75],[0,0],[1,13],[9.25,15.25],[1.25,2.5],[.25,29.75],[7,3.5]],o:[[-101,24.5],[0,0],[29.25,2.75],[22.5,-6.5],[51.75,-.5],[37.25,14.5],[2.25,31],[13.75,15.5],[1.75,4.75],[0,0],[1.25,-11.25],[-13.25,-8.75],[-1.25,-2.5],[-3.5,-28],[-7,-3.5]],v:[[38.5,-420],[-114.5,-400.5],[-104.25,-398.75],[-.75,-405.5],[99.5,-415.75],[182.25,-403.25],[221.75,-329],[251.25,-270.25],[268.5,-235.75],[271.25,-188.75],[272.25,-229.75],[257.75,-271],[232,-310.5],[227.5,-362],[178.5,-414.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4,.4118,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:2,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[81,-3],[0,0],[64.5,44],[20.5,-37.5],[-15.5,-64],[1.5,-8.5],[-42,-78],[-10,2],[0,0],[-44.75,62.5],[-2,8],[-24.75,-10.75],[-19.75,-4.25],[-13,-27.75],[-6.25,-38.75],[-34.25,7.75],[-2,-9.5],[-4.5,30],[59,79.5],[0,0]],o:[[-78.5,6.5],[0,0],[-66.5,-27],[-20.5,37.5],[11.5,65],[0,11.5],[11.5,-26.5],[10,-2],[0,0],[42.5,-44.5],[11.25,10.5],[22.5,12],[19.75,7],[10,15],[9.25,-30.75],[36.75,4],[10.75,-16.25],[10,-26],[-12.5,-10.5],[0,0]],v:[[137,-494.5],[19.5,-471.5],[-119.5,-481],[-259,-426.5],[-272,-297.5],[-266.5,-234],[-236.5,-73],[-202.5,-108.5],[-196,-108.5],[-157.5,-212],[-107.75,-284.75],[-27.5,-226.5],[44.5,-195],[147.75,-142.25],[187.25,-45.75],[244.5,-109],[287.25,-59.25],[336.5,-156],[323,-334],[265.5,-395]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,.0157,.0314],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4,parent:9},{ty:4,nm:"Shape Layer 8",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,-6,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[3.5,65.5],[0,0],[0,0],[42,22.5],[13,-3.5],[2,-.5],[0,0],[17.5,10.5],[82.5,-86],[-7,-12.5],[0,0]],o:[[0,0],[-3,-55.5],[0,0],[0,0],[-42,-22.5],[-13,3.5],[-2,.5],[0,0],[-17.5,-10.5],[-66.5,93],[7,12.5],[0,0]],v:[[328,-153],[371,-265.5],[306.5,-341],[262.5,-389.5],[202,-490],[104.5,-506],[54.5,-489],[-24.5,-453],[-114,-480.5],[-276.5,-451],[-261,-258.5],[-248,-218.5]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},c:{a:0,k:[.0431,.1765,.3059],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5,parent:9},{ty:4,nm:"Shape Layer 4",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,-6,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 2",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-7.5,-16.5],[-7.75,7.25],[-26.25,29.75],[-31,-12.75],[-42.25,-21.75],[0,0],[0,0],[21,21],[55,22.5]],o:[[0,0],[0,0],[0,0],[7.5,-24],[7,-3],[24.25,47.25],[33.75,5],[43,23],[0,0],[0,0],[-21,-21],[-55,-22.5]],v:[[-108,-284.5],[-162.5,-238.5],[-206,-150.5],[-196,-111.5],[-145.25,-184.75],[-92,-235.75],[-4.25,-180.25],[103,-144.5],[187.125,-38],[190,-51.5],[141,-155.5],[-.5,-213]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9686,.6627,.5843],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:2,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[24,42],[12.5,-9],[11,-34],[5.5,-45],[-35.5,-13.5],[0,0],[-65,-49.5],[-38,36],[-14.5,47.5],[-35.5,54],[9.5,37.5],[6,-1],[11,-53.5],[34.5,21.5],[48.5,8.5]],o:[[-31.5,33.5],[-10,10.5],[-14.5,1.5],[-5,47],[32,10],[0,0],[65,49.5],[38,-36],[6.25,1.75],[10.5,-22.5],[-13,-53],[-15,6.5],[-24.5,-46],[-36,-18],[-48.5,-17]],v:[[-92,-235],[-144.5,-184.5],[-196.5,-109.5],[-239,-52.5],[-182.5,56.5],[-169,60.5],[-72,194.5],[116,180.5],[196,58],[272.5,19],[286,-64],[236.5,-107.5],[187,-38],[103,-145],[-4,-180.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9608,.8157,.749],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6,parent:9},{ty:4,nm:"Shape Layer 3",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,-6,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[108.368,45.154],[0,0],[-139.811,55.924],[0,0]],o:[[-1.5,-.625],[0,0],[2.5,-1],[0,0]],v:[[-98,173.5],[-102,209],[120.5,216],[117,179.5]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9922,.698,.6235],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7,parent:9},{ty:4,nm:"Shape Layer 2",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,-6,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.5,-17.5],[10.5,-17.5],[4,-12.5],[-25,-14.5],[-22,6.5],[-3.5,10],[3,5.5],[6.5,25.5]],o:[[4.5,17.5],[-10.5,17.5],[-12.436,38.863],[68.465,39.71],[61.175,-18.074],[6.012,-17.178],[-27.421,-50.273],[-6.5,-25.5]],v:[[-99,170.5],[-117.5,254.5],[-142,306.5],[-95.5,392],[70.5,407],[150.5,334],[142.5,271.5],[117,180]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9608,.8157,.749],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8,parent:9},{ty:4,nm:"Shape Layer 1",sr:1,st:0,op:300,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-4,564,0],ix:1},s:{a:1,k:[{o:{x:.12,y:.234},i:{x:.52,y:.979},s:[0,0,100],t:0},{o:{x:1,y:-.099},i:{x:.94,y:.799},s:[120,120,100],t:13},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100,100,100],t:18},{o:{x:.167,y:0},i:{x:.52,y:1},s:[100,100,100],t:142},{o:{x:1,y:0},i:{x:1,y:1},s:[120,120,100],t:155},{s:[0,0,100],t:161}],ix:6},sk:{a:0,k:0},p:{a:0,k:[536,1110,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 2",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[243,-10],[0,0],[-3,42],[6,1]],o:[[-243,10],[0,0],[16.887,-236.417],[-6,-1]],v:[[-165,271],[-387,544],[400,563],[245,280]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.502,.502,.502],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:2,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[298,-18],[0,0],[9,18],[0,0]],o:[[-288.481,17.425],[0,0],[-104.615,-209.231],[0,0]],v:[[-194,274],[-548,532],[554,533],[305,288]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.0706,.0706,.0706],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:9}],v$3="5.5.6",fr$3=23,op$2=161,ip$2=0,assets$2=[],FaceAuth={nm:nm$2,ddd:ddd$2,h:h$5,w:w$5,meta:meta$2,layers:layers$2,v:v$3,fr:fr$3,op:op$2,ip:ip$2,assets:assets$2},Home=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center h-screen bg-gradient-to-tl from-blue-700 to-indigo-900",children:[jsxRuntimeExports.jsx(ParticlesComponent,{id:"particles-background"}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 z-10",children:jsxRuntimeExports.jsx("div",{className:" items-center",children:jsxRuntimeExports.jsxs("div",{className:"md:order-1 z-10 flex flex-col items-center md:items-center mb",children:[jsxRuntimeExports.jsx("div",{className:"mb-5 d-flex justify-content-center",style:{pointerEvents:"none"},children:jsxRuntimeExports.jsx(_default,{options:{animationData:FaceAuth,loop:!0,autoplay:!0},height:150,width:300})}),jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold text-white mb-5 text-center md:text-left",style:{textShadow:"3px 4px 8px rgba(0, 0, 0, 0.2)"},children:"Bienvenido a"}),jsxRuntimeExports.jsx("h1",{className:`block  text-4xl tracking-tight font-extrabold  sm:text-5xl md:text-6xl bg-clip-text \r
              text-transparent bg-gradient-to-r from-cyan-400 to-indigo-300`,style:{textShadow:"3px 3px 3px rgba(0, 255, 255, 0.4)"},children:"FaceAuthenticator"}),jsxRuntimeExports.jsxs("div",{className:"mt-8 text-md text-white max-w-3xl mx-4 md:mx-0 lg:mx-auto bg-gray-800 p-6 rounded-lg",children:[jsxRuntimeExports.jsx("p",{children:"FaceAuthenticator es una aplicacin web de autenticacin basada en reconocimiento facial, desarrollada utilizando React e inteligencia artificial de reconocimiento facial."}),jsxRuntimeExports.jsx("p",{children:"El objetivo principal de la aplicacin es ofrecer un sistema de autenticacin confiable y eficiente mediante el anlisis y la verificacin de las caractersticas faciales del usuario."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(Link,{to:"/user-select",className:`flex gap-2 mt-7 w-fit items-center mx-auto md:mx-0 cursor-pointer z-10 py-3 px-6 rounded-full \r
             hover:shadow-lg hover:scale-105 transform transition duration-300\r
             bg-gradient-to-r from-indigo-300 to-indigo-500 hover:bg-opacity-80`,children:jsxRuntimeExports.jsx("span",{className:"text-white text-lg font-bold",children:"Iniciar Sesin"})}),jsxRuntimeExports.jsx(Link,{to:"/register",className:`flex gap-2 mt-7 w-fit items-center mx-auto md:mx-0 cursor-pointer z-10 py-3 px-6 rounded-full \r
             hover:shadow-lg hover:scale-105 transform transition duration-300\r
             bg-gradient-to-r from-indigo-300 to-indigo-500 hover:bg-opacity-80`,children:jsxRuntimeExports.jsx("span",{className:"text-white text-lg font-bold",children:"Registrarse"})})]})]})})})]}),jsxRuntimeExports.jsx("div",{className:"h-90 flex flex-col justify-between",children:jsxRuntimeExports.jsx(Footer,{})})]});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var t$1=function(st,Mt){return(t$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xr,rn){Xr.__proto__=rn}||function(Xr,rn){for(var nn in rn)rn.hasOwnProperty(nn)&&(Xr[nn]=rn[nn])})(st,Mt)};function e$3(st,Mt){function Xr(){this.constructor=st}t$1(st,Mt),st.prototype=Mt===null?Object.create(Mt):(Xr.prototype=Mt.prototype,new Xr)}function n(st,Mt,Xr,rn){return new(Xr||(Xr=Promise))(function(nn,an){function on(un){try{ln(rn.next(un))}catch(cn){an(cn)}}function sn(un){try{ln(rn.throw(un))}catch(cn){an(cn)}}function ln(un){un.done?nn(un.value):new Xr(function(cn){cn(un.value)}).then(on,sn)}ln((rn=rn.apply(st,Mt||[])).next())})}function r$2(st,Mt){var Xr,rn,nn,an,on={label:0,sent:function(){if(1&nn[0])throw nn[1];return nn[1]},trys:[],ops:[]};return an={next:sn(0),throw:sn(1),return:sn(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function sn(ln){return function(un){return function(cn){if(Xr)throw new TypeError("Generator is already executing.");for(;on;)try{if(Xr=1,rn&&(nn=2&cn[0]?rn.return:cn[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,cn[1])).done)return nn;switch(rn=0,nn&&(cn=[2&cn[0],nn.value]),cn[0]){case 0:case 1:nn=cn;break;case 4:return on.label++,{value:cn[1],done:!1};case 5:on.label++,rn=cn[1],cn=[0];continue;case 7:cn=on.ops.pop(),on.trys.pop();continue;default:if(!(nn=(nn=on.trys).length>0&&nn[nn.length-1])&&(cn[0]===6||cn[0]===2)){on=0;continue}if(cn[0]===3&&(!nn||cn[1]>nn[0]&&cn[1]<nn[3])){on.label=cn[1];break}if(cn[0]===6&&on.label<nn[1]){on.label=nn[1],nn=cn;break}if(nn&&on.label<nn[2]){on.label=nn[2],on.ops.push(cn);break}nn[2]&&on.ops.pop(),on.trys.pop();continue}cn=Mt.call(st,on)}catch(hn){cn=[6,hn],rn=0}finally{Xr=nn=0}if(5&cn[0])throw cn[1];return{value:cn[0]?cn[1]:void 0,done:!0}}([ln,un])}}}var o$5=function(){function st(Mt){this.global=Mt,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return st.prototype.setPlatform=function(Mt,Xr){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+Xr+"."),this.platformName=Mt,this.platform=Xr},st.prototype.registerFlag=function(Mt,Xr,rn){if(this.flagRegistry[Mt]={evaluationFn:Xr,setHook:rn},this.urlFlags[Mt]!=null){var nn=this.urlFlags[Mt];console.warn("Setting feature override from URL "+Mt+": "+nn+"."),this.set(Mt,nn)}},st.prototype.get=function(Mt){return Mt in this.flags?this.flags[Mt]:(this.flags[Mt]=this.evaluateFlag(Mt),this.flags[Mt])},st.prototype.getNumber=function(Mt){return this.get(Mt)},st.prototype.getBool=function(Mt){return this.get(Mt)},st.prototype.getFlags=function(){return this.flags},Object.defineProperty(st.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),st.prototype.set=function(Mt,Xr){if(this.flagRegistry[Mt]==null)throw new Error("Cannot set flag "+Mt+" as it has not been registered.");this.flags[Mt]=Xr,this.flagRegistry[Mt].setHook!=null&&this.flagRegistry[Mt].setHook(Xr)},st.prototype.evaluateFlag=function(Mt){if(this.flagRegistry[Mt]==null)throw new Error("Cannot evaluate flag '"+Mt+"': no evaluation function found.");return this.flagRegistry[Mt].evaluationFn()},st.prototype.setFlags=function(Mt){this.flags=Object.assign({},Mt)},st.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},st.prototype.populateURLFlags=function(){var Mt=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var Xr,rn,nn=(Xr=this.global.location.search,rn={},Xr.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(an){for(var on=[],sn=1;sn<arguments.length;sn++)on[sn-1]=arguments[sn];return a$1(rn,on[0],on[1]),on.join("=")}),rn);"tfjsflags"in nn&&nn.tfjsflags.split(",").forEach(function(an){var on=an.split(":"),sn=on[0],ln=on[1];Mt.urlFlags[sn]=function(un,cn){if((cn=cn.toLowerCase())==="true"||cn==="false")return cn==="true";if(""+ +cn===cn)return+cn;throw new Error("Could not parse value flag value "+cn+" for flag "+un+".")}(sn,ln)})}},st}();function a$1(st,Mt,Xr){st[decodeURIComponent(Mt)]=decodeURIComponent(Xr||"")}function i$2(){return s$4}var s$4=null,u$3=new Map,c$4=new Map;function l$2(st,Mt){var Xr=g$1(st,Mt);return u$3.get(Xr)}function h$4(st){return c$4.get(st)}function f$4(st){for(var Mt=u$3.entries(),Xr=[];;){var rn=Mt.next(),nn=rn.done,an=rn.value;if(nn)break;var on=an[0],sn=an[1];on.split("_")[0]===st&&Xr.push(sn)}return Xr}function d$3(st){var Mt=st.kernelName,Xr=st.backendName,rn=g$1(Mt,Xr);if(u$3.has(rn))throw new Error("The kernel '"+Mt+"' for backend '"+Xr+"' is already registered");u$3.set(rn,st)}function p$3(st){var Mt=st.kernelName;c$4.has(Mt)&&console.warn("Overriding the gradient for '"+Mt+"'"),c$4.set(Mt,st)}function g$1(st,Mt){return Mt+"_"+st}function x(st,Mt,Xr){return Math.max(st,Math.min(Mt,Xr))}function b$1(st){return st%2==0?st:st+1}function w$4(st){for(var Mt=0,Xr=0;Xr<st.length;Xr++)Mt+=st[Xr];return Mt}function C(st,Mt){if(!st)throw new Error(typeof Mt=="string"?Mt:Mt())}function E(st,Mt,Xr){Xr===void 0&&(Xr=""),C(S$3(st,Mt),function(){return Xr+" Shapes "+st+" and "+Mt+" must match"})}function R$1(st){C(st!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function I$2(st,Mt,Xr){if(Mt===void 0&&(Mt=[]),Xr===void 0&&(Xr=!1),Mt==null&&(Mt=[]),Array.isArray(st)||V(st)&&!Xr)for(var rn=0;rn<st.length;++rn)I$2(st[rn],Mt,Xr);else Mt.push(st);return Mt}function k(st){if(st.length===0)return 1;for(var Mt=st[0],Xr=1;Xr<st.length;Xr++)Mt*=st[Xr];return Mt}function S$3(st,Mt){if(st===Mt)return!0;if(st==null||Mt==null||st.length!==Mt.length)return!1;for(var Xr=0;Xr<st.length;Xr++)if(st[Xr]!==Mt[Xr])return!1;return!0}function A$1(st){return st%1==0}function D$1(st){if(Math.tanh!=null)return Math.tanh(st);if(st===1/0)return 1;if(st===-1/0)return-1;var Mt=Math.exp(2*st);return(Mt-1)/(Mt+1)}function T$2(st){var Mt=Math.ceil(Math.sqrt(st));return[Mt,Math.ceil(st/Mt)]}function N$2(st,Mt){return Mt<=st.length?st:st+" ".repeat(Mt-st.length)}function F$2(st,Mt,Xr){return Mt===void 0&&(Mt=function(rn){return 0}),new Promise(function(rn,nn){var an=0,on=function(){if(st())rn();else{an++;var sn=Mt(an);Xr!=null&&an>=Xr?nn():setTimeout(on,sn)}};on()})}function _(st,Mt){for(var Xr=1,rn=-1,nn=0;nn<st.length;++nn)if(st[nn]>=0)Xr*=st[nn];else if(st[nn]===-1){if(rn!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+rn+" and dim "+nn);rn=nn}else if(st[nn]<0)throw Error("Shapes can not be < 0. Found "+st[nn]+" at dim "+nn);if(rn===-1){if(Mt>0&&Mt!==Xr)throw Error("Size("+Mt+") must match the product of shape "+st);return st}if(Xr===0)throw Error("Cannot infer the missing size in ["+st+"] when there are 0 elements");if(Mt%Xr!=0)throw Error("The implicit shape can't be a fractional number. Got "+Mt+" / "+Xr);var an=st.slice();return an[rn]=Mt/Xr,an}function O$1(st,Mt){var Xr=Mt.length;return C((st=st==null?Mt.map(function(rn,nn){return nn}):[].concat(st)).every(function(rn){return rn>=-Xr&&rn<Xr}),function(){return"All values in axis param must be in range [-"+Xr+", "+Xr+") but got axis "+st}),C(st.every(function(rn){return A$1(rn)}),function(){return"All values in axis param must be integers but got axis "+st}),st.map(function(rn){return rn<0?Xr+rn:rn})}function M$3(st,Mt){for(var Xr=[],rn=[],nn=Mt!=null&&Array.isArray(Mt)&&Mt.length===0,an=Mt==null||nn?null:O$1(Mt,st).sort(),on=0,sn=0;sn<st.length;++sn){if(an!=null){if(an[on]===sn&&st[sn]!==1)throw new Error("Can't squeeze axis "+sn+" since its dim '"+st[sn]+"' is not 1");(an[on]==null||an[on]>sn)&&st[sn]===1&&(Xr.push(st[sn]),rn.push(sn)),an[on]<=sn&&on++}st[sn]!==1&&(Xr.push(st[sn]),rn.push(sn))}return{newShape:Xr,keptDims:rn}}function B$1(st,Mt){var Xr=null;if(st==null||st==="float32")Xr=new Float32Array(Mt);else if(st==="int32")Xr=new Int32Array(Mt);else{if(st!=="bool")throw new Error("Unknown data type "+st);Xr=new Uint8Array(Mt)}return Xr}function P(st,Mt){var Xr=null;if(st==null||st==="float32")Xr=new Float32Array(Mt);else if(st==="int32")Xr=new Int32Array(Mt);else if(st==="bool")Xr=new Uint8Array(Mt);else{if(st!=="string")throw new Error("Unknown data type "+st);Xr=new Array(Mt)}return Xr}function L(st,Mt){for(var Xr=0;Xr<st.length;Xr++){var rn=st[Xr];if(isNaN(rn)||!isFinite(rn))throw Error("A tensor of type "+Mt+" being uploaded contains "+rn+".")}}function W(st){return st==="bool"||st==="complex64"||st==="float32"||st==="int32"||st==="string"}function U(st,Mt){return Mt!=="complex64"&&(Mt!=="float32"||st==="complex64")&&(Mt!=="int32"||st==="float32"||st==="complex64")&&(Mt!=="bool"||st!=="bool")}function V(st){return st instanceof Float32Array||st instanceof Int32Array||st instanceof Uint8Array}function z(st){if(st==="float32"||st==="int32")return 4;if(st==="complex64")return 8;if(st==="bool")return 1;throw new Error("Unknown dtype "+st)}function G(st){if(st==null)return 0;var Mt=0;return st.forEach(function(Xr){return Mt+=Xr.length}),Mt}function H$2(st){return typeof st=="string"||st instanceof String}function q(st){return typeof st=="boolean"}function K(st){return typeof st=="number"}function j$1(st){return Array.isArray(st)?j$1(st[0]):st instanceof Float32Array?"float32":st instanceof Int32Array||st instanceof Uint8Array?"int32":K(st)?"float32":H$2(st)?"string":q(st)?"bool":"float32"}function X$1(st){return!!(st&&st.constructor&&st.call&&st.apply)}function Y(st,Mt){for(var Xr=Mt;Xr<st;++Xr)if(st%Xr==0)return Xr;return st}function $$1(st){var Mt=st.length;if(Mt<2)return[];var Xr=new Array(Mt-1);Xr[Mt-2]=st[Mt-1];for(var rn=Mt-3;rn>=0;--rn)Xr[rn]=Xr[rn+1]*st[rn+1];return Xr}function Q(st,Mt,Xr){if(Mt==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(st)&&(st=I$2(st)),Xr&&L(st,Mt),function(an,on){return an instanceof Float32Array&&on==="float32"||an instanceof Int32Array&&on==="int32"||an instanceof Uint8Array&&on==="bool"}(st,Mt))return st;if(Mt==null||Mt==="float32"||Mt==="complex64")return new Float32Array(st);if(Mt==="int32")return new Int32Array(st);if(Mt==="bool"){for(var rn=new Uint8Array(st.length),nn=0;nn<rn.length;++nn)Math.round(st[nn])!==0&&(rn[nn]=1);return rn}throw new Error("Unknown data type "+Mt)}function J(st,Mt){if(st.length===0)return Mt[0];var Xr=st.reduce(function(rn,nn){return rn*nn});if(Xr===0)return[];if(Xr!==Mt.length)throw new Error("["+st+"] does not match the input size.");return function rn(nn,an,on){var sn=new Array;if(an.length===1)for(var ln=an[0],un=0;un<ln;un++)sn[un]=on[nn+un];else{ln=an[0];var cn=an.slice(1),hn=cn.reduce(function(fn,to){return fn*to});for(un=0;un<ln;un++)sn[un]=rn(nn+un*hn,cn,on)}return sn}(0,st,Mt)}function Z(st,Mt){for(var Xr=tt(st,Mt),rn=0;rn<Xr.length;rn++)Xr[rn]=1;return Xr}function tt(st,Mt){if(Mt==null||Mt==="float32"||Mt==="complex64")return new Float32Array(st);if(Mt==="int32")return new Int32Array(st);if(Mt==="bool")return new Uint8Array(st);throw new Error("Unknown data type "+Mt)}function et(){return i$2().platform.now()}function nt(st){st.forEach(function(Mt){C(Number.isInteger(Mt)&&Mt>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+st+"]."})})}function rt(st,Mt){return Mt===void 0&&(Mt="utf-8"),Mt=Mt||"utf-8",i$2().platform.encode(st,Mt)}function ot(st,Mt){return Mt===void 0&&(Mt="utf-8"),Mt=Mt||"utf-8",i$2().platform.decode(st,Mt)}function at(st,Mt,Xr){if(Mt===0)return 0;if(Mt===1)return st[0];for(var rn=st[st.length-1],nn=0;nn<st.length-1;++nn)rn+=Xr[nn]*st[nn];return rn}function it(st,Mt,Xr){if(Mt===0)return[];if(Mt===1)return[st];for(var rn=new Array(Mt),nn=0;nn<rn.length-1;++nn)rn[nn]=Math.floor(st/Xr[nn]),st-=rn[nn]*Xr[nn];return rn[rn.length-1]=st,rn}var ut=function(){function st(Mt,Xr){this.backendTimer=Mt,this.logger=Xr,Xr==null&&(this.logger=new ct)}return st.prototype.profileKernel=function(Mt,Xr,rn){var nn,an=this,on=this.backendTimer.time(function(){nn=rn()});return nn.forEach(function(sn){sn.data().then(function(ln){(function(un,cn,hn){if(cn!=="float32")return!1;for(var fn=0;fn<un.length;fn++){var to=un[fn];if(isNaN(to)||!isFinite(to))return console.warn("Found "+to+" in the result of '"+hn+"'"),!0}})(ln,sn.dtype,Mt),on.then(function(un){var cn="";un.getExtraProfileInfo!=null&&(cn=un.getExtraProfileInfo()),an.logger.logKernelProfile(Mt,sn,ln,un.kernelMs,Xr,cn)})})}),nn},st}(),ct=function(){function st(){}return st.prototype.logKernelProfile=function(Mt,Xr,rn,nn,an,on){var sn=typeof nn=="number"?N$2(nn+"ms",9):nn.error,ln=N$2(Mt,25),un=Xr.rank,cn=Xr.size,hn=N$2(Xr.shape.toString(),14),fn="";for(var to in an){var uo=an[to].shape||Xr.shape,co=uo.length;fn+=to+": "+co+"D "+(co>0?uo:"")+" "}console.log("%c"+ln+"	%c"+sn+"	%c"+un+"D "+hn+"	%c"+cn+"	%c"+fn+"	%c"+on,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},st}(),lt=20,ht=3,ft=7;function dt(st,Mt,Xr,rn){var nn=$$1(Mt),an=function(un,cn,hn,fn){var to=k(cn),uo=fn[fn.length-1],co=new Array(uo).fill(0),Uo=cn.length,lo=hn==="complex64"?mt(un):un;if(Uo>1)for(var ho=0;ho<to/uo;ho++)for(var fo=ho*uo,mo=0;mo<uo;mo++)co[mo]=Math.max(co[mo],pt(lo[fo+mo],0,hn).length);return co}(st,Mt,Xr,nn),on=Mt.length,sn=function un(cn,hn,fn,to,uo,co){co===void 0&&(co=!0);var Uo=fn==="complex64"?2:1,lo=hn[0],ho=hn.length;if(ho===0)return fn==="complex64"?[pt(mt(cn)[0],0,fn)]:fn==="bool"?[vt(cn[0])]:[cn[0].toString()];if(ho===1){if(lo>lt){var fo=ht*Uo,mo=Array.from(cn.slice(0,fo)),_d=Array.from(cn.slice((lo-ht)*Uo,lo*Uo));return fn==="complex64"&&(mo=mt(mo),_d=mt(_d)),["["+mo.map(function(mp,lp){return pt(mp,uo[lp],fn)}).join(", ")+", ..., "+_d.map(function(mp,lp){return pt(mp,uo[lo-ht+lp],fn)}).join(", ")+"]"]}return["["+(fn==="complex64"?mt(cn):Array.from(cn)).map(function(mp,lp){return pt(mp,uo[lp],fn)}).join(", ")+"]"]}var ep=hn.slice(1),rp=to.slice(1),ap=to[0]*Uo,sp=[];if(lo>lt){for(var up=0;up<ht;up++){var pp=(hp=up*ap)+ap;sp.push.apply(sp,un(cn.slice(hp,pp),ep,fn,rp,uo,!1))}for(sp.push("..."),up=lo-ht;up<lo;up++)pp=(hp=up*ap)+ap,sp.push.apply(sp,un(cn.slice(hp,pp),ep,fn,rp,uo,up===lo-1))}else for(up=0;up<lo;up++){var hp;pp=(hp=up*ap)+ap,sp.push.apply(sp,un(cn.slice(hp,pp),ep,fn,rp,uo,up===lo-1))}var vp=ho===2?",":"";for(sp[0]="["+sp[0]+vp,up=1;up<sp.length-1;up++)sp[up]=" "+sp[up]+vp;var gp=`,
`;for(up=2;up<ho;up++)gp+=`
`;return sp[sp.length-1]=" "+sp[sp.length-1]+"]"+(co?"":gp),sp}(st,Mt,Xr,nn,an),ln=["Tensor"];return rn&&(ln.push("  dtype: "+Xr),ln.push("  rank: "+on),ln.push("  shape: ["+Mt+"]"),ln.push("  values:")),ln.push(sn.map(function(un){return"    "+un}).join(`
`)),ln.join(`
`)}function pt(st,Mt,Xr){return N$2(Array.isArray(st)?parseFloat(st[0].toFixed(ft))+" + "+parseFloat(st[1].toFixed(ft))+"j":H$2(st)?"'"+st+"'":Xr==="bool"?vt(st):parseFloat(st.toFixed(ft)).toString(),Mt)}function vt(st){return st===0?"false":"true"}function mt(st){for(var Mt=[],Xr=0;Xr<st.length;Xr+=2)Mt.push([st[Xr],st[Xr+1]]);return Mt}var gt=function(){function st(Mt,Xr,rn){var nn=this;if(this.dtype=Xr,this.shape=Mt.slice(),this.size=k(Mt),rn!=null){var an=rn.length;C(an===this.size,function(){return"Length of values '"+an+"' does not match the size inferred by the shape '"+nn.size+"'."})}if(Xr==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=rn||P(Xr,this.size),this.strides=$$1(Mt)}return st.prototype.set=function(Mt){for(var Xr=this,rn=[],nn=1;nn<arguments.length;nn++)rn[nn-1]=arguments[nn];rn.length===0&&(rn=[0]),C(rn.length===this.rank,function(){return"The number of provided coordinates ("+rn.length+") must match the rank ("+Xr.rank+")"});var an=this.locToIndex(rn);this.values[an]=Mt},st.prototype.get=function(){for(var Mt=[],Xr=0;Xr<arguments.length;Xr++)Mt[Xr]=arguments[Xr];Mt.length===0&&(Mt=[0]);for(var rn=0,nn=0,an=Mt;nn<an.length;nn++){var on=an[nn];if(on<0||on>=this.shape[rn]){var sn="Requested out of range element at "+Mt+".   Buffer shape="+this.shape;throw new Error(sn)}rn++}for(var ln=Mt[Mt.length-1],un=0;un<Mt.length-1;++un)ln+=this.strides[un]*Mt[un];return this.values[ln]},st.prototype.locToIndex=function(Mt){if(this.rank===0)return 0;if(this.rank===1)return Mt[0];for(var Xr=Mt[Mt.length-1],rn=0;rn<Mt.length-1;++rn)Xr+=this.strides[rn]*Mt[rn];return Xr},st.prototype.indexToLoc=function(Mt){if(this.rank===0)return[];if(this.rank===1)return[Mt];for(var Xr=new Array(this.shape.length),rn=0;rn<Xr.length-1;++rn)Xr[rn]=Math.floor(Mt/this.strides[rn]),Mt-=Xr[rn]*this.strides[rn];return Xr[Xr.length-1]=Mt,Xr},Object.defineProperty(st.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),st.prototype.toTensor=function(){return yt$1().makeTensor(this.values,this.shape,this.dtype)},st}(),yt$1=null,xt=null,bt=null,wt=function(){function st(Mt,Xr,rn,nn){this.kept=!1,this.isDisposedInternal=!1,this.shape=Mt.slice(),this.dtype=Xr||"float32",this.size=k(Mt),this.strides=$$1(Mt),this.dataId=rn,this.id=nn,this.rankType=this.rank<5?this.rank.toString():"higher"}return st.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},st.prototype.asScalar=function(){return this.throwIfDisposed(),C(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},st.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},st.prototype.as2D=function(Mt,Xr){return this.throwIfDisposed(),this.reshape([Mt,Xr])},st.prototype.as3D=function(Mt,Xr,rn){return this.throwIfDisposed(),this.reshape([Mt,Xr,rn])},st.prototype.as4D=function(Mt,Xr,rn,nn){return this.throwIfDisposed(),this.reshape([Mt,Xr,rn,nn])},st.prototype.as5D=function(Mt,Xr,rn,nn,an){return this.throwIfDisposed(),this.reshape([Mt,Xr,rn,nn,an])},st.prototype.asType=function(Mt){return this.throwIfDisposed(),xt.cast(this,Mt)},Object.defineProperty(st.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),st.prototype.buffer=function(){return n(this,void 0,void 0,function(){var Mt;return r$2(this,function(Xr){switch(Xr.label){case 0:return[4,this.data()];case 1:return Mt=Xr.sent(),[2,xt.buffer(this.shape,this.dtype,Mt)]}})})},st.prototype.bufferSync=function(){return xt.buffer(this.shape,this.dtype,this.dataSync())},st.prototype.array=function(){return n(this,void 0,void 0,function(){var Mt;return r$2(this,function(Xr){switch(Xr.label){case 0:return[4,this.data()];case 1:return Mt=Xr.sent(),[2,J(this.shape,Mt)]}})})},st.prototype.arraySync=function(){return J(this.shape,this.dataSync())},st.prototype.data=function(){return n(this,void 0,void 0,function(){var Mt,Xr;return r$2(this,function(rn){switch(rn.label){case 0:return this.throwIfDisposed(),Mt=yt$1().read(this.dataId),this.dtype!=="string"?[3,2]:[4,Mt];case 1:Xr=rn.sent();try{return[2,Xr.map(function(nn){return ot(nn)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}rn.label=2;case 2:return[2,Mt]}})})},st.prototype.dataSync=function(){this.throwIfDisposed();var Mt=yt$1().readSync(this.dataId);if(this.dtype==="string")try{return Mt.map(function(Xr){return ot(Xr)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return Mt},st.prototype.bytes=function(){return n(this,void 0,void 0,function(){var Mt;return r$2(this,function(Xr){switch(Xr.label){case 0:return this.throwIfDisposed(),[4,yt$1().read(this.dataId)];case 1:return Mt=Xr.sent(),this.dtype==="string"?[2,Mt]:[2,new Uint8Array(Mt.buffer)]}})})},st.prototype.dispose=function(){this.isDisposed||(yt$1().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(st.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),st.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},st.prototype.toFloat=function(){return this.asType("float32")},st.prototype.toInt=function(){return this.asType("int32")},st.prototype.toBool=function(){return this.asType("bool")},st.prototype.print=function(Mt){return Mt===void 0&&(Mt=!1),xt.print(this,Mt)},st.prototype.reshape=function(Mt){return this.throwIfDisposed(),xt.reshape(this,Mt)},st.prototype.reshapeAs=function(Mt){return this.throwIfDisposed(),this.reshape(Mt.shape)},st.prototype.expandDims=function(Mt){return Mt===void 0&&(Mt=0),xt.expandDims(this,Mt)},st.prototype.cumsum=function(Mt,Xr,rn){return Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!1),xt.cumsum(this,Mt,Xr,rn)},st.prototype.squeeze=function(Mt){return this.throwIfDisposed(),xt.squeeze(this,Mt)},st.prototype.clone=function(){return this.throwIfDisposed(),xt.clone(this)},st.prototype.oneHot=function(Mt,Xr,rn){return this.throwIfDisposed(),xt.oneHot(this,Mt,Xr,rn)},st.prototype.toString=function(Mt){return Mt===void 0&&(Mt=!1),dt(this.dataSync(),this.shape,this.dtype,Mt)},st.prototype.tile=function(Mt){return this.throwIfDisposed(),xt.tile(this,Mt)},st.prototype.gather=function(Mt,Xr){return Xr===void 0&&(Xr=0),this.throwIfDisposed(),xt.gather(this,Mt,Xr)},st.prototype.matMul=function(Mt,Xr,rn){return Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!1),this.throwIfDisposed(),xt.matMul(this,Mt,Xr,rn)},st.prototype.dot=function(Mt){return this.throwIfDisposed(),xt.dot(this,Mt)},st.prototype.norm=function(Mt,Xr,rn){return Mt===void 0&&(Mt="euclidean"),Xr===void 0&&(Xr=null),rn===void 0&&(rn=!1),this.throwIfDisposed(),xt.norm(this,Mt,Xr,rn)},st.prototype.slice=function(Mt,Xr){return this.throwIfDisposed(),xt.slice(this,Mt,Xr)},st.prototype.reverse=function(Mt){return this.throwIfDisposed(),xt.reverse(this,Mt)},st.prototype.concat=function(Mt,Xr){return Xr===void 0&&(Xr=0),this.throwIfDisposed(),Mt instanceof st&&(Mt=[Mt]),xt.concat([this].concat(Mt),Xr)},st.prototype.split=function(Mt,Xr){return Xr===void 0&&(Xr=0),this.throwIfDisposed(),xt.split(this,Mt,Xr)},st.prototype.stack=function(Mt,Xr){return Xr===void 0&&(Xr=0),xt.stack([this,Mt],Xr)},st.prototype.unstack=function(Mt){return Mt===void 0&&(Mt=0),xt.unstack(this,Mt)},st.prototype.pad=function(Mt,Xr){return Xr===void 0&&(Xr=0),xt.pad(this,Mt,Xr)},st.prototype.batchNormalization=function(Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.001),bt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(Mt,Xr,an,nn,rn)},st.prototype.batchNorm=function(Mt,Xr,rn,nn,an){return an===void 0&&(an=.001),this.throwIfDisposed(),xt.batchNorm(this,Mt,Xr,rn,nn,an)},st.prototype.all=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.all(this,Mt,Xr)},st.prototype.any=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.any(this,Mt,Xr)},st.prototype.logSumExp=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.logSumExp(this,Mt,Xr)},st.prototype.sum=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.sum(this,Mt,Xr)},st.prototype.prod=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.prod(this,Mt,Xr)},st.prototype.mean=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.mean(this,Mt,Xr)},st.prototype.min=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.min(this,Mt,Xr)},st.prototype.max=function(Mt,Xr){return Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.max(this,Mt,Xr)},st.prototype.argMin=function(Mt){return Mt===void 0&&(Mt=null),this.throwIfDisposed(),xt.argMin(this,Mt)},st.prototype.argMax=function(Mt){return Mt===void 0&&(Mt=null),this.throwIfDisposed(),xt.argMax(this,Mt)},st.prototype.cast=function(Mt){return this.throwIfDisposed(),xt.cast(this,Mt)},st.prototype.add=function(Mt){return this.throwIfDisposed(),xt.add(this,Mt)},st.prototype.addStrict=function(Mt){return this.throwIfDisposed(),xt.addStrict(this,Mt)},st.prototype.atan2=function(Mt){return this.throwIfDisposed(),xt.atan2(this,Mt)},st.prototype.sub=function(Mt){return this.throwIfDisposed(),xt.sub(this,Mt)},st.prototype.subStrict=function(Mt){return this.throwIfDisposed(),xt.subStrict(this,Mt)},st.prototype.pow=function(Mt){return this.throwIfDisposed(),xt.pow(this,Mt)},st.prototype.powStrict=function(Mt){return this.throwIfDisposed(),xt.powStrict(this,Mt)},st.prototype.mul=function(Mt){return this.throwIfDisposed(),xt.mul(this,Mt)},st.prototype.mulStrict=function(Mt){return this.throwIfDisposed(),xt.mulStrict(this,Mt)},st.prototype.div=function(Mt){return this.throwIfDisposed(),xt.div(this,Mt)},st.prototype.divNoNan=function(Mt){return this.throwIfDisposed(),xt.divNoNan(this,Mt)},st.prototype.floorDiv=function(Mt){return this.throwIfDisposed(),xt.floorDiv(this,Mt)},st.prototype.divStrict=function(Mt){return this.throwIfDisposed(),xt.divStrict(this,Mt)},st.prototype.minimum=function(Mt){return this.throwIfDisposed(),xt.minimum(this,Mt)},st.prototype.minimumStrict=function(Mt){return this.throwIfDisposed(),xt.minimumStrict(this,Mt)},st.prototype.maximum=function(Mt){return this.throwIfDisposed(),xt.maximum(this,Mt)},st.prototype.maximumStrict=function(Mt){return this.throwIfDisposed(),xt.maximumStrict(this,Mt)},st.prototype.mod=function(Mt){return this.throwIfDisposed(),xt.mod(this,Mt)},st.prototype.modStrict=function(Mt){return this.throwIfDisposed(),xt.modStrict(this,Mt)},st.prototype.squaredDifferenceStrict=function(Mt){return this.throwIfDisposed(),xt.squaredDifferenceStrict(this,Mt)},st.prototype.transpose=function(Mt){return this.throwIfDisposed(),xt.transpose(this,Mt)},st.prototype.notEqual=function(Mt){return this.throwIfDisposed(),xt.notEqual(this,Mt)},st.prototype.notEqualStrict=function(Mt){return this.throwIfDisposed(),xt.notEqualStrict(this,Mt)},st.prototype.less=function(Mt){return this.throwIfDisposed(),xt.less(this,Mt)},st.prototype.lessStrict=function(Mt){return this.throwIfDisposed(),xt.lessStrict(this,Mt)},st.prototype.equal=function(Mt){return this.throwIfDisposed(),xt.equal(this,Mt)},st.prototype.equalStrict=function(Mt){return this.throwIfDisposed(),xt.equalStrict(this,Mt)},st.prototype.lessEqual=function(Mt){return this.throwIfDisposed(),xt.lessEqual(this,Mt)},st.prototype.lessEqualStrict=function(Mt){return this.throwIfDisposed(),xt.lessEqualStrict(this,Mt)},st.prototype.greater=function(Mt){return this.throwIfDisposed(),xt.greater(this,Mt)},st.prototype.greaterStrict=function(Mt){return this.throwIfDisposed(),xt.greaterStrict(this,Mt)},st.prototype.greaterEqual=function(Mt){return this.throwIfDisposed(),xt.greaterEqual(this,Mt)},st.prototype.greaterEqualStrict=function(Mt){return this.throwIfDisposed(),xt.greaterEqualStrict(this,Mt)},st.prototype.logicalAnd=function(Mt){return this.throwIfDisposed(),xt.logicalAnd(this,Mt)},st.prototype.logicalOr=function(Mt){return this.throwIfDisposed(),xt.logicalOr(this,Mt)},st.prototype.logicalNot=function(){return this.throwIfDisposed(),xt.logicalNot(this)},st.prototype.logicalXor=function(Mt){return this.throwIfDisposed(),xt.logicalXor(this,Mt)},st.prototype.where=function(Mt,Xr){return this.throwIfDisposed(),xt.where(Mt,this,Xr)},st.prototype.neg=function(){return this.throwIfDisposed(),xt.neg(this)},st.prototype.ceil=function(){return this.throwIfDisposed(),xt.ceil(this)},st.prototype.floor=function(){return this.throwIfDisposed(),xt.floor(this)},st.prototype.sign=function(){return this.throwIfDisposed(),xt.sign(this)},st.prototype.isNaN=function(){return this.throwIfDisposed(),xt.isNaN(this)},st.prototype.isInf=function(){return this.throwIfDisposed(),xt.isInf(this)},st.prototype.isFinite=function(){return this.throwIfDisposed(),xt.isFinite(this)},st.prototype.exp=function(){return this.throwIfDisposed(),xt.exp(this)},st.prototype.expm1=function(){return this.throwIfDisposed(),xt.expm1(this)},st.prototype.log=function(){return this.throwIfDisposed(),xt.log(this)},st.prototype.log1p=function(){return this.throwIfDisposed(),xt.log1p(this)},st.prototype.sqrt=function(){return this.throwIfDisposed(),xt.sqrt(this)},st.prototype.rsqrt=function(){return this.throwIfDisposed(),xt.rsqrt(this)},st.prototype.square=function(){return this.throwIfDisposed(),xt.square(this)},st.prototype.reciprocal=function(){return this.throwIfDisposed(),xt.reciprocal(this)},st.prototype.abs=function(){return this.throwIfDisposed(),xt.abs(this)},st.prototype.clipByValue=function(Mt,Xr){return this.throwIfDisposed(),xt.clipByValue(this,Mt,Xr)},st.prototype.relu=function(){return this.throwIfDisposed(),xt.relu(this)},st.prototype.relu6=function(){return this.throwIfDisposed(),xt.relu6(this)},st.prototype.elu=function(){return this.throwIfDisposed(),xt.elu(this)},st.prototype.selu=function(){return this.throwIfDisposed(),xt.selu(this)},st.prototype.leakyRelu=function(Mt){return Mt===void 0&&(Mt=.2),this.throwIfDisposed(),xt.leakyRelu(this,Mt)},st.prototype.prelu=function(Mt){return this.throwIfDisposed(),xt.prelu(this,Mt)},st.prototype.sigmoid=function(){return this.throwIfDisposed(),xt.sigmoid(this)},st.prototype.logSigmoid=function(){return this.throwIfDisposed(),xt.logSigmoid(this)},st.prototype.softplus=function(){return this.throwIfDisposed(),xt.softplus(this)},st.prototype.zerosLike=function(){return this.throwIfDisposed(),xt.zerosLike(this)},st.prototype.onesLike=function(){return this.throwIfDisposed(),xt.onesLike(this)},st.prototype.sin=function(){return this.throwIfDisposed(),xt.sin(this)},st.prototype.cos=function(){return this.throwIfDisposed(),xt.cos(this)},st.prototype.tan=function(){return this.throwIfDisposed(),xt.tan(this)},st.prototype.asin=function(){return this.throwIfDisposed(),xt.asin(this)},st.prototype.acos=function(){return this.throwIfDisposed(),xt.acos(this)},st.prototype.atan=function(){return this.throwIfDisposed(),xt.atan(this)},st.prototype.sinh=function(){return this.throwIfDisposed(),xt.sinh(this)},st.prototype.cosh=function(){return this.throwIfDisposed(),xt.cosh(this)},st.prototype.tanh=function(){return this.throwIfDisposed(),xt.tanh(this)},st.prototype.asinh=function(){return this.throwIfDisposed(),xt.asinh(this)},st.prototype.acosh=function(){return this.throwIfDisposed(),xt.acosh(this)},st.prototype.atanh=function(){return this.throwIfDisposed(),xt.atanh(this)},st.prototype.erf=function(){return this.throwIfDisposed(),xt.erf(this)},st.prototype.round=function(){return this.throwIfDisposed(),xt.round(this)},st.prototype.step=function(Mt){return Mt===void 0&&(Mt=0),this.throwIfDisposed(),xt.step(this,Mt)},st.prototype.softmax=function(Mt){return Mt===void 0&&(Mt=-1),this.throwIfDisposed(),xt.softmax(this,Mt)},st.prototype.logSoftmax=function(Mt){return Mt===void 0&&(Mt=-1),this.throwIfDisposed(),xt.logSoftmax(this,Mt)},st.prototype.resizeBilinear=function(Mt,Xr){return Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.image.resizeBilinear(this,Mt,Xr)},st.prototype.resizeNearestNeighbor=function(Mt,Xr){return Xr===void 0&&(Xr=!1),this.throwIfDisposed(),xt.image.resizeNearestNeighbor(this,Mt,Xr)},st.prototype.conv1d=function(Mt,Xr,rn,nn,an,on){return nn===void 0&&(nn="NWC"),an===void 0&&(an=1),this.throwIfDisposed(),xt.conv1d(this,Mt,Xr,rn,nn,an,on)},st.prototype.conv2d=function(Mt,Xr,rn,nn,an,on){return nn===void 0&&(nn="NHWC"),an===void 0&&(an=[1,1]),this.throwIfDisposed(),xt.conv2d(this,Mt,Xr,rn,nn,an,on)},st.prototype.conv2dTranspose=function(Mt,Xr,rn,nn,an){return this.throwIfDisposed(),xt.conv2dTranspose(this,Mt,Xr,rn,nn,an)},st.prototype.depthwiseConv2D=function(Mt,Xr,rn,nn,an,on){return nn===void 0&&(nn="NHWC"),an===void 0&&(an=[1,1]),this.throwIfDisposed(),xt.depthwiseConv2d(this,Mt,Xr,rn,nn,an,on)},st.prototype.separableConv2d=function(Mt,Xr,rn,nn,an,on){return an===void 0&&(an=[1,1]),on===void 0&&(on="NHWC"),this.throwIfDisposed(),xt.separableConv2d(this,Mt,Xr,rn,nn,an,on)},st.prototype.avgPool=function(Mt,Xr,rn,nn){return this.throwIfDisposed(),xt.avgPool(this,Mt,Xr,rn,nn)},st.prototype.maxPool=function(Mt,Xr,rn,nn){return this.throwIfDisposed(),xt.maxPool(this,Mt,Xr,rn,nn)},st.prototype.localResponseNormalization=function(Mt,Xr,rn,nn){return Mt===void 0&&(Mt=5),Xr===void 0&&(Xr=1),rn===void 0&&(rn=1),nn===void 0&&(nn=.5),xt.localResponseNormalization(this,Mt,Xr,rn,nn)},st.prototype.pool=function(Mt,Xr,rn,nn,an){return this.throwIfDisposed(),xt.pool(this,Mt,Xr,rn,nn,an)},st.prototype.variable=function(Mt,Xr,rn){return Mt===void 0&&(Mt=!0),this.throwIfDisposed(),yt$1().makeVariable(this,Mt,Xr,rn)},st.prototype.unsortedSegmentSum=function(Mt,Xr){return this.throwIfDisposed(),xt.unsortedSegmentSum(this,Mt,Xr)},st.prototype.batchToSpaceND=function(Mt,Xr){return this.throwIfDisposed(),xt.batchToSpaceND(this,Mt,Xr)},st.prototype.spaceToBatchND=function(Mt,Xr){return this.throwIfDisposed(),xt.spaceToBatchND(this,Mt,Xr)},st.prototype.topk=function(Mt,Xr){return Mt===void 0&&(Mt=1),Xr===void 0&&(Xr=!0),this.throwIfDisposed(),xt.topk(this,Mt,Xr)},st.prototype.stridedSlice=function(Mt,Xr,rn,nn,an,on,sn,ln){return nn===void 0&&(nn=0),an===void 0&&(an=0),on===void 0&&(on=0),sn===void 0&&(sn=0),ln===void 0&&(ln=0),this.throwIfDisposed(),xt.stridedSlice(this,Mt,Xr,rn,nn,an,on,sn,ln)},st.prototype.depthToSpace=function(Mt,Xr){return this.throwIfDisposed(),xt.depthToSpace(this,Mt,Xr)},st.prototype.fft=function(){return this.throwIfDisposed(),xt.spectral.fft(this)},st.prototype.ifft=function(){return this.throwIfDisposed(),xt.spectral.ifft(this)},st.prototype.rfft=function(){return this.throwIfDisposed(),xt.spectral.rfft(this)},st.prototype.irfft=function(){return this.throwIfDisposed(),xt.spectral.irfft(this)},st}();Object.defineProperty(wt,Symbol.hasInstance,{value:function(st){return!!st&&st.dataId!=null&&st.shape!=null&&st.dtype!=null}});var Ct,Et,Rt,It,kt,St=function(st){function Mt(Xr,rn,nn,an){var on=st.call(this,Xr.shape,Xr.dtype,Xr.dataId,an)||this;return on.trainable=rn,on.name=nn,on}return e$3(Mt,st),Mt.prototype.assign=function(Xr){if(Xr.dtype!==this.dtype)throw new Error("dtype of the new value ("+Xr.dtype+") and previous value ("+this.dtype+") must match");if(!S$3(Xr.shape,this.shape))throw new Error("shape of the new value ("+Xr.shape+") and previous value ("+this.shape+") must match");yt$1().disposeTensor(this),this.dataId=Xr.dataId,yt$1().incRef(this,null)},Mt.prototype.dispose=function(){yt$1().disposeVariable(this),this.isDisposedInternal=!0},Mt}(wt);Object.defineProperty(St,Symbol.hasInstance,{value:function(st){return st instanceof wt&&st.assign!=null&&st.assign instanceof Function}}),function(st){st.R0="R0",st.R1="R1",st.R2="R2",st.R3="R3",st.R4="R4",st.R5="R5",st.R6="R6"}(Ct||(Ct={})),function(st){st.float32="float32",st.int32="int32",st.bool="int32",st.complex64="complex64"}(Et||(Et={})),function(st){st.float32="float32",st.int32="int32",st.bool="bool",st.complex64="complex64"}(Rt||(Rt={})),function(st){st.float32="float32",st.int32="float32",st.bool="float32",st.complex64="complex64"}(It||(It={})),function(st){st.float32="complex64",st.int32="complex64",st.bool="complex64",st.complex64="complex64"}(kt||(kt={}));var At={float32:It,int32:Et,bool:Rt,complex64:kt};function Dt(st,Mt){if(st==="string"||Mt==="string"){if(st==="string"&&Mt==="string")return"string";throw new Error("Can not upcast "+st+" with "+Mt)}return At[st][Mt]}function Tt(st){return Dt(st,"int32")}function Nt(st,Mt){if(st.dtype===Mt.dtype)return[st,Mt];var Xr=Dt(st.dtype,Mt.dtype);return[st.cast(Xr),Mt.cast(Xr)]}function Ft(st,Mt){C(st.dtype===Mt.dtype,function(){return"The dtypes of the first("+st.dtype+") and second("+Mt.dtype+") input must match"})}function _t(st){var Mt=[];return function Xr(rn,nn,an){if(rn!=null){if(rn instanceof wt)return void nn.push(rn);if(on=rn,!(!Array.isArray(on)&&typeof on!="object")){var on,sn=rn;for(var ln in sn){var un=sn[ln];an.has(un)||(an.add(un),Xr(un,nn,an))}}}}(st,Mt,new Set),Mt}var Ot,Bt=function(){function st(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return st.prototype.dispose=function(){for(var Mt in this.registeredVariables)this.registeredVariables[Mt].dispose()},st}(),Pt=function(){function st(Mt){this.ENV=Mt,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Bt}return st.prototype.ready=function(){return n(this,void 0,void 0,function(){var Mt,Xr,rn;return r$2(this,function(nn){switch(nn.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];Mt=this.getSortedBackends(),Xr=0,nn.label=1;case 1:return Xr<Mt.length?(rn=Mt[Xr],[4,this.initializeBackend(rn).success]):[3,5];case 2:return nn.sent()?[4,this.setBackend(rn)]:[3,4];case 3:return nn.sent(),[2];case 4:return Xr++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(st.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var Mt=this.initializeBackendsAndReturnBest(),Xr=Mt.name;if(Mt.asyncInit)throw new Error("The highest priority backend '"+Xr+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(Xr)}return this.backendInstance},enumerable:!0,configurable:!0}),st.prototype.backendNames=function(){return Object.keys(this.registryFactory)},st.prototype.findBackend=function(Mt){return!(Mt in this.registry)&&(!(Mt in this.registryFactory)||this.initializeBackend(Mt).asyncInit)?null:this.registry[Mt]},st.prototype.findBackendFactory=function(Mt){return Mt in this.registryFactory?this.registryFactory[Mt].factory:null},st.prototype.registerBackend=function(Mt,Xr,rn){return rn===void 0&&(rn=1),Mt in this.registryFactory?(console.warn(Mt+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[Mt]={factory:Xr,priority:rn},!0)},st.prototype.setBackend=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn;return r$2(this,function(an){switch(an.label){case 0:if(this.registryFactory[Mt]==null)throw new Error("Backend name '"+Mt+"' not found in registry");return this.backendName=Mt,this.registry[Mt]!=null?[3,4]:(this.backendInstance=null,Xr=this.initializeBackend(Mt),rn=Xr.success,Xr.asyncInit?[4,rn]:[3,2]);case 1:return nn=an.sent(),[3,3];case 2:nn=rn,an.label=3;case 3:if(!nn)return[2,!1];an.label=4;case 4:return this.backendInstance=this.registry[Mt],this.setupRegisteredKernels(),this.profiler=new ut(this.backendInstance),[2,!0]}})})},st.prototype.setupRegisteredKernels=function(){var Mt=this;f$4(this.backendName).forEach(function(Xr){Xr.setupFunc!=null&&Xr.setupFunc(Mt.backendInstance)})},st.prototype.disposeRegisteredKernels=function(Mt){var Xr=this;f$4(Mt).forEach(function(rn){rn.disposeFunc!=null&&rn.disposeFunc(Xr.registry[Mt])})},st.prototype.initializeBackend=function(Mt){var Xr=this,rn=this.registryFactory[Mt];if(rn==null)throw new Error("Cannot initialize backend "+Mt+", no registration found.");try{var nn=rn.factory();if(Promise.resolve(nn)===nn){var an=++this.pendingBackendInitId,on=nn.then(function(sn){return!(an<Xr.pendingBackendInitId)&&(Xr.registry[Mt]=sn,Xr.pendingBackendInit=null,!0)}).catch(function(sn){return!(an<Xr.pendingBackendInitId)&&(Xr.pendingBackendInit=null,console.warn("Initialization of backend "+Mt+" failed"),console.warn(sn.stack||sn.message),!1)});return this.pendingBackendInit=on,{success:on,asyncInit:!0}}return this.registry[Mt]=nn,{success:!0,asyncInit:!1}}catch(sn){return console.warn("Initialization of backend "+Mt+" failed"),console.warn(sn.stack||sn.message),{success:!1,asyncInit:!1}}},st.prototype.removeBackend=function(Mt){if(!(Mt in this.registryFactory))throw new Error(Mt+" backend not found in registry");this.backendName===Mt&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,Mt in this.registry&&(this.disposeRegisteredKernels(Mt),this.registry[Mt].dispose(),delete this.registry[Mt]),delete this.registryFactory[Mt],this.backendName===Mt&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},st.prototype.getSortedBackends=function(){var Mt=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(Xr,rn){return Mt.registryFactory[rn].priority-Mt.registryFactory[Xr].priority})},st.prototype.initializeBackendsAndReturnBest=function(){for(var Mt=this.getSortedBackends(),Xr=0;Xr<Mt.length;Xr++){var rn=Mt[Xr],nn=this.initializeBackend(rn),an=nn.success,on=nn.asyncInit;if(on||an)return{name:rn,asyncInit:on}}throw new Error("Could not initialize any backends, all backend initializations failed.")},st.prototype.moveData=function(Mt,Xr){var rn=this.state.tensorInfo.get(Xr),nn=rn.backend,an=this.readSync(Xr);nn.disposeData(Xr),rn.backend=Mt,Mt.move(Xr,an,rn.shape,rn.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},st.prototype.tidy=function(Mt,Xr){var rn,nn=this,an=null;if(Xr==null){if(typeof Mt!="function")throw new Error("Please provide a function to tidy()");Xr=Mt}else{if(typeof Mt!="string"&&!(Mt instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof Xr!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");an=Mt}return this.scopedRun(function(){return nn.startScope(an)},function(){return nn.endScope(rn)},function(){return(rn=Xr())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),rn})},st.prototype.scopedRun=function(Mt,Xr,rn){Mt();try{var nn=rn();return Xr(),nn}catch(an){throw Xr(),an}},st.prototype.nextTensorId=function(){return st.nextTensorId++},st.prototype.nextVariableId=function(){return st.nextVariableId++},st.prototype.clone=function(Mt){var Xr=this.makeTensorFromDataId(Mt.dataId,Mt.shape,Mt.dtype),rn={x:Mt};return this.addTapeNode(this.state.activeScope.name,rn,[Xr],function(nn){return{x:function(){return nn.toFloat()}}},[]),Xr},st.prototype.runKernel=function(Mt,Xr,rn,nn,an){return this.runKernelFunc(null,Xr,null,Mt,rn,nn,an)},st.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},st.prototype.checkKernelForMemLeak=function(Mt,Xr,rn){var nn=this.backend.numDataIds(),an=0;rn.forEach(function(ln){an+=ln.dtype==="complex64"?3:1});var on=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],sn=nn-Xr-an-on;if(sn>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+sn+" data ids) after running '"+Mt+"'")},st.prototype.runKernelFunc=function(Mt,Xr,rn,nn,an,on,sn){var ln,un=this;on===void 0&&(on=[]),sn===void 0&&(sn=[]);var cn=[],hn=this.isTapeOn();nn==null&&(nn=this.state.activeScope!=null?this.state.activeScope.name:"");var fn,to=function(ho){hn&&(cn=ho.map(function(fo){return un.keep(un.clone(fo))}))},uo=this.state.numBytes,co=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var Uo,lo=l$2(nn,this.backendName);return fn=lo!=null?function(){var ho=un.backend.numDataIds();Uo=lo.kernelFunc({inputs:Xr,attrs:an,backend:un.backend});var fo=Array.isArray(Uo)?Uo:[Uo];un.shouldCheckForMemLeaks()&&un.checkKernelForMemLeak(nn,ho,fo);var mo=fo.map(function(ep){var rp=ep.dataId,ap=ep.shape,sp=ep.dtype;return un.makeTensorFromDataId(rp,ap,sp)}),_d=mo.filter(function(ep,rp){return sn[rp]});return to((on||[]).slice().concat(_d)),mo}:function(){var ho=un.backend.numDataIds();Uo=un.tidy(function(){return Mt(un.backend,to)});var fo=Array.isArray(Uo)?Uo:[Uo];return un.shouldCheckForMemLeaks()&&un.checkKernelForMemLeak(nn,ho,fo),fo},this.scopedRun(function(){return un.state.kernelDepth++},function(){return un.state.kernelDepth--},function(){ln=un.ENV.getBool("DEBUG")?un.profiler.profileKernel(nn,Xr,function(){return fn()}):fn()}),hn&&this.addTapeNode(nn,Xr,ln,rn,cn),this.state.profiling&&this.state.activeProfile.kernels.push({name:nn,bytesAdded:this.state.numBytes-uo,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-co,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(Xr).map(function(ho){return Xr[ho].shape}),outputShapes:ln.map(function(ho){return ho.shape})}),Array.isArray(Uo)?ln:ln[0]},st.prototype.makeTensor=function(Mt,Xr,rn,nn){if(Mt==null)throw new Error("Values passed to engine.makeTensor() are null");rn=rn||"float32",nn=nn||this.backend;var an=Mt;rn==="string"&&H$2(Mt[0])&&(an=Mt.map(function(cn){return rt(cn)}));var on=nn.write(an,Xr,rn),sn=new wt(Xr,rn,on,this.nextTensorId());if(this.incRef(sn,nn),rn==="string"){var ln=this.state.tensorInfo.get(on),un=G(an);this.state.numBytes+=un-ln.bytes,ln.bytes=un}return sn},st.prototype.makeTensorFromDataId=function(Mt,Xr,rn,nn){var an=new wt(Xr,rn=rn||"float32",Mt,this.nextTensorId());return this.incRef(an,nn),an},st.prototype.makeVariable=function(Mt,Xr,rn,nn){Xr===void 0&&(Xr=!0),rn=rn||this.nextVariableId().toString(),nn!=null&&nn!==Mt.dtype&&(Mt=Mt.asType(nn));var an=new St(Mt,Xr,rn,this.nextTensorId());if(this.state.registeredVariables[an.name]!=null)throw new Error("Variable with name "+an.name+" was already registered");return this.state.registeredVariables[an.name]=an,this.incRef(an,this.backend),an},st.prototype.incRef=function(Mt,Xr){var rn=this.state.tensorInfo.has(Mt.dataId)?this.state.tensorInfo.get(Mt.dataId).refCount:0;if(this.state.numTensors++,Mt.dtype==="string"&&this.state.numStringTensors++,rn===0){this.state.numDataBuffers++;var nn=0;Mt.dtype!=="complex64"&&Mt.dtype!=="string"&&(nn=Mt.size*z(Mt.dtype)),this.state.tensorInfo.set(Mt.dataId,{backend:Xr||this.backend,dtype:Mt.dtype,shape:Mt.shape,bytes:nn,refCount:0}),this.state.numBytes+=nn}this.state.tensorInfo.get(Mt.dataId).refCount++,Mt instanceof St||this.track(Mt)},st.prototype.disposeTensor=function(Mt){if(this.state.tensorInfo.has(Mt.dataId)){this.state.numTensors--,Mt.dtype==="string"&&this.state.numStringTensors--;var Xr=this.state.tensorInfo.get(Mt.dataId);Xr.refCount<=1?(Mt.dtype!=="complex64"&&(this.state.numBytes-=Xr.bytes),this.state.numDataBuffers--,Xr.backend.disposeData(Mt.dataId),this.state.tensorInfo.delete(Mt.dataId)):this.state.tensorInfo.get(Mt.dataId).refCount--}},st.prototype.disposeVariables=function(){for(var Mt in this.state.registeredVariables){var Xr=this.state.registeredVariables[Mt];this.disposeVariable(Xr)}},st.prototype.disposeVariable=function(Mt){this.disposeTensor(Mt),this.state.registeredVariables[Mt.name]!=null&&delete this.state.registeredVariables[Mt.name]},st.prototype.memory=function(){var Mt=this.backend.memory();return Mt.numTensors=this.state.numTensors,Mt.numDataBuffers=this.state.numDataBuffers,Mt.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(Mt.unreliable=!0,Mt.reasons==null&&(Mt.reasons=[]),Mt.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),Mt},st.prototype.profile=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn;return r$2(this,function(nn){return this.state.profiling=!0,Xr=this.state.numBytes,rn=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=Mt(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(an){return an.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-Xr,this.state.activeProfile.newTensors=this.state.numTensors-rn,[2,this.state.activeProfile]})})},st.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},st.prototype.addTapeNode=function(Mt,Xr,rn,nn,an){var on=this,sn={id:this.state.nextTapeNodeId++,kernelName:Mt,inputs:Xr,outputs:rn,saved:an},ln=h$4(Mt);ln!=null&&(nn=ln.gradFunc),nn!=null&&(sn.gradient=function(un){return un=un.map(function(cn,hn){if(cn==null){var fn=rn[hn],to=tt(fn.size,fn.dtype);return on.makeTensor(to,fn.shape,fn.dtype)}return cn}),nn(un.length>1?un:un[0],an)}),this.state.activeTape.push(sn)},st.prototype.keep=function(Mt){return Mt.kept=!0,Mt},st.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},st.prototype.endTape=function(){this.state.gradientDepth--},st.prototype.startScope=function(Mt){var Xr={track:[],name:"unnamed scope",id:this.state.nextScopeId++};Mt&&(Xr.name=Mt),this.state.scopeStack.push(Xr),this.state.activeScope=Xr},st.prototype.endScope=function(Mt){for(var Xr=this,rn=_t(Mt),nn=new Set(rn.map(function(ln){return ln.id})),an=0;an<this.state.activeScope.track.length;an++){var on=this.state.activeScope.track[an];on.kept||nn.has(on.id)||on.dispose()}var sn=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],rn.forEach(function(ln){ln.kept||ln.scopeId!==sn.id||Xr.track(ln)})},st.prototype.gradients=function(Mt,Xr,rn,nn){var an=this;if(nn===void 0&&(nn=!1),C(Xr.length>0,function(){return"gradients() received an empty list of xs."}),rn!=null&&rn.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+rn.dtype+"'");var on=this.scopedRun(function(){return an.startTape()},function(){return an.endTape()},function(){return an.tidy("forward",Mt)});C(on instanceof wt,function(){return"The result y returned by f() must be a tensor."});var sn=function(ln,un,cn){for(var hn={},fn={},to=0;to<un.length;to++)hn[un[to].id]=!0;for(to=0;to<ln.length;to++){var uo=(ep=ln[to]).inputs;for(var co in uo){for(var Uo=uo[co],lo=!1,ho=0;ho<un.length;ho++)if(hn[Uo.id]){ep.outputs.forEach(function(up){return hn[up.id]=!0}),lo=!0,fn[ep.id]=!0;break}if(lo)break}}var fo={};fo[cn.id]=!0;var mo={};for(to=ln.length-1;to>=0;to--)for(uo=(ep=ln[to]).inputs,ho=0;ho<ep.outputs.length;ho++)if(fo[ep.outputs[ho].id]){for(var co in uo)fo[uo[co].id]=!0,mo[ep.id]=!0;break}var _d=[];for(to=0;to<ln.length;to++){var ep;if(fn[(ep=ln[to]).id]&&mo[ep.id]){var rp={};for(var co in ep.inputs){var ap=ep.inputs[co];hn[ap.id]&&(rp[co]=ap)}var sp=Object.assign({},ep);sp.inputs=rp,sp.outputs=ep.outputs,_d.push(sp)}}return _d}(this.state.activeTape,Xr,on);if(!nn&&sn.length===0&&Xr.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var ln,un,cn={};cn[on.id]=rn??(ln=on.shape,un=Z(k(ln),"float32"),Lt.makeTensor(un,ln,"float32")),function(fn,to,uo){for(var co=function(lo){var ho=to[lo],fo=[];if(ho.outputs.forEach(function(rp){var ap=fn[rp.id];ap!=null?fo.push(ap):fo.push(null)}),ho.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+ho.kernelName+".");var mo=ho.gradient(fo),_d=function(rp){if(!(rp in mo))throw new Error("Cannot backprop through input "+rp+". Available gradients found: "+Object.keys(mo)+".");var ap=uo(function(){return mo[rp]()});if(ap.dtype!=="float32")throw new Error("Error in gradient for op "+ho.kernelName+". The gradient of input "+rp+" must have 'float32' dtype, but has '"+ap.dtype+"'");var sp=ho.inputs[rp];if(!S$3(ap.shape,sp.shape))throw new Error("Error in gradient for op "+ho.kernelName+". The gradient of input '"+rp+"' has shape '"+ap.shape+"', which does not match the shape of the input '"+sp.shape+"'");if(fn[sp.id]==null)fn[sp.id]=ap;else{var up=fn[sp.id];fn[sp.id]=up.add(ap),up.dispose()}};for(var ep in ho.inputs)_d(ep)},Uo=to.length-1;Uo>=0;Uo--)co(Uo)}(cn,sn,function(fn){return an.tidy(fn)});var hn=Xr.map(function(fn){return cn[fn.id]});return an.state.gradientDepth===0&&(an.state.activeTape.forEach(function(fn){for(var to=0,uo=fn.saved;to<uo.length;to++)uo[to].dispose()}),an.state.activeTape=null),{value:on,grads:hn}})},st.prototype.customGrad=function(Mt){var Xr=this;return C(X$1(Mt),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var rn,nn=[],an=0;an<arguments.length;an++)nn[an]=arguments[an];C(nn.every(function(sn){return sn instanceof wt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var on={};return nn.forEach(function(sn,ln){on[ln]=sn}),Xr.runKernelFunc(function(sn,ln){return C((rn=Mt.apply(void 0,nn.concat([ln]))).value instanceof wt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),C(X$1(rn.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),rn.value},on,function(sn,ln){var un=rn.gradFunc(sn,ln),cn=Array.isArray(un)?un:[un];C(cn.length===nn.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),C(cn.every(function(fn){return fn instanceof wt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var hn={};return cn.forEach(function(fn,to){hn[to]=function(){return fn}}),hn})}},st.prototype.readSync=function(Mt){return this.state.tensorInfo.get(Mt).backend.readSync(Mt)},st.prototype.read=function(Mt){return this.state.tensorInfo.get(Mt).backend.read(Mt)},st.prototype.time=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn;return r$2(this,function(nn){switch(nn.label){case 0:return Xr=et(),[4,this.backend.time(Mt)];case 1:return(rn=nn.sent()).wallMs=et()-Xr,[2,rn]}})})},st.prototype.track=function(Mt){return this.state.activeScope!=null&&(Mt.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(Mt)),Mt},Object.defineProperty(st.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),st.prototype.reset=function(){for(var Mt in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Bt,this.registry)this.disposeRegisteredKernels(Mt),this.registry[Mt].dispose(),delete this.registry[Mt];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},st.nextTensorId=0,st.nextVariableId=0,st}(),Lt=function(){var st=function(){if(Ot==null){var Xr=void 0;if(typeof window<"u")Xr=window;else if(typeof global<"u")Xr=global;else if(typeof process<"u")Xr=process;else{if(typeof self>"u")throw new Error("Could not find a global object");Xr=self}Ot=Xr}return Ot}();if(st._tfengine==null){var Mt=new o$5(st);st._tfengine=new Pt(Mt)}return function(Xr){s$4=Xr}(st._tfengine.ENV),yt$1=function(){return st._tfengine},st._tfengine}();function Wt(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ut=i$2();Ut.registerFlag("DEBUG",function(){return!1},function(st){st&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ut.registerFlag("IS_BROWSER",function(){return Wt()}),Ut.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ut.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ut.registerFlag("PROD",function(){return!1}),Ut.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ut.getBool("DEBUG")}),Ut.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ut.registerFlag("IS_TEST",function(){return!1});var Vt,zt,Gt,Ht={},qt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kt(st,Mt){Ht[st]=Mt}function jt(st){st in Ht||(Ht[st]=function(Xr){if(Xr!==1&&Xr!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var rn=function(nn){if(typeof OffscreenCanvas<"u"&&nn===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(Xr);return rn.addEventListener("webglcontextlost",function(nn){nn.preventDefault(),delete Ht[Xr]},!1),Xr===1?rn.getContext("webgl",qt)||rn.getContext("experimental-webgl",qt):rn.getContext("webgl2",qt)}(st));var Mt=Ht[st];return Mt.isContextLost()?(delete Ht[st],jt(st)):(Mt.disable(Mt.DEPTH_TEST),Mt.disable(Mt.STENCIL_TEST),Mt.disable(Mt.BLEND),Mt.disable(Mt.DITHER),Mt.disable(Mt.POLYGON_OFFSET_FILL),Mt.disable(Mt.SAMPLE_COVERAGE),Mt.enable(Mt.SCISSOR_TEST),Mt.enable(Mt.CULL_FACE),Mt.cullFace(Mt.BACK),Ht[st])}function Xt(st,Mt){return[Mt,st]}function Yt(st){var Mt=k(st);return T$2(Math.ceil(Mt/4))}function $t(st,Mt){return[Math.max(1,Math.ceil(Mt/2)),Math.max(1,Math.ceil(st/2))]}function Qt(st,Mt){var Xr,rn,nn,an,on,sn,ln,un,cn,hn=st;return i$2().getNumber("WEBGL_VERSION")===2?(Xr=hn.R32F,rn=hn.R16F,nn=hn.RGBA16F,an=hn.RGBA32F,on=hn.RED,sn=4,ln=1,un=hn.HALF_FLOAT,cn=hn.FLOAT):(Xr=st.RGBA,rn=st.RGBA,nn=st.RGBA,an=hn.RGBA,on=st.RGBA,sn=4,ln=4,un=Mt!=null?Mt.HALF_FLOAT_OES:null,cn=st.FLOAT),{internalFormatFloat:Xr,internalFormatHalfFloat:rn,internalFormatPackedHalfFloat:nn,internalFormatPackedFloat:an,textureFormatFloat:on,downloadTextureFormat:st.RGBA,downloadUnpackNumChannels:sn,defaultNumChannels:ln,textureTypeHalfFloat:un,textureTypeFloat:cn}}function Jt(st,Mt,Xr){var rn=Xr();return Mt&&function(nn){var an=nn.getError();if(an!==nn.NO_ERROR)throw new Error("WebGL Error: "+ne$1(nn,an))}(st),rn}(function(st){st[st.DENSE=0]="DENSE",st[st.SHARED_BATCH=1]="SHARED_BATCH"})(Vt||(Vt={})),function(st){st[st.RENDER=0]="RENDER",st[st.UPLOAD=1]="UPLOAD",st[st.PIXELS=2]="PIXELS",st[st.DOWNLOAD=3]="DOWNLOAD"}(zt||(zt={})),function(st){st[st.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",st[st.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",st[st.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",st[st.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",st[st.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Gt||(Gt={}));var Zt=596e-10,te=65504;function ee(st){return!!(i$2().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||st===0||Zt<Math.abs(st)&&Math.abs(st)<te)}function ne$1(st,Mt){switch(Mt){case st.NO_ERROR:return"NO_ERROR";case st.INVALID_ENUM:return"INVALID_ENUM";case st.INVALID_VALUE:return"INVALID_VALUE";case st.INVALID_OPERATION:return"INVALID_OPERATION";case st.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case st.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case st.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+Mt}}function re(st,Mt,Xr){return ke$1(st,Mt,function(){return st.getExtension(Xr)},'Extension "'+Xr+'" not supported on this browser.')}function oe$1(st,Mt,Xr){var rn=ke$1(st,Mt,function(){return st.createShader(st.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Jt(st,Mt,function(){return st.shaderSource(rn,Xr)}),Jt(st,Mt,function(){return st.compileShader(rn)}),st.getShaderParameter(rn,st.COMPILE_STATUS)===!1)throw console.log(st.getShaderInfoLog(rn)),new Error("Failed to compile vertex shader.");return rn}function ae(st,Mt,Xr){var rn=ke$1(st,Mt,function(){return st.createShader(st.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Jt(st,Mt,function(){return st.shaderSource(rn,Xr)}),Jt(st,Mt,function(){return st.compileShader(rn)}),st.getShaderParameter(rn,st.COMPILE_STATUS)===!1)throw function(nn,an){var on=ue.exec(an);if(on==null)return console.log("Couldn't parse line number in error: "+an),void console.log(nn);for(var sn=+on[1],ln=nn.split(`
`),un=ln.length.toString().length+2,cn=ln.map(function(Uo,lo){return N$2((lo+1).toString(),un)+Uo}),hn=0,fn=0;fn<cn.length;fn++)hn=Math.max(cn[fn].length,hn);var to=cn.slice(0,sn-1),uo=cn.slice(sn-1,sn),co=cn.slice(sn);console.log(to.join(`
`)),console.log(an.split(`
`)[0]),console.log("%c "+N$2(uo[0],hn),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(co.join(`
`))}(Xr,st.getShaderInfoLog(rn)),new Error("Failed to compile fragment shader.");return rn}var ie,se,ue=/ERROR: [0-9]+:([0-9]+):/g;function ce(st,Mt){return ke$1(st,Mt,function(){return st.createProgram()},"Unable to create WebGLProgram.")}function le(st,Mt,Xr){if(Jt(st,Mt,function(){return st.linkProgram(Xr)}),st.getProgramParameter(Xr,st.LINK_STATUS)===!1)throw console.log(st.getProgramInfoLog(Xr)),new Error("Failed to link vertex and fragment shaders.")}function he$1(st,Mt,Xr){if(Jt(st,Mt,function(){return st.validateProgram(Xr)}),st.getProgramParameter(Xr,st.VALIDATE_STATUS)===!1)throw console.log(st.getProgramInfoLog(Xr)),new Error("Shader program validation failed.")}function fe(st,Mt,Xr){var rn=ke$1(st,Mt,function(){return st.createBuffer()},"Unable to create WebGLBuffer");return Jt(st,Mt,function(){return st.bindBuffer(st.ARRAY_BUFFER,rn)}),Jt(st,Mt,function(){return st.bufferData(st.ARRAY_BUFFER,Xr,st.STATIC_DRAW)}),rn}function de(st,Mt,Xr){var rn=ke$1(st,Mt,function(){return st.createBuffer()},"Unable to create WebGLBuffer");return Jt(st,Mt,function(){return st.bindBuffer(st.ELEMENT_ARRAY_BUFFER,rn)}),Jt(st,Mt,function(){return st.bufferData(st.ELEMENT_ARRAY_BUFFER,Xr,st.STATIC_DRAW)}),rn}function pe(st,Mt){return ke$1(st,Mt,function(){return st.createTexture()},"Unable to create WebGLTexture.")}function ve(st,Mt){var Xr=i$2().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(st<=0||Mt<=0){var rn="["+st+"x"+Mt+"]";throw new Error("Requested texture size "+rn+" is invalid.")}if(st>Xr||Mt>Xr)throw rn="["+st+"x"+Mt+"]",new Error("Requested texture size "+rn+" greater than WebGL maximum on this browser / GPU "+("["+Xr+"x"+Xr+"]")+".")}function me(st,Mt){return ke$1(st,Mt,function(){return st.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ge(st,Mt,Xr,rn,nn,an,on,sn){var ln=st.getAttribLocation(Xr,rn);return ln!==-1&&(Jt(st,Mt,function(){return st.bindBuffer(st.ARRAY_BUFFER,nn)}),Jt(st,Mt,function(){return st.vertexAttribPointer(ln,an,st.FLOAT,!1,on,sn)}),Jt(st,Mt,function(){return st.enableVertexAttribArray(ln)}),!0)}function ye(st,Mt,Xr,rn){Se$1(st,rn),Jt(st,Mt,function(){return st.activeTexture(st.TEXTURE0+rn)}),Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,Xr)})}function xe$1(st,Mt,Xr,rn){return ke$1(st,Mt,function(){return st.getUniformLocation(Xr,rn)},'uniform "'+rn+'" not present in program.')}function be(st,Mt,Xr){return st.getUniformLocation(Mt,Xr)}function we$1(st,Mt,Xr,rn,nn,an){Jt(st,Mt,function(){return ye(st,Mt,rn,an)}),Jt(st,Mt,function(){return st.uniform1i(nn,an)})}function Ce$1(st,Mt,Xr,rn){Jt(st,Mt,function(){return st.bindFramebuffer(st.FRAMEBUFFER,rn)}),Jt(st,Mt,function(){return st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,Xr,0)})}function Ee(st,Mt,Xr){Jt(st,Mt,function(){return st.bindFramebuffer(st.FRAMEBUFFER,Xr)}),Jt(st,Mt,function(){return st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,null,0)})}function Re(st){var Mt=st.checkFramebufferStatus(st.FRAMEBUFFER);if(Mt!==st.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ie$1(st,Mt))}function Ie$1(st,Mt){switch(Mt){case st.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case st.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case st.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case st.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+Mt}}function ke$1(st,Mt,Xr,rn){var nn=Jt(st,Mt,function(){return Xr()});if(nn==null)throw new Error(rn);return nn}function Se$1(st,Mt){var Xr=st.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,rn=Mt+st.TEXTURE0;if(rn<st.TEXTURE0||rn>Xr)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+Xr+"]")+".")}function Ae(st,Mt){return Mt===void 0&&(Mt=2),k(st.slice(0,st.length-Mt))}function De(st){if(st.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[st.length>1?st[st.length-2]:1,st[st.length-1]]}function Te(st){var Mt=[1,1,1];return st.length===0||st.length===1&&st[0]===1||(Mt=[Ae(st)].concat(De(st))),Mt}function Ne(st,Mt){var Xr;Mt===void 0&&(Mt=!1);var rn=i$2().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(Mt&&(rn*=2,(st=st.map(function(un,cn){return cn>=st.length-2?b$1(st[cn]):st[cn]})).length===1&&(st=[2,st[0]])),st.length!==2){var nn=M$3(st);st=nn.newShape}var an=k(st);if(st.length<=1&&an<=rn)return[1,an];if(st.length===2&&st[0]<=rn&&st[1]<=rn)return st;if(st.length===3&&st[0]*st[1]<=rn&&st[2]<=rn)return[st[0]*st[1],st[2]];if(st.length===3&&st[0]<=rn&&st[1]*st[2]<=rn)return[st[0],st[1]*st[2]];if(st.length===4&&st[0]*st[1]*st[2]<=rn&&st[3]<=rn)return[st[0]*st[1]*st[2],st[3]];if(st.length===4&&st[0]<=rn&&st[1]*st[2]*st[3]<=rn)return[st[0],st[1]*st[2]*st[3]];if(Mt){var on=Ae(st),sn=2,ln=2;return st.length&&(sn=(Xr=De(st))[0],ln=Xr[1]),T$2(an=on*(sn/2)*(ln/2)).map(function(un){return 2*un})}return T$2(an)}function Fe$1(st){return st%2==0}function _e$1(st,Mt){if(S$3(st=st.slice(-2),Mt=Mt.slice(-2))||!st.length||!Mt.length||st[0]===0||st[1]===0||Mt[0]===0||Mt[1]===0)return!0;if(st.length!==Mt.length){var Xr=st.slice(-1)[0],rn=Mt.slice(-1)[0];if(Xr===rn||Fe$1(Xr)&&Fe$1(rn)&&(st[0]===1||Mt[0]===1))return!0}return st[1]===Mt[1]&&Fe$1(st[0])&&Fe$1(Mt[0])}function Oe(st){if(ie==null){var Mt=jt(st);ie=Mt.getParameter(Mt.MAX_TEXTURE_SIZE)}return ie}function Me(st){if(se==null){var Mt=jt(st);se=Mt.getParameter(Mt.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,se)}function Be(st){if(st===0)return 0;var Mt=jt(st);return Pe(Mt,"EXT_disjoint_timer_query_webgl2")&&st===2?2:Pe(Mt,"EXT_disjoint_timer_query")?1:0}function Pe(st,Mt){return st.getExtension(Mt)!=null}function Le$1(st){try{if(jt(st)!=null)return!0}catch{return!1}return!1}function We(st){if(st===0)return!1;var Mt=jt(st);if(st===1){if(!Pe(Mt,"OES_texture_float"))return!1}else if(!Pe(Mt,"EXT_color_buffer_float"))return!1;return Ve(Mt)}function Ue(st){if(st===0)return!1;var Mt=jt(st);if(st!==1){if(Pe(Mt,"EXT_color_buffer_float"))return Ve(Mt);if(Pe(Mt,"EXT_color_buffer_half_float")){var Xr=Mt.getExtension("EXT_color_buffer_half_float");return function(rn,nn){var an=Qt(rn,nn),on=rn.createTexture();rn.bindTexture(rn.TEXTURE_2D,on),rn.texImage2D(rn.TEXTURE_2D,0,an.internalFormatHalfFloat,1,1,0,an.textureFormatFloat,an.textureTypeHalfFloat,null);var sn=rn.createFramebuffer();rn.bindFramebuffer(rn.FRAMEBUFFER,sn),rn.framebufferTexture2D(rn.FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_2D,on,0);var ln=rn.checkFramebufferStatus(rn.FRAMEBUFFER)===rn.FRAMEBUFFER_COMPLETE;return rn.bindTexture(rn.TEXTURE_2D,null),rn.bindFramebuffer(rn.FRAMEBUFFER,null),rn.deleteTexture(on),rn.deleteFramebuffer(sn),ln}(Mt,Xr)}return!1}return!!Pe(Mt,"OES_texture_float")&&!!Pe(Mt,"WEBGL_color_buffer_float")&&Ve(Mt)}function Ve(st){var Mt=Qt(st),Xr=st.createTexture();st.bindTexture(st.TEXTURE_2D,Xr),st.texImage2D(st.TEXTURE_2D,0,Mt.internalFormatFloat,1,1,0,Mt.textureFormatFloat,Mt.textureTypeFloat,null);var rn=st.createFramebuffer();st.bindFramebuffer(st.FRAMEBUFFER,rn),st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,Xr,0);var nn=st.checkFramebufferStatus(st.FRAMEBUFFER)===st.FRAMEBUFFER_COMPLETE;return st.bindTexture(st.TEXTURE_2D,null),st.bindFramebuffer(st.FRAMEBUFFER,null),st.deleteTexture(Xr),st.deleteFramebuffer(rn),nn}function ze(st){return st===2&&jt(st).fenceSync!=null}var He=i$2();function Xe(st){i$2().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(st+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ze(st,Mt){return Lt.tidy(st,Mt)}function tn(st){_t(st).forEach(function(Mt){return Mt.dispose()})}function en(st){return Lt.keep(st)}function dn(){for(var st=[],Mt=0;Mt<arguments.length;Mt++)st[Mt]=arguments[Mt];i$2().getBool("IS_TEST")||console.warn.apply(console,st)}function pn(st,Mt){var Xr=st;if(V(st))return Mt==="string"?[]:[st.length];if(!Array.isArray(st))return[];for(var rn=[];Array.isArray(Xr)||V(Xr)&&Mt!=="string";)rn.push(Xr.length),Xr=Xr[0];return Array.isArray(st)&&i$2().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function nn(an,on,sn){if(sn=sn||[],!Array.isArray(an)&&!V(an))return void C(on.length===0,function(){return"Element arr["+sn.join("][")+"] is a primitive, but should be an array/TypedArray of "+on[0]+" elements"});C(on.length>0,function(){return"Element arr["+sn.join("][")+"] should be a primitive, but is an array of "+an.length+" elements"}),C(an.length===on[0],function(){return"Element arr["+sn.join("][")+"] should have "+on[0]+" elements, but has "+an.length+" elements"});for(var ln=on.slice(1),un=0;un<an.length;++un)nn(an[un],ln,sn.concat(un))}(st,rn,[]),rn}function vn(st,Mt,Xr,rn){if(st!=null&&(st!=="numeric"&&st!==Mt||st==="numeric"&&Mt==="string"))throw new Error("Argument '"+Xr+"' passed to '"+rn+"' must be "+st+" tensor, but got "+Mt+" tensor")}function mn(st,Mt,Xr,rn){if(rn===void 0&&(rn="numeric"),st instanceof wt)return vn(rn,st.dtype,Mt,Xr),st;var nn=j$1(st);if(nn!=="string"&&["bool","int32","float32"].indexOf(rn)>=0&&(nn=rn),vn(rn,nn,Mt,Xr),st==null||!V(st)&&!Array.isArray(st)&&typeof st!="number"&&typeof st!="boolean"&&typeof st!="string"){var an=st==null?"null":st.constructor.name;throw new Error("Argument '"+Mt+"' passed to '"+Xr+"' must be a Tensor or TensorLike, but got '"+an+"'")}var on=pn(st,nn);V(st)||Array.isArray(st)||(st=[st]);var sn=nn!=="string"?Q(st,nn,i$2().getBool("DEBUG")):I$2(st,[],!0);return Lt.makeTensor(sn,on,nn)}function gn(st,Mt,Xr,rn){if(rn===void 0&&(rn="numeric"),!Array.isArray(st))throw new Error("Argument "+Mt+" passed to "+Xr+" must be a `Tensor[]` or `TensorLike[]`");return st.map(function(nn,an){return mn(nn,Mt+"["+an+"]",Xr)},rn)}function yn(st,Mt){for(var Xr=0;Xr<st.length;++Xr)if(st[st.length-Xr-1]!==Mt-1-Xr)return!1;return!0}function xn(st,Mt,Xr){for(var rn=st.length+Mt.length,nn=[],an=0,on=0,sn=0;sn<rn;sn++)Xr.indexOf(sn)===-1?nn.push(st[an++]):nn.push(Mt[on++]);return nn}function bn(st,Mt){for(var Xr=[],rn=st.length,nn=0;nn<rn;nn++)Mt.indexOf(nn)===-1&&Xr.push(st[nn]);return[Xr,Mt.map(function(an){return st[an]})]}function wn(st,Mt){return xn(st,Mt.map(function(Xr){return 1}),Mt)}function Cn(st,Mt,Xr){C(yn(Mt,Xr),function(){return st+" supports only inner-most axes for now. Got axes "+Mt+" and rank-"+Xr+" input."})}function En(st,Mt){if(yn(st,Mt))return null;for(var Xr=[],rn=0;rn<Mt;++rn)st.indexOf(rn)===-1&&Xr.push(rn);return st.forEach(function(nn){return Xr.push(nn)}),Xr}function Rn(st){return st.map(function(Mt,Xr){return[Xr,Mt]}).sort(function(Mt,Xr){return Mt[1]-Xr[1]}).map(function(Mt){return Mt[0]})}function In(st,Mt){for(var Xr=[],rn=Mt-st;rn<Mt;++rn)Xr.push(rn);return Xr}function kn(st,Mt){var Xr=st[0].length;st.forEach(function(nn,an){C(nn.length===Xr,function(){return"Error in concat"+Xr+"D: rank of tensors["+an+"] must be the same as the rank of the rest ("+Xr+")"})}),C(Mt>=0&&Mt<Xr,function(){return"Error in concat"+Xr+"D: axis must be between 0 and "+(Xr-1)+"."});var rn=st[0];st.forEach(function(nn,an){for(var on=0;on<Xr;on++)C(on===Mt||nn[on]===rn[on],function(){return"Error in concat"+Xr+"D: Shape of tensors["+an+"] ("+nn+") does not match the shape of the rest ("+rn+") along the non-concatenated axis "+an+"."})})}function Sn(st,Mt){for(var Xr=st[0].slice(),rn=1;rn<st.length;rn++)Xr[Mt]+=st[rn][Mt];return Xr}function An(st){var Mt=Object.keys(st);if(Mt.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+Mt.length+" keys.");var Xr=Mt[0],rn=st[Xr];Xr.endsWith("_")&&(Xr=Xr.substring(0,Xr.length-1));var nn=function(){for(var an=[],on=0;on<arguments.length;on++)an[on]=arguments[on];Lt.startScope(Xr);try{var sn=rn.apply(void 0,an);return sn instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Lt.endScope(sn),sn}catch(ln){throw Lt.endScope(null),ln}};return Object.defineProperty(nn,"name",{value:Xr,configurable:!0}),nn}He.registerFlag("HAS_WEBGL",function(){return He.getNumber("WEBGL_VERSION")>0}),He.registerFlag("WEBGL_VERSION",function(){return Le$1(2)?2:Le$1(1)?1:0}),He.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return He.get("WEBGL_VERSION")===2}),He.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),He.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),He.registerFlag("WEBGL_PACK",function(){return He.getBool("HAS_WEBGL")}),He.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_CLIP",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),He.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_REDUCE",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_LAZILY_UNPACK",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_CONV_IM2COL",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Oe(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Me(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var st=He.getNumber("WEBGL_VERSION");return st===0?0:Be(st)}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return He.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(st=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(st)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(st.substr(0,4))));var st}),He.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return We(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!He.getBool("WEBGL_FORCE_F16_TEXTURES")&&He.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),He.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Ue(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return ze(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return He.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),bt=Xe;var Dn=An({complex_:function(st,Mt){var Xr=mn(st,"real","complex"),rn=mn(Mt,"imag","complex");return E(Xr.shape,rn.shape,"real and imag shapes, "+Xr.shape+" and "+rn.shape+", must match in call to tf.complex()."),Lt.runKernelFunc(function(nn){return nn.complex(Xr,rn)},{$real:Xr,$imag:rn})}}),Tn=An({real_:function(st){var Mt=mn(st,"input","real");return Lt.runKernelFunc(function(Xr){return Xr.real(Mt)},{$input:Mt})}}),Nn=An({imag_:function(st){var Mt=mn(st,"input","imag");return Lt.runKernelFunc(function(Xr){return Xr.imag(Mt)},{$input:Mt})}});function Fn(st,Mt,Xr){return _n(st,Mt,pn(st,Xr),Xr)}function _n(st,Mt,Xr,rn){if(rn==null&&(rn=j$1(st)),rn==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!V(st)&&!Array.isArray(st)&&typeof st!="number"&&typeof st!="boolean"&&typeof st!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(Mt!=null){nt(Mt);var nn=k(Mt),an=k(Xr);C(nn===an,function(){return"Based on the provided shape, ["+Mt+"], the tensor should have "+nn+" values but has "+an});for(var on=0;on<Xr.length;++on){var sn=Xr[on],ln=on!==Xr.length-1||sn!==k(Mt.slice(on));C(Xr[on]===Mt[on]||!ln,function(){return"Error creating a new Tensor. Inferred shape ("+Xr+") does not match the provided shape ("+Mt+"). "})}}return V(st)||Array.isArray(st)||(st=[st]),Mt=Mt||Xr,st=rn!=="string"?Q(st,rn,i$2().getBool("DEBUG")):I$2(st,[],!0),Lt.makeTensor(st,Mt,rn)}function On(st,Mt){if((V(st)&&Mt!=="string"||Array.isArray(st))&&Mt!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(Mt==="string"&&V(st)&&!(st instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _n(st,[],[],Mt)}function Mn(st,Mt){R$1(st);var Xr=pn(st,Mt);if(Xr.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _n(st,null,Xr,Mt)}function Bn(st,Mt,Xr){if(R$1(st),Mt!=null&&Mt.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var rn=pn(st,Xr);if(rn.length!==2&&rn.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(rn.length===1&&Mt==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _n(st,Mt,rn,Xr)}function Pn(st,Mt,Xr){if(R$1(st),Mt!=null&&Mt.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var rn=pn(st,Xr);if(rn.length!==3&&rn.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(rn.length===1&&Mt==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _n(st,Mt,rn,Xr)}function Ln(st,Mt,Xr){if(R$1(st),Mt!=null&&Mt.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var rn=pn(st,Xr);if(rn.length!==4&&rn.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(rn.length===1&&Mt==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return _n(st,Mt,rn,Xr)}function Wn(st,Mt,Xr){if(R$1(st),Mt!=null&&Mt.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var rn=pn(st,Xr);if(rn.length!==5&&rn.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(rn.length===1&&Mt==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return _n(st,Mt,rn,Xr)}function Un(st,Mt,Xr){if(R$1(st),Mt!=null&&Mt.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var rn=pn(st,Xr);if(rn.length!==6&&rn.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(rn.length===1&&Mt==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return _n(st,Mt=Mt||rn,rn,Xr)}function Vn(st,Mt,Xr,rn){return Mt===void 0&&(Mt=!0),Lt.makeVariable(st,Mt,Xr,rn)}function zn(st,Mt){if(Mt===void 0&&(Mt="float32"),Mt==="complex64"){var Xr=zn(st,"float32"),rn=Gn(st,"float32");return Dn(Xr,rn)}var nn=Z(k(st),Mt);return Lt.makeTensor(nn,st,Mt)}function Gn(st,Mt){if(Mt===void 0&&(Mt="float32"),Mt==="complex64"){var Xr=Gn(st,"float32"),rn=Gn(st,"float32");return Dn(Xr,rn)}var nn=tt(k(st),Mt);return Lt.makeTensor(nn,st,Mt)}function Hn(st,Mt,Xr){return Lt.runKernelFunc(function(rn){return rn.fill(st,Mt,Xr)},{})}function qn(st,Mt,Xr){if(Xr<=0)throw new Error("The number of values should be positive.");return Lt.runKernelFunc(function(rn){return rn.linspace(st,Mt,Xr)},{})}function Kn(st,Mt,Xr,rn){if(Xr===void 0&&(Xr=1),rn===void 0&&(rn="float32"),Xr===0)throw new Error("Cannot have a step of zero");if(st===Mt||st<Mt&&Xr<0||Mt<st&&Xr>1)return Gn([0],rn);var nn=tt(Math.abs(Math.ceil((Mt-st)/Xr)),rn);Mt<st&&Xr===1&&(Xr=-1),nn[0]=st;for(var an=1;an<nn.length;an++)nn[an]=nn[an-1]+Xr;return Mn(nn,rn)}var jn=An({onesLike_:function(st){var Mt=mn(st,"x","onesLike");if(Mt.dtype==="complex64"){var Xr=jn(Tn(Mt)),rn=Xn(Nn(Mt));return Dn(Xr,rn)}return Lt.runKernelFunc(function(nn){return nn.onesLike(Mt)},{$x:Mt},function(nn,an){return{$x:function(){return Xn(nn)}}})}}),Xn=An({zerosLike_:function(st){var Mt=mn(st,"x","zerosLike");return Lt.runKernelFunc(function(Xr){return Xr.zerosLike(Mt)},{$x:Mt},function(Xr,rn){return{$x:function(){return Xn(Xr)}}})}}),Yn=An({concat_:function(st,Mt){Mt===void 0&&(Mt=0),C(st.length>=1,function(){return"Pass at least one tensor to concat"});var Xr=gn(st,"tensors","concat");Xr[0].dtype==="complex64"&&Xr.forEach(function(sn){if(sn.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+sn.dtype+". ")}),Mt=O$1(Mt,Xr[0].shape)[0];var rn=Sn(Xr.map(function(sn){return sn.shape}),Mt);if(k(rn)===0)return Fn([],rn);if((Xr=Xr.filter(function(sn){return sn.size>0})).length===1)return Xr[0];var nn=Xr.map(function(sn){return sn.shape});kn(nn,Mt);var an=Xr,on={axis:Mt};return Lt.runKernelFunc(function(sn){return sn.concat(Xr,Mt)},an,function(sn){var ln=nn.map(function(un){return un[Mt]});return tr(sn,ln,Mt).map(function(un){return function(){return un}})},"Concat",on)}}),$n=An({concat1d_:function(st){return Yn(st,0)}}),Qn=An({concat2d_:function(st,Mt){return Yn(st,Mt)}}),Jn=An({concat3d_:function(st,Mt){return Yn(st,Mt)}}),Zn=An({concat4d_:function(st,Mt){return Yn(st,Mt)}}),tr=An({split_:function(st,Mt,Xr){Xr===void 0&&(Xr=0);var rn,nn=mn(st,"x","split");return Xr=O$1(Xr,nn.shape)[0],typeof Mt=="number"?(C(nn.shape[Xr]%Mt==0,function(){return"Number of splits must evenly divide the axis."}),rn=new Array(Mt).fill(nn.shape[Xr]/Mt)):(C(nn.shape[Xr]===Mt.reduce(function(an,on){return an+on}),function(){return"The sum of sizes must match the size of the axis dimension."}),rn=Mt),Lt.runKernelFunc(function(an){return an.split(nn,rn,Xr)},{$x:nn},function(an){return{$x:function(){return Yn(an,Xr)}}})}});function er(st,Mt){return st(Mt={exports:{}},Mt.exports),Mt.exports}var nr=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln,un=this,cn=(ln=4022871197,function(hn){hn=hn.toString();for(var fn=0;fn<hn.length;fn++){var to=.02519603282416938*(ln+=hn.charCodeAt(fn));to-=ln=to>>>0,ln=(to*=ln)>>>0,ln+=4294967296*(to-=ln)}return 23283064365386963e-26*(ln>>>0)});un.next=function(){var hn=2091639*un.s0+23283064365386963e-26*un.c;return un.s0=un.s1,un.s1=un.s2,un.s2=hn-(un.c=0|hn)},un.c=1,un.s0=cn(" "),un.s1=cn(" "),un.s2=cn(" "),un.s0-=cn(sn),un.s0<0&&(un.s0+=1),un.s1-=cn(sn),un.s1<0&&(un.s1+=1),un.s2-=cn(sn),un.s2<0&&(un.s2+=1),cn=null}function an(sn,ln){return ln.c=sn.c,ln.s0=sn.s0,ln.s1=sn.s1,ln.s2=sn.s2,ln}function on(sn,ln){var un=new nn(sn),cn=ln&&ln.state,hn=un.next;return hn.int32=function(){return 4294967296*un.next()|0},hn.double=function(){return hn()+11102230246251565e-32*(2097152*hn()|0)},hn.quick=hn,cn&&(typeof cn=="object"&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.alea=on})(0,st,!1)}),rr=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln=this,un="";ln.x=0,ln.y=0,ln.z=0,ln.w=0,ln.next=function(){var hn=ln.x^ln.x<<11;return ln.x=ln.y,ln.y=ln.z,ln.z=ln.w,ln.w^=ln.w>>>19^hn^hn>>>8},sn===(0|sn)?ln.x=sn:un+=sn;for(var cn=0;cn<un.length+64;cn++)ln.x^=0|un.charCodeAt(cn),ln.next()}function an(sn,ln){return ln.x=sn.x,ln.y=sn.y,ln.z=sn.z,ln.w=sn.w,ln}function on(sn,ln){var un=new nn(sn),cn=ln&&ln.state,hn=function(){return(un.next()>>>0)/4294967296};return hn.double=function(){do var fn=((un.next()>>>11)+(un.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=un.next,hn.quick=hn,cn&&(typeof cn=="object"&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.xor128=on})(0,st,!1)}),or=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln=this,un="";ln.next=function(){var hn=ln.x^ln.x>>>2;return ln.x=ln.y,ln.y=ln.z,ln.z=ln.w,ln.w=ln.v,(ln.d=ln.d+362437|0)+(ln.v=ln.v^ln.v<<4^hn^hn<<1)|0},ln.x=0,ln.y=0,ln.z=0,ln.w=0,ln.v=0,sn===(0|sn)?ln.x=sn:un+=sn;for(var cn=0;cn<un.length+64;cn++)ln.x^=0|un.charCodeAt(cn),cn==un.length&&(ln.d=ln.x<<10^ln.x>>>4),ln.next()}function an(sn,ln){return ln.x=sn.x,ln.y=sn.y,ln.z=sn.z,ln.w=sn.w,ln.v=sn.v,ln.d=sn.d,ln}function on(sn,ln){var un=new nn(sn),cn=ln&&ln.state,hn=function(){return(un.next()>>>0)/4294967296};return hn.double=function(){do var fn=((un.next()>>>11)+(un.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=un.next,hn.quick=hn,cn&&(typeof cn=="object"&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.xorwow=on})(0,st,!1)}),ar=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln=this;ln.next=function(){var un,cn,hn=ln.x,fn=ln.i;return un=hn[fn],cn=(un^=un>>>7)^un<<24,cn^=(un=hn[fn+1&7])^un>>>10,cn^=(un=hn[fn+3&7])^un>>>3,cn^=(un=hn[fn+4&7])^un<<7,un=hn[fn+7&7],cn^=(un^=un<<13)^un<<9,hn[fn]=cn,ln.i=fn+1&7,cn},function(un,cn){var hn,fn=[];if(cn===(0|cn))fn[0]=cn;else for(cn=""+cn,hn=0;hn<cn.length;++hn)fn[7&hn]=fn[7&hn]<<15^cn.charCodeAt(hn)+fn[hn+1&7]<<13;for(;fn.length<8;)fn.push(0);for(hn=0;hn<8&&fn[hn]===0;++hn);for(hn==8?fn[7]=-1:fn[hn],un.x=fn,un.i=0,hn=256;hn>0;--hn)un.next()}(ln,sn)}function an(sn,ln){return ln.x=sn.x.slice(),ln.i=sn.i,ln}function on(sn,ln){sn==null&&(sn=+new Date);var un=new nn(sn),cn=ln&&ln.state,hn=function(){return(un.next()>>>0)/4294967296};return hn.double=function(){do var fn=((un.next()>>>11)+(un.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=un.next,hn.quick=hn,cn&&(cn.x&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.xorshift7=on})(0,st,!1)}),ir=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln=this;ln.next=function(){var un,cn,hn=ln.w,fn=ln.X,to=ln.i;return ln.w=hn=hn+1640531527|0,cn=fn[to+34&127],un=fn[to=to+1&127],cn^=cn<<13,un^=un<<17,cn^=cn>>>15,un^=un>>>12,cn=fn[to]=cn^un,ln.i=to,cn+(hn^hn>>>16)|0},function(un,cn){var hn,fn,to,uo,co,Uo=[],lo=128;for(cn===(0|cn)?(fn=cn,cn=null):(cn+="\0",fn=0,lo=Math.max(lo,cn.length)),to=0,uo=-32;uo<lo;++uo)cn&&(fn^=cn.charCodeAt((uo+32)%cn.length)),uo===0&&(co=fn),fn^=fn<<10,fn^=fn>>>15,fn^=fn<<4,fn^=fn>>>13,uo>=0&&(co=co+1640531527|0,to=(hn=Uo[127&uo]^=fn+co)==0?to+1:0);for(to>=128&&(Uo[127&(cn&&cn.length||0)]=-1),to=127,uo=512;uo>0;--uo)fn=Uo[to+34&127],hn=Uo[to=to+1&127],fn^=fn<<13,hn^=hn<<17,fn^=fn>>>15,hn^=hn>>>12,Uo[to]=fn^hn;un.w=co,un.X=Uo,un.i=to}(ln,sn)}function an(sn,ln){return ln.i=sn.i,ln.w=sn.w,ln.X=sn.X.slice(),ln}function on(sn,ln){sn==null&&(sn=+new Date);var un=new nn(sn),cn=ln&&ln.state,hn=function(){return(un.next()>>>0)/4294967296};return hn.double=function(){do var fn=((un.next()>>>11)+(un.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=un.next,hn.quick=hn,cn&&(cn.X&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.xor4096=on})(0,st,!1)}),sr=er(function(st){(function(Mt,Xr,rn){function nn(sn){var ln=this,un="";ln.next=function(){var hn=ln.b,fn=ln.c,to=ln.d,uo=ln.a;return hn=hn<<25^hn>>>7^fn,fn=fn-to|0,to=to<<24^to>>>8^uo,uo=uo-hn|0,ln.b=hn=hn<<20^hn>>>12^fn,ln.c=fn=fn-to|0,ln.d=to<<16^fn>>>16^uo,ln.a=uo-hn|0},ln.a=0,ln.b=0,ln.c=-1640531527,ln.d=1367130551,sn===Math.floor(sn)?(ln.a=sn/4294967296|0,ln.b=0|sn):un+=sn;for(var cn=0;cn<un.length+20;cn++)ln.b^=0|un.charCodeAt(cn),ln.next()}function an(sn,ln){return ln.a=sn.a,ln.b=sn.b,ln.c=sn.c,ln.d=sn.d,ln}function on(sn,ln){var un=new nn(sn),cn=ln&&ln.state,hn=function(){return(un.next()>>>0)/4294967296};return hn.double=function(){do var fn=((un.next()>>>11)+(un.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=un.next,hn.quick=hn,cn&&(typeof cn=="object"&&an(cn,un),hn.state=function(){return an(un,{})}),hn}Xr&&Xr.exports?Xr.exports=on:rn&&rn.amd?rn(function(){return on}):this.tychei=on})(0,st,!1)}),ur=er(function(st){(function(Mt,Xr){var rn,nn=this,an=256,on=6,sn="random",ln=Xr.pow(an,on),un=Xr.pow(2,52),cn=2*un,hn=an-1;function fn(lo,ho,fo){var mo=[],_d=co(function ap(sp,up){var pp,hp=[],vp=typeof sp;if(up&&vp=="object")for(pp in sp)try{hp.push(ap(sp[pp],up-1))}catch{}return hp.length?hp:vp=="string"?sp:sp+"\0"}((ho=ho==1?{entropy:!0}:ho||{}).entropy?[lo,Uo(Mt)]:lo??function(){try{var ap;return rn&&(ap=rn.randomBytes)?ap=ap(an):(ap=new Uint8Array(an),(nn.crypto||nn.msCrypto).getRandomValues(ap)),Uo(ap)}catch{var sp=nn.navigator,up=sp&&sp.plugins;return[+new Date,nn,up,nn.screen,Uo(Mt)]}}(),3),mo),ep=new to(mo),rp=function(){for(var ap=ep.g(on),sp=ln,up=0;ap<un;)ap=(ap+up)*an,sp*=an,up=ep.g(1);for(;ap>=cn;)ap/=2,sp/=2,up>>>=1;return(ap+up)/sp};return rp.int32=function(){return 0|ep.g(4)},rp.quick=function(){return ep.g(4)/4294967296},rp.double=rp,co(Uo(ep.S),Mt),(ho.pass||fo||function(ap,sp,up,pp){return pp&&(pp.S&&uo(pp,ep),ap.state=function(){return uo(ep,{})}),up?(Xr[sn]=ap,sp):ap})(rp,_d,"global"in ho?ho.global:this==Xr,ho.state)}function to(lo){var ho,fo=lo.length,mo=this,_d=0,ep=mo.i=mo.j=0,rp=mo.S=[];for(fo||(lo=[fo++]);_d<an;)rp[_d]=_d++;for(_d=0;_d<an;_d++)rp[_d]=rp[ep=hn&ep+lo[_d%fo]+(ho=rp[_d])],rp[ep]=ho;(mo.g=function(ap){for(var sp,up=0,pp=mo.i,hp=mo.j,vp=mo.S;ap--;)sp=vp[pp=hn&pp+1],up=up*an+vp[hn&(vp[pp]=vp[hp=hn&hp+sp])+(vp[hp]=sp)];return mo.i=pp,mo.j=hp,up})(an)}function uo(lo,ho){return ho.i=lo.i,ho.j=lo.j,ho.S=lo.S.slice(),ho}function co(lo,ho){for(var fo,mo=lo+"",_d=0;_d<mo.length;)ho[hn&_d]=hn&(fo^=19*ho[hn&_d])+mo.charCodeAt(_d++);return Uo(ho)}function Uo(lo){return String.fromCharCode.apply(0,lo)}if(Xr["seed"+sn]=fn,co(Xr.random(),Mt),st.exports){st.exports=fn;try{rn=require("crypto")}catch{}}})([],Math)});ur.alea=nr,ur.xor128=rr,ur.xorwow=or,ur.xorshift7=ar,ur.xor4096=ir,ur.tychei=sr;var cr=ur.alea,lr=function(){function st(Mt,Xr,rn,nn,an){this.mean=Mt,this.stdDev=Xr,this.dtype=rn,this.nextVal=NaN,this.truncated=nn,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var on=an||Math.random();this.random=cr(on.toString())}return st.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var Mt=this.nextVal;return this.nextVal=NaN,Mt}for(var Xr,rn,nn=!1;!nn;){var an=void 0,on=void 0,sn=void 0;do sn=(an=2*this.random()-1)*an+(on=2*this.random()-1)*on;while(sn>=1||sn===0);var ln=Math.sqrt(-2*Math.log(sn)/sn);Xr=this.mean+this.stdDev*an*ln,rn=this.mean+this.stdDev*on*ln,this.truncated&&!this.isValidTruncated(Xr)||(nn=!0)}return this.truncated&&!this.isValidTruncated(rn)||(this.nextVal=this.convertValue(rn)),this.convertValue(Xr)},st.prototype.convertValue=function(Mt){return this.dtype==null||this.dtype==="float32"?Mt:Math.round(Mt)},st.prototype.isValidTruncated=function(Mt){return Mt<=this.upper&&Mt>=this.lower},st}(),hr=function(){function st(Mt,Xr,rn,nn){this.alpha=Mt,this.beta=1/Xr,this.dtype=rn;var an=nn||Math.random();this.randu=cr(an.toString()),this.randn=new lr(0,1,rn,!1,this.randu()),this.d=Mt<1?Mt+2/3:Mt-1/3,this.c=1/Math.sqrt(9*this.d)}return st.prototype.nextValue=function(){for(var Mt,Xr,rn,nn,an,on;;){do nn=this.randn.nextValue(),on=1+this.c*nn;while(on<=0);if(on*=on*on,Xr=1-.331*(Mt=nn*nn)*Mt,rn=.5*Mt+this.d*(1-on+Math.log(on)),(an=this.randu())<Xr||Math.log(an)<rn)break}return on=1/this.beta*this.d*on,this.alpha<1&&(on*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(on)},st.prototype.convertValue=function(Mt){return this.dtype==="float32"?Mt:Math.round(Mt)},st}(),fr$2=function(){function st(Mt,Xr,rn,nn){var an=this;if(Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=1),this.canReturnFloat=function(){return an.dtype==null||an.dtype==="float32"},this.min=Mt,this.range=Xr-Mt,this.dtype=rn,nn==null&&(nn=Math.random()),typeof nn=="number"&&(nn=nn.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+Mt+" - "+Xr+" <= 1 and dtype is not float");this.random=cr(nn)}return st.prototype.convertValue=function(Mt){return this.canReturnFloat()?Mt:Math.round(Mt)},st.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},st}();function dr(st,Mt,Xr){return Mt===void 0&&(Mt="float32"),Mt=Mt||"float32",nt(st),new gt(st,Mt,Xr)}function pr(st,Mt){Mt===void 0&&(Mt=!1),console.log(st.toString(Mt))}var vr=An({batchToSpaceND_:function(st,Mt,Xr){var rn=mn(st,"x","batchToSpaceND"),nn=Mt.reduce(function(an,on){return an*on});return C(rn.rank>=1+Mt.length,function(){return"input rank is "+rn.rank+" but should be > than blockShape.length "+Mt.length}),C(Xr.length===Mt.length,function(){return"crops.length is "+Xr.length+" but should be equal to blockShape.length  "+Mt.length}),C(rn.shape[0]%nn==0,function(){return"input tensor batch is "+rn.shape[0]+" but is not divisible by the product of the elements of blockShape "+Mt.join(" * ")+" === "+nn}),Lt.runKernelFunc(function(an){return an.batchToSpaceND(rn,Mt,Xr)},{$x:rn},function(an){return{$x:function(){return an.spaceToBatchND(Mt,Xr)}}})}}),mr=An({broadcastTo_:function(st,Mt){var Xr=mn(st,"broadcastTo","x"),rn=Xr.shape;if(Mt.some(function(ln){return!(ln>0)||ln%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+Mt+"].");if(Mt.length<Xr.rank)throw new Error("broadcastTo(): shape.length="+Mt.length+" < input.rank="+Xr.rank+".");if(Mt.length>Xr.rank){for(var nn=Xr.shape.slice();nn.length<Mt.length;)nn.unshift(1);Xr=Xr.reshape(nn)}for(var an=Array.from(Mt),on=Mt.length-1;on>=0;on--)if(Xr.shape[on]===Mt[on])an[on]=1;else if(Xr.shape[on]!==1)throw new Error("broadcastTo(): ["+rn+"] cannot be broadcast to ["+Mt+"].");var sn=an.map(function(ln,un){return ln>1?un:-1}).filter(function(ln){return ln>=0});return sn.length===0?Xr.clone():Lt.runKernelFunc(function(ln){return ln.tile(Xr,an)},{input:Xr},function(ln){return{input:function(){return ln.sum(sn,!0)}}})}}),gr=An({cast_:function(st,Mt){var Xr=mn(st,"x","cast");if(!W(Mt))throw new Error("Failed to cast to unknown dtype "+Mt);if(Mt==="string"&&Xr.dtype!=="string"||Mt!=="string"&&Xr.dtype==="string")throw new Error("Only strings can be casted to strings");var rn={dtype:Mt};return Lt.runKernelFunc(function(nn){return nn.cast(Xr,Mt)},{x:Xr},function(nn){return{x:function(){return nn.clone()}}},"Cast",rn)}}),yr=An({clone_:function(st){var Mt=mn(st,"x","clone",null);return Lt.runKernelFunc(function(){return Lt.makeTensorFromDataId(Mt.dataId,Mt.shape,Mt.dtype)},{$x:Mt},function(Xr){return{$x:function(){return Xr.toFloat()}}})}}),xr=An({cumsum_:function(st,Mt,Xr,rn){Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!1);var nn=mn(st,"x","cumsum"),an=En([Mt|=0],nn.rank),on=nn;an!=null&&(on=nn.transpose(an));var sn=In(1,nn.rank)[0],ln=Lt.runKernelFunc(function(un){return un.cumsum(on,sn,Xr,rn)},{permutedX:on},function(un){return{permutedX:function(){return un.cumsum(Mt,Xr,!rn)}}});return an!=null&&(ln=ln.transpose(an)),ln}}),br=An({depthToSpace_:function(st,Mt,Xr){Xr===void 0&&(Xr="NHWC");var rn=mn(st,"x","depthToSpace"),nn=Xr==="NHWC"?rn.shape[1]:rn.shape[2],an=Xr==="NHWC"?rn.shape[2]:rn.shape[3],on=Xr==="NHWC"?rn.shape[3]:rn.shape[1];return C(nn*Mt>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+nn+" and "+Mt+`  for depthToSpace with input shape
      `+rn.shape}),C(an*Mt>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+an+" and "+Mt+` for depthToSpace with input shape
          `+rn.shape}),C(on%(Mt*Mt)==0,function(){return"Dimension size must be evenly divisible by "+Mt*Mt+" but is "+on+" for depthToSpace with input shape "+rn.shape}),Lt.runKernelFunc(function(sn){return sn.depthToSpace(rn,Mt,Xr)},{$x:rn})}}),wr=An({expandDims_:function(st,Mt){Mt===void 0&&(Mt=0);var Xr=mn(st,"x","expandDims",null);C(Mt<=Xr.rank,function(){return"Axis must be <= rank of the tensor"});var rn=Xr.shape.slice();return Mt<0&&(C(-(Xr.rank+1)<=Mt,function(){return"Axis must be in the interval ["+-(Xr.rank+1)+", "+Xr.rank+"]"}),Mt=Xr.rank+Mt+1),rn.splice(Mt,0,1),Or(Xr,rn)}}),Cr=An({eye_:function(st,Mt,Xr,rn){rn===void 0&&(rn="float32"),Mt==null&&(Mt=st);for(var nn=dr([st,Mt],rn),an=st<=Mt?st:Mt,on=0;on<an;++on)nn.set(1,on,on);var sn=nn.toTensor().as2D(st,Mt);if(Xr==null)return sn;if(Xr.length===1)return Lr(wr(sn,0),[Xr[0],1,1]);if(Xr.length===2)return Lr(wr(wr(sn,0),0),[Xr[0],Xr[1],1,1]);if(Xr.length===3)return Lr(wr(wr(wr(sn,0),0),0),[Xr[0],Xr[1],Xr[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+Xr.length+"D.")}}),Er=An({multinomial_:function(st,Mt,Xr,rn){rn===void 0&&(rn=!1);var nn=mn(st,"logits","multinomial"),an=nn.size,on=nn.rank;if(an<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+an+".");if(on>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+on);Xr=Xr||Math.random();var sn=on===1?nn.as2D(1,-1):nn,ln=Lt.runKernelFunc(function(un){return un.multinomial(sn,rn,Mt,Xr)},{logits2D:sn});return on===1?ln.as1D():ln}}),Rr=An({oneHot_:function(st,Mt,Xr,rn){if(Xr===void 0&&(Xr=1),rn===void 0&&(rn=0),Mt<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+Mt);var nn=mn(st,"indices","oneHot","int32"),an=nn.shape.concat([Mt]);return nn=nn.flatten(),Lt.runKernelFunc(function(on){return on.oneHot(nn,Mt,Xr,rn)},{$indices:nn},function(on){return{$indices:function(){return Gn(nn.shape,"float32")}}}).reshape(an)}}),Ir=An({pad_:function(st,Mt,Xr){Xr===void 0&&(Xr=0);var rn=mn(st,"x","pad");if(rn.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var nn={paddings:Mt,constantValue:Xr};return Lt.runKernelFunc(function(an){return an.pad(rn,Mt,Xr)},{x:rn},function(an){var on=Mt.map(function(sn){return sn[0]});return{x:function(){return an.slice(on,rn.shape)}}},"PadV2",nn)}}),kr=An({pad1d_:function(st,Mt,Xr){return Xr===void 0&&(Xr=0),C(Mt.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Ir(st,[Mt],Xr)}}),Sr=An({pad2d_:function(st,Mt,Xr){return Xr===void 0&&(Xr=0),C(Mt.length===2&&Mt[0].length===2&&Mt[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(st,Mt,Xr)}}),Ar=An({pad3d_:function(st,Mt,Xr){return Xr===void 0&&(Xr=0),C(Mt.length===3&&Mt[0].length===2&&Mt[1].length===2&&Mt[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(st,Mt,Xr)}}),Dr=An({pad4d_:function(st,Mt,Xr){return Xr===void 0&&(Xr=0),C(Mt.length===4&&Mt[0].length===2&&Mt[1].length===2&&Mt[2].length===2&&Mt[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(st,Mt,Xr)}}),Tr=An({rand_:function(st,Mt,Xr){var rn=k(st),nn=null;if(Xr==null||Xr==="float32")nn=new Float32Array(rn);else if(Xr==="int32")nn=new Int32Array(rn);else{if(Xr!=="bool")throw new Error("Unknown data type "+Xr);nn=new Uint8Array(rn)}for(var an=0;an<rn;an++)nn[an]=Mt();return Lt.makeTensor(nn,st,Xr)}}),Nr=An({randomNormal_:function(st,Mt,Xr,rn,nn){if(Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=1),rn!=null&&rn==="bool")throw new Error("Unsupported data type "+rn);for(var an=new lr(Mt,Xr,rn,!1,nn),on=dr(st,rn),sn=0;sn<on.values.length;sn++)on.values[sn]=an.nextValue();return on.toTensor()}}),Fr=An({randomGamma_:function(st,Mt,Xr,rn,nn){if(Xr===void 0&&(Xr=1),rn===void 0&&(rn="float32"),Xr==null&&(Xr=1),rn==null&&(rn="float32"),rn!=="float32"&&rn!=="int32")throw new Error("Unsupported data type "+rn);for(var an=new hr(Mt,Xr,rn,nn),on=dr(st,rn),sn=0;sn<on.values.length;sn++)on.values[sn]=an.nextValue();return on.toTensor()}}),_r=An({randomUniform_:function(st,Mt,Xr,rn,nn){Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=1),rn===void 0&&(rn="float32");for(var an=dr(st,rn),on=new fr$2(Mt,Xr,null,nn),sn=0;sn<an.values.length;sn++)an.values[sn]=on.nextValue();return an.toTensor()}}),Or=An({reshape_:function(st,Mt){var Xr=mn(st,"x","reshape",null);Mt=_(Mt,Xr.size),C(Xr.size===k(Mt),function(){return"new shape and old shape must have the same number of elements."});var rn={shape:Mt};return Lt.runKernelFunc(function(nn){return nn.reshape(Xr,Mt)},{x:Xr},function(nn){return{x:function(){return nn.reshape(Xr.shape)}}},"Reshape",rn)}}),Mr=An({spaceToBatchND_:function(st,Mt,Xr){var rn=mn(st,"x","spaceToBatchND");return C(rn.rank>=1+Mt.length,function(){return"input rank "+rn.rank+" should be > than [blockShape] "+Mt.length}),C(Xr.length===Mt.length,function(){return"paddings.shape[0] "+Xr.length+" must be equal to [blockShape] "+Mt.length}),C(rn.shape.reduce(function(nn,an,on){return on>0&&on<=Mt.length?nn&&(an+Xr[on-1][0]+Xr[on-1][1])%Mt[on-1]==0:nn},!0),function(){return"input spatial dimensions "+rn.shape.slice(1)+" with paddings "+Xr.toString()+" must be divisible by blockShapes "+Mt.toString()}),Lt.runKernelFunc(function(nn){return nn.spaceToBatchND(rn,Mt,Xr)},{$x:rn},function(nn){return{$x:function(){return nn.batchToSpaceND(Mt,Xr)}}})}}),Br=An({squeeze_:function(st,Mt){var Xr=mn(st,"x","squeeze");return Or(Xr,M$3(Xr.shape,Mt).newShape)}}),Pr=An({stack_:function(st,Mt){Mt===void 0&&(Mt=0);var Xr=gn(st,"tensors","stack");if(C(Xr.length>=1,function(){return"Pass at least one tensor to tf.stack"}),Xr.length===1)return Xr[0].expandDims(Mt);var rn=Xr[0].rank,nn=Xr[0].shape,an=Xr[0].dtype;C(Mt<=rn,function(){return"Axis must be <= rank of the tensor"}),Xr.forEach(function(sn){E(nn,sn.shape,"All tensors passed to stack must have matching shapes")}),Xr.forEach(function(sn){C(an===sn.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var on=Xr.map(function(sn){return sn.expandDims(Mt)});return Yn(on,Mt)}}),Lr=An({tile_:function(st,Mt){var Xr=mn(st,"x","tile",null);C(Xr.rank===Mt.length,function(){return"Error in transpose: rank of input "+Xr.rank+" must match length of reps "+Mt+"."});var rn=[Xr],nn={reps:Mt};return Lt.runKernelFunc(function(an,on){var sn=an.tile(Xr,Mt);return on([Xr]),sn},{x:Xr},function(an,on){var sn=on[0];return{x:function(){var ln=Xn(sn);if(sn.rank===1)for(var un=0;un<Mt[0];++un)ln=ln.add(an.slice([un*sn.shape[0]],[sn.shape[0]]));else if(sn.rank===2)for(un=0;un<Mt[0];++un)for(var cn=0;cn<Mt[1];++cn)ln=ln.add(an.slice([un*sn.shape[0],cn*sn.shape[1]],[sn.shape[0],sn.shape[1]]));else if(sn.rank===3)for(un=0;un<Mt[0];++un)for(cn=0;cn<Mt[1];++cn)for(var hn=0;hn<Mt[2];++hn)ln=ln.add(an.slice([un*sn.shape[0],cn*sn.shape[1],hn*sn.shape[2]],[sn.shape[0],sn.shape[1],sn.shape[2]]));else{if(sn.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+sn.rank+" tensors yet.");for(un=0;un<Mt[0];++un)for(cn=0;cn<Mt[1];++cn)for(hn=0;hn<Mt[2];++hn)for(var fn=0;fn<Mt[3];++fn)ln=ln.add(an.slice([un*sn.shape[0],cn*sn.shape[1],hn*sn.shape[2],fn*sn.shape[3]],[sn.shape[0],sn.shape[1],sn.shape[2],sn.shape[3]]))}return ln}}},"Tile",nn,rn)}}),Wr=An({truncatedNormal_:function(st,Mt,Xr,rn,nn){if(Mt===void 0&&(Mt=0),Xr===void 0&&(Xr=1),rn!=null&&rn==="bool")throw new Error("Unsupported data type "+rn);for(var an=new lr(Mt,Xr,rn,!0,nn),on=dr(st,rn),sn=0;sn<on.values.length;sn++)on.values[sn]=an.nextValue();return on.toTensor()}}),Ur=An({unstack_:function(st,Mt){Mt===void 0&&(Mt=0),Mt=Mt||0;var Xr=mn(st,"x","unstack");C(Mt>=-Xr.shape.length&&Mt<Xr.shape.length,function(){return"Axis = "+Mt+" is not in [-"+Xr.shape.length+", "+Xr.shape.length+")"}),Mt<0&&(Mt+=Xr.shape.length);var rn={axis:Mt};return Lt.runKernelFunc(function(nn){return nn.unstack(Xr,Mt)},{x:Xr},function(nn){return{x:function(){return Pr(nn,Mt)}}},"Unpack",rn)}}),Vr=function(st,Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln,un,cn,hn;return r$2(this,function(fn){switch(fn.label){case 0:return Xr=mn(st,"x","setdiff1d"),rn=mn(Mt,"y","setdiff1d"),C(Xr.dtype===rn.dtype,function(){return"x and y should have the same dtype, but got x ("+Xr.dtype+") and y ("+rn.dtype+")."}),C(Xr.rank===1,function(){return"x should be 1D tensor, but got x ("+Xr.shape+")."}),C(rn.rank===1,function(){return"y should be 1D tensor, but got y ("+rn.shape+")."}),[4,Xr.data()];case 1:return nn=fn.sent(),[4,rn.data()];case 2:for(an=fn.sent(),on=new Set(an),sn=0,cn=0;cn<nn.length;cn++)on.has(nn[cn])||sn++;for(ln=new gt([sn],Xr.dtype),un=new gt([sn],"int32"),cn=0,hn=0;cn<nn.length;cn++)on.has(nn[cn])||(ln.values[hn]=nn[cn],un.values[hn]=cn,hn++);return[2,[ln.toTensor(),un.toTensor()]]}})})};function zr(st,Mt,Xr,rn){rn===void 0&&(rn=!0);var nn=[];if(rn)(nn=nn.concat(Mt.slice(0))).push(st[0]/Xr),nn=nn.concat(st.slice(1));else{nn=nn.concat(st[0]);for(var an=Mt.length,on=0;on<an;++on)nn=nn.concat([st[on+1]/Mt[on],Mt[on]]);nn=nn.concat(st.slice(an+1))}return nn}function Gr(st,Mt,Xr){Xr===void 0&&(Xr=!0);var rn=[];if(Xr){rn.push(Mt);for(var nn=Mt+1;nn<st;++nn)nn<=2*Mt?(rn.push(nn),rn.push(nn-(Mt+1))):rn.push(nn)}else{var an=[],on=[];for(nn=1;nn<st;++nn)nn>=2*Mt+1||nn%2==1?on.push(nn):an.push(nn);rn.push.apply(rn,an),rn.push(0),rn.push.apply(rn,on)}return rn}function Hr(st,Mt,Xr,rn){rn===void 0&&(rn=!0);var nn=[];rn?nn.push(st[0]/Xr):nn.push(st[0]*Xr);for(var an=1;an<st.length;++an)an<=Mt.length?rn?nn.push(Mt[an-1]*st[an]):nn.push(st[an]/Mt[an-1]):nn.push(st[an]);return nn}function qr(st,Mt){for(var Xr=[0],rn=0;rn<Mt;++rn)Xr.push(st[rn][0]);return Xr}function Kr(st,Mt,Xr){for(var rn=st.slice(0,1),nn=0;nn<Xr;++nn)rn.push(st[nn+1]-Mt[nn][0]-Mt[nn][1]);return rn}function jr(st,Mt){if(st.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+st.rank+".");if(Mt.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+Mt.rank+".");if(Mt.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+Mt.dtype+".");if(Mt.shape[Mt.rank-1]>st.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+Mt.shape[Mt.rank-1]+" vs. "+st.rank);if(st.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+st.shape+".");for(var Xr=Mt.shape,rn=Xr[Xr.length-1],nn=1,an=0;an<Xr.length-1;++an)nn*=Xr[an];var on=st.shape,sn=Xr.slice();sn.pop();var ln=1;for(an=rn;an<st.rank;++an)ln*=on[an],sn.push(on[an]);var un=$$1(st.shape).map(function(cn){return cn/ln}).concat([1]).slice(0,rn);return[sn,nn,ln,un]}var Yr=30;function $r(st){return st<=Yr?st:Y(st,Math.floor(Math.sqrt(st)))}function Qr(st,Mt,Xr){var rn=Mt.rank>1?Mt.shape[Mt.rank-1]:1,nn=Mt.rank>1?Mt.rank-1:1,an="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+Xr.shape+", indices.shape: "+Mt.shape+", shape: "+st+", sliceDim: "+rn+", and batchDim: "+nn+".";if(Xr.rank<nn)throw new Error(an+" update.rank < "+nn+". ");if(st.length<rn+(Xr.rank-nn))throw new Error(an+" Output shape length < "+(rn+(Xr.rank-nn)));if(Xr.rank!==nn+st.length-rn)throw new Error(an+" update.rank != "+(nn+st.length-rn));for(var on=0;on<nn;++on)if(Xr.shape[on]!==Mt.shape[on])throw new Error(an+" updates.shape["+on+"] ("+Xr.shape[on]+") != indices.shape["+on+"] ("+Mt.shape[on]+").");for(on=0;on<Xr.rank-nn;++on)if(Xr.shape[on+nn]!==st[on+rn])throw new Error(an+" updates.shape["+(on+nn)+"] ("+Xr.shape[on+nn]+") != shape["+(on+nn)+"] ("+st[on+nn]+")")}function Jr(st,Mt,Xr){if(Mt.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+Mt.rank+".");if(st.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+st.rank+".");if(Mt.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+Mt.dtype);if(Xr.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+Xr);if(Xr.length===0){if(Mt.size===0)throw new Error("Indices specified for empty output. indices shape: "+Mt.shape);if(st.size===0)throw new Error("Updates specified for empty output. updates shape: "+st.shape)}Qr(Xr,Mt,st)}function Zr(st,Mt,Xr){for(var rn=Mt.shape.length,nn=rn>1?Mt.shape[rn-1]:1,an=Xr.length,on=1,sn=nn;sn<an;++sn)on*=Xr[sn];var ln=nn<1?1:nn;return{sliceRank:nn,numUpdates:k(Mt.shape)/ln,sliceSize:on,strides:$$1(Xr.slice(0,nn)).concat([1]),outputSize:k(Xr)}}function eo(st,Mt,Xr){C(st.rank===Mt.length,function(){return"Error in slice"+st.rank+"D: Length of begin "+Mt+" must match the rank of the array ("+st.rank+")."}),C(st.rank===Xr.length,function(){return"Error in slice"+st.rank+"D: Length of size "+Xr+" must match the rank of the array ("+st.rank+")."});for(var rn=function(an){C(Mt[an]+Xr[an]<=st.shape[an],function(){return"Error in slice"+st.rank+"D: begin["+an+"] + size["+an+"] ("+(Mt[an]+Xr[an])+") would overflow input.shape["+an+"] ("+st.shape[an]+")"})},nn=0;nn<st.rank;++nn)rn(nn)}function no(st){for(var Mt=[],Xr=0;st>0;)1&st&&Mt.push(Xr),st/=2,Xr++;return Mt}function ro(st,Mt,Xr){for(var rn=[],nn=0;nn<st.length;nn++)rn[nn]=Math.ceil((Mt[nn]-st[nn])/Xr[nn]);return rn}function oo(st,Mt,Xr,rn,nn){var an=Mt[nn],on=Xr[nn]||1;(st&1<<nn||an==null)&&(an=on>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var sn=rn[nn];return an<0&&(an+=sn),an=x(0,an,sn-1)}function ao(st,Mt,Xr,rn,nn){var an=Mt[nn],on=Xr[nn]||1;(st&1<<nn||an==null)&&(an=on>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var sn=rn[nn];return an<0&&(an+=sn),an=on>0?x(0,an,sn):x(-1,an,sn-1)}function io(st,Mt,Xr){for(var rn=Xr.length,nn=0;nn<Xr.length;nn++)if(Xr[nn]>1){rn=nn;break}for(nn=rn+1;nn<Xr.length;nn++)if(Mt[nn]>0||Xr[nn]!==st[nn])return!1;return!0}function so(st,Mt){for(var Xr=st.length>0?st[st.length-1]:1,rn=0;rn<st.length-1;rn++)Xr+=st[rn]*Mt[rn];return Xr}function po(st,Mt){C(X$1(st),function(){return"The f passed in variableGrads(f) must be a function"}),C(Mt==null||Array.isArray(Mt)&&Mt.every(function(cn){return cn instanceof St}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var Xr=Mt!=null;if(!Xr)for(var rn in Mt=[],Lt.registeredVariables)Mt.push(Lt.registeredVariables[rn]);var nn=Xr?Mt.filter(function(cn){return!cn.trainable}):null,an=Mt.length;C((Mt=Mt.filter(function(cn){return cn.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+an+" variables is trainable."});var on=Lt.gradients(st,Mt,null,!0),sn=on.value,ln=on.grads;C(ln.some(function(cn){return cn!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),C(sn.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+sn.rank+" tensor"});var un={};return Mt.forEach(function(cn,hn){ln[hn]!=null&&(un[cn.name]=ln[hn])}),nn!=null&&nn.forEach(function(cn){return un[cn.name]=null}),{value:sn,grads:un}}function vo(st){return Lt.customGrad(st)}var go=An({softmax_:function(st,Mt){Mt===void 0&&(Mt=-1);var Xr=mn(st,"logits","softmax","float32");if(Mt===-1&&(Mt=Xr.rank-1),Mt!==Xr.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+Xr.rank+" and dim was "+Mt);return Lt.runKernelFunc(function(rn,nn){var an=rn.softmax(Xr,Mt);return nn([an]),an},{logits:Xr},function(rn,nn){var an=nn[0],on=rn.mul(an);return{logits:function(){return on.sub(on.sum([Mt],!0).mul(an))}}},"Softmax",{dim:Mt},[],[!0])}}),yo=An({logSoftmax_:function(st,Mt){Mt===void 0&&(Mt=-1);var Xr=mn(st,"logits","logSoftmax");if(Mt===-1&&(Mt=Xr.rank-1),Mt!==Xr.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+Xr.rank+" and axis was "+Mt);return vo(function(rn,nn){var an=rn.max(Mt,!0),on=rn.sub(an),sn=on.toFloat().sub(on.exp().sum(Mt,!0).log());return nn([sn]),{value:sn,gradFunc:function(ln,un){var cn=un[0].exp();return ln.sub(ln.sum(Mt,!0).mul(cn))}}})(Xr)}}),xo=function(){function st(Mt,Xr){this.backend=Mt,this.dataMover=Xr,this.data=new WeakMap,this.dataIdsCount=0}return st.prototype.get=function(Mt){return this.data.has(Mt)||this.dataMover.moveData(this.backend,Mt),this.data.get(Mt)},st.prototype.set=function(Mt,Xr){this.dataIdsCount++,this.data.set(Mt,Xr)},st.prototype.has=function(Mt){return this.data.has(Mt)},st.prototype.delete=function(Mt){return this.dataIdsCount--,this.data.delete(Mt)},st.prototype.numDataIds=function(){return this.dataIdsCount},st}(),bo=function(){function st(){}return st.prototype.time=function(Mt){return wo("time")},st.prototype.read=function(Mt){return wo("read")},st.prototype.readSync=function(Mt){return wo("readSync")},st.prototype.numDataIds=function(){return wo("numDataIds")},st.prototype.disposeData=function(Mt){return wo("disposeData")},st.prototype.write=function(Mt,Xr,rn){return wo("write")},st.prototype.move=function(Mt,Xr,rn,nn){return wo("move")},st.prototype.memory=function(){return wo("memory")},st.prototype.floatPrecision=function(){return wo("floatPrecision")},st.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},st.prototype.batchMatMul=function(Mt,Xr,rn,nn){return wo("batchMatMul")},st.prototype.fusedBatchMatMul=function(Mt){return Mt.a,Mt.b,Mt.transposeA,Mt.transposeB,Mt.bias,Mt.activation,Mt.preluActivationWeights,wo("fusedBatchMatMul")},st.prototype.slice=function(Mt,Xr,rn){return wo("slice")},st.prototype.stridedSlice=function(Mt,Xr,rn,nn){return wo("stridedSlice")},st.prototype.unstack=function(Mt,Xr){return wo("unstack")},st.prototype.reverse=function(Mt,Xr){return wo("reverse")},st.prototype.concat=function(Mt,Xr){return wo("concat")},st.prototype.neg=function(Mt){return wo("neg")},st.prototype.add=function(Mt,Xr){return wo("add")},st.prototype.addN=function(Mt){return wo("addN")},st.prototype.subtract=function(Mt,Xr){return wo("subtract")},st.prototype.multiply=function(Mt,Xr){return wo("multiply")},st.prototype.realDivide=function(Mt,Xr){return wo("realDivide")},st.prototype.floorDiv=function(Mt,Xr){return wo("floorDiv")},st.prototype.sum=function(Mt,Xr){return wo("sum")},st.prototype.prod=function(Mt,Xr){return wo("prod")},st.prototype.unsortedSegmentSum=function(Mt,Xr,rn){return wo("unsortedSegmentSum")},st.prototype.argMin=function(Mt,Xr){return wo("argMin")},st.prototype.argMax=function(Mt,Xr){return wo("argMax")},st.prototype.equal=function(Mt,Xr){return wo("equal")},st.prototype.notEqual=function(Mt,Xr){return wo("notEqual")},st.prototype.less=function(Mt,Xr){return wo("less")},st.prototype.lessEqual=function(Mt,Xr){return wo("lessEqual")},st.prototype.greater=function(Mt,Xr){return wo("greater")},st.prototype.greaterEqual=function(Mt,Xr){return wo("greaterEqual")},st.prototype.logicalNot=function(Mt){return wo("logicalNot")},st.prototype.logicalAnd=function(Mt,Xr){return wo("logicalAnd")},st.prototype.logicalOr=function(Mt,Xr){return wo("logicalOr")},st.prototype.where=function(Mt){return wo("where")},st.prototype.select=function(Mt,Xr,rn){return wo("select")},st.prototype.topk=function(Mt,Xr,rn){return wo("topk")},st.prototype.min=function(Mt,Xr){return wo("min")},st.prototype.minimum=function(Mt,Xr){return wo("minimum")},st.prototype.mod=function(Mt,Xr){return wo("mod")},st.prototype.max=function(Mt,Xr){return wo("max")},st.prototype.maximum=function(Mt,Xr){return wo("maximum")},st.prototype.all=function(Mt,Xr){return wo("all")},st.prototype.any=function(Mt,Xr){return wo("any")},st.prototype.squaredDifference=function(Mt,Xr){return wo("squaredDifference")},st.prototype.ceil=function(Mt){return wo("ceil")},st.prototype.floor=function(Mt){return wo("floor")},st.prototype.round=function(Mt){return wo("round")},st.prototype.sign=function(Mt){return wo("sign")},st.prototype.isNaN=function(Mt){return wo("isNaN")},st.prototype.isInf=function(Mt){return wo("isInf")},st.prototype.isFinite=function(Mt){return wo("isFinite")},st.prototype.pow=function(Mt,Xr){return wo("pow")},st.prototype.exp=function(Mt){return wo("exp")},st.prototype.expm1=function(Mt){return wo("expm1")},st.prototype.softmax=function(Mt,Xr){return wo("softmax")},st.prototype.log=function(Mt){return wo("log")},st.prototype.log1p=function(Mt){return wo("log1p")},st.prototype.sqrt=function(Mt){return wo("sqrt")},st.prototype.rsqrt=function(Mt){return wo("rsqrt")},st.prototype.square=function(Mt){return wo("square")},st.prototype.reciprocal=function(Mt){return wo("reciprocal")},st.prototype.relu=function(Mt){return wo("relu")},st.prototype.relu6=function(Mt){return wo("relu6")},st.prototype.prelu=function(Mt,Xr){return wo("prelu")},st.prototype.elu=function(Mt){return wo("elu")},st.prototype.eluDer=function(Mt,Xr){return wo("eluDer")},st.prototype.selu=function(Mt){return wo("selu")},st.prototype.int=function(Mt){return wo("int")},st.prototype.clip=function(Mt,Xr,rn){return wo("clip")},st.prototype.abs=function(Mt){return wo("abs")},st.prototype.complexAbs=function(Mt){return wo("complexAbs")},st.prototype.sigmoid=function(Mt){return wo("sigmoid")},st.prototype.softplus=function(Mt){return wo("softplus")},st.prototype.sin=function(Mt){return wo("sin")},st.prototype.cos=function(Mt){return wo("cos")},st.prototype.tan=function(Mt){return wo("tan")},st.prototype.asin=function(Mt){return wo("asin")},st.prototype.acos=function(Mt){return wo("acos")},st.prototype.atan=function(Mt){return wo("atan")},st.prototype.atan2=function(Mt,Xr){return wo("atan2")},st.prototype.sinh=function(Mt){return wo("sinh")},st.prototype.cosh=function(Mt){return wo("cosh")},st.prototype.tanh=function(Mt){return wo("tanh")},st.prototype.asinh=function(Mt){return wo("asinh")},st.prototype.acosh=function(Mt){return wo("acosh")},st.prototype.atanh=function(Mt){return wo("atanh")},st.prototype.erf=function(Mt){return wo("erf")},st.prototype.step=function(Mt,Xr){return wo("step")},st.prototype.fusedConv2d=function(Mt){return Mt.input,Mt.filter,Mt.convInfo,Mt.bias,Mt.activation,Mt.preluActivationWeights,wo("fusedConv2d")},st.prototype.conv2d=function(Mt,Xr,rn){return wo("conv2d")},st.prototype.conv2dDerInput=function(Mt,Xr,rn){return wo("conv2dDerInput")},st.prototype.conv2dDerFilter=function(Mt,Xr,rn){return wo("conv2dDerFilter")},st.prototype.fusedDepthwiseConv2D=function(Mt){return Mt.input,Mt.filter,Mt.convInfo,Mt.bias,Mt.activation,Mt.preluActivationWeights,wo("fusedDepthwiseConv2D")},st.prototype.depthwiseConv2D=function(Mt,Xr,rn){return wo("depthwiseConv2D")},st.prototype.depthwiseConv2DDerInput=function(Mt,Xr,rn){return wo("depthwiseConv2DDerInput")},st.prototype.depthwiseConv2DDerFilter=function(Mt,Xr,rn){return wo("depthwiseConv2DDerFilter")},st.prototype.conv3d=function(Mt,Xr,rn){return wo("conv3d")},st.prototype.conv3dDerInput=function(Mt,Xr,rn){return wo("conv3dDerInput")},st.prototype.conv3dDerFilter=function(Mt,Xr,rn){return wo("conv3dDerFilter")},st.prototype.maxPool=function(Mt,Xr){return wo("maxPool")},st.prototype.maxPoolBackprop=function(Mt,Xr,rn,nn){return wo("maxPoolBackprop")},st.prototype.avgPool=function(Mt,Xr){return wo("avgPool")},st.prototype.avgPoolBackprop=function(Mt,Xr,rn){return wo("avgPoolBackprop")},st.prototype.avgPool3d=function(Mt,Xr){return wo("avgPool3d")},st.prototype.avgPool3dBackprop=function(Mt,Xr,rn){return wo("avgPool3dBackprop")},st.prototype.maxPool3d=function(Mt,Xr){return wo("maxPool3d")},st.prototype.maxPool3dBackprop=function(Mt,Xr,rn,nn){return wo("maxPool3dBackprop")},st.prototype.reshape=function(Mt,Xr){return wo("reshape")},st.prototype.cast=function(Mt,Xr){return wo("cast")},st.prototype.tile=function(Mt,Xr){return wo("tile")},st.prototype.pad=function(Mt,Xr,rn){return wo("pad")},st.prototype.transpose=function(Mt,Xr){return wo("transpose")},st.prototype.gather=function(Mt,Xr,rn){return wo("gather")},st.prototype.gatherND=function(Mt,Xr){return wo("gatherND")},st.prototype.scatterND=function(Mt,Xr,rn){return wo("scatterND")},st.prototype.batchToSpaceND=function(Mt,Xr,rn){return wo("batchToSpaceND")},st.prototype.spaceToBatchND=function(Mt,Xr,rn){return wo("spaceToBatchND")},st.prototype.resizeBilinear=function(Mt,Xr,rn,nn){return wo("resizeBilinear")},st.prototype.resizeBilinearBackprop=function(Mt,Xr,rn){return wo("resizeBilinearBackprop")},st.prototype.resizeNearestNeighbor=function(Mt,Xr,rn,nn){return wo("resizeNearestNeighbor")},st.prototype.resizeNearestNeighborBackprop=function(Mt,Xr,rn){return wo("resizeNearestNeighborBackprop")},st.prototype.batchNormalization=function(Mt,Xr,rn,nn,an,on){return wo("batchNormalization")},st.prototype.localResponseNormalization4D=function(Mt,Xr,rn,nn,an){return wo("localResponseNormalization4D")},st.prototype.LRNGrad=function(Mt,Xr,rn,nn,an,on,sn){return wo("LRNGrad")},st.prototype.multinomial=function(Mt,Xr,rn,nn){return wo("multinomial")},st.prototype.oneHot=function(Mt,Xr,rn,nn){return wo("oneHot")},st.prototype.cumsum=function(Mt,Xr,rn,nn){return wo("cumsum")},st.prototype.nonMaxSuppression=function(Mt,Xr,rn,nn,an){return wo("nonMaxSuppression")},st.prototype.fft=function(Mt){return wo("fft")},st.prototype.ifft=function(Mt){return wo("ifft")},st.prototype.complex=function(Mt,Xr){return wo("complex")},st.prototype.real=function(Mt){return wo("real")},st.prototype.imag=function(Mt){return wo("imag")},st.prototype.cropAndResize=function(Mt,Xr,rn,nn,an,on){return wo("cropAndResize")},st.prototype.depthToSpace=function(Mt,Xr,rn){return wo("depthToSpace")},st.prototype.split=function(Mt,Xr,rn){return wo("split")},st.prototype.sparseToDense=function(Mt,Xr,rn,nn){return wo("sparseToDense")},st.prototype.diag=function(Mt){return wo("diag")},st.prototype.fill=function(Mt,Xr,rn){return wo("fill")},st.prototype.onesLike=function(Mt){return wo("onesLike")},st.prototype.zerosLike=function(Mt){return wo("zerosLike")},st.prototype.linspace=function(Mt,Xr,rn){return wo("linspace")},st.prototype.dispose=function(){return wo("dispose")},st}();function wo(st){throw new Error("'"+st+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Co(st,Mt){for(var Xr=st.length,rn=[],nn=0;nn<Xr;nn++){var an=Xr-1-nn,on=st[an]||1;(Mt[Mt.length-1-nn]||1)>1&&on===1&&rn.unshift(an)}return rn}function Eo(st,Mt){for(var Xr=[],rn=0;rn<Mt.length;rn++){var nn=st[st.length-rn-1],an=Mt.length-rn-1,on=Mt[an];(nn==null||nn===1&&on>1)&&Xr.unshift(an)}return Xr}function Ro(st,Mt){for(var Xr=[],rn=Math.max(st.length,Mt.length),nn=0;nn<rn;nn++){var an=st[st.length-nn-1];an==null&&(an=1);var on=Mt[Mt.length-nn-1];if(on==null&&(on=1),an===1)Xr.unshift(on);else if(on===1)Xr.unshift(an);else{if(an!==on)throw Error("Operands could not be broadcast together with shapes "+st+" and "+Mt+".");Xr.unshift(an)}}return Xr}function Io(st,Mt,Xr,rn,nn,an,on){on===void 0&&(on="channelsLast");var sn,ln=To(Mt),un=ln[0],cn=ln[1];if(on==="channelsLast")sn=[un,cn,st[3],st[3]];else{if(on!=="channelsFirst")throw new Error("Unknown dataFormat "+on);sn=[un,cn,st[1],st[1]]}return So(st,sn,Xr,rn,nn,an,!1,on)}function ko(st,Mt,Xr,rn,nn,an,on){on===void 0&&(on="NDHWC");var sn,ln,un=No(Mt),cn=un[0],hn=un[1],fn=un[2];if(on==="NDHWC")ln="channelsLast",sn=[cn,hn,fn,st[4],st[4]];else{if(on!=="NCDHW")throw new Error("Unknown dataFormat "+on);ln="channelsFirst",sn=[cn,hn,fn,st[1],st[1]]}return Ao(st,sn,Xr,rn,nn,!1,ln,an)}function So(st,Mt,Xr,rn,nn,an,on,sn){on===void 0&&(on=!1),sn===void 0&&(sn="channelsLast");var ln=[-1,-1,-1,-1],un=ln[0],cn=ln[1],hn=ln[2],fn=ln[3];if(sn==="channelsLast")un=st[0],cn=st[1],hn=st[2],fn=st[3];else{if(sn!=="channelsFirst")throw new Error("Unknown dataFormat "+sn);un=st[0],fn=st[1],cn=st[2],hn=st[3]}var to,uo=Mt[0],co=Mt[1],Uo=Mt[3],lo=To(Xr),ho=lo[0],fo=lo[1],mo=To(rn),_d=mo[0],ep=mo[1],rp=Fo(uo,_d),ap=Fo(co,ep),sp=function(gp,mp,lp,cp,tp,np,fp,dp){var yp,bp,_p;if(typeof gp=="number"){yp={top:gp,bottom:gp,left:gp,right:gp,type:gp===0?"VALID":"NUMBER"};var Cp=function(Tp,Mp,Ap,kp,jp){kp==null&&(kp=Do(Tp,Mp,Ap));var Vp=Tp[0],Wp=Tp[1],qp=_o((Vp-Mp+2*kp)/Ap+1,jp);C(A$1(qp),function(){return"The output # of rows ("+qp+") must be an integer. Change the stride and/or zero pad parameters"});var Up=_o((Wp-Mp+2*kp)/Ap+1,jp);return C(A$1(Up),function(){return"The output # of columns ("+Up+") must be an integer. Change the stride and/or zero pad parameters"}),[qp,Up]}([mp,lp],np,cp,gp,dp);bp=Cp[0],_p=Cp[1]}else if(gp==="same"){bp=Math.ceil(mp/cp),_p=Math.ceil(lp/tp);var Sp=Math.max(0,(bp-1)*cp+np-mp),Rp=Math.max(0,(_p-1)*tp+fp-lp),Dp=Math.floor(Sp/2),Lp=Sp-Dp,Bp=Math.floor(Rp/2);yp={top:Dp,bottom:Lp,left:Bp,right:Rp-Bp,type:"SAME"}}else{if(gp!=="valid")throw Error("Unknown padding parameter: "+gp);yp={top:0,bottom:0,left:0,right:0,type:"VALID"},bp=Math.ceil((mp-np+1)/cp),_p=Math.ceil((lp-fp+1)/tp)}return{padInfo:yp,outHeight:bp,outWidth:_p}}(nn,cn,hn,ho,fo,rp,ap,an),up=sp.padInfo,pp=sp.outHeight,hp=sp.outWidth,vp=on?Uo*fn:Uo;return sn==="channelsFirst"?to=[un,vp,pp,hp]:sn==="channelsLast"&&(to=[un,pp,hp,vp]),{batchSize:un,dataFormat:sn,inHeight:cn,inWidth:hn,inChannels:fn,outHeight:pp,outWidth:hp,outChannels:vp,padInfo:up,strideHeight:ho,strideWidth:fo,filterHeight:uo,filterWidth:co,effectiveFilterHeight:rp,effectiveFilterWidth:ap,dilationHeight:_d,dilationWidth:ep,inShape:st,outShape:to,filterShape:Mt}}function Ao(st,Mt,Xr,rn,nn,an,on,sn){an===void 0&&(an=!1),on===void 0&&(on="channelsLast");var ln=[-1,-1,-1,-1,-1],un=ln[0],cn=ln[1],hn=ln[2],fn=ln[3],to=ln[4];if(on==="channelsLast")un=st[0],cn=st[1],hn=st[2],fn=st[3],to=st[4];else{if(on!=="channelsFirst")throw new Error("Unknown dataFormat "+on);un=st[0],to=st[1],cn=st[2],hn=st[3],fn=st[4]}var uo,co=Mt[0],Uo=Mt[1],lo=Mt[2],ho=Mt[4],fo=No(Xr),mo=fo[0],_d=fo[1],ep=fo[2],rp=No(rn),ap=rp[0],sp=rp[1],up=rp[2],pp=Fo(co,ap),hp=Fo(Uo,sp),vp=Fo(lo,up),gp=function(fp,dp,yp,bp,_p,Cp,Sp,Rp,Dp,Lp,Bp){var Tp,Mp,Ap,kp;if(typeof fp=="number"){Tp={top:fp,bottom:fp,left:fp,right:fp,front:fp,back:fp,type:fp===0?"VALID":"NUMBER"};var jp=function(Zp,Jp,n0,i0,e0,u0){e0==null&&(e0=Do(Zp,Jp,i0));var xp=Zp[0],wp=Zp[1],Ep=Zp[2],$p=_o((xp-Jp+2*e0)/i0+1,u0);C(A$1($p),function(){return"The output # of depths ("+$p+") must be an integer. Change the stride and/or zero pad parameters"});var Pp=_o((wp-Jp+2*e0)/i0+1,u0);C(A$1(Pp),function(){return"The output # of rows ("+Pp+") must be an integer. Change the stride and/or zero pad parameters"});var Fp=_o((Ep-Jp+2*e0)/i0+1,u0);return C(A$1(Fp),function(){return"The output # of columns ("+Fp+") must be an integer. Change the stride and/or zero pad parameters"}),[$p,Pp,Fp,n0]}([dp,yp,bp,1],Rp,1,_p,fp,Bp);Mp=jp[0],Ap=jp[1],kp=jp[2]}else if(fp==="same"){Mp=Math.ceil(dp/_p),Ap=Math.ceil(yp/Cp),kp=Math.ceil(bp/Sp);var Vp=(Mp-1)*_p+Rp-dp,Wp=(Ap-1)*Cp+Dp-yp,qp=(kp-1)*Sp+Lp-bp,Up=Math.floor(Vp/2),Qp=Vp-Up,Hp=Math.floor(Wp/2),Kp=Wp-Hp,Xp=Math.floor(qp/2);Tp={top:Hp,bottom:Kp,left:Xp,right:qp-Xp,front:Up,back:Qp,type:"SAME"}}else{if(fp!=="valid")throw Error("Unknown padding parameter: "+fp);Tp={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Mp=Math.ceil((dp-Rp+1)/_p),Ap=Math.ceil((yp-Dp+1)/Cp),kp=Math.ceil((bp-Lp+1)/Sp)}return{padInfo:Tp,outDepth:Mp,outHeight:Ap,outWidth:kp}}(nn,cn,hn,fn,mo,_d,ep,pp,hp,vp,sn),mp=gp.padInfo,lp=gp.outDepth,cp=gp.outHeight,tp=gp.outWidth,np=an?ho*to:ho;return on==="channelsFirst"?uo=[un,np,lp,cp,tp]:on==="channelsLast"&&(uo=[un,lp,cp,tp,np]),{batchSize:un,dataFormat:on,inDepth:cn,inHeight:hn,inWidth:fn,inChannels:to,outDepth:lp,outHeight:cp,outWidth:tp,outChannels:np,padInfo:mp,strideDepth:mo,strideHeight:_d,strideWidth:ep,filterDepth:co,filterHeight:Uo,filterWidth:lo,effectiveFilterDepth:pp,effectiveFilterHeight:hp,effectiveFilterWidth:vp,dilationDepth:ap,dilationHeight:sp,dilationWidth:up,inShape:st,outShape:uo,filterShape:Mt}}function Do(st,Mt,Xr,rn){rn===void 0&&(rn=1);var nn=Fo(Mt,rn);return Math.floor((st[0]*(Xr-1)-Xr+nn)/2)}function To(st){return typeof st=="number"?[st,st,st]:st.length===2?[st[0],st[1],1]:st}function No(st){return typeof st=="number"?[st,st,st]:st}function Fo(st,Mt){return Mt<=1?st:st+(st-1)*(Mt-1)}function _o(st,Mt){if(!Mt)return st;switch(Mt){case"round":return Math.round(st);case"ceil":return Math.ceil(st);case"floor":return Math.floor(st);default:throw new Error("Unknown roundingMode "+Mt)}}function Oo(st){var Mt=To(st),Xr=Mt[0],rn=Mt[1],nn=Mt[2];return Xr===1&&rn===1&&nn===1}function Mo(st,Mt){return Oo(st)||Oo(Mt)}function Bo(st){if(st==="NHWC")return"channelsLast";if(st==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+st)}function Po(st,Mt,Xr){if(Mt==="complex64"){if(st.dtype==="complex64")return st.clone();var rn=Gn(st.shape),nn=st.toFloat(),an=Xr.complex(nn,rn);return rn.dispose(),nn.dispose(),an}if(!U(st.dtype,Mt))return Lt.makeTensorFromDataId(st.dataId,st.shape,Mt);if(st.dtype==="complex64"){var on=Xr.real(st);return an=on.cast(Mt),on.dispose(),an}if(Mt==="int32")return Xr.int(st);if(Mt==="bool"){var sn=On(0,st.dtype);return an=Xr.notEqual(st,sn),sn.dispose(),an}throw new Error("Error in Cast: failed to cast "+st.dtype+" to "+Mt)}function Lo(st,Mt){return Lt.makeTensorFromDataId(st.dataId,Mt,st.dtype)}function Wo(st,Mt,Xr){var rn=(Mt-st)/(Xr-1),nn=tt(Xr,"float32");nn[0]=st;for(var an=1;an<nn.length;an++)nn[an]=nn[an-1]+rn;return Mn(nn,"float32")}function Vo(st,Mt){if(st.length!==Mt.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+st.length+", imag: "+Mt.length+".");for(var Xr=new Float32Array(2*st.length),rn=0;rn<Xr.length;rn+=2)Xr[rn]=st[rn/2],Xr[rn+1]=Mt[rn/2];return Xr}function zo(st,Mt){return{real:st[2*Mt],imag:st[2*Mt+1]}}function Go(st,Mt,Xr,rn){st[2*rn]=Mt,st[2*rn+1]=Xr}function Ho(st,Mt,Xr){var rn=(Xr?2:-2)*Math.PI*(st/Mt);return{real:Math.cos(rn),imag:Math.sin(rn)}}function qo(st,Mt,Xr){var rn=function(an,on,sn){return function(ln,un,cn){for(var hn=0,fn=ln.length,to=0,uo=!1;hn<fn;){var co=cn(un,ln[to=hn+(fn-hn>>>1)]);co>0?hn=to+1:(fn=to,uo=!co)}return uo?hn:-hn-1}(an,on,sn||Ko)}(st,Mt,Xr),nn=rn<0?-(rn+1):rn;st.splice(nn,0,Mt)}function Ko(st,Mt){return st>Mt?1:st<Mt?-1:0}function jo(st,Mt,Xr,rn,nn){return Yo(st,Mt,Xr,rn,nn,0).selectedIndices}function Xo(st,Mt,Xr,rn,nn,an){var on=Yo(st,Mt,Xr,rn,nn,an);return on.numValidOutputs.dispose(),{selectedIndices:on.selectedIndices,selectedScores:on.selectedScores}}function Yo(st,Mt,Xr,rn,nn,an,on,sn){sn===void 0&&(sn=!1);for(var ln=Array.from(Mt).map(function(mo,_d){return{score:mo,boxIndex:_d,suppressBeginIndex:0}}).filter(function(mo){return mo.score>nn}).sort(Jo),un=an>0?-.5/an:0,cn=[],hn=[];cn.length<Xr&&ln.length>0;){var fn=ln.pop(),to=fn.score,uo=fn.boxIndex,co=fn.suppressBeginIndex;if(to<nn)break;for(var Uo=!1,lo=cn.length-1;lo>=co;--lo){var ho=$o(st,uo,cn[lo]);if(ho>=rn){Uo=!0;break}if(fn.score=fn.score*Qo(rn,un,ho),fn.score<=nn)break}fn.suppressBeginIndex=cn.length,Uo||(fn.score===to?(cn.push(uo),hn.push(fn.score)):fn.score>nn&&qo(ln,fn,Jo))}var fo=cn.length;return sn&&(cn.fill(0,fo),hn.fill(0,fo)),{selectedIndices:Mn(cn,"int32"),selectedScores:Mn(hn,"float32"),numValidOutputs:On(fo,"int32")}}function $o(st,Mt,Xr){var rn=st.subarray(4*Mt,4*Mt+4),nn=st.subarray(4*Xr,4*Xr+4),an=Math.min(rn[0],rn[2]),on=Math.min(rn[1],rn[3]),sn=Math.max(rn[0],rn[2]),ln=Math.max(rn[1],rn[3]),un=Math.min(nn[0],nn[2]),cn=Math.min(nn[1],nn[3]),hn=Math.max(nn[0],nn[2]),fn=Math.max(nn[1],nn[3]),to=(sn-an)*(ln-on),uo=(hn-un)*(fn-cn);if(to<=0||uo<=0)return 0;var co=Math.max(an,un),Uo=Math.max(on,cn),lo=Math.min(sn,hn),ho=Math.min(ln,fn),fo=Math.max(lo-co,0)*Math.max(ho-Uo,0);return fo/(to+uo-fo)}function Qo(st,Mt,Xr){var rn=Math.exp(Mt*Xr*Xr);return Xr<=st?rn:0}function Jo(st,Mt){return st.score-Mt.score||st.score===Mt.score&&Mt.boxIndex-st.boxIndex}function Zo(st,Mt,Xr){var rn=new Array(st.rank).fill(0),nn=st.shape.slice();return Mt.map(function(an){nn[Xr]=an;var on=st.slice(rn,nn);return rn[Xr]+=an,on})}function ta(st,Mt){for(var Xr=new Array(st.rank),rn=0;rn<Xr.length;rn++)Xr[rn]=st.shape[rn]*Mt[rn];var nn=dr(Xr,st.dtype);for(rn=0;rn<nn.values.length;++rn){for(var an=nn.indexToLoc(rn),on=new Array(st.rank),sn=0;sn<on.length;sn++)on[sn]=an[sn]%st.shape[sn];var ln=st.locToIndex(on);nn.values[rn]=st.values[ln]}return nn.toTensor()}function ea(st,Mt,Xr,rn,nn){for(var an=Mt[Mt.length-1],on=[st.length/an,an],sn=on[0],ln=on[1],un=B$1(Xr,sn*rn),cn=B$1("int32",sn*rn),hn=0;hn<sn;hn++){for(var fn=hn*ln,to=st.subarray(fn,fn+ln),uo=[],co=0;co<to.length;co++)uo.push({value:to[co],index:co});uo.sort(function(mo,_d){return _d.value-mo.value});var Uo=hn*rn,lo=un.subarray(Uo,Uo+rn),ho=cn.subarray(Uo,Uo+rn);for(co=0;co<rn;co++)lo[co]=uo[co].value,ho[co]=uo[co].index}var fo=Mt.slice();return fo[fo.length-1]=rn,[Fn(un,fo,Xr),Fn(cn,fo,"int32")]}function na(st,Mt){for(var Xr=[],rn=0;rn<Mt.length;rn++)Mt[rn]&&Xr.push(rn);var nn=dr(st,"int32"),an=dr([Xr.length,st.length],"int32");for(rn=0;rn<Xr.length;rn++){var on=nn.indexToLoc(Xr[rn]),sn=rn*st.length;an.values.set(on,sn)}return an.toTensor()}var ra=function(st,Mt){this.outputShape=[],this.outputShape=st,this.variableNames=Mt.map(function(nn,an){return"T"+an});var Xr=[];this.variableNames.forEach(function(nn){Xr.push("float v"+nn+" = get"+nn+"AtOutCoords();")});var rn=this.variableNames.map(function(nn){return"v"+nn}).join(" + ");this.userCode=`
      void main() {
        `+Xr.join(`
        `)+`

        float result = `+rn+`;
        setOutput(result);
      }
    `},oa=function(st,Mt){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st,this.variableNames=Mt.map(function(nn,an){return"T"+an});var Xr=[];this.variableNames.forEach(function(nn){Xr.push("vec4 v"+nn+" = get"+nn+"AtOutCoords();")});var rn=this.variableNames.map(function(nn){return"v"+nn}).join(" + ");this.userCode=`
      void main() {
        `+Xr.join(`
        `)+`

        vec4 result = `+rn+`;
        setOutput(result);
      }
    `},aa=function(st,Mt,Xr){this.variableNames=["A"];var rn=st.windowSize,nn=st.batchSize,an=st.inSize,on=Math.ceil(an/rn);Xr||this.variableNames.push("bestIndicesA"),this.outputShape=[nn,on];var sn=Mt==="max"?">":"<",ln=Xr?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+rn+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+rn+`; i++) {
          int inIdx = `+ln+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+sn+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function ia(st,Mt){return["x","y","z","w","u","v"].slice(0,Mt).map(function(Xr){return st+"."+Xr})}function sa(st,Mt){return Mt===1?[st]:ia(st,Mt)}function ua(){var st,Mt,Xr,rn,nn,an,on,sn,ln,un;return i$2().getNumber("WEBGL_VERSION")===2?(st="#version 300 es",Mt="in",Xr="out",rn="in",nn="texture",an="outputColor",on="out vec4 outputColor;",sn=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,ln="",un=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(st="",Mt="attribute",Xr="varying",rn="varying",nn="texture2D",an="gl_FragColor",on="",sn=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,ln=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,un=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:st,attribute:Mt,varyingVs:Xr,varyingFs:rn,texture2D:nn,output:an,defineOutput:on,defineSpecialNaN:sn,defineSpecialInf:ln,defineRound:un}}function ca(st,Mt,Xr){Xr===void 0&&(Xr="index");var rn=$$1(Mt);return rn.map(function(nn,an){return"int "+st[an]+" = "+Xr+" / "+nn+"; "+(an===rn.length-1?"int "+st[an+1]+" = "+Xr+" - "+st[an]+" * "+nn:"index -= "+st[an]+" * "+nn)+";"}).join("")}function la(st){var Mt=$$1(st).map(function(Xr){return Xr.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+Mt[0]+" + coords.y * "+Mt[1]+` + coords.z;
  }
`}var ha=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function fa(st,Mt,Xr,rn){var nn=[];st.forEach(function(to){var uo=k(to.shapeInfo.logicalShape);to.shapeInfo.isUniform?nn.push("uniform float "+to.name+(uo>1?"["+uo+"]":"")+";"):(nn.push("uniform sampler2D "+to.name+";"),nn.push("uniform int offset"+to.name+";"))});var an,on,sn=nn.join(`
`),ln=st.map(function(to){return function(uo,co,Uo){Uo===void 0&&(Uo=!1);var lo="";lo+=Uo?pa(uo):da(uo);var ho=uo.shapeInfo.logicalShape,fo=co.logicalShape;return ho.length<=fo.length&&(lo+=Uo?function(mo,_d){var ep,rp=mo.name,ap=rp.charAt(0).toUpperCase()+rp.slice(1),sp="get"+ap+"AtOutCoords",up=mo.shapeInfo.logicalShape.length,pp=_d.logicalShape.length,hp=Co(mo.shapeInfo.logicalShape,_d.logicalShape),vp=wa(pp),gp=pp-up,mp=["x","y","z","w","u","v"];ep=up===0?"":pp<2&&hp.length>=1?"coords = 0;":hp.map(function(yp){return"coords."+mp[yp+gp]+" = 0;"}).join(`
`);var lp="";lp=pp<2&&up>0?"coords":mo.shapeInfo.logicalShape.map(function(yp,bp){return"coords."+mp[bp+gp]}).join(", ");var cp="return outputValue;",tp=k(mo.shapeInfo.logicalShape)===1,np=k(_d.logicalShape)===1;if(up!==1||tp||np){if(tp&&!np)cp=pp===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(hp.length){var fp=up-2,dp=up-1;hp.indexOf(fp)>-1&&hp.indexOf(dp)>-1?cp="return vec4(outputValue.x);":hp.indexOf(fp)>-1?cp="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":hp.indexOf(dp)>-1&&(cp="return vec4(outputValue.xx, outputValue.zz);")}}else cp=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+sp+`() {
      `+vp+` coords = getOutputCoords();
      `+ep+`
      vec4 outputValue = get`+ap+"("+lp+`);
      `+cp+`
    }
  `}(uo,co):function(mo,_d){var ep=mo.name,rp=ep.charAt(0).toUpperCase()+ep.slice(1),ap="get"+rp+"AtOutCoords",sp=_d.texShape,up=mo.shapeInfo.texShape,pp=mo.shapeInfo.logicalShape.length,hp=_d.logicalShape.length;if(!mo.shapeInfo.isUniform&&pp===hp&&mo.shapeInfo.flatOffset==null&&S$3(up,sp))return`
      float `+ap+`() {
        return sampleTexture(`+ep+`, resultUV);
      }
    `;var vp,gp=wa(hp),mp=Co(mo.shapeInfo.logicalShape,_d.logicalShape),lp=hp-pp,cp=["x","y","z","w","u","v"];vp=pp===0?"":hp<2&&mp.length>=1?"coords = 0;":mp.map(function(np){return"coords."+cp[np+lp]+" = 0;"}).join(`
`);var tp="";return tp=hp<2&&pp>0?"coords":mo.shapeInfo.logicalShape.map(function(np,fp){return"coords."+cp[fp+lp]}).join(", "),`
    float `+ap+`() {
      `+gp+` coords = getOutputCoords();
      `+vp+`
      return get`+rp+"("+tp+`);
    }
  `}(uo,co)),lo}(to,Mt,rn)}).join(`
`),un=Mt.texShape,cn=ua(),hn=function(to){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+to.texture2D+`(textureSampler, uv).r;
    }
  `}(cn),fn=function(to){return to.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+to.varyingFs+` vec2 resultUV;
    `+to.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+to.defineSpecialNaN+`
    `+to.defineSpecialInf+`
    `+to.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+va+`
    `+ma+`
    `+ga+`
  `}(cn);return Mt.isPacked?(an=function(to,uo){switch(to.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(mo,_d){var ep=[Math.ceil(_d[0]/2),Math.ceil(_d[1]/2)];return ep[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+ep[1]+`.0);
      }
    `:ep[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+ep[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+ep[0]+", "+ep[1]+`));
      return 2 * (resTexRC.x * `+ep[1]+` + resTexRC.y);
    }
  `}(0,uo);case 2:return function(mo,_d){var ep=[Math.ceil(_d[0]/2),Math.ceil(_d[1]/2)];if(S$3(mo,_d))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+ep[0]+", "+ep[1]+`));
      }
    `;var rp=Math.ceil(mo[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+ep[0]+", "+ep[1]+`));

      int index = resTexRC.x * `+ep[1]+` + resTexRC.y;
      int r = 2 * (index / `+rp+`);
      int c = imod(index, `+rp+`) * 2;

      return ivec2(r, c);
    }
  `}(to,uo);case 3:return co=to,Uo=uo,lo=[Math.ceil(Uo[0]/2),Math.ceil(Uo[1]/2)],ho=Math.ceil(co[2]/2),fo=ho*Math.ceil(co[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+lo[0]+", "+lo[1]+`));
      int index = resTexRC.x * `+lo[1]+` + resTexRC.y;

      int b = index / `+fo+`;
      index -= b * `+fo+`;

      int r = 2 * (index / `+ho+`);
      int c = imod(index, `+ho+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(mo,_d){for(var ep=[Math.ceil(_d[0]/2),Math.ceil(_d[1]/2)],rp=Math.ceil(mo[mo.length-1]/2),ap=rp*Math.ceil(mo[mo.length-2]/2),sp=ap,up="",pp="b, r, c",hp=2;hp<mo.length-1;hp++)sp*=mo[mo.length-hp-1],up=`
      int b`+hp+" = index / "+sp+`;
      index -= b`+hp+" * "+sp+`;
    `+up,pp="b"+hp+", "+pp;return`
    ivec`+mo.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+ep[0]+", "+ep[1]+`));
      int index = resTexRC.x * `+ep[1]+` + resTexRC.y;

      `+up+`

      int b = index / `+ap+`;
      index -= b * `+ap+`;

      int r = 2 * (index / `+rp+`);
      int c = imod(index, `+rp+`) * 2;

      return ivec`+mo.length+"("+pp+`);
    }
  `}(to,uo)}var co,Uo,lo,ho,fo}(Mt.logicalShape,un),on=function(to){return`
    void setOutput(vec4 val) {
      `+to.output+` = val;
    }
  `}(cn)):(an=function(to,uo){switch(to.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(lo,ho){return ho[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+ho[1]+`.0);
      }
    `:ho[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+ho[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+ho[0]+", "+ho[1]+`));
      return resTexRC.x * `+ho[1]+` + resTexRC.y;
    }
  `}(0,uo);case 2:return function(lo,ho){return S$3(lo,ho)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+ho[0]+", "+ho[1]+`));
      }
    `:lo[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+ho[0]+", "+ho[1]+`));
        int index = resTexRC.x * `+ho[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:lo[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+ho[0]+", "+ho[1]+`));
        int index = resTexRC.x * `+ho[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+ho[0]+", "+ho[1]+`));
      int index = resTexRC.x * `+ho[1]+` + resTexRC.y;
      int r = index / `+lo[1]+`;
      int c = index - r * `+lo[1]+`;
      return ivec2(r, c);
    }
  `}(to,uo);case 3:return co=uo,Uo=ca(["r","c","d"],to),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+co[0]+", "+co[1]+`));
      int index = resTexRC.x * `+co[1]+` + resTexRC.y;
      `+Uo+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(lo,ho){var fo=ca(["r","c","d","d2"],lo);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+ho[0]+", "+ho[1]+`));
      int index = resTexRC.x * `+ho[1]+` + resTexRC.y;
      `+fo+`
      return ivec4(r, c, d, d2);
    }
  `}(to,uo);case 5:return function(lo,ho){var fo=ca(["r","c","d","d2","d3"],lo);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+ho[0]+`,
                             `+ho[1]+`));

      int index = resTexRC.x * `+ho[1]+` + resTexRC.y;

      `+fo+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(to,uo);case 6:return function(lo,ho){var fo=ca(["r","c","d","d2","d3","d4"],lo);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+ho[0]+", "+ho[1]+`));
      int index = resTexRC.x * `+ho[1]+` + resTexRC.y;

      `+fo+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(to,uo);default:throw new Error(to.length+"-D output sampling is not yet supported")}var co,Uo}(Mt.logicalShape,un),on=function(to){return`
    void setOutput(float val) {
      `+to.output+` = vec4(val, 0, 0, 0);
    }
  `}(cn)),rn&&(fn+=ya),[fn,hn,on,sn,an,ln,Xr].join(`
`)}function da(st){var Mt=st.shapeInfo.logicalShape;switch(Mt.length){case 0:return function(Xr){var rn=Xr.name,nn="get"+rn.charAt(0).toUpperCase()+rn.slice(1);if(Xr.shapeInfo.isUniform)return"float "+nn+"() {return "+rn+";}";var an=Xr.shapeInfo.texShape,on=an[0],sn=an[1];if(on===1&&sn===1)return`
      float `+nn+`() {
        return sampleTexture(`+rn+`, halfCR);
      }
    `;var ln=Xr.shapeInfo.texShape,un=ln[0],cn=ln[1],hn=xa(rn);return`
    float `+nn+`() {
      vec2 uv = uvFromFlat(`+un+", "+cn+", "+hn+`);
      return sampleTexture(`+rn+`, uv);
    }
  `}(st);case 1:return function(Xr){var rn=Xr.name,nn="get"+rn.charAt(0).toUpperCase()+rn.slice(1);if(Xr.shapeInfo.isUniform)return`
      float `+nn+`(int index) {
        `+ba(Xr)+`
      }
    `;var an=Xr.shapeInfo.texShape,on=an[0],sn=an[1];if(sn===1&&on===1)return`
      float `+nn+`(int index) {
        return sampleTexture(`+rn+`, halfCR);
      }
    `;var ln=xa(rn);return sn===1?`
      float `+nn+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+ln+") + 0.5) / "+on+`.0);
        return sampleTexture(`+rn+`, uv);
      }
    `:on===1?`
      float `+nn+`(int index) {
        vec2 uv = vec2((float(index + `+ln+") + 0.5) / "+sn+`.0, 0.5);
        return sampleTexture(`+rn+`, uv);
      }
    `:`
    float `+nn+`(int index) {
      vec2 uv = uvFromFlat(`+on+", "+sn+", index + "+ln+`);
      return sampleTexture(`+rn+`, uv);
    }
  `}(st);case 2:return function(Xr){var rn=Xr.shapeInfo.logicalShape,nn=Xr.name,an="get"+nn.charAt(0).toUpperCase()+nn.slice(1),on=Xr.shapeInfo.texShape;if(on!=null&&S$3(rn,on)){var sn=on[0],ln=on[1];return`
    float `+an+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+ln+".0, "+sn+`.0);
      return sampleTexture(`+nn+`, uv);
    }
  `}var un=M$3(rn),cn=un.newShape,hn=un.keptDims,fn=cn;if(fn.length<rn.length){var to=Ca(Xr,fn);return`
      `+da(to)+`
      float `+an+`(int row, int col) {
        return `+an+"("+Ea(["row","col"],hn)+`);
      }
    `}if(Xr.shapeInfo.isUniform)return`
      float `+an+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+rn[1]+`, 1)));
        `+ba(Xr)+`
      }
    `;var uo=on[0],co=on[1],Uo=xa(nn);return co===1?`
    float `+an+`(int row, int col) {
      float index = dot(vec3(row, col, `+Uo+"), vec3("+rn[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+uo+`.0);
      return sampleTexture(`+nn+`, uv);
    }
  `:uo===1?`
    float `+an+`(int row, int col) {
      float index = dot(vec3(row, col, `+Uo+"), vec3("+rn[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+co+`.0, 0.5);
      return sampleTexture(`+nn+`, uv);
    }
  `:`
  float `+an+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+rn[1]+" + col + "+Uo+`;
    vec2 uv = uvFromFlat(`+uo+", "+co+`, index);
    return sampleTexture(`+nn+`, uv);
  }
`}(st);case 3:return function(Xr){var rn=Xr.shapeInfo.logicalShape,nn=Xr.name,an="get"+nn.charAt(0).toUpperCase()+nn.slice(1),on=rn[1]*rn[2],sn=rn[2],ln=M$3(rn),un=ln.newShape,cn=ln.keptDims,hn=un;if(hn.length<rn.length){var fn=Ca(Xr,hn);return`
        `+da(fn)+`
        float `+an+`(int row, int col, int depth) {
          return `+an+"("+Ea(["row","col","depth"],cn)+`);
        }
      `}if(Xr.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+on+", "+sn+`, 1)));
        `+ba(Xr)+`
      }
    `;var to=Xr.shapeInfo.texShape,uo=to[0],co=to[1],Uo=Xr.shapeInfo.flatOffset;if(co===on&&Uo==null)return`
        float `+an+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+sn+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+co+".0, "+uo+`.0);
          return sampleTexture(`+nn+`, uv);
        }
      `;if(co===sn&&Uo==null)return`
    float `+an+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+rn[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+co+".0, "+uo+`.0);
      return sampleTexture(`+nn+`, uv);
    }
  `;var lo=xa(nn);return`
      float `+an+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+on+" + col * "+sn+" + depth + "+lo+`;
        vec2 uv = uvFromFlat(`+uo+", "+co+`, index);
        return sampleTexture(`+nn+`, uv);
      }
  `}(st);case 4:return function(Xr){var rn=Xr.shapeInfo.logicalShape,nn=Xr.name,an="get"+nn.charAt(0).toUpperCase()+nn.slice(1),on=rn[3],sn=rn[2]*on,ln=rn[1]*sn,un=M$3(rn),cn=un.newShape,hn=un.keptDims;if(cn.length<rn.length){var fn=Ca(Xr,cn);return`
      `+da(fn)+`
      float `+an+`(int row, int col, int depth, int depth2) {
        return `+an+"("+Ea(["row","col","depth","depth2"],hn)+`);
      }
    `}if(Xr.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+ln+", "+sn+", "+on+`, 1)));
        `+ba(Xr)+`
      }
    `;var to=Xr.shapeInfo.flatOffset,uo=Xr.shapeInfo.texShape,co=uo[0],Uo=uo[1];if(Uo===ln&&to==null)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+sn+", "+on+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+Uo+".0, "+co+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;if(Uo===on&&to==null)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+rn[1]*rn[2]+", "+rn[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+Uo+".0, "+co+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;var lo=xa(nn);return`
    float `+an+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+ln+" + col * "+sn+` +
          depth * `+on+` + depth2;
      vec2 uv = uvFromFlat(`+co+", "+Uo+", index + "+lo+`);
      return sampleTexture(`+nn+`, uv);
    }
  `}(st);case 5:return function(Xr){var rn=Xr.shapeInfo.logicalShape,nn=Xr.name,an="get"+nn.charAt(0).toUpperCase()+nn.slice(1),on=rn[4],sn=rn[3]*on,ln=rn[2]*sn,un=rn[1]*ln,cn=M$3(rn),hn=cn.newShape,fn=cn.keptDims;if(hn.length<rn.length){var to=Ca(Xr,hn);return`
      `+da(to)+`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        return `+an+"("+Ea(["row","col","depth","depth2","depth3"],fn)+`);
      }
    `}if(Xr.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+un+", "+ln+", "+sn+", "+on+`)) +
          depth3;
        `+ba(Xr)+`
      }
    `;var uo=Xr.shapeInfo.flatOffset,co=Xr.shapeInfo.texShape,Uo=co[0],lo=co[1];if(lo===un&&uo==null)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+ln+", "+sn+", "+on+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+lo+".0, "+Uo+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;if(lo===on&&uo==null)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+rn[1]*rn[2]*rn[3]+`,
               `+rn[2]*rn[3]+", "+rn[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+lo+".0, "+Uo+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;var ho=xa(nn);return`
    float `+an+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+un+" + col * "+ln+" + depth * "+sn+` +
          depth2 * `+on+" + depth3 + "+ho+`;
      vec2 uv = uvFromFlat(`+Uo+", "+lo+`, index);
      return sampleTexture(`+nn+`, uv);
    }
  `}(st);case 6:return function(Xr){var rn=Xr.shapeInfo.logicalShape,nn=Xr.name,an="get"+nn.charAt(0).toUpperCase()+nn.slice(1),on=M$3(rn),sn=on.newShape,ln=on.keptDims;if(sn.length<rn.length){var un=Ca(Xr,sn);return`
      `+da(un)+`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+an+"("+Ea(["row","col","depth","depth2","depth3","depth4"],ln)+`);
      }
    `}var cn=rn[5],hn=rn[4]*cn,fn=rn[3]*hn,to=rn[2]*fn,uo=rn[1]*to;if(Xr.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+uo+", "+to+", "+fn+", "+hn+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+cn+`, 1)));
        `+ba(Xr)+`
      }
    `;var co=Xr.shapeInfo.flatOffset,Uo=Xr.shapeInfo.texShape,lo=Uo[0],ho=Uo[1];if(ho===uo&&co==null)return`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+to+", "+fn+", "+hn+", "+cn+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+ho+".0, "+lo+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;if(ho===cn&&co==null)return`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+rn[1]*rn[2]*rn[3]*rn[4]+`,
               `+rn[2]*rn[3]*rn[4]+`,
               `+rn[3]*rn[4]+`,
               `+rn[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+ho+".0, "+lo+`.0);
        return sampleTexture(`+nn+`, uv);
      }
    `;var fo=xa(nn);return`
    float `+an+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+uo+" + col * "+to+" + depth * "+fn+` +
          depth2 * `+hn+" + depth3 * "+cn+" + depth4 + "+fo+`;
      vec2 uv = uvFromFlat(`+lo+", "+ho+`, index);
      return sampleTexture(`+nn+`, uv);
    }
  `}(st);default:throw new Error(Mt.length+"-D input sampling is not yet supported")}}function pa(st){var Mt,Xr,rn;switch(st.shapeInfo.logicalShape.length){case 0:return Mt=st.name,Xr="get"+Mt.charAt(0).toUpperCase()+Mt.slice(1),rn=ua(),`
    vec4 `+Xr+`() {
      return `+rn.texture2D+"("+Mt+`, halfCR);
    }
  `;case 1:return function(nn){var an=nn.name,on="get"+an.charAt(0).toUpperCase()+an.slice(1),sn=nn.shapeInfo.texShape,ln=[Math.ceil(sn[0]/2),Math.ceil(sn[1]/2)],un=ua();return`
    vec4 `+on+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+ln[0]+", "+ln[1]+`, index);
      return `+un.texture2D+"("+an+`, uv);
    }
  `}(st);case 2:return function(nn){var an=nn.shapeInfo.logicalShape,on=nn.name,sn="get"+on.charAt(0).toUpperCase()+on.slice(1),ln=nn.shapeInfo.texShape,un=ln[0],cn=ln[1],hn=ua();if(ln!=null&&S$3(an,ln))return`
      vec4 `+sn+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+cn+".0, "+un+`.0);

        return `+hn.texture2D+"("+on+`, uv);
      }
    `;var fn=[Math.ceil(ln[0]/2),Math.ceil(ln[1]/2)],to=Math.ceil(an[1]/2);return`
    vec4 `+sn+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+to+", "+fn[0]+", "+fn[1]+`, row, col);
      return `+hn.texture2D+"("+on+`, uv);
    }
  `}(st);case 3:return function(nn){var an=nn.shapeInfo.logicalShape,on=nn.name,sn="get"+on.charAt(0).toUpperCase()+on.slice(1),ln=nn.shapeInfo.texShape,un=[Math.ceil(ln[0]/2),Math.ceil(ln[1]/2)];if(an[0]===1){var cn=an.slice(1),hn=Ca(nn,cn);return`
        `+pa(hn)+`
        vec4 `+sn+`(int b, int row, int col) {
          return `+sn+"("+Ea(["b","row","col"],[1,2])+`);
        }
      `}var fn=un[0],to=un[1],uo=Math.ceil(an[2]/2),co=uo*Math.ceil(an[1]/2),Uo=ua();return`
    vec4 `+sn+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+fn+", "+to+", "+co+", "+uo+`, b, row, col);
      return `+Uo.texture2D+"("+on+`, uv);
    }
  `}(st);default:return function(nn){for(var an=nn.shapeInfo.logicalShape,on=an.length,sn=nn.name,ln="get"+sn.charAt(0).toUpperCase()+sn.slice(1),un=nn.shapeInfo.texShape,cn=[Math.ceil(un[0]/2),Math.ceil(un[1]/2)],hn=cn[0],fn=cn[1],to=Math.ceil(an[on-1]/2),uo=to*Math.ceil(an[on-2]/2),co="int b, int row, int col",Uo="b * "+uo+" + (row / 2) * "+to+" + (col / 2)",lo=2;lo<on-1;lo++)co="int b"+lo+", "+co,uo*=an[on-lo-1],Uo="b"+lo+" * "+uo+" + "+Uo;var ho=ua();return`
    vec4 `+ln+"("+co+`) {
      int index = `+Uo+`;
      int texR = index / `+fn+`;
      int texC = index - texR * `+fn+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+fn+", "+hn+`);
      return `+ho.texture2D+"("+sn+`, uv);
    }
  `}(st)}}var va=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ma=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ga=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ya=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function xa(st){return"offset"+st}function ba(st){var Mt=st.name,Xr=k(st.shapeInfo.logicalShape);return Xr<2?"return "+Mt+";":`
    for (int i = 0; i < `+Xr+`; i++) {
      if (i == index) {
        return `+Mt+`[i];
      }
    }
  `}function wa(st){if(st<=1)return"int";if(st===2)return"ivec2";if(st===3)return"ivec3";if(st===4)return"ivec4";if(st===5)return"ivec5";if(st===6)return"ivec6";throw Error("GPU for rank "+st+" is not yet supported")}function Ca(st,Mt){var Xr=JSON.parse(JSON.stringify(st));return Xr.shapeInfo.logicalShape=Mt,Xr}function Ea(st,Mt){return Mt.map(function(Xr){return st[Xr]}).join(", ")}var Ra=function(st,Mt,Xr,rn){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,C(st.length>2,function(){return"Packed arg"+(Xr.charAt(0).toUpperCase()+Xr.slice(1))+" supports only inputs with rank above 2."});var nn=st[st.length-1],an=Math.ceil(nn/Mt);this.outputShape=st.slice(0,-1),an>1&&this.outputShape.push(an),rn||this.variableNames.push("bestIndicesA");var on,sn,ln=this.outputShape,un=ln.length,cn=wa(un),hn=sa("coords",un);if(an===1){var fn=wa(sn=un+1);on=`
        `+fn+" sourceLocR = "+fn+"("+hn.join()+`, 0);
        ++`+hn[un-1]+`;
        `+fn+" sourceLocG = "+fn+"("+hn.join()+`, 0);
        ++`+hn[un-2]+`;
        `+fn+" sourceLocA = "+fn+"("+hn.join()+`, 0);
        --`+hn[un-1]+`;
        `+fn+" sourceLocB = "+fn+"("+hn.join()+`, 0);
        --`+hn[un-2]+";"}else sn=un,on=`
        `+cn+` sourceLocR = coords;
        ++`+hn[un-1]+`;
        `+cn+` sourceLocG = coords;
        ++`+hn[un-2]+`;
        `+cn+` sourceLocA = coords;
        --`+hn[un-1]+`;
        `+cn+` sourceLocB = coords;
        --`+hn[un-2]+";";var to=["x","y","z","w","u","v"].slice(0,sn),uo="."+to[sn-1],co=to.map(function(ap){return"int "+ap}),Uo=sa("sourceLocR",sn-1).concat("inIdx.r"),lo=sa("sourceLocG",sn-1).concat("inIdx.g"),ho=sa("sourceLocB",sn-1).concat("inIdx.b"),fo=sa("sourceLocA",sn-1).concat("inIdx.a"),mo=Xr==="max"?"greaterThan":"lessThan",_d=rn?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+Uo.join()+`),
                             getBestIndicesAChannel(`+lo.join()+`),
                             getBestIndicesAChannel(`+ho.join()+`),
                             getBestIndicesAChannel(`+fo.join()+")));",ep=`vec4(
            getAChannel(`+Uo.join()+`),
            hasNextCol ? getAChannel(`+lo.join()+`) : 0.,
            hasNextRow ? getAChannel(`+ho.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+fo.join()+") : 0.)",rp=rn?"":`
      float getBestIndicesAChannel(`+co.join()+`) {
        return getChannel(getBestIndicesA(`+to.join()+`),
                                          vec2(`+to.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+co.join()+`) {
        return getChannel(getA(`+to.join()+`),
                               vec2(`+to.slice(-2).join()+`));
      }
      `+rp+`
      void main() {
        `+cn+` coords = getOutputCoords();
        bool hasNextCol = `+hn[un-1]+" < "+(ln[un-1]-1)+`;
        bool hasNextRow = `+hn[un-2]+" < "+(ln[un-2]-1)+`;
        `+on+`
        ivec4 srcIdx = ivec4(sourceLocR`+uo+", sourceLocG"+uo+`,
          sourceLocB`+uo+", sourceLocA"+uo+") * "+Mt+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+ep+`;

        for (int i = 0; i < `+Mt+`; i++) {
          inIdx = srcIdx;
          `+_d+`
          vec4 candidate = `+ep+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+mo+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Ia=function(st){this.variableNames=["dy"],this.outputShape=st.inShape;var Mt=st.filterHeight,Xr=st.filterWidth,rn=st.strideHeight,nn=st.strideWidth,an=st.dilationHeight,on=st.dilationWidth,sn=st.effectiveFilterHeight,ln=st.effectiveFilterWidth,un=sn-1-st.padInfo.top,cn=ln-1-st.padInfo.left,hn=1/(Mt*Xr);this.userCode=`
      const ivec2 pads = ivec2(`+un+", "+cn+`);
      const float avgMultiplier = float(`+hn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+sn+`;
            wR += `+an+`) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+ln+`;
            wC+= `+on+`) {
            float dyC = float(dyCCorner + wC) / `+nn+`.0;

            if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},ka=function(st){this.variableNames=["dy"],this.outputShape=st.inShape;var Mt=st.filterDepth,Xr=st.filterHeight,rn=st.filterWidth,nn=st.strideDepth,an=st.strideHeight,on=st.strideWidth,sn=st.dilationDepth,ln=st.dilationHeight,un=st.dilationWidth,cn=st.effectiveFilterDepth,hn=st.effectiveFilterHeight,fn=st.effectiveFilterWidth,to=cn-1-st.padInfo.front,uo=hn-1-st.padInfo.top,co=fn-1-st.padInfo.left,Uo=1/(Mt*Xr*rn);this.userCode=`
      const ivec3 pads = ivec3(`+to+", "+uo+", "+co+`);
      const float avgMultiplier = float(`+Uo+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+cn+`;
            wD += `+sn+`) {
          float dyD = float(dyDCorner + wD) / `+nn+`.0;

          if (dyD < 0.0 || dyD >= `+st.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+hn+`;
              wR += `+ln+`) {
            float dyR = float(dyRCorner + wR) / `+an+`.0;

            if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+fn+`;
                wC += `+un+`) {
              float dyC = float(dyCCorner + wC) / `+on+`.0;

              if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Sa=function(st,Mt,Xr,rn,nn,an){this.outputShape=[],this.variableNames=["x","mean","variance"],Ro(st,Mt),Ro(st,Xr);var on="0.0";rn!=null&&(Ro(st,rn),this.variableNames.push("offset"),on="getOffsetAtOutCoords()");var sn="1.0";nn!=null&&(Ro(st,nn),this.variableNames.push("scale"),sn="getScaleAtOutCoords()"),this.outputShape=st,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+on+`;
        float scale = `+sn+`;
        float inv = scale * inversesqrt(variance + float(`+an+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Aa=function(st,Mt,Xr,rn,nn,an){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ro(st,Mt),Ro(st,Xr);var on="vec4(0.0)";rn!=null&&(Ro(st,rn),this.variableNames.push("offset"),on="getOffsetAtOutCoords()");var sn="vec4(1.0)";nn!=null&&(Ro(st,nn),this.variableNames.push("scale"),sn="getScaleAtOutCoords()"),this.outputShape=st,this.userCode=`
      void main() {
        vec4 offset = `+on+`;
        vec4 scale = `+sn+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+an+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Da="return areal * breal - aimag * bimag;",Ta="return areal * bimag + aimag * breal;",Na=function(st,Mt,Xr){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ro(Mt,Xr),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+st+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Fa="return a + b;",_a="return a - b;",Oa="return a * b;",Ma="return (a < 0.) ? b * a : a;",Ba=function(st,Mt,Xr){this.variableNames=["A","B"],this.outputShape=Ro(Mt,Xr),this.userCode=`
      float binaryOperation(float a, float b) {
        `+st+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Pa=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,La=function(st,Mt,Xr,rn){rn===void 0&&(rn=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ro(Mt,Xr);var nn=this.outputShape.length,an="";if(rn)if(nn===0||k(this.outputShape)===1)an=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(an=`
          `+wa(nn)+` coords = getOutputCoords();
        `,nn===1)an+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var on=sa("coords",nn);an+=`
            bool nextRowOutOfBounds =
              (`+on[nn-2]+" + 1) >= "+this.outputShape[nn-2]+`;
            bool nextColOutOfBounds =
              (`+on[nn-1]+" + 1) >= "+this.outputShape[nn-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+st+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+an+`

        setOutput(result);
      }
    `},Wa=function(){function st(Mt){this.variableNames=["A"],this.outputShape=Mt,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt,Xr){var rn=this;return function(nn,an){rn.minLoc==null&&(rn.minLoc=nn.getUniformLocationNoThrow(an,"minVal"),rn.maxLoc=nn.getUniformLocationNoThrow(an,"maxVal")),nn.gl.uniform1f(rn.minLoc,Mt),nn.gl.uniform1f(rn.maxLoc,Xr)}},st}(),Ua=function(){function st(Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt,Xr){var rn=this;return function(nn,an){rn.minLoc==null&&(rn.minLoc=nn.getUniformLocationNoThrow(an,"minVal"),rn.maxLoc=nn.getUniformLocationNoThrow(an,"maxVal")),nn.gl.uniform1f(rn.minLoc,Mt),nn.gl.uniform1f(rn.maxLoc,Xr)}},st}(),Va=function(st){this.variableNames=["real","imag"],this.outputShape=st,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},za=function(st){this.outputShape=[],this.outputShape=Sn(st,1),this.variableNames=st.map(function(sn,ln){return"T"+ln});var Mt=new Array(st.length-1);Mt[0]=st[0][1];for(var Xr=1;Xr<Mt.length;Xr++)Mt[Xr]=Mt[Xr-1]+st[Xr][1];var rn=["if (yC < "+Mt[0]+") setOutput(getT0(yR, yC));"];for(Xr=1;Xr<Mt.length;Xr++){var nn=Mt[Xr-1];rn.push("else if (yC < "+Mt[Xr]+") setOutput(getT"+Xr+"(yR, yC-"+nn+"));")}var an=Mt.length,on=Mt[Mt.length-1];rn.push("else setOutput(getT"+an+"(yR, yC-"+on+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+rn.join(`
        `)+`
      }
    `},Ga=function(st,Mt){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Sn(st,Mt);var Xr=this.outputShape,rn=Xr.length,nn=wa(rn),an=sa("coords",rn),on=["x","y","z","w","u","v"].slice(0,rn);this.variableNames=st.map(function(Uo,lo){return"T"+lo});var sn=new Array(st.length-1);sn[0]=st[0][Mt];for(var ln=1;ln<sn.length;ln++)sn[ln]=sn[ln-1]+st[ln][Mt];var un=on[Mt],cn=on.slice(-2),hn=on.join(),fn="if ("+un+" < "+sn[0]+`) {
        return getChannel(
            getT0(`+hn+"), vec2("+cn.join()+`));
        }`;for(ln=1;ln<sn.length;ln++){var to=sn[ln-1];fn+=`
        if (`+un+" < "+sn[ln]+"  && "+un+" >= "+sn[ln-1]+`) {
          return getChannel(
            getT`+ln+"("+Ha(on,un,to)+`),
            vec2(`+Ha(cn,un,to)+`));
        }`}var uo=sn.length,co=sn[sn.length-1];fn+=`
        return getChannel(
          getT`+uo+"("+Ha(on,un,co)+`),
          vec2(`+Ha(cn,un,co)+"));",this.userCode=`
      float getValue(`+on.map(function(Uo){return"int "+Uo})+`) {
        `+fn+`
      }

      void main() {
        `+nn+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+an+`), 0., 0., 0.);

        `+an[rn-1]+" = "+an[rn-1]+` + 1;
        if (`+an[rn-1]+" < "+Xr[rn-1]+`) {
          result.g = getValue(`+an+`);
        }

        `+an[rn-2]+" = "+an[rn-2]+` + 1;
        if (`+an[rn-2]+" < "+Xr[rn-2]+`) {
          result.a = getValue(`+an+`);
        }

        `+an[rn-1]+" = "+an[rn-1]+` - 1;
        if (`+an[rn-2]+" < "+Xr[rn-2]+` &&
            `+an[rn-1]+" < "+Xr[rn-1]+`) {
          result.b = getValue(`+an+`);
        }
        setOutput(result);
      }
    `};function Ha(st,Mt,Xr){var rn=st.indexOf(Mt);return st.map(function(nn,an){return an===rn?nn+" - "+Xr:nn}).join()}var qa=function(st){this.variableNames=["x","dy"],this.outputShape=st.filterShape;var Mt=st.strideHeight,Xr=st.strideWidth,rn=st.padInfo.top,nn=st.padInfo.left,an=st.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+st.batchSize+`; b++) {
          for (int yR = 0; yR < `+st.outHeight+`; yR++) {
            int xR = wR + yR * `+Mt+" - "+rn+`;

            if (xR < 0 || xR >= `+st.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+st.outWidth+`; yC++) {
              int xC = wC + yC * `+Xr+" - "+nn+`;

              if (xC < 0 || xC >= `+st.inWidth+`) {
                continue;
              }

              if (`+an+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Ka=function(st){this.variableNames=["dy","W"],this.outputShape=st.inShape;var Mt=st.filterHeight,Xr=st.filterWidth,rn=st.strideHeight,nn=st.strideWidth,an=st.dataFormat==="channelsLast",on=Mt-1-st.padInfo.top,sn=Xr-1-st.padInfo.left,ln=an?1:2,un=an?2:3,cn=an?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+on+", "+sn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+cn+`];

        ivec2 dyCorner = ivec2(coords[`+ln+"], coords["+un+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+Mt+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+Mt+` - 1 - wR;

          for (int wC = 0; wC < `+Xr+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+nn+`.0;

            if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+Xr+` - 1 - wC;

            for (int d2 = 0; d2 < `+st.outChannels+`; d2++) {

              if (`+an+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ja=function(st){this.variableNames=["x","dy"],this.outputShape=st.filterShape;var Mt=st.strideDepth,Xr=st.strideHeight,rn=st.strideWidth,nn=st.padInfo.front,an=st.padInfo.top,on=st.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+st.batchSize+`; b++) {
          for (int yF = 0; yF < `+st.outDepth+`; yF++) {
            int xF = wF + yF * `+Mt+" - "+nn+`;

            if (xF < 0 || xF >= `+st.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+st.outHeight+`; yR++) {
              int xR = wR + yR * `+Xr+" - "+an+`;

              if (xR < 0 || xR >= `+st.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+st.outWidth+`; yC++) {
                int xC = wC + yC * `+rn+" - "+on+`;

                if (xC < 0 || xC >= `+st.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Xa=function(st){this.variableNames=["dy","W"],this.outputShape=st.inShape;var Mt=st.filterDepth,Xr=st.filterHeight,rn=st.filterWidth,nn=st.strideDepth,an=st.strideHeight,on=st.strideWidth,sn=Mt-1-st.padInfo.front,ln=Xr-1-st.padInfo.top,un=rn-1-st.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+sn+", "+ln+", "+un+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+Mt+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+nn+`.0;

          if (dyF < 0.0 || dyF >= `+st.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+Mt+` - 1 - wF;

          for (int wR = 0; wR < `+Xr+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+an+`.0;

            if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+Xr+` - 1 - wR;

            for (int wC = 0; wC < `+rn+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+on+`.0;

              if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+rn+` - 1 - wC;

              for (int d2 = 0; d2 < `+st.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ya=function(st){this.variableNames=["x","dy"],this.outputShape=st.filterShape;var Mt=st.strideHeight,Xr=st.strideWidth,rn=st.padInfo.top,nn=st.padInfo.left,an=st.outChannels/st.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+an+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+st.batchSize+`; b++) {
          for (int yR = 0; yR < `+st.outHeight+`; yR++) {
            int xR = wR + yR * `+Mt+" - "+rn+`;

            if (xR < 0 || xR >= `+st.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+st.outWidth+`; yC++) {
              int xC = wC + yC * `+Xr+" - "+nn+`;

              if (xC < 0 || xC >= `+st.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},$a=function(st){this.variableNames=["dy","W"],this.outputShape=st.inShape;var Mt=st.filterHeight,Xr=st.filterWidth,rn=st.strideHeight,nn=st.strideWidth,an=Mt-1-st.padInfo.top,on=Xr-1-st.padInfo.left,sn=st.outChannels/st.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+an+", "+on+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+Mt+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+Mt+` - 1 - wR;

          for (int wC = 0; wC < `+Xr+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+nn+`.0;

            if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+Xr+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+sn+`; dm++) {
              int d2 = d1 * `+sn+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Qa=function(st,Mt,Xr,rn){Mt===void 0&&(Mt=!1),Xr===void 0&&(Xr=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.outputShape=st.outShape;var nn=st.padInfo.top,an=st.padInfo.left,on=st.strideHeight,sn=st.strideWidth,ln=st.dilationHeight,un=st.dilationWidth,cn=st.filterHeight,hn=st.filterWidth,fn=4*Math.floor(st.inChannels/4),to=st.inChannels%4,uo=st.dataFormat==="channelsLast",co=uo?1:2,Uo=uo?2:3,lo=uo?3:1,ho="",fo="";Xr&&(ho=rn?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+Xr+`
        }`:`
          float activation(float x) {
            `+Xr+`
          }
        `,fo="result = activation(result);");var mo=Mt?"result += getBiasAtOutCoords();":"";Mt&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+ho+`

      const ivec2 strides = ivec2(`+on+", "+sn+`);
      const ivec2 pads = ivec2(`+nn+", "+an+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+lo+`];

        ivec2 xRCCorner =
            ivec2(coords[`+co+"], coords["+Uo+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+cn+`; wR++) {
          int xR = xRCorner + wR * `+ln+`;

          if (xR < 0 || xR >= `+st.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+hn+`; wC++) {
            int xC = xCCorner + wC * `+un+`;

            if (xC < 0 || xC >= `+st.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+fn+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+uo+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(to===1)+`) {

              if (`+uo+`) {
                dotProd +=
                    getX(batch, xR, xC, `+fn+`) *
                    getW(wR, wC, `+fn+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+fn+`, xR, xC) *
                    getW(wR, wC, `+fn+`, d2);
              }

            } else if (`+(to===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+fn+`, d2),
                getW(wR, wC, `+fn+` + 1, d2)
              );

              if (`+uo+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+fn+`),
                  getX(batch, xR, xC, `+fn+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+fn+`, xR, xC),
                  getX(batch, `+fn+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(to===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+fn+`, d2),
                getW(wR, wC, `+fn+` + 1, d2),
                getW(wR, wC, `+fn+` + 2, d2)
              );

              if (`+uo+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+fn+`),
                  getX(batch, xR, xC, `+fn+` + 1),
                  getX(batch, xR, xC, `+fn+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+fn+`, xR, xC),
                  getX(batch, `+fn+` + 1, xR, xC),
                  getX(batch, `+fn+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+mo+`
        `+fo+`
        setOutput(result);
      }
    `},Ja=function(st){this.variableNames=["x","W"],this.outputShape=st.outShape;var Mt=st.padInfo.front,Xr=st.padInfo.top,rn=st.padInfo.left,nn=st.strideDepth,an=st.strideHeight,on=st.strideWidth,sn=st.dilationDepth,ln=st.dilationHeight,un=st.dilationWidth,cn=st.filterDepth,hn=st.filterHeight,fn=st.filterWidth,to=4*Math.floor(st.inChannels/4),uo=st.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+nn+", "+an+", "+on+`);
      const ivec3 pads = ivec3(`+Mt+", "+Xr+", "+rn+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+cn+`; wF++) {
          int xF = xFCorner + wF * `+sn+`;

          if (xF < 0 || xF >= `+st.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hn+`; wR++) {
            int xR = xRCorner + wR * `+ln+`;

            if (xR < 0 || xR >= `+st.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+fn+`; wC++) {
              int xC = xCCorner + wC * `+un+`;

              if (xC < 0 || xC >= `+st.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+to+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(uo===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+to+`) *
                  getW(wF, wR, wC, `+to+`, d2);
              } else if (`+(uo===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+to+`),
                  getX(batch, xF, xR, xC, `+to+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+to+`, d2),
                  getW(wF, wR, wC, `+to+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(uo===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+to+`),
                  getX(batch, xF, xR, xC, `+to+` + 1),
                  getX(batch, xF, xR, xC, `+to+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+to+`, d2),
                  getW(wF, wR, wC, `+to+` + 1, d2),
                  getW(wF, wR, wC, `+to+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Za=function(st,Mt,Xr,rn){Mt===void 0&&(Mt=!1),Xr===void 0&&(Xr=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.outputShape=st.outShape;var nn=st.inHeight,an=st.inWidth,on=st.padInfo.top,sn=st.padInfo.left,ln=st.strideHeight,un=st.strideWidth,cn=st.dilationHeight,hn=st.dilationWidth,fn=st.filterHeight,to=st.filterWidth,uo=st.outChannels/st.inChannels,co="",Uo="";Xr&&(co=rn?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+Xr+`
        }`:`
          float activation(float x) {
            `+Xr+`
          }
        `,Uo="result = activation(result);");var lo=Mt?"result += getBiasAtOutCoords();":"";Mt&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+co+`

      const ivec2 strides = ivec2(`+ln+", "+un+`);
      const ivec2 pads = ivec2(`+on+", "+sn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+uo+`;
        int q = d2 - d1 * `+uo+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+fn+`; wR++) {
          int xR = xRCorner + wR * `+cn+`;

          if (xR < 0 || xR >= `+nn+`) {
            continue;
          }

          for (int wC = 0; wC < `+to+`; wC++) {
            int xC = xCCorner + wC * `+hn+`;

            if (xC < 0 || xC >= `+an+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+lo+`
        `+Uo+`
        setOutput(result);
      }
    `},ti=function(st,Mt,Xr,rn){Mt===void 0&&(Mt=!1),Xr===void 0&&(Xr=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st.outShape;for(var nn=st.inHeight,an=st.inWidth,on=st.padInfo.top,sn=st.padInfo.left,ln=st.strideHeight,un=st.strideWidth,cn=st.dilationHeight,hn=st.dilationWidth,fn=st.filterHeight,to=st.filterWidth,uo=to,co="int xR; int xC; int xCOffset;",Uo=0;Uo<fn;Uo++)for(var lo=0;lo<to;lo++)co+=`
          vec4 xTexelR`+Uo+"C"+2*lo+` = vec4(0.);
          vec4 wR`+Uo+"C"+lo+` = vec4(0.);
          vec4 xR`+Uo+"C"+lo+" = vec4(0.);";for(Uo=0;Uo<fn;Uo++)for(var ho=0;ho<uo;ho++){if(co+=`
          xR = xRCorner + `+Uo*cn+`;
          xC = xCCorner + `+(lo=2*ho)*hn+`;
        `,un===1){if(lo<to&&(co+=sn%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+nn+" && xCOffset >= 0 && xCOffset < "+an+`) {
                  xTexelR`+Uo+"C"+lo+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+an+`) {
                    xTexelR`+Uo+"C"+lo+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+Uo+"C"+lo+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+nn+" && xCOffset >= 0 && xCOffset < "+an+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+an+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+Uo+"C"+lo+" = vec4(previous.zw, xTexelR"+Uo+"C"+lo+`.xy);
                } else {
                  xR`+Uo+"C"+lo+" = vec4(0, 0, xTexelR"+Uo+"C"+lo+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+nn+" && xC >= 0 && xC < "+an+`) {
                  xTexelR`+Uo+"C"+lo+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Uo+"C"+lo+` = vec4(0.);
                }

                xR`+Uo+"C"+lo+" = xTexelR"+Uo+"C"+lo+`;
              `,lo+1<to)){var fo=sn%2==0?b$1(hn):hn;hn%2==0&&sn%2==1||hn%2!=0&&sn%2!=1?(co+=`
                  xCOffset = xC + `+sn%2+" + "+fo+`;

                  if(xR >= 0 && xR < `+nn+` &&
                    xCOffset >= 0 && xCOffset < `+an+`) {
                    xTexelR`+Uo+"C"+(lo+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,hn>1&&(co+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+nn+` &&
                      xCOffset >= 0 && xCOffset < `+an+`) {
                      xTexelR`+Uo+"C"+lo+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+Uo+"C"+lo+` = vec4(0.);
                    }
                  `),co+=`
                  xR`+Uo+"C"+(lo+1)+` = vec4(
                    xTexelR`+Uo+"C"+lo+".zw, xTexelR"+Uo+"C"+(lo+2)+`.xy);
                `):co+=`
                  xCOffset = xC + `+fo+`;

                  if(xR >= 0 && xR < `+nn+` &&
                    xCOffset >= 0 && xCOffset < `+an+`) {
                    xTexelR`+Uo+"C"+(lo+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+Uo+"C"+(lo+1)+" = xTexelR"+Uo+"C"+(lo+2)+`;
                `}}else lo<to&&(co+=`
              if(xR >= 0 && xR < `+nn+`) {
            `,sn%2==1?(co+=`
                xCOffset = xC + 1 - `+un+`;
                if(xCOffset >= 0 && xCOffset < `+an+`) {
                  xTexelR`+Uo+"C"+lo+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Uo+"C"+lo+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+an+`) {
                  xTexelR`+Uo+"C"+(lo+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+Uo+"C"+(lo+2)+` = vec4(0.);
                }

                xR`+Uo+"C"+lo+` = vec4(
                  xTexelR`+Uo+"C"+lo+".zw, xTexelR"+Uo+"C"+(lo+2)+`.zw);
              `,lo+1<to&&(co+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+un+`;
                  if(xCOffset >= 0 && xCOffset < `+an+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+Uo+"C"+(lo+1)+" = vec4(xTexelR"+Uo+"C"+(lo+2)+`.xy, final.xy);
                `)):(co+=`
                if(xC >= 0 && xC < `+an+`) {
                  xTexelR`+Uo+"C"+lo+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Uo+"C"+lo+` = vec4(0.);
                }

                xCOffset = xC + `+un+`;
                if(xCOffset >= 0 && xCOffset < `+an+`) {
                  xTexelR`+Uo+"C"+(lo+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Uo+"C"+(lo+2)+` = vec4(0.);
                }

                xR`+Uo+"C"+lo+` = vec4(
                  xTexelR`+Uo+"C"+lo+".xy, xTexelR"+Uo+"C"+(lo+2)+`.xy);
              `,lo+1<to&&(co+=`
                  xR`+Uo+"C"+(lo+1)+` = vec4(
                    xTexelR`+Uo+"C"+lo+".zw, xTexelR"+Uo+"C"+(lo+2)+`.zw);
                `)),co+="}");lo<to&&(co+=`
            vec4 wTexelR`+Uo+"C"+lo+" = getW("+Uo+", "+lo+`, d1, q);
            wR`+Uo+"C"+lo+" = vec4(wTexelR"+Uo+"C"+lo+".xz, wTexelR"+Uo+"C"+lo+`.xz);
          `,lo+1<to&&(co+=`
              vec4 wTexelR`+Uo+"C"+(lo+1)+" = getW("+Uo+", "+(lo+1)+`, d1, q);
              wR`+Uo+"C"+(lo+1)+` =
                vec4(wTexelR`+Uo+"C"+(lo+1)+".xz, wTexelR"+Uo+"C"+(lo+1)+".xz);"))}for(Uo=0;Uo<fn;Uo++)for(lo=0;lo<to;lo++)co+="dotProd += xR"+Uo+"C"+lo+" * wR"+Uo+"C"+lo+";";var mo="",_d="";Xr&&(mo=rn?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+Xr+`
        }`:`vec4 activation(vec4 x) {
          `+Xr+`
        }`,_d="result = activation(result);");var ep=Mt?"result += getBiasAtOutCoords();":"";Mt&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+mo+`

      const ivec2 strides = ivec2(`+ln+", "+un+`);
      const ivec2 pads = ivec2(`+on+", "+sn+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+co+`

        vec4 result = dotProd;
        `+ep+`
        `+_d+`
        setOutput(result);
      }
    `},ei=function(st,Mt,Xr,rn,nn){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var an=st[0],on=st[1],sn=st[2],ln=st[3],un=Mt[0],cn=Xr[0],hn=Xr[1];this.outputShape=[un,cn,hn,ln];var fn=rn==="bilinear"?1:0,to=[on-1+".0",sn-1+".0"],uo=to[0],co=to[1],Uo=cn>1?[""+(on-1)/(cn-1),"(y2-y1) * height_ratio","y1*"+uo+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+uo],lo=Uo[0],ho=Uo[1],fo=Uo[2],mo=hn>1?[""+(sn-1)/(hn-1),"(x2-x1) * width_ratio","x1*"+co+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+co],_d=mo[0],ep=mo[1],rp=mo[2];this.userCode=`
      const float height_ratio = float(`+lo+`);
      const float width_ratio = float(`+_d+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+an+`) {
          return;
        }

        float height_scale = `+ho+`;
        float width_scale = `+ep+`;

        float in_y = `+fo+`;
        if( in_y < 0.0 || in_y > `+uo+` ) {
          setOutput(float(`+nn+`));
          return;
        }
        float in_x = `+rp+`;
        if( in_x < 0.0 || in_x > `+co+` ) {
          setOutput(float(`+nn+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+fn+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},ni=function(st,Mt,Xr){this.variableNames=["x"],this.outputShape=st;var rn=st.length,nn=st[st.length-1],an=Xr?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(Xr?"return "+nn+" -i - 1;":"return i;")+`
      }

      void main() {
        `+wa(rn)+` coords = getOutputCoords();
        int end = `+ri(rn,"coords")+`;
        float val = 0.0;
        for (int i = `+nn+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+an+` end) {
            continue;
          }
          if (idx == end && `+Mt+`) {
            continue;
          }
          `+ri(rn,"coords")+` = idx;
          val += getX(`+function(on,sn){if(on===1)return""+sn;if(on===2)return sn+".x, "+sn+".y";if(on===3)return sn+".x, "+sn+".y, "+sn+".z";if(on===4)return sn+".x, "+sn+".y, "+sn+".z, "+sn+".w";throw Error("Cumulative sum for rank "+on+" is not yet supported")}(rn,"coords")+`);
        }
        setOutput(val);
      }
    `};function ri(st,Mt){if(st===1)return""+Mt;if(st===2)return Mt+".y";if(st===3)return Mt+".z";if(st===4)return Mt+".w";throw Error("Cumulative sum for rank "+st+" is not yet supported")}var oi=function(st){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var Mt=Yt(st),Xr=ua();this.outputShape=st,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],st)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+Mt[0]+", "+Mt[1]+`));
        int index = 4 * (resTexRC.x * `+Mt[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+Xr.output+` = result;
      }
    `},ai=function(st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var Mt=Yt(st),Xr=ua();this.outputShape=st,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],st)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+Mt[0]+", "+Mt[1]+`));
        int index = 4 * (resTexRC.x * `+Mt[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+Xr.output+` = result;
      }
    `},ii=function(){function st(Mt,Xr,rn){this.variableNames=["x"],this.outputShape=[],this.outputShape=Mt,this.blockSize=Xr,this.dataFormat=rn,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+Xr+`;
      int offset_h = imod(h, `+Xr+`);
      int in_w = w / `+Xr+`;
      int offset_w = imod(w, `+Xr+`);
      int offset_d = (offset_h * `+Xr+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return st.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},st.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},st.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},st.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},st.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},st}(),si=function(st){this.variableNames=["X"],this.outputShape=[st,st],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},ui=function(st){this.variableNames=["A"],this.outTexUsage=zt.DOWNLOAD;var Mt=ua();this.outputShape=st,this.userCode=`
      `+ha+`

      void main() {
        float x = getAAtOutCoords();
        `+Mt.output+` = encode_float(x);
      }
    `},ci=function(st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zt.DOWNLOAD;var Mt=ua();this.outputShape=st,this.userCode=`
      `+ha+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+Mt.output+` = encode_float(x);
      }
    `},li=function(st,Mt,Xr){Xr===void 0&&(Xr=!1),this.variableNames=["A"];var rn=ua(),nn=Mt[0],an=Mt[1];this.outputShape=st;var on="result";Xr&&(on="floor(result * 255. + 0.5)"),this.userCode=`
      `+la(st)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+an+`;
        int c = imod(flatIndex, `+an+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+an+".0, "+nn+`.0);
        vec4 values = `+rn.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+rn.output+" = vec4("+on+`, 0., 0., 0.);
      }
    `},hi=function(st,Mt,Xr){Xr===void 0&&(Xr=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var rn=ua(),nn=Mt[0],an=Mt[1];this.outputShape=st;var on="",sn="result";Xr&&(sn="floor(result * 255. + 0.5)");for(var ln=0;ln<=1;ln++)for(var un=0;un<=1;un++){var cn=2*ln+un;on+=`
          localCoords = coords;
          if(localCoords[2] + `+un+" < "+st[2]+`) {
            localCoords[2] += `+un+`;
            if(localCoords[1] + `+ln+" < "+st[1]+`) {
              localCoords[1] += `+ln+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+an+`;
              c = imod(flatIndex, `+an+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+an+".0, "+nn+`.0);
              values = `+rn.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+cn+`] = values[0];
              } else if(offset == 1) {
                result[`+cn+`] = values[1];
              } else if(offset == 2) {
                result[`+cn+`] = values[2];
              } else {
                result[`+cn+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+la(st)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+on+`

        `+rn.output+" = "+sn+`;
      }
    `},fi="return real * expR - imag * expI;",di="return real * expI + imag * expR;",pi=function(st,Mt,Xr){this.variableNames=["real","imag"];var rn=Mt[1];this.outputShape=Mt;var nn=Xr?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,an=Xr?rn+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+nn+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+st+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+rn+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+rn+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+an+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},vi=function(){function st(Mt,Xr){this.outputShape=[],this.variableNames=["x"],this.outputShape=Mt,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt){var Xr=this;return function(rn,nn){Xr.valueLoc==null&&(Xr.valueLoc=rn.getUniformLocationNoThrow(nn,"value")),rn.gl.uniform1f(Xr.valueLoc,Mt)}},st}(),mi=function(st,Mt,Xr){this.variableNames=["A","indices"];var rn=st.slice();rn[Xr]=Mt,this.outputShape=rn,this.rank=rn.length;var nn=wa(this.rank),an=function(on,sn){var ln=on.length;if(ln>4)throw Error("Gather for rank "+ln+" is not yet supported");if(ln===1)return"int(getIndices(resRC))";for(var un=["resRC.x","resRC.y","resRC.z","resRC.w"],cn=[],hn=0;hn<on.length;hn++)hn===sn?cn.push("int(getIndices("+un[hn]+"))"):cn.push(""+un[hn]);return cn.join()}(st,Xr);this.userCode=`
      void main() {
        `+nn+` resRC = getOutputCoords();
        setOutput(getA(`+an+`));
      }
    `},gi=function(st,Mt,Xr){this.sliceDim=st,this.strides=Mt,this.variableNames=["x","indices"],this.outputShape=Xr;var rn=wa(Mt.length),nn=wa(Xr.length),an=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+rn+" strides = "+rn+"("+this.strides+`);
         void main() {
          `+nn+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+an+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function yi(st,Mt){var Xr=ua();return oe$1(st,Mt,Xr.version+`
    precision highp float;
    `+Xr.attribute+` vec3 clipSpacePos;
    `+Xr.attribute+` vec2 uv;
    `+Xr.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function xi(st,Mt){return fe(st,Mt,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function bi(st,Mt){return de(st,Mt,new Uint16Array([0,1,2,2,1,3]))}function wi(st,Mt,Xr,rn,nn,an,on){ve(Xr,rn);var sn=pe(st,Mt),ln=st.TEXTURE_2D;return Jt(st,Mt,function(){return st.bindTexture(ln,sn)}),Jt(st,Mt,function(){return st.texParameteri(ln,st.TEXTURE_WRAP_S,st.CLAMP_TO_EDGE)}),Jt(st,Mt,function(){return st.texParameteri(ln,st.TEXTURE_WRAP_T,st.CLAMP_TO_EDGE)}),Jt(st,Mt,function(){return st.texParameteri(ln,st.TEXTURE_MIN_FILTER,st.NEAREST)}),Jt(st,Mt,function(){return st.texParameteri(ln,st.TEXTURE_MAG_FILTER,st.NEAREST)}),Jt(st,Mt,function(){return st.texImage2D(ln,0,nn,Xr,rn,0,an,on,null)}),Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,null)}),sn}function Ci(st,Mt,Xr,rn,nn){var an=Xt(Xr,rn);return wi(st,Mt,an[0],an[1],nn.internalFormatFloat,nn.textureFormatFloat,st.FLOAT)}function Ei(st,Mt,Xr,rn,nn){var an=Xt(Xr,rn);return wi(st,Mt,an[0],an[1],nn.internalFormatHalfFloat,nn.textureFormatFloat,nn.textureTypeHalfFloat)}function Ri(st,Mt,Xr,rn,nn){var an=Xt(Xr,rn);return wi(st,Mt,an[0],an[1],st.RGBA,st.RGBA,st.UNSIGNED_BYTE)}function Ii(st,Mt,Xr,rn,nn){var an=$t(Xr,rn);return wi(st,Mt,an[0],an[1],nn.internalFormatPackedFloat,st.RGBA,st.FLOAT)}function ki(st,Mt,Xr,rn,nn){var an=$t(Xr,rn);return wi(st,Mt,an[0],an[1],nn.internalFormatPackedHalfFloat,st.RGBA,nn.textureTypeHalfFloat)}function Si(st,Mt,Xr,rn){return Jt(st,Mt,function(){return st.bindBuffer(st.ARRAY_BUFFER,rn)}),ge(st,Mt,Xr,"clipSpacePos",rn,3,20,0)&&ge(st,Mt,Xr,"uv",rn,2,20,12)}function Ai(st,Mt,Xr,rn,nn,an,on){var sn,ln,un;Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,Xr)}),an instanceof Uint8Array?(sn=new Uint8Array(rn*nn*4),ln=st.UNSIGNED_BYTE,un=st.RGBA):(sn=new Float32Array(rn*nn*4),ln=st.FLOAT,un=on.internalFormatPackedFloat),sn.set(an),Jt(st,Mt,function(){return st.texImage2D(st.TEXTURE_2D,0,un,rn,nn,0,st.RGBA,ln,sn)}),Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,null)})}function Di(st,Mt,Xr,rn){Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,Xr)}),rn.data instanceof Uint8Array?Jt(st,Mt,function(){return st.texImage2D(st.TEXTURE_2D,0,st.RGBA,rn.width,rn.height,0,st.RGBA,st.UNSIGNED_BYTE,rn.data)}):Jt(st,Mt,function(){return st.texImage2D(st.TEXTURE_2D,0,st.RGBA,st.RGBA,st.UNSIGNED_BYTE,rn)}),Jt(st,Mt,function(){return st.bindTexture(st.TEXTURE_2D,null)})}function Ti(st,Mt,Xr,rn,nn){var an=st.createBuffer();Jt(st,Mt,function(){return st.bindBuffer(st.PIXEL_PACK_BUFFER,an)});var on=16*Xr*rn;return Jt(st,Mt,function(){return st.bufferData(st.PIXEL_PACK_BUFFER,on,st.STREAM_READ)}),Jt(st,Mt,function(){return st.readPixels(0,0,rn,Xr,st.RGBA,st.FLOAT,0)}),Jt(st,Mt,function(){return st.bindBuffer(st.PIXEL_PACK_BUFFER,null)}),an}function Ni(st,Mt,Xr){var rn=st,nn=new Float32Array(Xr);return rn.bindBuffer(rn.PIXEL_PACK_BUFFER,Mt),rn.getBufferSubData(rn.PIXEL_PACK_BUFFER,0,nn),rn.bindBuffer(rn.PIXEL_PACK_BUFFER,null),nn}function Fi(st,Mt,Xr,rn,nn){var an=Xt(Xr,rn),on=an[0],sn=an[1],ln=new Uint8Array(Xr*rn*4);return Jt(st,Mt,function(){return st.readPixels(0,0,on,sn,nn.downloadTextureFormat,st.UNSIGNED_BYTE,ln)}),new Float32Array(ln.buffer)}function _i(st,Mt,Xr,rn,nn,an,on,sn){var ln=st,un=new Float32Array(function(cn,hn){var fn=$t(cn,hn);return fn[0]*fn[1]*4}(an,on));return ln.bindBuffer(ln.PIXEL_PACK_BUFFER,Mt),ln.getBufferSubData(ln.PIXEL_PACK_BUFFER,0,un),ln.bindBuffer(ln.PIXEL_PACK_BUFFER,null),un}function Oi(st,Mt,Xr,rn){var nn=new Float32Array(Xr*rn*4);return Jt(st,Mt,function(){return st.readPixels(0,0,rn,Xr,st.RGBA,st.FLOAT,nn)}),nn}var Bi=function(){function st(Mt){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var Xr=i$2().getNumber("WEBGL_VERSION");Mt!=null?(this.gl=Mt,Kt(Xr,Mt)):this.gl=jt(Xr);var rn="WEBGL_color_buffer_float";if(i$2().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=re(this.gl,this.debug,"OES_texture_float"),Pe(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=re(this.gl,this.debug,"OES_texture_half_float");else if(i$2().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(rn),Pe(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=re(this.gl,this.debug,"EXT_color_buffer_half_float");else if(i$2().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(rn="EXT_color_buffer_float",Pe(this.gl,rn))this.colorBufferFloatExtension=this.gl.getExtension(rn);else{if(!Pe(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=xi(this.gl,this.debug),this.indexBuffer=bi(this.gl,this.debug),this.framebuffer=me(this.gl,this.debug),this.textureConfig=Qt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(st.prototype,"debug",{get:function(){return i$2().getBool("DEBUG")},enumerable:!0,configurable:!0}),st.prototype.dispose=function(){var Mt=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var Xr=this.gl;Jt(Xr,this.debug,function(){return Xr.finish()}),Jt(Xr,this.debug,function(){return Xr.bindFramebuffer(Xr.FRAMEBUFFER,null)}),Jt(Xr,this.debug,function(){return Xr.deleteFramebuffer(Mt.framebuffer)}),Jt(Xr,this.debug,function(){return Xr.bindBuffer(Xr.ARRAY_BUFFER,null)}),Jt(Xr,this.debug,function(){return Xr.bindBuffer(Xr.ELEMENT_ARRAY_BUFFER,null)}),Jt(Xr,this.debug,function(){return Xr.deleteBuffer(Mt.indexBuffer)}),this.disposed=!0}},st.prototype.createFloat32MatrixTexture=function(Mt,Xr){return this.throwIfDisposed(),Ci(this.gl,this.debug,Mt,Xr,this.textureConfig)},st.prototype.createFloat16MatrixTexture=function(Mt,Xr){return this.throwIfDisposed(),Ei(this.gl,this.debug,Mt,Xr,this.textureConfig)},st.prototype.createUnsignedBytesMatrixTexture=function(Mt,Xr){return this.throwIfDisposed(),Ri(this.gl,this.debug,Mt,Xr,this.textureConfig)},st.prototype.uploadPixelDataToTexture=function(Mt,Xr){this.throwIfDisposed(),Di(this.gl,this.debug,Mt,Xr)},st.prototype.uploadDenseMatrixToTexture=function(Mt,Xr,rn,nn){this.throwIfDisposed(),Ai(this.gl,this.debug,Mt,Xr,rn,nn,this.textureConfig)},st.prototype.createFloat16PackedMatrixTexture=function(Mt,Xr){return this.throwIfDisposed(),ki(this.gl,this.debug,Mt,Xr,this.textureConfig)},st.prototype.createPackedMatrixTexture=function(Mt,Xr){return this.throwIfDisposed(),Ii(this.gl,this.debug,Mt,Xr,this.textureConfig)},st.prototype.deleteMatrixTexture=function(Mt){var Xr=this;this.throwIfDisposed(),this.outputTexture===Mt&&(Ee(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Jt(this.gl,this.debug,function(){return Xr.gl.deleteTexture(Mt)})},st.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(Mt,Xr,rn){var nn=this;return this.downloadMatrixDriver(Mt,function(){return Fi(nn.gl,nn.debug,Xr,rn,nn.textureConfig)})},st.prototype.downloadPackedMatrixFromBuffer=function(Mt,Xr,rn,nn,an,on){return _i(this.gl,Mt,0,0,0,an,on,this.textureConfig)},st.prototype.downloadFloat32MatrixFromBuffer=function(Mt,Xr){return Ni(this.gl,Mt,Xr)},st.prototype.createBufferFromTexture=function(Mt,Xr,rn){this.bindTextureToFrameBuffer(Mt);var nn=Ti(this.gl,this.debug,Xr,rn,this.textureConfig);return this.unbindTextureToFrameBuffer(),nn},st.prototype.createAndWaitForFence=function(){var Mt=this.createFence(this.gl);return this.pollFence(Mt)},st.prototype.createFence=function(Mt){var Xr,rn,nn=this;if(i$2().getBool("WEBGL_FENCE_API_ENABLED")){var an=Mt,on=an.fenceSync(an.SYNC_GPU_COMMANDS_COMPLETE,0);Mt.flush(),rn=function(){var sn=an.clientWaitSync(on,0,0);return sn===an.ALREADY_SIGNALED||sn===an.CONDITION_SATISFIED},Xr=on}else i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(Xr=this.beginQuery(),this.endQuery(),rn=function(){return nn.isQueryAvailable(Xr,i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):rn=function(){return!0};return{query:Xr,isFencePassed:rn}},st.prototype.downloadMatrixFromPackedTexture=function(Mt,Xr,rn){var nn=this;return this.downloadMatrixDriver(Mt,function(){return Oi(nn.gl,nn.debug,Xr,rn)})},st.prototype.createProgram=function(Mt){this.throwIfDisposed();var Xr=this.gl,rn=ae(Xr,this.debug,Mt),nn=yi(Xr,this.debug),an=ce(Xr,this.debug);return Jt(Xr,this.debug,function(){return Xr.attachShader(an,nn)}),Jt(Xr,this.debug,function(){return Xr.attachShader(an,rn)}),le(Xr,this.debug,an),this.debug&&he$1(Xr,this.debug,an),this.vertexAttrsAreBound||(this.setProgram(an),this.vertexAttrsAreBound=Si(Xr,this.debug,this.program,this.vertexBuffer)),an},st.prototype.deleteProgram=function(Mt){var Xr=this;this.throwIfDisposed(),Mt===this.program&&(this.program=null),Mt!=null&&Jt(this.gl,this.debug,function(){return Xr.gl.deleteProgram(Mt)})},st.prototype.setProgram=function(Mt){var Xr=this;this.throwIfDisposed(),this.program=Mt,this.program!=null&&this.debug&&he$1(this.gl,this.debug,this.program),Jt(this.gl,this.debug,function(){return Xr.gl.useProgram(Mt)})},st.prototype.getUniformLocation=function(Mt,Xr,rn){return rn===void 0&&(rn=!0),this.throwIfDisposed(),rn?xe$1(this.gl,this.debug,Mt,Xr):be(this.gl,Mt,Xr)},st.prototype.getAttributeLocation=function(Mt,Xr){var rn=this;return this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return rn.gl.getAttribLocation(Mt,Xr)})},st.prototype.getUniformLocationNoThrow=function(Mt,Xr){return this.throwIfDisposed(),this.gl.getUniformLocation(Mt,Xr)},st.prototype.setInputMatrixTexture=function(Mt,Xr,rn){this.throwIfDisposed(),this.throwIfNoProgram(),we$1(this.gl,this.debug,this.program,Mt,Xr,rn)},st.prototype.setOutputMatrixTexture=function(Mt,Xr,rn){this.setOutputMatrixTextureDriver(Mt,rn,Xr)},st.prototype.setOutputPackedMatrixTexture=function(Mt,Xr,rn){this.throwIfDisposed();var nn=$t(Xr,rn),an=nn[0],on=nn[1];this.setOutputMatrixTextureDriver(Mt,an,on)},st.prototype.setOutputMatrixWriteRegion=function(Mt,Xr,rn,nn){this.setOutputMatrixWriteRegionDriver(rn,Mt,nn,Xr)},st.prototype.setOutputPackedMatrixWriteRegion=function(Mt,Xr,rn,nn){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},st.prototype.debugValidate=function(){this.program!=null&&he$1(this.gl,this.debug,this.program),Re(this.gl)},st.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var Mt=this.gl;this.debug&&this.debugValidate(),Jt(Mt,this.debug,function(){return Mt.drawElements(Mt.TRIANGLES,6,Mt.UNSIGNED_SHORT,0)})},st.prototype.blockUntilAllProgramsCompleted=function(){var Mt=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return Mt.gl.finish()})},st.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=re(this.gl,this.debug,i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},st.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},st.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},st.prototype.beginQuery=function(){if(i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var Mt=this.gl,Xr=this.getQueryTimerExtensionWebGL2(),rn=Mt.createQuery();return Mt.beginQuery(Xr.TIME_ELAPSED_EXT,rn),rn}var nn=this.getQueryTimerExtensionWebGL1(),an=nn.createQueryEXT();return nn.beginQueryEXT(nn.TIME_ELAPSED_EXT,an),an},st.prototype.endQuery=function(){if(i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var Mt=this.getQueryTimerExtensionWebGL1();Mt.endQueryEXT(Mt.TIME_ELAPSED_EXT)}else{var Xr=this.gl,rn=this.getQueryTimerExtensionWebGL2();Xr.endQuery(rn.TIME_ELAPSED_EXT)}},st.prototype.waitForQueryAndGetTime=function(Mt){return n(this,void 0,void 0,function(){var Xr=this;return r$2(this,function(rn){switch(rn.label){case 0:return[4,F$2(function(){return Xr.disposed||Xr.isQueryAvailable(Mt,i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return rn.sent(),[2,this.getQueryTime(Mt,i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},st.prototype.getQueryTime=function(Mt,Xr){if(Xr===0)return null;if(Xr===2){var rn=this.gl;return rn.getQueryParameter(Mt,rn.QUERY_RESULT)/1e6}var nn=this.getQueryTimerExtensionWebGL1();return nn.getQueryObjectEXT(Mt,nn.QUERY_RESULT_EXT)/1e6},st.prototype.isQueryAvailable=function(Mt,Xr){if(Xr===0)return!0;if(Xr===2){var rn=this.gl,nn=this.getQueryTimerExtensionWebGL2(),an=rn.getQueryParameter(Mt,rn.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(nn.GPU_DISJOINT_EXT)),an&&!this.disjoint}return an=(nn=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(Mt,nn.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(nn.GPU_DISJOINT_EXT)),an&&!this.disjoint},st.prototype.pollFence=function(Mt){var Xr=this;return new Promise(function(rn){Xr.addItemToPoll(function(){return Mt.isFencePassed()},function(){return rn()})})},st.prototype.pollItems=function(){for(var Mt=function(rn){for(var nn=0;nn<rn.length&&rn[nn]();++nn);return nn-1}(this.itemsToPoll.map(function(rn){return rn.isDoneFn})),Xr=0;Xr<=Mt;++Xr)(0,this.itemsToPoll[Xr].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(Mt+1)},st.prototype.addItemToPoll=function(Mt,Xr){var rn=this;this.itemsToPoll.push({isDoneFn:Mt,resolveFn:Xr}),this.itemsToPoll.length>1||F$2(function(){return rn.pollItems(),rn.itemsToPoll.length===0})},st.prototype.bindTextureToFrameBuffer=function(Mt){this.throwIfDisposed(),Ce$1(this.gl,this.debug,Mt,this.framebuffer),this.debug&&Re(this.gl)},st.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Ce$1(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Re(this.gl)):Ee(this.gl,this.debug,this.framebuffer)},st.prototype.downloadMatrixDriver=function(Mt,Xr){this.bindTextureToFrameBuffer(Mt);var rn=Xr();return this.unbindTextureToFrameBuffer(),rn},st.prototype.setOutputMatrixTextureDriver=function(Mt,Xr,rn){this.throwIfDisposed();var nn=this.gl;Ce$1(nn,this.debug,Mt,this.framebuffer),this.debug&&Re(nn),this.outputTexture=Mt,Jt(nn,this.debug,function(){return nn.viewport(0,0,Xr,rn)}),Jt(nn,this.debug,function(){return nn.scissor(0,0,Xr,rn)})},st.prototype.setOutputMatrixWriteRegionDriver=function(Mt,Xr,rn,nn){var an=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return an.gl.scissor(Mt,Xr,rn,nn)})},st.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},st.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},st}();function Pi(st,Mt){if(st.length!==Mt.length)throw Error("Binary was compiled with "+st.length+" inputs, but was executed with "+Mt.length+" inputs");st.forEach(function(Xr,rn){var nn=Xr.logicalShape,an=Mt[rn],on=an.shape;if(!S$3(nn,on))throw Error("Binary was compiled with different shapes than the current args. Shapes "+nn+" and "+on+" must match");if(!Xr.isUniform||!an.isUniform){var sn=Xr.texShape,ln=an.isUniform?null:an.texData.texShape;if(!S$3(sn,ln))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+sn+" and "+ln+" must match")}})}var Li=function(st,Mt,Xr){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st;for(var rn=Xr.filterWidth,nn=Xr.inChannels,an=Xr.strideWidth,on=Xr.strideHeight,sn=Xr.padInfo,ln=Xr.outWidth,un=Xr.dilationWidth,cn=Xr.dilationHeight,hn=Xr.dataFormat,fn=sn.left,to=sn.top,uo=nn*rn,co=ua(),Uo=hn==="channelsLast",lo=Uo?0:1,ho=Uo?1:2,fo="",mo=0;mo<=1;mo++)for(var _d=0;_d<=1;_d++)fo+=`
          blockIndex = rc.y + `+_d+`;
          pos = rc.x + `+mo+`;

          if(blockIndex < `+st[1]+" && pos < "+st[0]+`) {
            offsetY = int(blockIndex / (`+ln+")) * "+on+" - "+to+`;
            d0 = offsetY + `+cn+" * (pos / "+uo+`);

            if(d0 < `+Mt[lo]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+ln+".) * "+an+". - "+fn+`.);
              d1 = offsetX + `+un+" * (int(mod(float(pos), "+uo+".) / "+nn+`.));

              if(d1 < `+Mt[ho]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+nn+`.));

                if (`+Uo+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*mo+_d)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*mo+_d)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+fo+`

        `+co.output+` = result;
      }
    `},Wi=function(st,Mt,Xr,rn,nn){this.variableNames=["x"],this.outputShape=[];var an,on=Mt,sn=st[3]-1;this.outputShape=st;var ln="float("+Xr+") + float("+rn+") * sum";an=nn===.5?"inversesqrt("+ln+")":nn===1?"1.0/("+ln+")":"exp(log("+ln+") * float(-"+nn+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+on+"; j <= "+on+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+sn+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+an+`;
        setOutput(val);
      }
    `},Ui=function(st,Mt,Xr,rn,nn){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=st,this.depth=st[3],this.depthRadius=Mt,this.bias=Xr,this.alpha=rn,this.beta=nn,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+Mt+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+Mt+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+rn+") * norm + float("+Xr+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+rn+`)
                * float(`+nn+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+nn+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Vi=function(st,Mt,Xr,rn,nn){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var an,on=Mt,sn=st[3]-1;this.outputShape=st;var ln="float("+Xr+") + float("+rn+") * sum";an=nn===.5?"inversesqrt("+ln+")":nn===1?"1.0/("+ln+")":"exp(log("+ln+") * float(-"+nn+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+on+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+on+"; j <= "+on+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+sn+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+an+`;
        setOutput(result);
      }
    `},zi=function(st){this.variableNames=["dy","maxPos"],this.outputShape=st.inShape;var Mt=st.strideHeight,Xr=st.strideWidth,rn=st.dilationHeight,nn=st.effectiveFilterHeight,an=st.effectiveFilterWidth,on=nn-1-st.padInfo.top,sn=an-1-st.padInfo.left,ln=nn*an-1;this.userCode=`
      const ivec2 pads = ivec2(`+on+", "+sn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+nn+`;
          wR += `+rn+`) {
          float dyR = float(dyRCorner + wR) / `+Mt+`.0;

          if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+an+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+Xr+`.0;

            if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+ln+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+an+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Gi=function(st){this.variableNames=["dy","maxPos"],this.outputShape=st.inShape;var Mt=st.strideDepth,Xr=st.strideHeight,rn=st.strideWidth,nn=st.dilationDepth,an=st.dilationHeight,on=st.dilationWidth,sn=st.effectiveFilterDepth,ln=st.effectiveFilterHeight,un=st.effectiveFilterWidth,cn=sn-1-st.padInfo.front,hn=ln-1-st.padInfo.top,fn=un-1-st.padInfo.left,to=sn*ln*un-1;this.userCode=`
      const ivec3 pads = ivec3(`+cn+", "+hn+", "+fn+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+sn+`;
           wD += `+nn+`) {
          float dyD = float(dyDCorner + wD) / `+Mt+`.0;

          if (dyD < 0.0 || dyD >= `+st.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+ln+`;
              wR += `+an+`) {
            float dyR = float(dyRCorner + wR) / `+Xr+`.0;

            if (dyR < 0.0 || dyR >= `+st.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+un+`;
                wC += `+on+`) {
              float dyC = float(dyCCorner + wC) / `+rn+`.0;

              if (dyC < 0.0 || dyC >= `+st.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+to+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+ln+" * "+un+` +
                  wR * `+un+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Hi=function(st,Mt,Xr,rn,nn,an,on){Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!1),nn===void 0&&(nn=!1),an===void 0&&(an=null),on===void 0&&(on=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt;var sn=Xr?st[1]:st[2],ln=Math.ceil(sn/2),un=Xr?"i * 2, rc.y":"rc.y, i * 2",cn=rn?"rc.z, i * 2":"i * 2, rc.z",hn=Xr?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],fn=rn?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],to="",uo="";an&&(to=on?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+an+`
        }`:`vec4 activation(vec4 x) {
          `+an+`
        }`,uo="result = activation(result);");var co=nn?"result += getBiasAtOutCoords();":"";nn&&this.variableNames.push("bias"),on&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+to+`

      const float sharedDimension = `+ln+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+ln+`; i++) {
          vec4 a = getMatrixA(rc.x, `+un+`);
          vec4 b = getMatrixB(rc.x, `+cn+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+hn[0]+" * "+fn[0]+`);
          result += (`+hn[1]+" * "+fn[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+co+`

        `+uo+`

        setOutput(result);
      }
    `},qi=function(){function st(Mt,Xr,rn){this.variableNames=["probs"],this.outputShape=[Mt,rn],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(Xr-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(Xr-1)+`));
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt){var Xr=this;return function(rn,nn){Xr.seedLoc==null&&(Xr.seedLoc=rn.getUniformLocation(nn,"seed")),rn.gl.uniform1f(Xr.seedLoc,Mt)}},st}(),Ki=function(st,Mt,Xr,rn){this.variableNames=["indices"],this.outputShape=[st,Mt],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+rn+"), float("+Xr+`),
                      float(index == coords.y)));
      }
    `},ji=function(st){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=st;var Mt=st.length;if(Mt===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var Xr=sa("rc",Mt),rn=wa(Mt),nn=function(sn,ln,un){if(sn===1)return"rc > "+ln[0];for(var cn="",hn=sn-2;hn<sn;hn++)cn+=un[hn]+" >= "+ln[hn],hn<sn-1&&(cn+="||");return cn}(Mt,st,Xr),an=function(sn,ln,un,cn){if(sn===1)return"";var hn=cn.slice(-2);return`
    int r = `+hn[0]+`;
    int c = `+hn[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+ln+`;
    bool rEdge = rp1 >= `+un+`;
  `}(Mt,st[st.length-1],st[st.length-2],Xr),on=function(sn,ln){var un=sn.length,cn=function(hn,fn){for(var to=[],uo=0;uo<=1;uo++)for(var co=0;co<=1;co++){for(var Uo=(uo===0?"r":"rp1")+", "+(co===0?"c":"cp1"),lo=2;lo<hn;lo++)Uo=fn[fn.length-1-lo]+","+Uo;to.push(Uo)}return to}(un,ln);return un===1?`getA(rc),
            rc + 1 >= `+sn[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+cn[0]+`),
          cEdge ? 0. : getA(`+cn[1]+`),
          rEdge ? 0. : getA(`+cn[2]+`),
          rEdge || cEdge ? 0. : getA(`+cn[3]+")"}(st,Xr);this.userCode=`
        void main() {
          `+rn+` rc = getOutputCoords();

          if(`+nn+`) {
            setOutput(vec4(0));
          } else {
            `+an+`

            setOutput(vec4(`+on+`));
          }
        }
      `}},Xi=function(st,Mt,Xr){this.variableNames=["x"],this.outputShape=Mt.map(function(ln,un){return ln[0]+st[un]+ln[1]});var rn=st.length,nn=wa(rn),an=Mt.map(function(ln){return ln[0]}).join(","),on=Mt.map(function(ln,un){return ln[0]+st[un]}).join(","),sn=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,rn);this.userCode=rn!==1?`
      `+nn+" start = "+nn+"("+an+`);
      `+nn+" end = "+nn+"("+on+`);

      void main() {
        `+nn+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+Xr+`));
        } else {
          `+nn+` coords = outC - start;
          setOutput(getX(`+sn+`));
        }
      }
    `:`
        int start = `+an+`;
        int end = `+on+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+Xr+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Yi=function(st,Mt,Xr){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt.map(function(Uo,lo){return Uo[0]+st[lo]+Uo[1]});for(var rn=st.length,nn=wa(rn),an=Mt.map(function(Uo){return Uo[0]}).join(","),on=Mt.map(function(Uo,lo){return Uo[0]+st[lo]}).join(","),sn=sa("rc",rn),ln=sa("source",rn),un=sn[rn-1]+" < "+this.outputShape[rn-1],cn=rn===1?"source":"vec2("+ln.slice(-2).join()+")",hn=[nn+" rc = outputLoc;",sn[rn-1]+` += 1;
       if(`+un+`) {
      `,rn===1?"":`}
       rc = outputLoc;
       `+sn[rn-2]+` += 1;
       if(`+sn[rn-2]+" < "+this.outputShape[rn-2]+") {",rn===1?"":"  "+sn[rn-1]+` += 1;
         if(`+un+") {"],fn=rn===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",to="",uo=0,co=rn===1?2:4;uo<co;uo++)to+=`
        `+hn[uo]+`
        if (`+fn+`) {
          result[`+uo+"] = float("+Xr+`);
        } else {
          `+nn+` source = rc - start;
          result[`+uo+"] = getChannel(getX("+ln.join()+"), "+cn+`);
        }
      `;to+=rn===1?"} ":"}}",this.userCode=`
      const `+nn+" start = "+nn+"("+an+`);
      const `+nn+" end = "+nn+"("+on+`);

      void main() {
        `+nn+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+to+`
        setOutput(result);
      }
    `},$i=function(st,Mt,Xr){if(this.variableNames=["x"],Mt==="avg"&&Xr)throw new Error("Cannot compute positions for average pool.");var rn=st.filterWidth,nn=st.strideHeight,an=st.strideWidth,on=st.dilationHeight,sn=st.dilationWidth,ln=st.effectiveFilterHeight,un=st.effectiveFilterWidth,cn=st.padInfo.top,hn=st.padInfo.left;this.outputShape=st.outShape;var fn=Mt==="avg",to="0.0";if(fn||(to="-1.0 / 1e-20"),Xr)this.userCode=`
        const ivec2 strides = ivec2(`+nn+", "+an+`);
        const ivec2 pads = ivec2(`+cn+", "+hn+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+ln+`;
              wR += `+on+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+st.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+un+`;
                wC += `+sn+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+st.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+un+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var uo=Mt+"("+Mt+"("+Mt+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";Mt==="avg"&&(uo="avgValue / count");var co=4*Math.floor(rn/4),Uo=rn%4,lo=`
      if (`+fn+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+nn+", "+an+`);
      const ivec2 pads = ivec2(`+cn+", "+hn+`);
      const float initializationValue = `+to+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+st.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+to+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+ln+`;
            wR += `+on+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+st.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+co+`; wC += 4) {
            int xC = xCCorner + wC * `+sn+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+sn+`, d),
              getValue(batch, xR, xC + 2 * `+sn+`, d),
              getValue(batch, xR, xC + 3 * `+sn+`, d)
            );

            `+lo+`
          }

          int xC = xCCorner + `+co+`;
          if (`+(Uo===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+lo+`
          } else if (`+(Uo===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+sn+`, d),
              initializationValue,
              initializationValue
            );

            `+lo+`
          } else if (`+(Uo===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+sn+`, d),
              getValue(batch, xR, xC + 2 * `+sn+`, d),
              initializationValue
            );

            `+lo+`
          }
        }
        setOutput(`+uo+`);
      }
    `}},Qi=function(st,Mt,Xr){if(this.variableNames=["x"],Mt==="avg"&&Xr)throw new Error("Cannot compute positions for average pool.");var rn=st.filterWidth,nn=st.strideDepth,an=st.strideHeight,on=st.strideWidth,sn=st.dilationDepth,ln=st.dilationHeight,un=st.dilationWidth,cn=st.effectiveFilterDepth,hn=st.effectiveFilterHeight,fn=st.effectiveFilterWidth,to=st.padInfo.front,uo=st.padInfo.top,co=st.padInfo.left;this.outputShape=st.outShape;var Uo=Mt==="avg",lo="0.0";if(Uo||(lo="-1.0 / 1e-20"),Xr)this.userCode=`
        const ivec3 strides =
            ivec3(`+nn+", "+an+", "+on+`);
        const ivec3 pads = ivec3(`+to+", "+uo+", "+co+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+cn+`;
              wD += `+sn+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+st.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+hn+`;
                wR += `+ln+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+st.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+fn+`;
                  wC += `+un+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+st.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+hn+" * "+fn+` +
                      wR * `+fn+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var ho=Mt+"("+Mt+"("+Mt+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";Mt==="avg"&&(ho="avgValue / count");var fo=4*Math.floor(rn/4),mo=rn%4,_d=`
      if (`+Uo+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+nn+", "+an+", "+on+`);
      const ivec3 pads = ivec3(`+to+", "+uo+", "+co+`);
      const float initializationValue = `+lo+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+st.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+lo+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+cn+`;
            wD += `+sn+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+st.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hn+`;
            wR += `+ln+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+st.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+fo+`; wC += 4) {
              int xC = xCCorner + wC * `+un+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+un+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+un+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+un+`, ch)
              );

              `+_d+`
            }

            int xC = xCCorner + `+fo+`;
            if (`+(mo===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_d+`
            } else if (`+(mo===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+un+`, ch),
                initializationValue,
                initializationValue
              );

              `+_d+`
            } else if (`+(mo===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+un+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+un+`, ch),
                initializationValue
              );

              `+_d+`
            }
          }
          setOutput(`+ho+`);
        }
      }
    `}},Ji=function(st,Mt){this.variableNames=["x"];var Xr=st.windowSize,rn=st.batchSize,nn=st.inSize,an=Math.ceil(nn/Xr);this.outputShape=[rn,an];var on="0.0",sn="";Mt==="prod"?on="1.0":Mt==="min"?(on="1.0 / 1e-20",sn="min"):Mt==="max"&&(on="-1.0 / 1e-20",sn="max");var ln=Mt+"("+Mt+"("+Mt+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";Mt==="sum"?ln="sumValue":Mt==="prod"?ln="prodValue":Mt==="all"?ln="allValue":Mt==="any"&&(ln="anyValue");var un=4*Math.floor(Xr/4),cn=Xr%4,hn=`
      if (`+(Mt==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(Mt==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+sn+`(values, minMaxValue);
      }
    `,fn="vec4";Mt==="all"?(on="1.0",hn=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,fn="bvec4"):Mt==="any"&&(on="0.0",hn=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,fn="bvec4");var to="";nn%Xr>0&&(to=`
        if (inIdx < 0 || inIdx >= `+nn+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+on+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+to+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+Xr+`;

        vec4 minMaxValue = vec4(`+on+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+un+`; i += 4) {
          int inIdx = inOffset + i;
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+hn+`
        }

        int inIdx = inOffset + `+un+`;
        if (`+(cn===1)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+hn+`
        } else if (`+(cn===2)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+hn+`
        } else if (`+(cn===3)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+hn+`
        }
        setOutput(`+ln+`);
      }
    `},Zi=function(st,Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st;for(var Xr="",rn=0;rn<4;rn++){var nn="thisRC = rc;";rn%2==1&&(nn+="thisRC.z += 1;"),rn>1&&(nn+="thisRC.y += 1;"),Xr+=`
        `+nn+`
        `+(rn>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+rn+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(rn>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ca(["r","c","d"],Mt)+`
      return ivec3(r, c, d);
    }
  
      `+la(st)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+st[1]+`;
        int cols = `+st[2]+`;

        `+Xr+`

        setOutput(result);
      }
    `},ts=function(st,Mt,Xr){this.variableNames=["dy"],this.outputShape=[],this.outputShape=Mt.shape;var rn=Mt.shape,nn=rn[1],an=rn[2],on=st.shape,sn=on[1],ln=on[2],un=[Xr&&sn>1?nn-1:nn,Xr&&ln>1?an-1:an],cn=[Xr&&sn>1?sn-1:sn,Xr&&ln>1?ln-1:ln],hn=un[0]/cn[0],fn=un[1]/cn[1],to=1/hn,uo=1/fn,co=2*Math.ceil(to)+2,Uo=2*Math.ceil(uo)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hn+`);
        const float widthScale = float(`+fn+`);

        const float invHeightScale = float(`+to+`);
        const float invWidthScale = float(`+uo+`);

        const int winHeight = int(`+co+`);
        const int winWidth = int(`+Uo+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+sn+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+ln+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(nn-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(an-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},es=function(st,Mt,Xr,rn){this.variableNames=["A"],this.outputShape=[];var nn=st[0],an=st[1],on=st[2],sn=st[3];this.outputShape=[nn,Mt,Xr,sn];var ln=[rn&&Mt>1?an-1:an,rn&&Xr>1?on-1:on],un=[rn&&Mt>1?Mt-1:Mt,rn&&Xr>1?Xr-1:Xr];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+ln[0]/un[0]+`,
          `+ln[1]/un[1]+`);
      const vec2 inputShapeRC = vec2(`+an+".0, "+on+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ns=function(st,Mt,Xr,rn){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var nn=st[0],an=st[1],on=st[2],sn=st[3];this.outputShape=[nn,Mt,Xr,sn];var ln=[rn&&Mt>1?an-1:an,rn&&Xr>1?on-1:on],un=[rn&&Mt>1?Mt-1:Mt,rn&&Xr>1?Xr-1:Xr];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+ln[0]/un[0]+`,
          `+ln[1]/un[1]+`,
          `+ln[1]/un[1]+`);
      const vec3 inputShapeRC = vec3(`+an+".0, "+on+`.0,
                                     `+on+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(sn-1)+`;
        bool hasNextRow = coords.z < `+(Xr-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},rs=function(st,Mt,Xr){this.variableNames=["dy"],this.outputShape=[],this.outputShape=Mt.shape;var rn=Mt.shape,nn=rn[1],an=rn[2],on=st.shape,sn=on[1],ln=on[2],un=[Xr&&sn>1?nn-1:nn,Xr&&ln>1?an-1:an],cn=[Xr&&sn>1?sn-1:sn,Xr&&ln>1?ln-1:ln],hn=un[0]/cn[0],fn=un[1]/cn[1],to=1/hn,uo=1/fn,co=2*Math.ceil(to)+2,Uo=2*Math.ceil(uo)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hn+`);
        const float widthScale = float(`+fn+`);

        const float invHeightScale = float(`+to+`);
        const float invWidthScale = float(`+uo+`);

        const int winHeight = int(`+co+`);
        const int winWidth = int(`+Uo+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+sn+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+ln+`) {
              continue;
            }

            float sourceFracRow =
              float(`+un[0]+`) *
                (float(dyR) / float(`+cn[0]+`));

            float sourceFracCol =
                float(`+un[1]+`) *
                  (float(dyC) / float(`+cn[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+nn+`) - 1),
                `+Xr+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+an+`) - 1),
                `+Xr+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},os=function(st,Mt,Xr,rn){this.variableNames=["A"],this.outputShape=[];var nn=st[0],an=st[1],on=st[2],sn=st[3];this.outputShape=[nn,Mt,Xr,sn];var ln=[rn&&Mt>1?an-1:an,rn&&Xr>1?on-1:on],un=[rn&&Mt>1?Mt-1:Mt,rn&&Xr>1?Xr-1:Xr],cn=rn?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+ln[0]/un[0]+`,
          `+ln[1]/un[1]+`);
      const vec2 inputShapeRC = vec2(`+an+".0, "+on+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+cn+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},as=function(st,Mt){this.variableNames=["x"];var Xr=st.length;if(Xr>4)throw new Error("WebGL backend: Reverse of rank-"+Xr+" tensor is not yet supported");if(this.outputShape=st,Xr!==1){var rn=st.map(function(an,on){return function(sn){return Mt.indexOf(sn)!==-1&&st[sn]!==1?st[sn]+" - coords["+sn+"] - 1":"coords["+sn+"]"}(on)}).join(","),nn=wa(Xr);this.userCode=`
      void main() {
        `+nn+` coords = getOutputCoords();
        setOutput(getX(`+rn+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+st[0]+` - coord - 1));
        }
      `},is=function(st,Mt){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var Xr=st.length;if(Xr>4)throw new Error("WebGL backend: Reverse of rank-"+Xr+" tensor is not yet supported");this.outputShape=st;var rn=sa("rc",Xr),nn=rn[Xr-1]+" + 1 < "+this.outputShape[Xr-1],an=rn[Xr-2]+" + 1 < "+this.outputShape[Xr-2],on=wa(Xr);function sn(ln){var un=st.map(function(cn,hn){return function(fn,to){return Mt.indexOf(fn)!==-1&&st[fn]!==1?st[fn]+" - "+to[fn]+" - 1":""+to[fn]}(hn,ln)});return"getChannel(getX("+un.join(",")+"), vec2("+un.slice(-2).join(",")+"))"}this.userCode=Xr===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+st[0]+` - rc - 1),
            `+st[0]+` - rc - 1);
          if(`+nn+`){
              result.g = getChannel(getX(`+st[0]+` - (rc  + 1) - 1),
                `+st[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+on+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(ln){return sn(ln)}(rn.slice())+`;
          if(`+nn+`){
            result.g = `+function(ln){return ln[Xr-1]="("+ln[Xr-1]+" + 1)",sn(ln)}(rn.slice())+`;
          }
          if(`+an+`) {
            result.b = `+function(ln){return ln[Xr-2]="("+ln[Xr-2]+" + 1)",sn(ln)}(rn.slice())+`;
            if(`+nn+`) {
              result.a = `+function(ln){return ln[Xr-1]="("+ln[Xr-1]+" + 1)",ln[Xr-2]="("+ln[Xr-2]+" + 1)",sn(ln)}(rn.slice())+`;
            }
          }
          setOutput(result);
        }
    `},ss=function(st,Mt,Xr,rn,nn,an,on){this.variableNames=["updates","indices","defaultValue"],this.outputShape=an;var sn=wa(nn.length),ln=wa(an.length),un="";Xr===1?un="i":Xr===2&&(un="i, j");var cn="getIndices("+un+")",hn="";rn===1?hn="i":rn===2&&(hn="i, coords[1]");var fn="getUpdates("+hn+")",to=Mt>1?"strides[j]":"strides";this.userCode=`
        `+sn+" strides = "+sn+"("+nn+`);

        void main() {
          `+ln+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+st+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+Mt+`; j++) {
              int index = round(`+cn+`);
              flattenedIndex += index * `+to+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+fn+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},us=function(st,Mt){this.variableNames=["x","segmentIds"];var Xr=st.windowSize,rn=st.batchSize,nn=st.inSize,an=st.numSegments,on=an*Math.ceil(nn/Xr);this.outputShape=[rn,on];var sn=4*Math.floor(Xr/4),ln=Xr%4,un=`
        sumValue += dot(values, segFilter);
    `,cn="";nn%Xr>0&&(cn=`
        if (inIdx < 0 || inIdx >= `+nn+`) {
          return initializationValue;
        }
      `);var hn="";nn%Xr>0&&(hn=`
        if (inIdx < 0 || inIdx >= `+nn+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+cn+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+hn+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+an+")) * float("+Xr+`));
        int currentSeg = int(mod(float(outIdx), float(`+an+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+sn+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+un+`
        }

        int inIdx = inOffset + `+sn+`;
        if (`+(ln===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+un+`
        } else if (`+(ln===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+un+`
        } else if (`+(ln===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+un+`
        }
        setOutput(sumValue);
      }
    `},cs=function(st,Mt,Xr){var rn,nn;if(this.variableNames=["c","a","b"],this.outputShape=Mt,Xr>4)throw Error("Where for rank "+Xr+" is not yet supported");if(Xr===1)nn="resRC",rn="resRC";else{for(var an=["resRC.x","resRC.y","resRC.z","resRC.w"],on=[],sn=[],ln=0;ln<Mt.length;ln++)sn.push(""+an[ln]),ln<st&&on.push(""+an[ln]);rn=on.join(),nn=sn.join()}var un=wa(Xr);this.userCode=`
      void main() {
        `+un+` resRC = getOutputCoords();
        float cVal = getC(`+rn+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+nn+`));
        } else {
          setOutput(getB(`+nn+`));
        }
      }
    `},ls=function(){function st(Mt){this.variableNames=["source"],this.outputShape=Mt,this.rank=Mt.length;var Xr,rn=wa(this.rank),nn="uniform int start["+this.rank+"];",an=function(on){if(on===1)return"sourceLoc";if(on<=6)return hs.slice(0,on).map(function(sn){return"sourceLoc."+sn}).join(",");throw Error("Slicing for rank "+on+" is not yet supported")}(this.rank);Xr=`
        `+rn+` sourceLoc;
        `+rn+` coords = getOutputCoords();
        `+Mt.map(function(on,sn){return"sourceLoc."+hs[sn]+" = start["+sn+"] + coords."+hs[sn]+";"}).join(`
`)+`
      `,this.userCode=`
      `+nn+`
      void main() {
        `+Xr+`
        setOutput(getSource(`+an+`));
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt){var Xr=this;if(Mt.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+Mt.length+")");return function(rn,nn){Xr.startLoc==null&&(Xr.startLoc=rn.getUniformLocationNoThrow(nn,"start"),Xr.startLoc==null)||rn.gl.uniform1iv(Xr.startLoc,Mt)}},st}(),hs=["x","y","z","w","u","v"],fs=function(){function st(Mt){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt,this.rank=Mt.length;var Xr=wa(this.rank),rn=sa("coords",this.rank),nn=sa("sourceLoc",this.rank),an=this.rank===1?"sourceLoc":"vec2("+nn.slice(-2).join()+")",on="getChannel(getSource("+nn.join()+"), "+an+")",sn=`
      result.x = `+on+`;
      if (++`+rn[this.rank-1]+" < "+Mt[this.rank-1]+`) {
        ++`+nn[this.rank-1]+`;
        result.y = `+on+`;
        --`+nn[this.rank-1]+`;
      }
    `,ln=this.rank===1?"":`
      --`+rn[this.rank-1]+`;
      if (++`+rn[this.rank-2]+" < "+Mt[this.rank-2]+`) {
        ++`+nn[this.rank-2]+`;
        result.z = `+on+`;
        if (++`+rn[this.rank-1]+" < "+Mt[this.rank-1]+`) {
          ++`+nn[this.rank-1]+`;
          result.w = `+on+`;
        }
      }
    `,un=this.rank<=4?`sourceLoc = coords +
            `+Xr+"("+Mt.map(function(cn,hn){return"start["+hn+"]"}).join()+");":Mt.map(function(cn,hn){return nn[hn]+" = "+rn[hn]+" + start["+hn+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+Xr+` coords = getOutputCoords();
        `+Xr+` sourceLoc;
        `+un+`
        vec4 result = vec4(0.);
        `+sn+`
        `+ln+`
        setOutput(result);
      }
    `}return st.prototype.getCustomSetupFunc=function(Mt){var Xr=this;if(Mt.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+Mt.length+")");return function(rn,nn){Xr.startLoc==null&&(Xr.startLoc=rn.getUniformLocationNoThrow(nn,"start"),Xr.startLoc==null)||rn.gl.uniform1iv(Xr.startLoc,Mt)}},st}(),ds=function(st,Mt,Xr){this.variableNames=["x"],this.outputShape=Xr;var rn=Xr.length,nn=wa(Xr.length),an=wa(Xr.length),on="";if(rn===1)on="coords * strides + begin";else{var sn=0;on=Xr.map(function(ln,un){return sn++,Xr.length===1?"coords * strides["+un+"] + begin["+un+"]":"coords["+(sn-1)+"] * strides["+un+"] + begin["+un+"]"}).join(",")}this.userCode=`
      `+nn+" begin = "+nn+"("+st+`);
      `+nn+" strides = "+nn+"("+Mt+`);

      void main() {
        `+an+` coords = getOutputCoords();
        setOutput(getX(`+on+`));
      }
    `},ps=function(){function st(Mt){this.gpgpu=Mt,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return st.prototype.acquireTexture=function(Mt,Xr,rn){var nn,an=vs(Xr,rn),on=ms(Mt,an,rn);if(on in this.freeTextures||(this.freeTextures[on]=[]),on in this.usedTextures||(this.usedTextures[on]=[]),this.freeTextures[on].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var sn=this.freeTextures[on].shift();return this.usedTextures[on].push(sn),sn}return this.numUsedTextures++,this.log(),an===Gt.PACKED_2X2_FLOAT32?nn=this.gpgpu.createPackedMatrixTexture(Mt[0],Mt[1]):an===Gt.PACKED_2X2_FLOAT16?nn=this.gpgpu.createFloat16PackedMatrixTexture(Mt[0],Mt[1]):an===Gt.UNPACKED_FLOAT32?nn=this.gpgpu.createFloat32MatrixTexture(Mt[0],Mt[1]):an===Gt.UNPACKED_FLOAT16?nn=this.gpgpu.createFloat16MatrixTexture(Mt[0],Mt[1]):an===Gt.PACKED_4X1_UNSIGNED_BYTE&&(nn=this.gpgpu.createUnsignedBytesMatrixTexture(Mt[0],Mt[1])),this.usedTextures[on].push(nn),nn},st.prototype.releaseTexture=function(Mt,Xr,rn,nn){if(this.freeTextures!=null){var an=ms(Xr,vs(rn,nn),nn);an in this.freeTextures||(this.freeTextures[an]=[]),this.freeTextures[an].push(Mt),this.numFreeTextures++,this.numUsedTextures--;var on=this.usedTextures[an],sn=on.indexOf(Mt);if(sn<0)throw new Error("Cannot release a texture that was never provided by this texture manager");on.splice(sn,1),this.log()}},st.prototype.log=function(){if(this.logEnabled){var Mt=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+Mt+")")}},st.prototype.getNumUsedTextures=function(){return this.numUsedTextures},st.prototype.getNumFreeTextures=function(){return this.numFreeTextures},st.prototype.dispose=function(){var Mt=this;if(this.freeTextures!=null){for(var Xr in this.freeTextures)this.freeTextures[Xr].forEach(function(rn){Mt.gpgpu.deleteMatrixTexture(rn)});for(var Xr in this.usedTextures)this.usedTextures[Xr].forEach(function(nn){Mt.gpgpu.deleteMatrixTexture(nn)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},st}();function vs(st,Mt){if(st===zt.UPLOAD)return Gt.PACKED_2X2_FLOAT32;if(st===zt.RENDER||st==null)return function(Xr){return i$2().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Xr?Gt.PACKED_2X2_FLOAT32:Gt.UNPACKED_FLOAT32:Xr?Gt.PACKED_2X2_FLOAT16:Gt.UNPACKED_FLOAT16}(Mt);if(st===zt.DOWNLOAD||st===zt.PIXELS)return Gt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+st)}function ms(st,Mt,Xr){return st[0]+"_"+st[1]+"_"+Mt+"_"+Xr}var gs=function(st,Mt){this.variableNames=["A"];for(var Xr=new Array(st.length),rn=0;rn<Xr.length;rn++)Xr[rn]=st[rn]*Mt[rn];this.outputShape=Xr,this.rank=Xr.length;var nn=wa(this.rank),an=function(on){var sn=on.length;if(sn>5)throw Error("Tile for rank "+sn+" is not yet supported");if(sn===1)return"imod(resRC, "+on[0]+")";for(var ln=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],un=[],cn=0;cn<on.length;cn++)un.push("imod("+ln[cn]+", "+on[cn]+")");return un.join()}(st);this.userCode=`
      void main() {
        `+nn+` resRC = getOutputCoords();
        setOutput(getA(`+an+`));
      }
    `},ys=function(st,Mt){this.variableNames=["A"];for(var Xr=new Array(st.length),rn=0;rn<Xr.length;rn++)Xr[rn]=st[Mt[rn]];this.outputShape=Xr,this.rank=Xr.length;var nn=wa(this.rank),an=function(on){var sn=on.length;if(sn>6)throw Error("Transpose for rank "+sn+" is not yet supported");for(var ln=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],un=new Array(sn),cn=0;cn<on.length;cn++)un[on[cn]]=ln[cn];return un.join()}(Mt);this.userCode=`
    void main() {
      `+nn+` resRC = getOutputCoords();
      setOutput(getA(`+an+`));
    }
    `},xs=function(st,Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var Xr=new Array(st.length),rn=0;rn<Xr.length;rn++)Xr[rn]=st[Mt[rn]];if(this.outputShape=Xr,this.rank=Xr.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var nn=wa(this.rank),an=ia("rc",this.rank),on=new Array(this.rank);for(rn=0;rn<Mt.length;rn++)on[Mt[rn]]=an[rn];var sn="vec2("+on.slice(-2).join()+")",ln="++"+an[this.rank-1]+" < "+Xr[this.rank-1],un="getChannel(getA("+on.join()+"), "+sn+")";this.userCode=`
    void main() {
      `+nn+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+un+`;
      if(`+ln+`) {
        result[1] = `+un+`;
      }
      --`+an[this.rank-1]+`;
      if(++`+an[this.rank-2]+" < "+Xr[this.rank-2]+`) {
        result[2] = `+un+`;
        if(`+ln+`) {
          result[3] = `+un+`;
        }
      }
      setOutput(result);
    }
    `},bs=1.7580993408473768,ws=1.0507009873554805,Cs=function(st,Mt){this.variableNames=["A"],this.outputShape=st,this.userCode=`
      float unaryOperation(float x) {
        `+Mt+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Es="if (isnan(x)) return x;",Rs="return x;",Is="return abs(x);",ks=Es+`
  return (x < 0.0) ? 0.0 : x;
`,Ss=Es+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,As="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ds=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+bs+`;
  float scale = `+ws+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Ts="return -x;",Ns="return ceil(x);",Fs="return floor(x);",_s="return exp(x);",Os="return exp(x) - 1.0;",Ms=Es+`
  return sin(x);
`,Bs=Es+`
  return cos(x);
`,Ps=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Ls=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ws=Es+`
  return atan(x);
`,Us=Es+"return log(x + sqrt(x * x + 1.0));",Vs=Es+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,zs=Es+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Gs="return x;",Hs="return x;",qs=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ks=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,js=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xs=function(st,Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+Mt+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Ys=function(st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=st;var Mt=st.length,Xr=sa("rc",Mt),rn=wa(Mt),nn=function(sn,ln){if(sn===1)return"rc";for(var un="",cn=0;cn<sn;cn++)un+=ln[cn],cn<sn-1&&(un+=",");return un}(Mt,Xr),an=Xr.slice(-2),on=Mt<=1?"rc":"vec2("+an.join(",")+")";this.userCode=`
      void main() {
        `+rn+` rc = getOutputCoords();
        vec4 packedInput = getA(`+nn+`);

        setOutput(getChannel(packedInput, `+on+`));
      }
    `},$s={};function Qs(st,Mt){if(Mt===void 0&&(Mt=!1),st==="linear")return Mt?Hs:Rs;if(st==="relu")return Mt?qs:ks;if(st==="elu")return Mt?js:As;if(st==="relu6")return Mt?Ks:Ss;if(st==="prelu")return Mt?Pa:Ma;throw new Error("Activation "+st+" has not been implemented for the WebGL backend.")}var Js=600,Zs=function(st){function Mt(Xr){var rn,nn=st.call(this)||this;if(nn.pendingRead=new WeakMap,nn.pendingDisposal=new WeakSet,nn.dataRefCount=new WeakMap,nn.numBytesInGPU=0,nn.uploadWaitMs=0,nn.downloadWaitMs=0,nn.warnedAboutMemory=!1,nn.pendingDeletes=0,nn.disposed=!1,!i$2().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(Xr==null){var an=jt(i$2().getNumber("WEBGL_VERSION"));nn.binaryCache=((rn=i$2().getNumber("WEBGL_VERSION"))in $s||($s[rn]={}),$s[rn]),nn.gpgpu=new Bi(an),nn.canvas=an.canvas,nn.gpgpuCreatedLocally=!0}else nn.gpgpu=Xr,nn.binaryCache={},nn.gpgpuCreatedLocally=!1,nn.canvas=Xr.gl.canvas;return nn.textureManager=new ps(nn.gpgpu),nn.numMBBeforeWarning=i$2().global.screen==null?1024:i$2().global.screen.height*i$2().global.screen.width*window.devicePixelRatio*Js/1024/1024,nn.texData=new xo(nn,Lt),nn}return e$3(Mt,st),Mt.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},Mt.prototype.write=function(Xr,rn,nn){if(i$2().getBool("DEBUG")&&this.checkNumericalProblems(Xr),nn==="complex64"&&Xr!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var an={};return this.texData.set(an,{shape:rn,dtype:nn,values:Xr,usage:zt.UPLOAD}),an},Mt.prototype.move=function(Xr,rn,nn,an){if(i$2().getBool("DEBUG")&&this.checkNumericalProblems(rn),an==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(Xr,{shape:nn,dtype:an,values:rn,usage:zt.UPLOAD})},Mt.prototype.readSync=function(Xr){var rn=this.texData.get(Xr),nn=rn.values,an=rn.dtype,on=rn.complexTensors,sn=rn.slice,ln=rn.shape,un=rn.isPacked;if(sn!=null){var cn=void 0;cn=un?new Xs(ln,Gs):new Cs(ln,Gs);var hn=this.runWebGLProgram(cn,[{dataId:Xr,shape:ln,dtype:an}],an),fn=this.readSync(hn.dataId);return this.disposeData(hn.dataId),fn}if(nn!=null)return this.convertAndCacheOnCPU(Xr);if(an==="string")return nn;var to,uo,co=this.activeTimers!=null;return co&&(to=et()),an==="complex64"?uo=Vo(on.real.dataSync(),on.imag.dataSync()):uo=this.getValuesFromTexture(Xr),co&&(this.downloadWaitMs+=et()-to),this.convertAndCacheOnCPU(Xr,uo)},Mt.prototype.read=function(Xr){return n(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap;return r$2(this,function(sp){switch(sp.label){case 0:if(this.pendingRead.has(Xr))return rn=this.pendingRead.get(Xr),[2,new Promise(function(up){return rn.push(up)})];if(nn=this.texData.get(Xr),an=nn.values,on=nn.shape,sn=nn.slice,ln=nn.dtype,un=nn.complexTensors,cn=nn.isPacked,sn!=null)return hn=void 0,hn=cn?new Xs(on,Gs):new Cs(on,Gs),fn=this.runWebGLProgram(hn,[{dataId:Xr,shape:on,dtype:ln}],ln),to=this.read(fn.dataId),this.disposeData(fn.dataId),[2,to];if(an!=null)return[2,this.convertAndCacheOnCPU(Xr)];if(!i$2().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&i$2().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return uo=null,ln!=="complex64"&&i$2().get("WEBGL_BUFFER_SUPPORTED")&&(co=this.decode(Xr),Uo=this.texData.get(co.dataId),uo=(ap=this.gpgpu).createBufferFromTexture.apply(ap,[Uo.texture].concat(Yt(on)))),this.pendingRead.set(Xr,[]),ln==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:sp.sent(),sp.label=2;case 2:return ln!=="complex64"?[3,4]:[4,Promise.all([un.real.data(),un.imag.data()])];case 3:return ho=sp.sent(),fo=ho[0],mo=ho[1],lo=Vo(fo,mo),[3,5];case 4:uo==null?lo=this.getValuesFromTexture(Xr):(_d=k(on),lo=this.gpgpu.downloadFloat32MatrixFromBuffer(uo,_d)),sp.label=5;case 5:return co!=null&&this.disposeData(co.dataId),ep=this.convertAndCacheOnCPU(Xr,lo),rp=this.pendingRead.get(Xr),this.pendingRead.delete(Xr),rp.forEach(function(up){return up(ep)}),this.pendingDisposal.has(Xr)&&(this.pendingDisposal.delete(Xr),this.disposeData(Xr),this.pendingDeletes--),[2,ep]}})})},Mt.prototype.checkNumericalProblems=function(Xr){if(Xr!=null)for(var rn=0;rn<Xr.length;rn++){var nn=Xr[rn];if(!ee(nn))throw i$2().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+nn+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+nn+" cannot be represented on this device.")}},Mt.prototype.getValuesFromTexture=function(Xr){var rn,nn=this.texData.get(Xr),an=nn.shape,on=nn.dtype,sn=nn.isPacked,ln=k(an);if(i$2().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var un=this.decode(Xr),cn=this.texData.get(un.dataId),hn=(rn=this.gpgpu).downloadMatrixFromPackedTexture.apply(rn,[cn.texture].concat(Yt(an))).subarray(0,ln);return this.disposeData(un.dataId),hn}var fn=i$2().getBool("WEBGL_PACK")&&sn===!0,to=fn?Te(an):an,uo=fn?new ci(to):new ui(to),co=this.runWebGLProgram(uo,[{shape:to,dtype:on,dataId:Xr}],"float32"),Uo=this.texData.get(co.dataId),lo=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(Uo.texture,Uo.texShape[0],Uo.texShape[1]).subarray(0,ln);return this.disposeData(co.dataId),lo},Mt.prototype.time=function(Xr){return n(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un;return r$2(this,function(cn){switch(cn.label){case 0:return rn=this.activeTimers,nn=[],an=!1,this.programTimersStack==null?(this.programTimersStack=nn,an=!0):this.activeTimers.push(nn),this.activeTimers=nn,Xr(),on=I$2(this.activeTimers.map(function(hn){return hn.query})).filter(function(hn){return hn!=null}),sn=I$2(this.activeTimers.map(function(hn){return hn.name})).filter(function(hn){return hn!=null}),this.activeTimers=rn,an&&(this.programTimersStack=null),ln={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(on)]:[3,2];case 1:return un=cn.sent(),ln.kernelMs=w$4(un),ln.getExtraProfileInfo=function(){return un.map(function(hn,fn){return{name:sn[fn],ms:hn}}).map(function(hn){return hn.name+": "+hn.ms}).join(", ")},[3,3];case 2:ln.kernelMs={error:"WebGL query timers are not supported in this environment."},cn.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,ln]}})})},Mt.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},Mt.prototype.startTimer=function(){return i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:et(),endMs:null}},Mt.prototype.endTimer=function(Xr){return i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),Xr):(Xr.endMs=et(),Xr)},Mt.prototype.getQueryTime=function(Xr){return n(this,void 0,void 0,function(){var rn;return r$2(this,function(nn){return i$2().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(Xr)]:[2,(rn=Xr).endMs-rn.startMs]})})},Mt.prototype.disposeData=function(Xr){if(!this.pendingDisposal.has(Xr)){if(this.pendingRead.has(Xr))return this.pendingDisposal.add(Xr),void this.pendingDeletes++;if(this.texData.has(Xr)){this.releaseGPUData(Xr);var rn=this.texData.get(Xr).complexTensors;rn!=null&&(rn.real.dispose(),rn.imag.dispose()),this.texData.delete(Xr)}}},Mt.prototype.releaseGPUData=function(Xr){var rn=this.texData.get(Xr),nn=rn.texture,an=rn.dtype,on=rn.texShape,sn=rn.usage,ln=rn.isPacked,un=rn.slice,cn=un&&un.origDataId||Xr,hn=this.dataRefCount.get(cn);hn>1?this.dataRefCount.set(cn,hn-1):(this.dataRefCount.delete(cn),nn!=null&&(this.numBytesInGPU-=this.computeBytes(on,an),this.textureManager.releaseTexture(nn,on,sn,ln)));var fn=this.texData.get(Xr);fn.texture=null,fn.texShape=null,fn.isPacked=!1,fn.slice=null},Mt.prototype.getTexture=function(Xr){return this.uploadToGPU(Xr),this.texData.get(Xr).texture},Mt.prototype.getDataInfo=function(Xr){return this.texData.get(Xr)},Mt.prototype.getCPUBackend=function(){return i$2().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Lt.findBackend("cpu")),this.cpuBackend):null},Mt.prototype.shouldExecuteOnCPU=function(Xr,rn){var nn=this;return rn===void 0&&(rn=128),this.getCPUBackend()!=null&&Xr.every(function(an){return nn.texData.get(an.dataId).texture==null&&an.size<rn})},Mt.prototype.getGPGPUContext=function(){return this.gpgpu},Mt.prototype.complex=function(Xr,rn){var nn=this.makeOutput(Xr.shape,"complex64");return this.texData.get(nn.dataId).complexTensors={real:Lt.keep(Xr.clone()),imag:Lt.keep(rn.clone())},nn},Mt.prototype.real=function(Xr){return this.texData.get(Xr.dataId).complexTensors.real.clone()},Mt.prototype.imag=function(Xr){return this.texData.get(Xr.dataId).complexTensors.imag.clone()},Mt.prototype.slice=function(Xr,rn,nn){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.slice(Xr,rn,nn);if(k(nn)===0)return Fn([],nn,Xr.dtype);var an=this.texData.get(Xr.dataId).isPacked,on=io(Xr.shape,rn,nn);if(an||!on){var sn=i$2().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fs(nn):new ls(nn),ln=sn.getCustomSetupFunc(rn);return this.compileAndRun(sn,[Xr],null,ln)}return this.uploadToGPU(Xr.dataId),this.shallowSlice(Xr,rn,nn)},Mt.prototype.shallowSlice=function(Xr,rn,nn){var an=this.texData.get(Xr.dataId),on=this.makeOutput(nn,Xr.dtype),sn=this.texData.get(on.dataId);Object.assign(sn,an),sn.shape=nn,sn.dtype=Xr.dtype;var ln=so(rn,Xr.strides);an.slice&&(ln+=an.slice.flatOffset),sn.slice={flatOffset:ln,origDataId:an.slice&&an.slice.origDataId||Xr.dataId};var un=this.dataRefCount.get(sn.slice.origDataId)||1;return this.dataRefCount.set(sn.slice.origDataId,un+1),on},Mt.prototype.stridedSlice=function(Xr,rn,nn,an){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.stridedSlice(Xr,rn,nn,an);var on=ro(rn,nn,an);if(on.some(function(ln){return ln===0}))return Fn([],on);var sn=new ds(rn,an,on);return this.compileAndRun(sn,[Xr])},Mt.prototype.reverse=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new is(Xr.shape,rn):new as(Xr.shape,rn);return this.compileAndRun(nn,[Xr])},Mt.prototype.concat=function(Xr,rn){if(Xr[0].dtype==="complex64"){var nn=Xr.map(function(to){return Tn(to)}),an=Xr.map(function(to){return Nn(to)});return Dn(this.concat(nn,rn),this.concat(an,rn))}if(this.shouldExecuteOnCPU(Xr))return this.cpuBackend.concat(Xr,rn);if(Xr.length===1)return Xr[0];if(Xr.length>i$2().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var on=Math.floor(Xr.length/2),sn=this.concat(Xr.slice(0,on),rn),ln=this.concat(Xr.slice(on),rn);return this.concat([sn,ln],rn)}if(i$2().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&Xr[0].rank>1){var un=new Ga(Xr.map(function(to){return to.shape}),rn);return this.compileAndRun(un,Xr)}var cn=Sn(Xr.map(function(to){return to.shape}),rn),hn=Xr.map(function(to){return to.as2D(-1,k(to.shape.slice(rn)))}),fn=new za(hn.map(function(to){return to.shape}));return this.compileAndRun(fn,hn).reshape(cn)},Mt.prototype.neg=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.neg(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,Ts,Xr.dtype);var rn=new Cs(Xr.shape,Ts);return this.compileAndRun(rn,[Xr])},Mt.prototype.batchMatMul=function(Xr,rn,nn,an){var on=nn?Xr.shape[2]:Xr.shape[1],sn=an?rn.shape[1]:rn.shape[2],ln=nn?Xr.shape[1]:Xr.shape[2],un=Xr.shape[0];if((on===1||sn===1)&&ln>1e3){nn&&(Xr=Xr.transpose([0,2,1])),an&&(rn=rn.transpose([0,2,1]));var cn=sn===1?Xr:Xr.as3D(un,ln,1),hn=sn===1?2:1,fn=sn===1?rn.as3D(un,1,ln):rn;return this.multiply(cn,fn).sum(hn,!0)}var to=Dt(Xr.dtype,rn.dtype),uo=new Hi(Xr.shape,[un,on,sn],nn,an);return this.compileAndRun(uo,[Xr,rn],to)},Mt.prototype.fusedBatchMatMul=function(Xr){var rn=Xr.a,nn=Xr.b,an=Xr.transposeA,on=Xr.transposeB,sn=Xr.bias,ln=Xr.activation,un=Xr.preluActivationWeights,cn=an?rn.shape[2]:rn.shape[1],hn=on?nn.shape[1]:nn.shape[2],fn=rn.shape[0],to=Dt(rn.dtype,nn.dtype),uo=sn!=null,co=un!=null,Uo=ln?Qs(ln,!0):null,lo=new Hi(rn.shape,[fn,cn,hn],an,on,uo,Uo,co),ho=[rn,nn];return sn&&ho.push(sn),un&&ho.push(un),this.compileAndRun(lo,ho,to)},Mt.prototype.multiply=function(Xr,rn){if(Xr.dtype==="complex64"){var nn=this.texData.get(Xr.dataId),an=this.texData.get(rn.dataId),on=new Na(Da,Xr.shape,rn.shape),sn=new Na(Ta,Xr.shape,rn.shape),ln=[this.makeComplexComponentTensorInfo(Xr,nn.complexTensors.real),this.makeComplexComponentTensorInfo(Xr,nn.complexTensors.imag),this.makeComplexComponentTensorInfo(rn,an.complexTensors.real),this.makeComplexComponentTensorInfo(rn,an.complexTensors.imag)],un=this.compileAndRun(on,ln),cn=this.compileAndRun(sn,ln),hn=this.complex(un,cn);return un.dispose(),cn.dispose(),hn}if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.multiply(Xr,rn);if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,Oa,Xr.dtype);var fn=new Ba(Oa,Xr.shape,rn.shape);return this.compileAndRun(fn,[Xr,rn],Xr.dtype)},Mt.prototype.batchNormalization=function(Xr,rn,nn,an,on,sn){var ln=[Xr,rn,nn],un=null;sn!=null&&(un=sn.shape,ln.push(sn));var cn=null;if(on!=null&&(cn=on.shape,ln.push(on)),i$2().getBool("WEBGL_PACK_NORMALIZATION")){var hn=new Aa(Xr.shape,rn.shape,nn.shape,un,cn,an);return this.compileAndRun(hn,ln)}var fn=new Sa(Xr.shape,rn.shape,nn.shape,un,cn,an);return this.compileAndRun(fn,ln)},Mt.prototype.localResponseNormalization4D=function(Xr,rn,nn,an,on){var sn=i$2().getBool("WEBGL_PACK_NORMALIZATION")?new Vi(Xr.shape,rn,nn,an,on):new Wi(Xr.shape,rn,nn,an,on);return this.compileAndRun(sn,[Xr])},Mt.prototype.LRNGrad=function(Xr,rn,nn,an,on,sn,ln){var un=new Ui(rn.shape,an,on,sn,ln);return this.compileAndRun(un,[rn,nn,Xr])},Mt.prototype.tile=function(Xr,rn){if(Xr.dtype==="string"){var nn=this.readSync(Xr.dataId).map(function(on){return ot(on)});return ta(dr(Xr.shape,Xr.dtype,nn),rn)}var an=new gs(Xr.shape,rn);return this.compileAndRun(an,[Xr])},Mt.prototype.pad=function(Xr,rn,nn){var an=i$2().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yi(Xr.shape,rn,nn):new Xi(Xr.shape,rn,nn);return this.compileAndRun(an,[Xr])},Mt.prototype.transpose=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.transpose(Xr,rn);var nn=i$2().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xs(Xr.shape,rn):new ys(Xr.shape,rn);return this.compileAndRun(nn,[Xr])},Mt.prototype.gather=function(Xr,rn,nn){if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.gather(Xr,rn,nn);var an=new mi(Xr.shape,rn.size,nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.batchToSpaceND=function(Xr,rn,nn){C(Xr.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var an=rn.reduce(function(hn,fn){return hn*fn}),on=zr(Xr.shape,rn,an),sn=Gr(on.length,rn.length),ln=Hr(Xr.shape,rn,an),un=qr(nn,rn.length),cn=Kr(ln,nn,rn.length);return Xr.reshape(on).transpose(sn).reshape(ln).slice(un,cn)},Mt.prototype.spaceToBatchND=function(Xr,rn,nn){C(Xr.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var an=rn.reduce(function(fn,to){return fn*to}),on=[[0,0]];on.push.apply(on,nn);for(var sn=1+rn.length;sn<Xr.shape.length;++sn)on.push([0,0]);var ln=Xr.pad(on),un=zr(ln.shape,rn,an,!1),cn=Gr(un.length,rn.length,!1),hn=Hr(ln.shape,rn,an,!1);return ln.reshape(un).transpose(cn).reshape(hn)},Mt.prototype.reduce=function(Xr,rn,nn){var an=Xr.shape[0],on=Xr.shape[1],sn=$r(on),ln=new Ji({windowSize:sn,inSize:on,batchSize:an},rn),un=this.compileAndRun(ln,[Xr],nn);return un.shape[1]===1?un:this.reduce(un,rn,nn)},Mt.prototype.argReduce=function(Xr,rn,nn){nn===void 0&&(nn=null);var an=Xr.shape[0],on=Xr.shape[1];nn!=null&&(an=nn.shape[0],on=nn.shape[1]);var sn=$r(on),ln=new aa({windowSize:sn,inSize:on,batchSize:an},rn,nn==null),un=[Xr];nn!=null&&un.push(nn);var cn=this.compileAndRun(ln,un,"int32");return cn.shape[1]===1?cn:this.argReduce(Xr,rn,cn)},Mt.prototype.argReducePacked=function(Xr,rn,nn){nn===void 0&&(nn=null);var an=nn!=null?nn.shape:Xr.shape,on=$r(an[an.length-1]),sn=new Ra(an,on,rn,nn==null),ln=nn==null?[Xr]:[Xr,nn],un=this.compileAndRun(sn,ln,"int32");return un.rank===Xr.rank?this.argReducePacked(Xr,rn,un):un},Mt.prototype.sum=function(Xr,rn){Cn("sum",rn,Xr.rank);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on),ln=Tt(Xr.dtype);return this.reduce(sn,"sum",ln).reshape(an)},Mt.prototype.prod=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.prod(Xr,rn);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on),ln=Tt(Xr.dtype);return this.reduce(sn,"prod",ln).reshape(an)},Mt.prototype.unsortedSegmentSum=function(Xr,rn,nn){var an=0,on=En([an],Xr.rank),sn=Xr;on!=null&&(sn=Xr.transpose(on),an=In(1,Xr.rank)[0]);var ln=function(to,uo,co){for(var Uo=[],lo=to.length,ho=0;ho<lo;ho++)ho!==uo?Uo.push(to[ho]):Uo.push(co);return Uo}(sn.shape,an,nn),un=k([sn.shape[an]]),cn=sn.as2D(-1,un),hn=Tt(Xr.dtype),fn=this.segOpCompute(cn,"unsortedSegmentSum",rn,hn,nn).reshape(ln);return on!=null&&(fn=fn.transpose(Rn(on))),fn},Mt.prototype.segOpCompute=function(Xr,rn,nn,an,on){var sn=Xr.shape[0],ln=Xr.shape[1],un=function(fn,to){var uo,co=!1;for(fn<=Yr?(uo=fn,co=!0):uo=Y(fn,Math.floor(Math.sqrt(fn)));!co;)uo>to||uo===fn?co=!0:uo=Y(fn,uo+1);return uo}(ln,on),cn=new us({windowSize:un,inSize:ln,batchSize:sn,numSegments:on}),hn=this.compileAndRun(cn,[Xr,nn],an);return hn.shape[1]===on?hn:(nn=Kn(0,on).tile([ln/un]),this.segOpCompute(hn,rn,nn,an,on))},Mt.prototype.argMinMaxReduce=function(Xr,rn,nn){var an=[rn];if(Cn("arg"+nn.charAt(0).toUpperCase()+nn.slice(1),an,Xr.rank),!i$2().getBool("WEBGL_PACK_REDUCE")||Xr.rank<=2){var on=bn(Xr.shape,an),sn=on[0],ln=k(on[1]),un=Xr.as2D(-1,ln);return this.argReduce(un,nn).reshape(sn)}return this.argReducePacked(Xr,nn)},Mt.prototype.argMin=function(Xr,rn){return this.argMinMaxReduce(Xr,rn,"min")},Mt.prototype.argMax=function(Xr,rn){return this.argMinMaxReduce(Xr,rn,"max")},Mt.prototype.cumsum=function(Xr,rn,nn,an){if(rn!==Xr.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(Xr.rank-1)+" but got axis="+rn);var on=new ni(Xr.shape,nn,an);return this.compileAndRun(on,[Xr])},Mt.prototype.equal=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(equal(a, b));
`,"bool");var nn=new Ba("return float(a == b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.notEqual=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(notEqual(a, b));
`,"bool");var nn=new Ba("return float(a != b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.less=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.less(Xr,rn);if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(lessThan(a, b));
`,"bool");var nn=new Ba("return float(a < b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.lessEqual=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(lessThanEqual(a, b));
`,"bool");var nn=new Ba("return float(a <= b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.greater=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.greater(Xr,rn);if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(greaterThan(a, b));
`,"bool");var nn=new Ba("return float(a > b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.greaterEqual=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var nn=new Ba("return float(a >= b);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.logicalNot=function(Xr){var rn=new Cs(Xr.shape,"return float(!(x >= 1.0));");return this.compileAndRun(rn,[Xr])},Mt.prototype.logicalAnd=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var nn=new Ba("return float(a >= 1.0 && b >= 1.0);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.logicalOr=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var nn=new Ba("return float(a >= 1.0 || b >= 1.0);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"bool")},Mt.prototype.select=function(Xr,rn,nn){var an=new cs(Xr.rank,rn.shape,rn.rank);return this.compileAndRun(an,[Xr,rn,nn],Dt(rn.dtype,nn.dtype))},Mt.prototype.where=function(Xr){dn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var rn=Xr.dataSync();return na(Xr.shape,rn)},Mt.prototype.topk=function(Xr,rn,nn){return ea(Xr.dataSync(),Xr.shape,Xr.dtype,rn)},Mt.prototype.min=function(Xr,rn){Cn("min",rn,Xr.rank);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on);return this.reduce(sn,"min",sn.dtype).reshape(an)},Mt.prototype.minimum=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.minimum(Xr,rn);var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,Xr.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.mod=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,Xr.shape,rn.shape):new Ba(`if (b == 0.0) return NAN;
  return mod(a, b);`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.max=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.max(Xr,rn);Cn("max",rn,Xr.rank);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on);return this.reduce(sn,"max",sn.dtype).reshape(an)},Mt.prototype.maximum=function(Xr,rn){if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.maximum(Xr,rn);var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,Xr.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.all=function(Xr,rn){Cn("all",rn,Xr.rank);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on);return this.reduce(sn,"all",sn.dtype).reshape(an)},Mt.prototype.any=function(Xr,rn){Cn("any",rn,Xr.rank);var nn=bn(Xr.shape,rn),an=nn[0],on=k(nn[1]),sn=Xr.as2D(-1,on);return this.reduce(sn,"any",sn.dtype).reshape(an)},Mt.prototype.realDivide=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var nn=new Ba(`
if (a == b) {
  return 1.0;
};
return a / b;`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"float32")},Mt.prototype.floorDiv=function(Xr,rn){if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var nn=new Ba(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn],"int32")},Mt.prototype.add=function(Xr,rn){if(Xr.dtype==="complex64"&&rn.dtype==="complex64")return this.complexSeparableBinaryOp(Xr,rn,Fa);if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.add(Xr,rn);var nn=Dt(Xr.dtype,rn.dtype);if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,Fa,nn);var an=new Ba(Fa,Xr.shape,rn.shape);return this.compileAndRun(an,[Xr,rn],nn)},Mt.prototype.packedUnaryOp=function(Xr,rn,nn){var an=new Xs(Xr.shape,rn);return this.compileAndRun(an,[Xr],nn)},Mt.prototype.packedBinaryOp=function(Xr,rn,nn,an,on){on===void 0&&(on=!1);var sn=new La(nn,Xr.shape,rn.shape,on);return this.compileAndRun(sn,[Xr,rn],an)},Mt.prototype.complexSeparableBinaryOp=function(Xr,rn,nn){var an=this,on=this.texData.get(Xr.dataId),sn=this.texData.get(rn.dataId),ln=[[on.complexTensors.real,sn.complexTensors.real],[on.complexTensors.imag,sn.complexTensors.imag]].map(function(fn){var to=fn[0],uo=fn[1],co=an.makeComplexComponentTensorInfo(Xr,to),Uo=an.makeComplexComponentTensorInfo(rn,uo),lo=new Ba(nn,Xr.shape,rn.shape);return an.compileAndRun(lo,[co,Uo],Dt(to.dtype,uo.dtype))}),un=ln[0],cn=ln[1],hn=this.complex(un,cn);return un.dispose(),cn.dispose(),hn},Mt.prototype.makeComplexComponentTensorInfo=function(Xr,rn){return{dataId:rn.dataId,dtype:rn.dtype,shape:Xr.shape}},Mt.prototype.addN=function(Xr){if(Xr.length===1)return Xr[0];if(Xr.length>i$2().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var rn=Math.floor(Xr.length/2),nn=this.addN(Xr.slice(0,rn)),an=this.addN(Xr.slice(rn));return this.addN([nn,an])}var on=Xr.map(function(un){return un.dtype}).reduce(function(un,cn){return Dt(un,cn)}),sn=Xr.map(function(un){return un.shape}),ln=i$2().getBool("WEBGL_PACK")?new oa(Xr[0].shape,sn):new ra(Xr[0].shape,sn);return this.compileAndRun(ln,Xr,on)},Mt.prototype.subtract=function(Xr,rn){if(Xr.dtype==="complex64"&&rn.dtype==="complex64")return this.complexSeparableBinaryOp(Xr,rn,_a);if(this.shouldExecuteOnCPU([Xr,rn]))return this.cpuBackend.subtract(Xr,rn);var nn=Dt(Xr.dtype,rn.dtype);if(i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(Xr,rn,_a,Xr.dtype);var an=new Ba(_a,Xr.shape,rn.shape);return this.compileAndRun(an,[Xr,rn],nn)},Mt.prototype.pow=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,Xr.shape,rn.shape):new Ba(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Xr.shape,rn.shape),an=Dt(Xr.dtype,rn.dtype);return this.compileAndRun(nn,[Xr,rn],an)},Mt.prototype.ceil=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.ceil(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,Ns,Xr.dtype);var rn=new Cs(Xr.shape,Ns);return this.compileAndRun(rn,[Xr])},Mt.prototype.floor=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.floor(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,Fs,Xr.dtype);var rn=new Cs(Xr.shape,Fs);return this.compileAndRun(rn,[Xr])},Mt.prototype.sign=function(Xr){var rn=new Cs(Xr.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.isNaN=function(Xr){var rn=new Cs(Xr.shape,"return float(isnan(x));");return this.compileAndRun(rn,[Xr],"bool")},Mt.prototype.isInf=function(Xr){var rn=new Cs(Xr.shape,"return float(isinf(x));");return this.compileAndRun(rn,[Xr],"bool")},Mt.prototype.isFinite=function(Xr){var rn=new Cs(Xr.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(rn,[Xr],"bool")},Mt.prototype.round=function(Xr){var rn=new Cs(Xr.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.exp=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.exp(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,_s,Xr.dtype);var rn=new Cs(Xr.shape,_s);return this.compileAndRun(rn,[Xr])},Mt.prototype.expm1=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.expm1(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,Os,Xr.dtype);var rn=new Cs(Xr.shape,Os);return this.compileAndRun(rn,[Xr])},Mt.prototype.softmax=function(Xr,rn){var nn=O$1([rn],Xr.shape),an=this.max(Xr,nn),on=wn(an.shape,nn),sn=this.subtract(Xr,an.reshape(on)),ln=this.exp(sn),un=this.sum(ln,nn).reshape(on);return this.realDivide(ln,un)},Mt.prototype.log=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.log(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,Xr.dtype);var rn=new Cs(Xr.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(rn,[Xr])},Mt.prototype.log1p=function(Xr){var rn=new Cs(Xr.shape,"return log(1.0 + x);");return this.compileAndRun(rn,[Xr])},Mt.prototype.sqrt=function(Xr){var rn=new Cs(Xr.shape,"return sqrt(x);");return this.compileAndRun(rn,[Xr])},Mt.prototype.rsqrt=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.rsqrt(Xr);var rn=new Cs(Xr.shape,"return inversesqrt(x);");return this.compileAndRun(rn,[Xr])},Mt.prototype.reciprocal=function(Xr){var rn=new Cs(Xr.shape,"return 1.0 / x;");return this.compileAndRun(rn,[Xr])},Mt.prototype.relu=function(Xr){var rn;return rn=i$2().getBool("WEBGL_PACK")?new Xs(Xr.shape,qs):new Cs(Xr.shape,ks),this.compileAndRun(rn,[Xr])},Mt.prototype.relu6=function(Xr){var rn;return rn=i$2().getBool("WEBGL_PACK")?new Xs(Xr.shape,Ks):new Cs(Xr.shape,Ss),this.compileAndRun(rn,[Xr])},Mt.prototype.prelu=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(Pa,Xr.shape,rn.shape):new Ba(Ma,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.elu=function(Xr){if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,js,Xr.dtype);var rn=new Cs(Xr.shape,As);return this.compileAndRun(rn,[Xr])},Mt.prototype.eluDer=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Xr.shape,rn.shape):new Ba("return (b >= 1.0) ? a : a * (b + 1.0);",Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.selu=function(Xr){var rn=new Cs(Xr.shape,Ds);return this.compileAndRun(rn,[Xr])},Mt.prototype.int=function(Xr){var rn=new Cs(Xr.shape,"return float(int(x));");return this.compileAndRun(rn,[Xr],"int32")},Mt.prototype.clip=function(Xr,rn,nn){var an,on=(an=i$2().getBool("WEBGL_PACK_CLIP")?new Ua(Xr.shape):new Wa(Xr.shape)).getCustomSetupFunc(rn,nn);return this.compileAndRun(an,[Xr],null,on)},Mt.prototype.abs=function(Xr){if(this.shouldExecuteOnCPU([Xr]))return this.cpuBackend.abs(Xr);if(i$2().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(Xr,Is,Xr.dtype);var rn=new Cs(Xr.shape,Is);return this.compileAndRun(rn,[Xr])},Mt.prototype.complexAbs=function(Xr){var rn=this.texData.get(Xr.dataId),nn=new Va(Xr.shape),an=[this.makeComplexComponentTensorInfo(Xr,rn.complexTensors.real),this.makeComplexComponentTensorInfo(Xr,rn.complexTensors.imag)];return this.compileAndRun(nn,an)},Mt.prototype.sigmoid=function(Xr){var rn=new Cs(Xr.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(rn,[Xr])},Mt.prototype.softplus=function(Xr){var rn=new Cs(Xr.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.sin=function(Xr){var rn=new Cs(Xr.shape,Ms);return this.compileAndRun(rn,[Xr])},Mt.prototype.cos=function(Xr){var rn=new Cs(Xr.shape,Bs);return this.compileAndRun(rn,[Xr])},Mt.prototype.tan=function(Xr){var rn=new Cs(Xr.shape,"return tan(x);");return this.compileAndRun(rn,[Xr])},Mt.prototype.asin=function(Xr){var rn=new Cs(Xr.shape,Ps);return this.compileAndRun(rn,[Xr])},Mt.prototype.acos=function(Xr){var rn=new Cs(Xr.shape,Ls);return this.compileAndRun(rn,[Xr])},Mt.prototype.atan=function(Xr){var rn=new Cs(Xr.shape,Ws);return this.compileAndRun(rn,[Xr])},Mt.prototype.atan2=function(Xr,rn){var nn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,Xr.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,Xr.shape,rn.shape);return this.compileAndRun(nn,[Xr,rn])},Mt.prototype.sinh=function(Xr){var rn=new Cs(Xr.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.cosh=function(Xr){var rn=new Cs(Xr.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.tanh=function(Xr){var rn=new Cs(Xr.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.asinh=function(Xr){var rn=new Cs(Xr.shape,Us);return this.compileAndRun(rn,[Xr])},Mt.prototype.acosh=function(Xr){var rn=new Cs(Xr.shape,Vs);return this.compileAndRun(rn,[Xr])},Mt.prototype.atanh=function(Xr){var rn=new Cs(Xr.shape,zs);return this.compileAndRun(rn,[Xr])},Mt.prototype.erf=function(Xr){var rn=new Cs(Xr.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(rn,[Xr])},Mt.prototype.step=function(Xr,rn){var nn=new Cs(Xr.shape,function(an){return an===void 0&&(an=0),Es+`
    return x > 0.0 ? 1.0 : float(`+an+`);
  `}(rn));return this.compileAndRun(nn,[Xr])},Mt.prototype.conv2dByMatMul=function(Xr,rn,nn,an,on,sn){var ln=Xr.shape,un=this.texData.get(Xr.dataId),cn=nn.inChannels,hn=ln[0]*ln[1]*ln[2],fn=nn.outChannels,to=nn.dataFormat==="channelsLast",uo=(hn===1||fn===1)&&cn>1e3,co=ln[2]%2!=0&&!!un.isPacked;if(uo||!i$2().getBool("WEBGL_LAZILY_UNPACK")||!i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!co){var Uo=to?ln[0]*ln[1]*ln[2]:ln[0]*ln[2]*ln[3],lo=this.reshape(Xr,[1,Uo,nn.inChannels]),ho=this.reshape(rn,[1,nn.inChannels,nn.outChannels]);return this.reshape(this.fusedBatchMatMul({a:lo,b:ho,transposeA:!1,transposeB:!1,bias:an,activation:on,preluActivationWeights:sn}),nn.outShape)}var fo=to?ln[0]*ln[1]*(ln[2]+1):ln[0]*ln[2]*(ln[3]+1),mo={dataId:Xr.dataId,shape:[1,fo,nn.inChannels],dtype:Xr.dtype},_d=un.shape;un.shape=un.shape.slice(),un.shape[un.shape.length-2]++,C(_e$1(un.shape,mo.shape),function(){return"packed reshape "+un.shape+" to "+mo.shape+" isn't free"});var ep=this.reshape(rn,[1,nn.inChannels,nn.outChannels]),rp=this.fusedBatchMatMul({a:mo,b:ep,transposeA:!1,transposeB:!1,bias:an,activation:on,preluActivationWeights:sn}),ap=this.texData.get(rp.dataId);return C(ap.isPacked,function(){return"batchMatMul result is expected to be packed"}),un.shape=_d,ap.shape=nn.outShape,Lt.makeTensorFromDataId(rp.dataId,nn.outShape,rp.dtype)},Mt.prototype.conv2dWithIm2Row=function(Xr,rn,nn,an,on,sn){var ln=nn.filterWidth,un=nn.filterHeight,cn=nn.inChannels,hn=nn.outWidth,fn=nn.outHeight,to=nn.dataFormat==="channelsLast",uo=ln*un*cn,co=fn*hn,Uo=[uo,co],lo=Xr.squeeze([0]),ho=rn.reshape([1,uo,-1]),fo=new Li(Uo,lo.shape,nn),mo=this.compileAndRun(fo,[lo]).reshape([1,Uo[0],Uo[1]]),_d=an!=null,ep=sn!=null,rp=on?Qs(on,!0):null,ap=new Hi(mo.shape,[1,co,nn.outChannels],!0,!1,_d,rp,ep),sp=[mo,ho];an&&sp.push(an),ep&&sp.push(sn);var up=this.compileAndRun(ap,sp);return to?up.reshape([1,fn,hn,nn.outChannels]):up.reshape([1,nn.outChannels,fn,hn])},Mt.prototype.fusedConv2d=function(Xr){var rn=Xr.input,nn=Xr.filter,an=Xr.convInfo,on=Xr.bias,sn=Xr.activation,ln=Xr.preluActivationWeights;if(an.filterHeight===1&&an.filterWidth===1&&an.dilationHeight===1&&an.dilationWidth===1&&an.strideHeight===1&&an.strideWidth===1&&(an.padInfo.type==="SAME"||an.padInfo.type==="VALID"))return this.conv2dByMatMul(rn,nn,an,on,sn,ln);if(i$2().getBool("WEBGL_CONV_IM2COL")&&rn.shape[0]===1)return this.conv2dWithIm2Row(rn,nn,an,on,sn,ln);var un=on!=null,cn=ln!=null,hn=sn?Qs(sn,!1):null,fn=new Qa(an,un,hn,cn),to=[rn,nn];return on&&to.push(on),ln&&to.push(ln),this.compileAndRun(fn,to)},Mt.prototype.conv2d=function(Xr,rn,nn){if(nn.filterHeight===1&&nn.filterWidth===1&&nn.dilationHeight===1&&nn.dilationWidth===1&&nn.strideHeight===1&&nn.strideWidth===1&&(nn.padInfo.type==="SAME"||nn.padInfo.type==="VALID"))return this.conv2dByMatMul(Xr,rn,nn);if(i$2().getBool("WEBGL_CONV_IM2COL")&&Xr.shape[0]===1)return this.conv2dWithIm2Row(Xr,rn,nn);var an=new Qa(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.conv2dDerInput=function(Xr,rn,nn){var an=new Ka(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.conv2dDerFilter=function(Xr,rn,nn){var an=new qa(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.fusedDepthwiseConv2D=function(Xr){var rn,nn=Xr.input,an=Xr.filter,on=Xr.convInfo,sn=Xr.bias,ln=Xr.activation,un=Xr.preluActivationWeights,cn=i$2().getBool("WEBGL_PACK_DEPTHWISECONV")&&on.strideWidth<=2&&on.outChannels/on.inChannels==1,hn=ln?Qs(ln,cn):null,fn=[nn,an],to=sn!=null,uo=un!=null;return to&&fn.push(sn),uo&&fn.push(un),cn?(rn=new ti(on,to,hn,uo),this.compileAndRun(rn,fn)):(rn=new Za(on,to,hn,uo),this.compileAndRun(rn,fn))},Mt.prototype.depthwiseConv2D=function(Xr,rn,nn){var an;return i$2().getBool("WEBGL_PACK_DEPTHWISECONV")&&nn.strideWidth<=2&&nn.outChannels/nn.inChannels==1?(an=new ti(nn),this.compileAndRun(an,[Xr,rn])):(an=new Za(nn),this.compileAndRun(an,[Xr,rn]))},Mt.prototype.depthwiseConv2DDerInput=function(Xr,rn,nn){var an=new $a(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.depthwiseConv2DDerFilter=function(Xr,rn,nn){var an=new Ya(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.conv3d=function(Xr,rn,nn){var an=new Ja(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.conv3dDerInput=function(Xr,rn,nn){var an=new Xa(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.conv3dDerFilter=function(Xr,rn,nn){var an=new ja(nn);return this.compileAndRun(an,[Xr,rn])},Mt.prototype.maxPool=function(Xr,rn){var nn=new $i(rn,"max",!1);return this.compileAndRun(nn,[Xr])},Mt.prototype.avgPool=function(Xr,rn){var nn=new $i(rn,"avg",!1);return this.compileAndRun(nn,[Xr],"float32")},Mt.prototype.maxPoolBackprop=function(Xr,rn,nn,an){var on=new $i(an,"max",!0),sn=this.compileAndRun(on,[rn]),ln=new zi(an),un=this.compileAndRun(ln,[Xr,sn],rn.dtype);return sn.dispose(),un},Mt.prototype.avgPoolBackprop=function(Xr,rn,nn){var an=new Ia(nn);return this.compileAndRun(an,[Xr],rn.dtype)},Mt.prototype.cast=function(Xr,rn){return Po(Xr,rn,this)},Mt.prototype.unstack=function(Xr,rn){for(var nn=Xr.shape[rn],an=new Array(Xr.rank-1),on=0,sn=0;sn<Xr.rank;sn++)sn!==rn&&(an[on++]=Xr.shape[sn]);var ln=new Array(Xr.rank).fill(0),un=Xr.shape.slice();un[rn]=1;var cn=new Array(nn);for(sn=0;sn<cn.length;sn++)ln[rn]=sn,cn[sn]=this.slice(Xr,ln,un).reshape(an);return cn},Mt.prototype.avgPool3d=function(Xr,rn){var nn=new Qi(rn,"avg",!1);return this.compileAndRun(nn,[Xr],"float32")},Mt.prototype.avgPool3dBackprop=function(Xr,rn,nn){var an=new ka(nn);return this.compileAndRun(an,[Xr],rn.dtype)},Mt.prototype.maxPool3d=function(Xr,rn){var nn=new Qi(rn,"max",!1);return this.compileAndRun(nn,[Xr],"float32")},Mt.prototype.maxPool3dBackprop=function(Xr,rn,nn,an){var on=new Qi(an,"max",!0),sn=this.compileAndRun(on,[rn]),ln=new Gi(an),un=this.compileAndRun(ln,[Xr,sn],rn.dtype);return sn.dispose(),un},Mt.prototype.reshape=function(Xr,rn){var nn=this.texData.get(Xr.dataId);if(nn.isPacked&&!_e$1(Xr.shape,rn)&&(nn.texture===null||!_e$1(nn.shape,rn))){var an=this.packedReshape(Xr,rn);return Lt.makeTensorFromDataId(an.dataId,an.shape,an.dtype)}return Lo(Xr,rn)},Mt.prototype.resizeBilinear=function(Xr,rn,nn,an){var on=i$2().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ns(Xr.shape,rn,nn,an):new es(Xr.shape,rn,nn,an);return this.compileAndRun(on,[Xr],"float32")},Mt.prototype.resizeBilinearBackprop=function(Xr,rn,nn){var an=new ts(Xr,rn,nn);return this.compileAndRun(an,[Xr])},Mt.prototype.resizeNearestNeighbor=function(Xr,rn,nn,an){var on=new os(Xr.shape,rn,nn,an);return this.compileAndRun(on,[Xr])},Mt.prototype.resizeNearestNeighborBackprop=function(Xr,rn,nn){var an=new rs(Xr,rn,nn);return this.compileAndRun(an,[Xr])},Mt.prototype.multinomial=function(Xr,rn,nn,an){var on=rn?Xr:go(Xr),sn=on.shape[0],ln=on.shape[1],un=new qi(sn,ln,nn),cn=un.getCustomSetupFunc(an);return this.compileAndRun(un,[on],"int32",cn)},Mt.prototype.oneHot=function(Xr,rn,nn,an){var on=new Ki(Xr.size,rn,nn,an);return this.compileAndRun(on,[Xr])},Mt.prototype.diag=function(Xr){var rn=new si(Xr.size);return this.compileAndRun(rn,[Xr])},Mt.prototype.nonMaxSuppression=function(Xr,rn,nn,an,on){return dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),jo(Xr.dataSync(),rn.dataSync(),nn,an,on)},Mt.prototype.cropAndResize=function(Xr,rn,nn,an,on,sn){var ln=new ei(Xr.shape,rn.shape,an,on,sn);return this.compileAndRun(ln,[Xr,rn,nn],"float32")},Mt.prototype.depthToSpace=function(Xr,rn,nn){C(rn>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+rn});var an=Xr.shape[0],on=nn==="NHWC"?Xr.shape[1]:Xr.shape[2],sn=nn==="NHWC"?Xr.shape[2]:Xr.shape[3],ln=nn==="NHWC"?Xr.shape[3]:Xr.shape[1],un=on*rn,cn=sn*rn,hn=ln/(rn*rn),fn=new ii(nn==="NHWC"?[an,un,cn,hn]:[an,hn,un,cn],rn,nn);return this.compileAndRun(fn,[Xr])},Mt.prototype.split=function(Xr,rn,nn){return Zo(Xr,rn,nn)},Mt.prototype.scatterND=function(Xr,rn,nn){var an=Zr(0,Xr,nn),on=an.sliceRank,sn=an.numUpdates,ln=an.sliceSize,un=an.strides,cn=an.outputSize,hn=[cn/ln,ln],fn=Xr.reshape([sn,on]),to=rn.reshape([sn,ln]);if(cn===0)return Lo(Fn([]),nn);var uo=On(0),co=new ss(sn,on,fn.rank,to.rank,un,hn);return this.compileAndRun(co,[to,fn,uo]).reshape(nn)},Mt.prototype.sparseToDense=function(Xr,rn,nn,an){var on=Zr(0,Xr,nn),sn=on.sliceRank,ln=on.numUpdates,un=on.strides,cn=on.outputSize,hn=new ss(ln,sn,Xr.rank,rn.rank,un,[cn,1]);return this.compileAndRun(hn,[rn,Xr,an]).reshape(nn)},Mt.prototype.fft=function(Xr){return this.fftImpl(Xr,!1)},Mt.prototype.ifft=function(Xr){return this.fftImpl(Xr,!0)},Mt.prototype.fftImpl=function(Xr,rn){var nn=this.texData.get(Xr.dataId),an=new pi(fi,Xr.shape,rn),on=new pi(di,Xr.shape,rn),sn=[this.makeComplexComponentTensorInfo(Xr,nn.complexTensors.real),this.makeComplexComponentTensorInfo(Xr,nn.complexTensors.imag)],ln=this.compileAndRun(an,sn),un=this.compileAndRun(on,sn),cn=this.complex(ln,un).as2D(Xr.shape[0],Xr.shape[1]);return ln.dispose(),un.dispose(),cn},Mt.prototype.gatherND=function(Xr,rn){var nn=rn.shape,an=nn[nn.length-1],on=jr(Xr,rn),sn=on[0],ln=on[1],un=on[2],cn=on[3],hn=rn.reshape([ln,an]),fn=Xr.reshape([Xr.size/un,un]),to=new gi(an,cn,[ln,un]);return this.compileAndRun(to,[fn,hn]).reshape(sn)},Mt.prototype.fill=function(Xr,rn,nn){if((nn=nn||j$1(rn))==="string"){var an=P(nn,k(Xr));return an.fill(rn),Lt.makeTensor(an,Xr,nn,this)}var on=new vi(Xr,rn),sn=on.getCustomSetupFunc(rn);return this.compileAndRun(on,[],nn,sn)},Mt.prototype.onesLike=function(Xr){if(Xr.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(Xr.shape,1,Xr.dtype)},Mt.prototype.zerosLike=function(Xr){return this.fill(Xr.shape,Xr.dtype==="string"?"":0,Xr.dtype)},Mt.prototype.linspace=function(Xr,rn,nn){return Wo(Xr,rn,nn)},Mt.prototype.makeTensorInfo=function(Xr,rn){var nn=this.write(null,Xr,rn);return this.texData.get(nn).usage=null,{dataId:nn,shape:Xr,dtype:rn}},Mt.prototype.makeOutput=function(Xr,rn){var nn=this.makeTensorInfo(Xr,rn).dataId;return Lt.makeTensorFromDataId(nn,Xr,rn,this)},Mt.prototype.unpackTensor=function(Xr){var rn=new Ys(Xr.shape);return this.runWebGLProgram(rn,[Xr],Xr.dtype)},Mt.prototype.packTensor=function(Xr){var rn=new ji(Xr.shape);return this.runWebGLProgram(rn,[Xr],Xr.dtype,null,!0)},Mt.prototype.packedReshape=function(Xr,rn){var nn=[Ae(Xr.shape)].concat(De(Xr.shape)),an={dtype:Xr.dtype,shape:nn,dataId:Xr.dataId},on=[Ae(rn)].concat(De(rn)),sn=new Zi(on,nn),ln=this.runWebGLProgram(sn,[an],Xr.dtype,null,!0);return{dataId:ln.dataId,shape:rn,dtype:ln.dtype}},Mt.prototype.decode=function(Xr){var rn,nn=this.texData.get(Xr),an=nn.isPacked,on=nn.shape,sn=nn.dtype,ln=Te(on);return rn=an?new ai(ln):new oi(ln),{dtype:sn,shape:on,dataId:this.runWebGLProgram(rn,[{shape:ln,dtype:sn,dataId:Xr}],sn,null,!0).dataId}},Mt.prototype.runWebGLProgram=function(Xr,rn,nn,an,on){var sn=this;on===void 0&&(on=!1);var ln=this.makeTensorInfo(Xr.outputShape,nn),un=this.texData.get(ln.dataId);if(Xr.packedOutput&&(un.isPacked=!0),Xr.outPackingScheme===Vt.DENSE){var cn=Yt(Xr.outputShape);un.texShape=cn.map(function(fo){return 2*fo})}if(Xr.outTexUsage!=null&&(un.usage=Xr.outTexUsage),k(ln.shape)===0)return un.values=B$1(ln.dtype,0),ln;var hn=[],fn=rn.map(function(fo){if(fo.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var mo=sn.texData.get(fo.dataId);if(mo.texture==null){if(!Xr.packedInputs&&k(fo.shape)<=i$2().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:fo.shape,texData:null,isUniform:!0,uniformValues:mo.values};Xr.packedInputs&&(mo.isPacked=!0,mo.shape=fo.shape)}else if(!!mo.isPacked!=!!Xr.packedInputs)fo=mo.isPacked?sn.unpackTensor(fo):sn.packTensor(fo),hn.push(fo),mo=sn.texData.get(fo.dataId);else if(mo.isPacked&&!_e$1(mo.shape,fo.shape)){var _d=fo,ep=fo.shape;fo.shape=mo.shape,fo=sn.packedReshape(fo,ep),hn.push(fo),mo=sn.texData.get(fo.dataId),_d.shape=ep}return sn.uploadToGPU(fo.dataId),{shape:fo.shape,texData:mo,isUniform:!1}});this.uploadToGPU(ln.dataId);var to,uo={shape:ln.shape,texData:un,isUniform:!1},co=function(fo,mo,_d){var ep="";mo.concat(_d).forEach(function(sp){var up=sp.texData!=null&&sp.texData.slice!=null&&sp.texData.slice.flatOffset>0,pp=sp.isUniform?"uniform":sp.texData.texShape;ep+=sp.shape+"_"+pp+"_"+up});var rp=fo.userCode,ap=fo.constructor.name;return ap+="_"+ep+"_"+rp}(Xr,fn,uo),Uo=this.getAndSaveBinary(co,function(){return function(fo,mo,_d,ep){var rp=mo.userCode,ap=_d.map(function(tp,np){var fp={logicalShape:tp.shape,texShape:tp.isUniform?null:tp.texData.texShape,isUniform:tp.isUniform,isPacked:!tp.isUniform&&tp.texData.isPacked,flatOffset:null};return tp.texData!=null&&tp.texData.slice!=null&&tp.texData.slice.flatOffset>0&&(fp.flatOffset=tp.texData.slice.flatOffset),{name:mo.variableNames[np],shapeInfo:fp}}),sp=ap.map(function(tp){return tp.shapeInfo}),up={logicalShape:ep.shape,texShape:ep.texData.texShape,isUniform:!1,isPacked:ep.texData.isPacked,flatOffset:null},pp=fa(ap,up,rp,mo.packedInputs),hp=fo.createProgram(pp),vp=null,gp=fo.getUniformLocation(hp,"NAN",!1);i$2().getNumber("WEBGL_VERSION")===1&&(vp=fo.getUniformLocation(hp,"INFINITY",!1));for(var mp={},lp=0;lp<mo.variableNames.length;lp++){var cp=mo.variableNames[lp];mp[cp]=fo.getUniformLocation(hp,cp,!1),mp["offset"+cp]=fo.getUniformLocation(hp,"offset"+cp,!1)}return{program:mo,source:pp,webGLProgram:hp,uniformLocations:mp,inShapeInfos:sp,outShapeInfo:up,infLoc:vp,nanLoc:gp}}(sn.gpgpu,Xr,fn,uo)}),lo=this.activeTimers!=null;if(lo&&(to=this.startTimer()),function(fo,mo,_d,ep,rp){Pi(mo.inShapeInfos,_d),Pi([mo.outShapeInfo],[ep]);var ap=ep.texData.texture,sp=ep.texData.texShape;ep.texData.isPacked?fo.setOutputPackedMatrixTexture(ap,sp[0],sp[1]):fo.setOutputMatrixTexture(ap,sp[0],sp[1]),fo.setProgram(mo.webGLProgram),i$2().getNumber("WEBGL_VERSION")===1&&mo.infLoc!==null&&fo.gl.uniform1f(mo.infLoc,1/0),mo.nanLoc!==null&&fo.gl.uniform1f(mo.nanLoc,NaN),_d.forEach(function(up,pp){var hp=mo.program.variableNames[pp],vp=mo.uniformLocations[hp],gp=mo.uniformLocations["offset"+hp];if(vp!=null)if(up.isUniform)if(k(up.shape)<2)fo.gl.uniform1f(vp,up.uniformValues[0]);else{var mp=up.uniformValues;mp instanceof Float32Array||(mp=new Float32Array(mp)),fo.gl.uniform1fv(vp,mp)}else up.texData.slice!=null&&gp!=null&&fo.gl.uniform1i(gp,up.texData.slice.flatOffset),fo.setInputMatrixTexture(up.texData.texture,vp,pp)}),rp!=null&&rp(fo,mo.webGLProgram),fo.executeProgram()}(this.gpgpu,Uo,fn,uo,an),hn.forEach(function(fo){return sn.disposeData(fo.dataId)}),lo&&(to=this.endTimer(to),this.activeTimers.push({name:Xr.constructor.name,query:this.getQueryTime(to)})),!i$2().getBool("WEBGL_LAZILY_UNPACK")&&un.isPacked&&on===!1){var ho=this.unpackTensor(ln);return this.disposeData(ln.dataId),ho}return ln},Mt.prototype.compileAndRun=function(Xr,rn,nn,an,on){on===void 0&&(on=!1),nn=nn||rn[0].dtype;var sn=this.runWebGLProgram(Xr,rn,nn,an,on);return Lt.makeTensorFromDataId(sn.dataId,sn.shape,sn.dtype)},Mt.prototype.getAndSaveBinary=function(Xr,rn){return Xr in this.binaryCache||(this.binaryCache[Xr]=rn()),this.binaryCache[Xr]},Mt.prototype.getTextureManager=function(){return this.textureManager},Mt.prototype.dispose=function(){var Xr=this;this.disposed||(i$2().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(rn){Xr.gpgpu.deleteProgram(Xr.binaryCache[rn].webGLProgram),delete Xr.binaryCache[rn]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},Mt.prototype.floatPrecision=function(){var Xr=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(function(){if(!i$2().get("WEBGL_RENDER_FLOAT32_ENABLED")){var rn=i$2().getBool("DEBUG");i$2().set("DEBUG",!1);var nn=Xr.abs(On(1e-8)).dataSync()[0];if(i$2().set("DEBUG",rn),nn>0)return 32}return 16})),this.floatPrecisionValue},Mt.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},Mt.prototype.uploadToGPU=function(Xr){var rn,nn=this.texData.get(Xr),an=nn.shape,on=nn.dtype,sn=nn.values,ln=nn.texture,un=nn.usage,cn=nn.isPacked;if(ln==null){var hn,fn=this.activeTimers!=null;fn&&(hn=et());var to=nn.texShape;if(to==null&&(to=Ne(an,cn),nn.texShape=to),sn!=null){var uo=Te(an),co=void 0,Uo=to[1],lo=to[0],ho=sn instanceof Uint8Array;cn?(Uo=(rn=$t(to[0],to[1]))[0],lo=rn[1],co=new hi(uo,[lo,Uo],ho)):co=new li(uo,[lo,Uo],ho);var fo=this.makeTensorInfo([lo,Uo],on);this.texData.get(fo.dataId).usage=ho?zt.PIXELS:zt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(fo.dataId),Uo,lo,sn);var mo=this.runWebGLProgram(co,[fo],on,null,!0),_d=this.texData.get(mo.dataId);nn.texture=_d.texture,nn.texShape=_d.texShape,nn.isPacked=_d.isPacked,nn.usage=_d.usage,this.disposeData(fo.dataId),this.texData.delete(mo.dataId),nn.values=null,fn&&(this.uploadWaitMs+=et()-hn)}else{var ep=this.acquireTexture(to,un,on,cn);nn.texture=ep}}},Mt.prototype.convertAndCacheOnCPU=function(Xr,rn){var nn=this.texData.get(Xr),an=nn.dtype;return this.releaseGPUData(Xr),rn!=null&&(nn.values=function(on,sn){if(sn==="float32"||sn==="complex64")return on;if(sn==="int32"||sn==="bool"){for(var ln=sn==="int32"?new Int32Array(on.length):new Uint8Array(on.length),un=0;un<ln.length;++un)ln[un]=Math.round(on[un]);return ln}throw new Error("Unknown dtype "+sn)}(rn,an)),nn.values},Mt.prototype.acquireTexture=function(Xr,rn,nn,an){if(this.numBytesInGPU+=this.computeBytes(Xr,nn),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var on=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+on+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(Xr,rn,an)},Mt.prototype.computeBytes=function(Xr,rn){return Xr[0]*Xr[1]*z(rn)},Mt}(bo);Wt()&&Lt.registerBackend("webgl",function(){return new Zs},2);var tu=An({square_:function(st){var Mt=mn(st,"x","square"),Xr=[Mt];return Lt.runKernelFunc(function(rn,nn){return nn([Mt]),rn.square(Mt)},{x:Mt},null,"Square",{},Xr,[])}}),eu="SquaredDifference",nu=An({squaredDifference_:function(st,Mt){var Xr,rn=mn(st,"a","squaredDifference"),nn=mn(Mt,"b","squaredDifference");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape);var an={a:rn,b:nn},on=[rn,nn];return Lt.runKernelFunc(function(sn,ln){var un=sn.squaredDifference(rn,nn);return ln([rn,nn]),un},an,function(sn,ln){var un=ln[0],cn=ln[1],hn=On(2);return{a:function(){return sn.mul(un.sub(cn).mul(hn))},b:function(){return sn.mul(cn.sub(un).mul(hn))}}},eu,{},on,[])}}),ru=An({abs_:function(st){var Mt=mn(st,"x","abs");return Mt.dtype==="complex64"?Lt.runKernelFunc(function(Xr){return Xr.complexAbs(Mt)},{$x:Mt}):Lt.runKernelFunc(function(Xr,rn){var nn=Xr.abs(Mt);return rn([Mt]),nn},{x:Mt},function(Xr,rn){var nn=rn[0];return{x:function(){return Xr.mul(nn.toFloat().step(-1))}}},"Abs")}}),ou=An({acos_:function(st){var Mt=mn(st,"x","acos");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.acos(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.divStrict(On(1).sub(nn.toFloat().square()).sqrt()).neg()}}})}}),au=An({acosh_:function(st){var Mt=mn(st,"x","acosh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.acosh(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.divStrict(nn.toFloat().square().sub(1).sqrt())}}})}}),iu=An({asin_:function(st){var Mt=mn(st,"x","asin");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.asin(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.divStrict(On(1).sub(nn.toFloat().square()).sqrt())}}})}}),su=An({asinh_:function(st){var Mt=mn(st,"x","asinh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.asinh(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.divStrict(On(1).add(nn.toFloat().square()).sqrt())}}})}}),uu=An({atan_:function(st){var Mt=mn(st,"x","atan");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.atan(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(nn.toFloat().square().add(1))}}})}}),cu=An({atanh_:function(st){var Mt=mn(st,"x","atanh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.atanh(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(On(1).sub(nn.toFloat().square()))}}})}}),lu=An({ceil_:function(st){var Mt=mn(st,"x","ceil");return Lt.runKernelFunc(function(Xr){return Xr.ceil(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),hu=An({clipByValue_:function(st,Mt,Xr){var rn=mn(st,"x","clipByValue");C(Mt<=Xr,function(){return"Error in clip: min ("+Mt+") must be less than or equal to max ("+Xr+")."});var nn=[rn],an={min:Mt,max:Xr};return Lt.runKernelFunc(function(on,sn){var ln=on.clip(rn,Mt,Xr);return sn([rn]),ln},{x:rn},function(on,sn){var ln=sn[0];return{x:function(){return on.where(ln.greaterEqual(Mt).logicalAnd(ln.lessEqual(Xr)),Xn(on))}}},"ClipByValue",an,nn)}}),fu=An({cos_:function(st){var Mt=mn(st,"x","cos"),Xr=[Mt];return Lt.runKernelFunc(function(rn,nn){var an=rn.cos(Mt);return nn([Mt]),an},{x:Mt},function(rn,nn){var an=nn[0];return{x:function(){return an.toFloat().sin().neg().mul(rn)}}},"Cos",{},Xr)}}),du=An({cosh_:function(st){var Mt=mn(st,"x","cosh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.cosh(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return nn.toFloat().sinh().mulStrict(Xr)}}})}}),pu=An({erf_:function(st){var Mt=mn(st,"x","erf");return C(Mt.dtype==="int32"||Mt.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),Mt.dtype==="int32"&&(Mt=Mt.toFloat()),Lt.runKernelFunc(function(Xr,rn){var nn=Xr.erf(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.mul(nn.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),vu=An({exp_:function(st){var Mt=mn(st,"x","exp");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.exp(Mt);return rn([nn]),nn},{x:Mt},function(Xr,rn){return{x:function(){return Xr.mulStrict(rn[0])}}},"Exp",{},[],[!0])}}),mu=An({expm1_:function(st){var Mt=mn(st,"x","expm1");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.expm1(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.mul(nn.exp())}}})}}),gu=An({floor_:function(st){var Mt=mn(st,"x","floor");return Lt.runKernelFunc(function(Xr){return Xr.floor(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),yu=An({log_:function(st){var Mt=mn(st,"x","log"),Xr=[Mt];return Lt.runKernelFunc(function(rn,nn){var an=rn.log(Mt);return nn([Mt]),an},{x:Mt},function(rn,nn){var an=nn[0];return{x:function(){return rn.div(an.toFloat())}}},"Log",{},Xr)}}),xu=An({log1p_:function(st){var Mt=mn(st,"x","log1p");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.log1p(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(nn.add(1))}}})}}),bu=An({logSigmoid_:function(st){var Mt=mn(st,"x","logSigmoid");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.softplus(Mt.neg()).neg();return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.mul(nn.neg().sigmoid())}}})}}),wu=An({neg_:function(st){var Mt=mn(st,"x","neg"),Xr=[Mt];return Lt.runKernelFunc(function(rn){return rn.neg(Mt)},{x:Mt},function(rn){return{x:function(){return rn.neg()}}},"Neg",{},Xr)}}),Cu=An({reciprocal_:function(st){var Mt=mn(st,"x","reciprocal");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.reciprocal(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(nn.square().neg())}}})}}),Eu=An({round_:function(st){var Mt=mn(st,"x","round");return Lt.runKernelFunc(function(Xr){return Xr.round(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),Ru=An({rsqrt_:function(st){var Mt=mn(st,"x","rsqrt"),Xr=[Mt];return Lt.runKernelFunc(function(rn,nn){var an=rn.rsqrt(Mt);return nn([Mt]),an},{x:Mt},function(rn,nn){var an=nn[0];return{x:function(){return rn.div(an.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},Xr)}}),Iu=An({sigmoid_:function(st){var Mt=mn(st,"x","sigmoid");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.sigmoid(Mt);return rn([nn]),nn},{x:Mt},function(Xr,rn){var nn=rn[0];return{x:function(){return Xr.mul(nn.mul(On(1).sub(nn)))}}},"Sigmoid")}}),ku=An({sign_:function(st){var Mt=mn(st,"x","sign");return Lt.runKernelFunc(function(Xr){return Xr.sign(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),Su=An({isNaN_:function(st){var Mt=mn(st,"x","isNaN");return Lt.runKernelFunc(function(Xr){return Xr.isNaN(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),Au=An({isInf_:function(st){var Mt=mn(st,"x","isInf");return Lt.runKernelFunc(function(Xr){return Xr.isInf(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),Du=An({isFinite_:function(st){var Mt=mn(st,"x","isFinite");return Lt.runKernelFunc(function(Xr){return Xr.isFinite(Mt)},{$x:Mt},function(Xr){return{$x:function(){return Xn(Xr)}}})}}),Tu=An({sin_:function(st){var Mt=mn(st,"x","sin"),Xr=[Mt];return Lt.runKernelFunc(function(rn,nn){var an=rn.sin(Mt);return nn([Mt]),an},{x:Mt},function(rn,nn){var an=nn[0];return{x:function(){return an.toFloat().cos().mul(rn)}}},"Sin",{},Xr)}}),Nu=An({sinh_:function(st){var Mt=mn(st,"x","sinh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.sinh(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return nn.toFloat().cosh().mulStrict(Xr)}}})}}),Fu=An({softplus_:function(st){var Mt=mn(st,"x","softplus");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.softplus(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.mul(nn.sigmoid())}}})}}),_u=An({sqrt_:function(st){var Mt=mn(st,"x","sqrt");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.sqrt(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(nn.toFloat().sqrt().mul(2))}}})}}),Ou=An({step_:function(st,Mt){Mt===void 0&&(Mt=0);var Xr=mn(st,"x","step");return Lt.runKernelFunc(function(rn){return rn.step(Xr,Mt)},{$x:Xr},function(rn){return{$x:function(){return Xn(rn)}}})}}),Mu=An({tan_:function(st){var Mt=mn(st,"x","tan");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.tan(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Xr.div(nn.cos().square())}}})}}),Bu=An({tanh_:function(st){var Mt=mn(st,"x","tanh");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.tanh(Mt);return rn([nn]),nn},{x:Mt},function(Xr,rn){var nn=rn[0];return{x:function(){return On(1).sub(nn.square()).mulStrict(Xr)}}},"Tanh",{},null,[!0])}});function Pu(st,Mt,Xr,rn,nn,an){var on,sn,ln=mn(st,"x","batchNorm"),un=mn(Mt,"mean","batchNorm"),cn=mn(Xr,"variance","batchNorm");return nn!=null&&(on=mn(nn,"scale","batchNorm")),rn!=null&&(sn=mn(rn,"offset","batchNorm")),C(ln.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+ln.rank+"."}),C(un.rank===2||un.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+un.rank+"."}),C(cn.rank===2||cn.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+cn.rank+"."}),on!=null&&C(on.rank===2||on.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+on.rank+"."}),sn!=null&&C(sn.rank===2||sn.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+sn.rank+"."}),Uu(ln,un,cn,sn,on,an)}function Lu(st,Mt,Xr,rn,nn,an){var on,sn,ln=mn(st,"x","batchNorm"),un=mn(Mt,"mean","batchNorm"),cn=mn(Xr,"variance","batchNorm");return nn!=null&&(on=mn(nn,"scale","batchNorm")),rn!=null&&(sn=mn(rn,"offset","batchNorm")),C(ln.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+ln.rank+"."}),C(un.rank===3||un.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+un.rank+"."}),C(cn.rank===3||cn.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+cn.rank+"."}),on!=null&&C(on.rank===3||on.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+on.rank+"."}),sn!=null&&C(sn.rank===3||sn.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+sn.rank+"."}),Uu(ln,un,cn,sn,on,an)}function Wu(st,Mt,Xr,rn,nn,an){var on,sn,ln=mn(st,"x","batchNorm"),un=mn(Mt,"mean","batchNorm"),cn=mn(Xr,"variance","batchNorm");return nn!=null&&(on=mn(nn,"scale","batchNorm")),rn!=null&&(sn=mn(rn,"offset","batchNorm")),C(ln.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+ln.rank+"."}),C(un.rank===4||un.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+un.rank+"."}),C(cn.rank===4||cn.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+cn.rank+"."}),on!=null&&C(on.rank===4||on.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+on.rank+"."}),sn!=null&&C(sn.rank===4||sn.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+sn.rank+"."}),Uu(ln,un,cn,sn,on,an)}function Uu(st,Mt,Xr,rn,nn,an){an==null&&(an=.001);var on,sn,ln,un=mn(st,"x","batchNorm"),cn=mn(Mt,"mean","batchNorm"),hn=mn(Xr,"variance","batchNorm");nn!=null&&(on=mn(nn,"scale","batchNorm")),rn!=null&&(sn=mn(rn,"offset","batchNorm")),C(cn.rank===hn.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),C(sn==null||cn.rank===sn.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),C(on==null||cn.rank===on.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),ln=un.rank===0||un.rank===1?un.as4D(1,1,1,un.size):un.rank===2?un.as4D(1,1,un.shape[0],un.shape[1]):un.rank===3?un.as4D(1,un.shape[0],un.shape[1],un.shape[2]):un;var fn=[un,cn,hn,on];return Lt.runKernelFunc(function(to,uo){var co=to.batchNormalization(ln,Vu(cn),Vu(hn),an,Vu(on),Vu(sn));return uo([un,cn,hn,on]),co},{x:un,mean:cn,variance:hn,scale:on,offset:sn},function(to,uo){var co=uo,Uo=co[0],lo=co[1],ho=co[2],fo=co[3],mo=fo??On(1),_d=Eo(lo.shape,ln.shape),ep=[];if(lo.rank===1){for(var rp=0;rp<ln.shape.length-1;++rp)ep.push(ln.shape[rp]);ep.push(1)}var ap=Uo.sub(lo),sp=to.mul(mo),up=Ru(ho.add(On(an))),pp=up.mul(up).mul(up).mul(On(-.5));return{x:function(){return lo.rank===1?to.mul(Lr(up.as4D(1,1,1,lo.shape[0]),ep)).mul(mo).reshape(Uo.shape):to.mul(up).mul(mo).reshape(Uo.shape)},mean:function(){var hp=up.mul(On(-1)).mul(sp);return lo.rank===1&&(hp=hp.sum(_d)),hp.reshape(lo.shape)},variance:function(){var hp=pp.mul(ap).mul(sp);return lo.rank===1&&(hp=hp.sum(_d)),hp.reshape(lo.shape)},scale:function(){var hp=ap.mul(up),vp=to.mul(hp);return lo.rank===1&&(vp=vp.sum(_d)),vp.reshape(lo.shape)},offset:function(){var hp=to;return lo.rank===1&&(hp=hp.sum(_d)),hp.reshape(lo.shape)}}},"BatchNormalization",{varianceEpsilon:an},fn).reshape(un.shape)}function Vu(st){return st==null?null:st.rank===0?st.as1D():st.rank===1?st:st.rank===2?st.as4D(1,1,st.shape[0],st.shape[1]):st.rank===3?st.as4D(1,st.shape[0],st.shape[1],st.shape[2]):st}function zu(){Xe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Gu=An({batchNormalization2d_:function(st,Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.001),zu(),Pu(st,Mt,Xr,an,nn,rn)}}),Hu=An({batchNormalization3d_:function(st,Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.001),zu(),Lu(st,Mt,Xr,an,nn,rn)}}),qu=An({batchNormalization4d_:function(st,Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.001),zu(),Wu(st,Mt,Xr,an,nn,rn)}}),Ku=An({batchNormalization_:function(st,Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.001),zu(),Uu(st,Mt,Xr,an,nn,rn)}}),ju=An({batchNorm_:Uu}),Xu=An({batchNorm2d_:Pu}),Yu=An({batchNorm3d_:Lu}),$u=An({batchNorm4d_:Wu}),Qu=An({logicalAnd_:function(st,Mt){var Xr=mn(st,"a","logicalAnd","bool"),rn=mn(Mt,"b","logicalAnd","bool");return Ro(Xr.shape,rn.shape),Lt.runKernelFunc(function(nn){return nn.logicalAnd(Xr,rn)},{a:Xr,b:rn},null,"LogicalAnd")}}),Ju=An({logicalNot_:function(st){var Mt=mn(st,"x","logicalNot","bool");return Lt.runKernelFunc(function(Xr){return Xr.logicalNot(Mt)},{$x:Mt})}}),Zu=An({logicalOr_:function(st,Mt){var Xr=mn(st,"a","logicalOr","bool"),rn=mn(Mt,"b","logicalOr","bool");return Ro(Xr.shape,rn.shape),Lt.runKernelFunc(function(nn){return nn.logicalOr(Xr,rn)},{$a:Xr,$b:rn})}}),tc=An({logicalXor_:function(st,Mt){var Xr=mn(st,"a","logicalXor","bool"),rn=mn(Mt,"b","logicalXor","bool");return Ro(Xr.shape,rn.shape),Zu(st,Mt).logicalAnd(Qu(st,Mt).logicalNot())}}),ec=An({where_:function(st,Mt,Xr){var rn=mn(Mt,"a","where"),nn=mn(Xr,"b","where"),an=mn(st,"condition","where","bool");return E(rn.shape,nn.shape,"Error in where: "),an.rank===1?C(an.shape[0]===rn.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):E(an.shape,nn.shape,"Error in where: "),Lt.runKernelFunc(function(on,sn){var ln=on.select(an,rn,nn);return sn([an]),ln},{$condition:an,$a:rn,$b:nn},function(on,sn){var ln=sn[0];return{$condition:function(){return Xn(ln).toFloat()},$a:function(){return on.mul(ln.cast(on.dtype))},$b:function(){return on.mul(ln.logicalNot().cast(on.dtype))}}})}}),nc=function(st){return n(this,void 0,void 0,function(){var Mt,Xr,rn;return r$2(this,function(nn){switch(nn.label){case 0:return[4,(Mt=mn(st,"condition","whereAsync","bool")).data()];case 1:return Xr=nn.sent(),rn=na(Mt.shape,Xr),st!==Mt&&Mt.dispose(),[2,rn]}})})},rc=An({add_:function(st,Mt){var Xr,rn=mn(st,"a","add"),nn=mn(Mt,"b","add");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on){return on.add(rn,nn)},{a:rn,b:nn},function(on){return{a:function(){var sn=on,ln=Eo(rn.shape,an);return ln.length>0&&(sn=sn.sum(ln)),sn.reshape(rn.shape)},b:function(){var sn=on,ln=Eo(nn.shape,an);return ln.length>0&&(sn=sn.sum(ln)),sn.reshape(nn.shape)}}},"Add")}}),oc=An({addN_:function(st){C(Array.isArray(st),function(){return"The argument passed to tf.addN() must be a list of tensors"}),C(st.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+st.length});var Mt=st.map(function(nn,an){return mn(nn,"tensors"+an,"addN")}),Xr=Mt[0];Mt.forEach(function(nn){if(nn.dtype!==Xr.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),Mt.forEach(function(nn){if(!S$3(nn.shape,Xr.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var rn=Mt;return Lt.runKernelFunc(function(nn){return nn.addN(Mt)},rn,function(nn){var an={};return Mt.forEach(function(on,sn){an[sn]=function(){return nn.clone()}}),an},"AddN")}}),ac=An({addStrict_:function(st,Mt){var Xr=mn(st,"a","addStrict"),rn=mn(Mt,"b","addStrict");return E(Xr.shape,rn.shape,"Error in addStrict: "),Xr.add(rn)}}),ic=An({atan2_:function(st,Mt){var Xr,rn=mn(st,"a","atan2"),nn=mn(Mt,"b","atan2");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on,sn){var ln=on.atan2(rn,nn);return sn([rn,nn]),ln},{$a:rn,$b:nn},function(on,sn){var ln=sn[0],un=sn[1];return{$a:function(){var cn=rc(ln.square(),un.square()),hn=on.mul(un.div(cn)),fn=Eo(ln.shape,an);return fn.length>0&&(hn=hn.sum(fn)),hn.reshape(ln.shape)},$b:function(){var cn=rc(ln.square(),un.square()),hn=wu(on.mul(ln.div(cn))),fn=Eo(un.shape,an);return fn.length>0&&(hn=hn.sum(fn)),hn.reshape(un.shape)}}})}}),sc=An({div_:function(st,Mt){var Xr,rn=mn(st,"a","div"),nn=mn(Mt,"b","div");if(Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],rn.dtype==="int32"&&nn.dtype==="int32")return lc(rn,nn);var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on,sn){var ln=on.realDivide(rn,nn);return sn([rn,nn]),ln},{a:rn,b:nn},function(on,sn){var ln=sn[0],un=sn[1];return{a:function(){var cn=on.div(un.toFloat()),hn=Eo(ln.shape,an);return hn.length>0?cn.sum(hn).reshape(ln.shape):cn},b:function(){var cn=on.mul(ln.toFloat()),hn=Eo(un.shape,an);hn.length>0&&(cn=cn.sum(hn).reshape(un.shape));var fn=un.square();return cn.div(fn.toFloat()).neg()}}},"Div")}}),uc=An({divNoNan_:function(st,Mt){var Xr,rn=mn(st,"a","div"),nn=mn(Mt,"b","div");rn=(Xr=Nt(rn,nn))[0],nn=Xr[1];var an=sc(rn,nn),on=Xn(an),sn=nn.equal(on);return ec(sn,on,an)}}),cc=An({divStrict_:function(st,Mt){var Xr=mn(st,"a","div"),rn=mn(Mt,"b","div");return E(Xr.shape,rn.shape,"Error in divideStrict: "),Xr.div(rn)}}),lc=An({floorDiv_:function(st,Mt){var Xr,rn=mn(st,"a","floorDiv"),nn=mn(Mt,"b","floorDiv");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on,sn){var ln=on.floorDiv(rn,nn);return sn([rn,nn]),ln},{a:rn,b:nn},function(on,sn){var ln=sn[0],un=sn[1];return{a:function(){var cn=on.div(un.toFloat()),hn=Eo(ln.shape,an);return hn.length>0?cn.sum(hn).reshape(ln.shape):cn},b:function(){var cn=on.mul(ln.toFloat()),hn=Eo(un.shape,an);hn.length>0&&(cn=cn.sum(hn).reshape(un.shape));var fn=un.square();return cn.div(fn.toFloat()).neg()}}},"FloorDiv")}}),hc=An({maximum_:function(st,Mt){var Xr,rn=mn(st,"a","maximum"),nn=mn(Mt,"b","maximum");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],rn.dtype==="bool"&&(rn=rn.toInt(),nn=nn.toInt()),Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an,on){var sn=an.maximum(rn,nn);return on([rn,nn]),sn},{a:rn,b:nn},function(an,on){var sn=on[0],ln=on[1];return{a:function(){return an.mul(sn.greaterEqual(ln).toFloat())},b:function(){return an.mul(sn.less(ln).toFloat())}}},"Maximum")}}),fc=An({maximumStrict_:function(st,Mt){var Xr=mn(st,"a","maximumStrict"),rn=mn(Mt,"b","maximumStrict");return E(Xr.shape,rn.shape,"Error in maximumStrict: "),Xr.maximum(rn)}}),dc=An({minimum_:function(st,Mt){var Xr,rn=mn(st,"a","minimum"),nn=mn(Mt,"b","minimum");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],rn.dtype==="bool"&&(rn=rn.toInt(),nn=nn.toInt()),Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an,on){var sn=an.minimum(rn,nn);return on([rn,nn]),sn},{a:rn,b:nn},function(an,on){var sn=on[0],ln=on[1];return{a:function(){return an.mul(sn.lessEqual(ln).toFloat())},b:function(){return an.mul(sn.greater(ln).toFloat())}}},"Minimum")}}),pc=An({minimumStrict_:function(st,Mt){var Xr=mn(st,"a","minimumStrict"),rn=mn(Mt,"b","minimumStrict");return E(Xr.shape,rn.shape,"Error in minimumStrict: "),Xr.minimum(rn)}}),vc=An({mod_:function(st,Mt){var Xr,rn=mn(st,"a","mod"),nn=mn(Mt,"b","mod");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on,sn){var ln=on.mod(rn,nn);return sn([rn,nn]),ln},{$a:rn,$b:nn},function(on,sn){var ln=sn[0],un=sn[1];return{$a:function(){var cn=Eo(ln.shape,an);return cn.length>0?on.sum(cn).reshape(ln.shape):on},$b:function(){var cn=on.mul(ln.div(un).floor().neg()),hn=Eo(un.shape,an);return hn.length>0?cn.sum(hn).reshape(un.shape):cn}}})}}),mc=An({modStrict_:function(st,Mt){var Xr=mn(st,"a","modStrict"),rn=mn(Mt,"b","modStrict");return E(Xr.shape,rn.shape,"Error in modStrict: "),Xr.mod(rn)}}),gc=An({mul_:function(st,Mt){var Xr,rn=mn(st,"a","mul"),nn=mn(Mt,"b","mul");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on,sn){var ln=on.multiply(rn,nn);return sn([rn,nn]),ln},{a:rn,b:nn},function(on,sn){var ln=sn[0],un=sn[1];return{a:function(){var cn=on.mul(un.toFloat()),hn=Eo(ln.shape,an);return hn.length>0?cn.sum(hn).reshape(ln.shape):cn},b:function(){var cn=on.mul(ln.toFloat()),hn=Eo(un.shape,an);return hn.length>0?cn.sum(hn).reshape(un.shape):cn}}},"Mul")}}),yc=An({mulStrict_:function(st,Mt){var Xr=mn(st,"a","mul"),rn=mn(Mt,"b","mul");return E(Xr.shape,rn.shape,"Error in multiplyStrict: "),Xr.mul(rn)}}),xc=An({pow_:function(st,Mt){var Xr,rn=mn(st,"base","pow"),nn=mn(Mt,"exp","pow");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape),on=[rn,nn];return Lt.runKernelFunc(function(sn,ln){var un=sn.pow(rn,nn);return ln([rn,nn,un]),un},{a:rn,b:nn},function(sn,ln){var un=ln[0],cn=ln[1],hn=ln[2];return{a:function(){var fn=cn.toFloat(),to=sn.mul(fn.mul(un.pow(fn.sub(On(1))))),uo=Eo(un.shape,an);return uo.length>0&&(to=to.sum(uo)),to.reshape(un.shape)},b:function(){var fn=un.greater(0),to=un.log().where(fn,Xn(un)),uo=sn.mul(hn.mul(to)),co=Eo(cn.shape,an);return co.length>0&&(uo=uo.sum(co)),uo.reshape(cn.shape)}}},"Pow",{},on,[!0])}}),bc=An({powStrict_:function(st,Mt){return E(st.shape,Mt.shape,"Error in powStrict: "),st.pow(Mt)}}),wc=An({squaredDifferenceStrict_:function(st,Mt){var Xr=mn(st,"a","squaredDifferenceStrict"),rn=mn(Mt,"b","squaredDifferenceStrict");return E(Xr.shape,rn.shape,"Error in squaredDifferenceStrict: "),Xr.squaredDifference(rn)}}),Cc=An({sub_:function(st,Mt){var Xr,rn=mn(st,"a","sub"),nn=mn(Mt,"b","sub");Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1];var an=Ro(rn.shape,nn.shape);return Lt.runKernelFunc(function(on){return on.subtract(rn,nn)},{a:rn,b:nn},function(on){return{a:function(){var sn=on,ln=Eo(rn.shape,an);return ln.length>0&&(sn=sn.sum(ln)),sn.reshape(rn.shape)},b:function(){var sn=on,ln=Eo(nn.shape,an);return ln.length>0&&(sn=sn.sum(ln)),sn.neg().reshape(nn.shape)}}},"Sub")}}),Ec=An({subStrict_:function(st,Mt){var Xr=mn(st,"a","subStrict"),rn=mn(Mt,"b","subStrict");return E(Xr.shape,rn.shape,"Error in subStrict: "),Xr.sub(rn)}}),Rc=An({equal_:function(st,Mt){var Xr,rn=mn(st,"a","equal"),nn=mn(Mt,"b","equal");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an){return an.equal(rn,nn)},{$a:rn,$b:nn})}}),Ic=An({equalStrict_:function(st,Mt){var Xr=mn(st,"a","equalStrict"),rn=mn(Mt,"b","equalStrict");return E(Xr.shape,rn.shape,"Error in equalStrict: "),Xr.equal(rn)}}),kc=An({greater_:function(st,Mt){var Xr,rn=mn(st,"a","greater"),nn=mn(Mt,"b","greater");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an){return an.greater(rn,nn)},{a:rn,b:nn},null,"Greater")}}),Sc=An({greaterEqual_:function(st,Mt){var Xr,rn=mn(st,"a","greaterEqual"),nn=mn(Mt,"b","greaterEqual");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an,on){var sn=an.greaterEqual(rn,nn);return on([rn,nn]),sn},{a:rn,b:nn},function(an,on){var sn=on[0],ln=on[1];return{a:function(){return Xn(sn)},b:function(){return Xn(ln)}}},"GreaterEqual")}}),Ac=An({greaterEqualStrict_:function(st,Mt){var Xr=mn(st,"a","greaterEqualStrict"),rn=mn(Mt,"b","greaterEqualStrict");return E(Xr.shape,rn.shape,"Error in greaterEqualStrict: "),Xr.greaterEqual(rn)}}),Dc=An({greaterStrict_:function(st,Mt){var Xr=mn(st,"a","greaterStrict"),rn=mn(Mt,"b","greaterStrict");return E(Xr.shape,rn.shape,"Error in greaterStrict: "),Xr.greater(rn)}}),Tc=An({less_:function(st,Mt){var Xr,rn=mn(st,"a","less"),nn=mn(Mt,"b","less");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an){return an.less(rn,nn)},{a:rn,b:nn},null,"Less")}}),Nc=An({lessEqual_:function(st,Mt){var Xr,rn=mn(st,"a","lessEqual"),nn=mn(Mt,"b","lessEqual");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an,on){var sn=an.lessEqual(rn,nn);return on([rn,nn]),sn},{a:rn,b:nn},null,"LessEqual")}}),Fc=An({lessEqualStrict_:function(st,Mt){var Xr=mn(st,"a","lessEqualStrict"),rn=mn(Mt,"b","lessEqualStrict");return E(Xr.shape,rn.shape,"Error in lessEqualStrict: "),Xr.lessEqual(rn)}}),_c=An({lessStrict_:function(st,Mt){var Xr=mn(st,"a","lessStrict"),rn=mn(Mt,"b","lessStrict");return E(Xr.shape,rn.shape,"Error in lessStrict: "),Xr.less(rn)}}),Oc=An({notEqual_:function(st,Mt){var Xr,rn=mn(st,"a","notEqual"),nn=mn(Mt,"b","notEqual");return Xr=Nt(rn,nn),rn=Xr[0],nn=Xr[1],Ro(rn.shape,nn.shape),Lt.runKernelFunc(function(an){return an.notEqual(rn,nn)},{a:rn,b:nn},null,"NotEqual")}}),Mc=An({notEqualStrict_:function(st,Mt){var Xr=mn(st,"a","notEqualStrict"),rn=mn(Mt,"b","notEqualStrict");return E(Xr.shape,rn.shape,"Error in notEqualStrict: "),Xr.notEqual(rn)}});function Bc(st,Mt){for(var Xr=[],rn=st;rn<Mt;++rn)Xr.push(rn);return Xr}function Pc(st){for(var Mt=[],Xr=0;Xr<st.length;++Xr)for(var rn=0;rn<st[Xr].length;++rn)Mt.push(st[Xr][rn]);return Mt}var Lc=An({gather_:function(st,Mt,Xr){Xr===void 0&&(Xr=0);var rn=mn(st,"x","gather"),nn=mn(Mt,"indices","gather","int32");Xr=O$1(Xr,rn.shape)[0];var an=function(on,sn,ln){for(var un=on.shape[ln],cn=[],hn=1,fn=1,to=0;to<ln;to++)cn.push(on.shape[to]),hn*=on.shape[to];for(to=0;to<sn.rank;to++)cn.push(sn.shape[to]);for(to=ln+1;to<on.rank;to++)cn.push(on.shape[to]),fn*=on.shape[to];return{batchSize:hn,sliceSize:fn,dimSize:un,outputShape:cn}}(rn,nn,Xr);return Lt.runKernelFunc(function(on,sn){var ln=on.gather(rn,nn.flatten(),Xr);return sn([nn]),ln},{x:rn,indices:nn},function(on,sn){var ln=sn[0];return{x:function(){var un=rn.shape,cn=ln.size,hn=un.slice(0,Xr),fn=hn.length,to=un.slice(Xr,un.length).slice(1),uo=to.length,co=Bc(0,fn),Uo=Bc(fn+1,fn+1+uo),lo=Pc([hn,[cn],to]),ho=on.reshape(lo),fo=ln.reshape([cn]),mo=Pc([[fn],co,Uo]),_d=ho.transpose(mo),ep=Wc(_d,fo,rn.shape[Xr]),rp=Rn(mo);return ep=ep.transpose(rp)},indices:function(){return ln}}},"Gather",{axis:Xr}).reshape(an.outputShape)}}),Wc=An({unsortedSegmentSum_:function(st,Mt,Xr){var rn=mn(st,"x","unsortedSegmentSum"),nn=mn(Mt,"segmentIds","unsortedSegmentSum","int32");return C(A$1(Xr),function(){return"numSegments must be of dtype int"}),Lt.runKernelFunc(function(an,on){var sn=an.unsortedSegmentSum(rn,nn,Xr);return on([nn]),sn},{$x:rn},function(an,on){var sn=on[0];return{$x:function(){return function(ln,un){for(var cn=hc(un,Xn(un)),hn=Lc(ln,cn),fn=Sc(un,On(0,"int32")),to=hn.rank-fn.rank,uo=0;uo<to;++uo)fn=wr(fn,uo+1);fn=Qu(fn,zn(hn.shape,"bool"));var co=Xn(hn);return ec(fn,hn,co)}(an,sn)}}})}}),Uc=function(st,Mt,Xr){return n(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co;return r$2(this,function(Uo){switch(Uo.label){case 0:for(rn=mn(st,"tensor","boolMask"),nn=mn(Mt,"mask","boolMask","bool"),an=Xr??0,on=nn.rank,sn=rn.shape,C(on>0,function(){return"mask cannot be scalar"}),E(sn.slice(an,an+on),nn.shape,"mask's shape must match the first K dimensions of tensor's shape,"),ln=1,un=an;un<an+on;un++)ln*=sn[un];return cn=sn.slice(0,an).concat([ln],sn.slice(an+on)),hn=rn.reshape(cn),fn=nn.reshape([-1]),[4,nc(fn)];case 1:return to=Uo.sent(),uo=to.squeeze([1]),co=Lc(hn,uo,an),st!==rn&&rn.dispose(),Mt!==nn&&nn.dispose(),uo.dispose(),hn.dispose(),fn.dispose(),to.dispose(),[2,co]}})})};function Vc(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an="NHWC"),C(st.length===Mt.rank,function(){return"Length of inShape ("+st.length+") and rank of dy ("+Mt.rank+") must match"});var sn=st,ln=Mt,un=!1;Mt.rank===3&&(un=!0,ln=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2]),sn=[1,st[0],st[1],st[2]]),C(sn.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+sn.length+"."}),C(ln.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+ln.rank}),C(Xr.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+Xr.rank});var cn=an==="NHWC"?sn[3]:sn[1],hn=an==="NHWC"?ln.shape[3]:ln.shape[1];C(cn===Xr.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+cn+") must match input depth for filter "+Xr.shape[2]+"."}),C(hn===Xr.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+hn+") must match output depth for filter "+Xr.shape[3]+"."}),on!=null&&C(A$1(nn),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+nn+"."});var fn=Bo(an),to=So(sn,Xr.shape,rn,1,nn,on,!1,fn),uo=Lt.runKernelFunc(function(co,Uo){var lo=co.conv2dDerInput(ln,Xr,to);return Uo([Xr,ln]),lo},{dy4D:ln,filter:Xr},function(co,Uo){var lo=Uo[0],ho=Uo[1];return{dy4D:function(){return qc(co,lo,rn,nn,an,1,on)},filter:function(){return jc(co,ho,lo.shape,rn,nn,an,on)}}});return un?uo.as3D(uo.shape[1],uo.shape[2],uo.shape[3]):uo}function zc(st){var Mt=function(an){return typeof an=="number"?[an,an,an]:an.length===2?[an[0],an[1],1]:an}(st),Xr=Mt[0],rn=Mt[1],nn=Mt[2];return Xr===1&&rn===1&&nn===1}function Gc(st,Mt,Xr,rn,nn){C(st.length===Mt.rank,function(){return"Length of inShape ("+st.length+") and rank of dy ("+Mt.rank+") must match"});var an=st,on=Mt,sn=!1;Mt.rank===4&&(sn=!0,on=Mt.as5D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2],Mt.shape[3]),an=[1,st[0],st[1],st[2],st[3]]);var ln=an[4],un=on.shape[4];C(an.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+an.length+"."}),C(on.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+on.rank}),C(Xr.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+Xr.rank}),C(ln===Xr.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+ln+") must match input depth for filter "+Xr.shape[3]+"."}),C(un===Xr.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+un+") must match output depth for filter "+Xr.shape[4]+"."});var cn=Ao(an,Xr.shape,rn,1,nn),hn=Lt.runKernelFunc(function(fn){return fn.conv3dDerInput(on,Xr,cn)},{dy5D:on});return sn?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}var Hc=An({conv1d_:function(st,Mt,Xr,rn,nn,an,on){nn===void 0&&(nn="NWC"),an===void 0&&(an=1);var sn=mn(st,"x","conv1d"),ln=mn(Mt,"filter","conv1d"),un=sn,cn=!1;sn.rank===2&&(cn=!0,un=sn.as3D(1,sn.shape[0],sn.shape[1])),C(un.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+un.rank+"."}),C(ln.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+ln.rank+"."}),on!=null&&C(A$1(rn),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+rn+"."}),C(un.shape[2]===ln.shape[1],function(){return"Error in conv1d: depth of input ("+un.shape[2]+") must match input depth for filter "+ln.shape[1]+"."}),C(Mo(Xr,an),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+Xr+" and dilation '"+an+"'"}),C(nn==="NWC",function(){return"Error in conv1d: got dataFormat of "+nn+" but only NWC is currently supported."});var hn=ln.as4D(1,ln.shape[0],ln.shape[1],ln.shape[2]),fn=un.as4D(un.shape[0],1,un.shape[1],un.shape[2]),to=qc(fn,hn,[1,Xr],rn,"NHWC",[1,an],on);return cn?to.as2D(to.shape[2],to.shape[3]):to.as3D(to.shape[0],to.shape[2],to.shape[3])}}),qc=An({conv2d_:function(st,Mt,Xr,rn,nn,an,on){nn===void 0&&(nn="NHWC"),an===void 0&&(an=[1,1]);var sn=mn(st,"x","conv2d"),ln=mn(Mt,"filter","conv2d"),un=sn,cn=!1;sn.rank===3&&(cn=!0,un=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),C(un.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+un.rank+"."}),C(ln.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+ln.rank+"."}),on!=null&&C(A$1(rn),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+rn+"."});var hn=nn==="NHWC"?un.shape[3]:un.shape[1];C(hn===ln.shape[2],function(){return"Error in conv2d: depth of input ("+hn+") must match input depth for filter "+ln.shape[2]+"."}),C(Mo(Xr,an),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+an+"'"});var fn=Bo(nn),to=So(un.shape,ln.shape,Xr,an,rn,on,!1,fn),uo=[ln,un],co=Lt.runKernelFunc(function(Uo,lo){var ho=Uo.conv2d(un,ln,to);return lo([ln,un]),ho},{x:un,filter:ln},function(Uo,lo){var ho=lo,fo=ho[0],mo=ho[1];return C(Oo(an),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+an+"'"}),{x:function(){return Xc(mo.shape,Uo,fo,Xr,rn,nn)},filter:function(){return jc(mo,Uo,fo.shape,Xr,rn,nn)}}},"Conv2D",to,uo);return cn?co.as3D(co.shape[1],co.shape[2],co.shape[3]):co}}),Kc=An({conv3d_:function(st,Mt,Xr,rn,nn,an){nn===void 0&&(nn="NDHWC"),an===void 0&&(an=[1,1,1]);var on=mn(st,"x","conv3d"),sn=mn(Mt,"filter","conv3d"),ln=on,un=!1;on.rank===4&&(un=!0,ln=on.as5D(1,on.shape[0],on.shape[1],on.shape[2],on.shape[3])),C(ln.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+ln.rank+"."}),C(sn.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+sn.rank+"."}),C(ln.shape[4]===sn.shape[3],function(){return"Error in conv3d: depth of input ("+ln.shape[4]+") must match input depth for filter "+sn.shape[3]+"."}),C(function(fn,to){return zc(fn)||zc(to)}(Xr,an),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+an+"'"}),C(nn==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+nn+" but only NDHWC is currently supported."});var cn=Ao(ln.shape,sn.shape,Xr,an,rn),hn=Lt.runKernelFunc(function(fn,to){var uo=fn.conv3d(ln,sn,cn);return to([ln,sn]),uo},{x:ln,$filter:sn},function(fn,to){C(zc(an),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+an+"'"});var uo=to[0],co=to[1];return{x:function(){return Gc(uo.shape,fn,co,Xr,rn)},$filter:function(){return function(Uo,lo,ho,fo,mo){var _d=Uo;Uo.rank===4&&(_d=Uo.as5D(1,Uo.shape[0],Uo.shape[1],Uo.shape[2],Uo.shape[3]));var ep=lo;ep.rank===4&&(ep=lo.as5D(1,lo.shape[0],lo.shape[1],lo.shape[2],lo.shape[3])),C(_d.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_d.shape+"."}),C(ep.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+ep.shape+"."}),C(ho.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+ho+"."}),C(_d.shape[4]===ho[3],function(){return"Error in conv3dDerFilter: depth of input "+_d.shape[4]+") must match input depth in filter ("+ho[3]+"."}),C(ep.shape[4]===ho[4],function(){return"Error in conv3dDerFilter: depth of dy ("+ep.shape[4]+") must match output depth for filter ("+ho[4]+")."});var rp=Ao(_d.shape,ho,fo,1,mo);return Lt.runKernelFunc(function(ap){return ap.conv3dDerFilter(_d,ep,rp)},{x5D:_d,dy5D:ep})}(uo,fn,co.shape,Xr,rn)}}});return un?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),jc=An({conv2dDerFilter_:function(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an="NHWC");var sn=st;st.rank===3&&(sn=st.as4D(1,st.shape[0],st.shape[1],st.shape[2]));var ln=Mt;ln.rank===3&&(ln=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2])),C(sn.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+sn.shape+"."}),C(ln.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+ln.shape+"."}),C(Xr.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+Xr+"."});var un=an==="NHWC"?sn.shape[3]:sn.shape[1],cn=an==="NHWC"?ln.shape[3]:ln.shape[1];C(un===Xr[2],function(){return"Error in conv2dDerFilter: depth of input "+un+") must match input depth in filter ("+Xr[2]+"."}),C(cn===Xr[3],function(){return"Error in conv2dDerFilter: depth of dy ("+cn+") must match output depth for filter ("+Xr[3]+")."}),on!=null&&C(A$1(nn),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+nn+"."});var hn=Bo(an),fn=So(sn.shape,Xr,rn,1,nn,on,!1,hn);return Lt.runKernelFunc(function(to){return to.conv2dDerFilter(sn,ln,fn)},{x4D:sn,dy4D:ln})}}),Xc=An({conv2dDerInput_:Vc}),Yc=An({depthwiseConv2d_:function(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an=[1,1]);var sn=mn(st,"x","depthwiseConv2d"),ln=mn(Mt,"filter","depthwiseConv2d"),un=sn,cn=!1;sn.rank===3&&(cn=!0,un=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),C(un.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+un.rank+"."}),C(ln.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+ln.rank+"."}),C(un.shape[3]===ln.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+un.shape[3]+") must match the inChannels dimension in filter "+ln.shape[2]+"."}),an==null&&(an=[1,1]),C(Mo(Xr,an),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+an+"'"}),on!=null&&C(A$1(rn),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+rn+"."});var hn=So(un.shape,ln.shape,Xr,an,rn,on,!0),fn=[un,ln],to=Lt.runKernelFunc(function(uo,co){var Uo=uo.depthwiseConv2D(un,ln,hn);return co([un,ln]),Uo},{x:un,filter:ln},function(uo,co){C(Oo(an),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+an+"'"});var Uo=co[0],lo=co[1];return{x:function(){return $c(Uo.shape,uo,lo,hn)},filter:function(){return Qc(Uo,uo,lo.shape,hn)}}},"DepthwiseConv2dNative",hn,fn);return cn?to.as3D(to.shape[1],to.shape[2],to.shape[3]):to}}),$c=An({depthwiseConv2dDerInput_:function(st,Mt,Xr,rn){var nn=Mt,an=!1;Mt.rank===3&&(an=!0,nn=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2]));var on=Lt.runKernelFunc(function(sn){return sn.depthwiseConv2DDerInput(nn,Xr,rn)},{dy4D:nn});return an?on.as3D(on.shape[1],on.shape[2],on.shape[3]):on}}),Qc=An({depthwiseConv2dDerFilter_:function(st,Mt,Xr,rn){var nn=st;st.rank===3&&(nn=st.as4D(1,st.shape[0],st.shape[1],st.shape[2]));var an=Mt;return an.rank===3&&(an=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2])),Lt.runKernelFunc(function(on){return on.depthwiseConv2DDerFilter(nn,an,rn)},{x4D:nn,dy4D:an})}}),Jc=An({separableConv2d_:function(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an=[1,1]),on===void 0&&(on="NHWC");var sn=mn(st,"x","separableConv2d"),ln=mn(Mt,"depthwiseFilter","separableConv2d"),un=mn(Xr,"pointwiseFilter","separableConv2d"),cn=sn,hn=!1;if(sn.rank===3&&(hn=!0,cn=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),on==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");C(cn.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+cn.rank+"."}),C(ln.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+ln.rank+"."}),C(un.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+ln.rank+"."}),C(un.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+un.shape[0]+"."}),C(un.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+un.shape[1]+"."});var fn=ln.shape[2],to=ln.shape[3];C(un.shape[2]===fn*to,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+fn*to+", but got "+un.shape[2]+"."});var uo=Yc(cn,ln,rn,nn,on,an),co=qc(uo,un,1,"valid",on);return hn?co.as3D(co.shape[1],co.shape[2],co.shape[3]):co}}),Zc=An({conv2dTranspose_:function(st,Mt,Xr,rn,nn,an){return Vc(Xr,mn(st,"x","conv2dTranspose"),mn(Mt,"filter","conv2dTranspose"),rn,nn,"NHWC",an)}}),tl=An({conv3dTranspose_:function(st,Mt,Xr,rn,nn){return Gc(Xr,mn(st,"x","conv3dTranspose"),mn(Mt,"filter","conv3dTranspose"),rn,nn)}}),el=An({matMul_:function(st,Mt,Xr,rn){var nn;Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!1);var an=mn(st,"a","matMul"),on=mn(Mt,"b","matMul");nn=Nt(an,on),an=nn[0],on=nn[1];var sn=Xr?an.shape[an.rank-2]:an.shape[an.rank-1],ln=rn?on.shape[on.rank-1]:on.shape[on.rank-2],un=Xr?an.shape[an.rank-1]:an.shape[an.rank-2],cn=rn?on.shape[on.rank-2]:on.shape[on.rank-1],hn=an.shape.slice(0,-2),fn=on.shape.slice(0,-2),to=k(hn),uo=k(fn);C(an.rank>=2&&on.rank>=2&&an.rank===on.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+an.rank+" and "+on.rank+"."}),C(S$3(hn,fn),function(){return"Error in matMul: outer dimensions ("+hn+") and ("+fn+") of Tensors with shapes "+an.shape+" and "+on.shape+" must match."}),C(sn===ln,function(){return"Error in matMul: inner shapes ("+sn+") and ("+ln+") of Tensors with shapes "+an.shape+" and "+on.shape+" and transposeA="+Xr+" and transposeB="+rn+" must match."});var co=an.shape.slice(0,-2).concat([un,cn]),Uo=Xr?an.as3D(to,sn,un):an.as3D(to,un,sn),lo=rn?on.as3D(uo,cn,ln):on.as3D(uo,ln,cn),ho={transposeA:Xr,transposeB:rn};return Lt.runKernelFunc(function(fo,mo){var _d=fo.batchMatMul(Uo,lo,Xr,rn);return mo([Uo,lo]),_d},{a:Uo,b:lo},function(fo,mo){var _d=mo,ep=_d[0],rp=_d[1];return Xr||rn?!Xr&&rn?{a:function(){return fo.matMul(rp,!1,!1)},b:function(){return fo.matMul(ep,!0,!1)}}:Xr&&!rn?{a:function(){return rp.matMul(fo,!1,!0)},b:function(){return ep.matMul(fo,!1,!1)}}:{a:function(){return rp.matMul(fo,!0,!0)},b:function(){return fo.matMul(ep,!0,!0)}}:{a:function(){return fo.matMul(rp,!1,!0)},b:function(){return ep.matMul(fo,!0,!1)}}},"BatchMatMul",ho).reshape(co)}}),nl=An({dot_:function(st,Mt){var Xr=mn(st,"t1","dot"),rn=mn(Mt,"t2","dot");C(!(Xr.rank!==1&&Xr.rank!==2||rn.rank!==1&&rn.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+Xr.rank+" and "+rn.rank+"."});var nn=Xr.rank===1?Xr.size:Xr.shape[1],an=rn.rank===1?rn.size:rn.shape[0];return C(nn===an,function(){return"Error in dot: inner dimensions of inputs must match, but got "+nn+" and "+an+"."}),Xr.rank===1&&rn.rank===1?Xr.as2D(1,-1).matMul(rn.as2D(-1,1)).asScalar():Xr.rank===1&&rn.rank===2?Xr.as2D(1,-1).matMul(rn.as2D(rn.shape[0],rn.shape[1])).as1D():Xr.rank===2&&rn.rank===1?Xr.matMul(rn.as2D(-1,1)).as1D():Xr.matMul(rn.as2D(rn.shape[0],rn.shape[1]))}}),rl=An({outerProduct_:function(st,Mt){var Xr=mn(st,"v1","outerProduct"),rn=mn(Mt,"v2","outerProduct");return C(Xr.rank===1&&rn.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+Xr.rank+" and "+rn.rank+"."}),Xr.as2D(-1,1).matMul(rn.as2D(1,-1))}}),ol=An({reverse_:function(st,Mt){var Xr=mn(st,"x","reverse");if(Xr.rank===0)return Xr.clone();var rn=O$1(Mt,Xr.shape);return Lt.runKernelFunc(function(nn){return nn.reverse(Xr,rn)},{$x:Xr},function(nn){return{$x:function(){return nn.reverse(rn)}}}).reshapeAs(Xr)}}),al=An({reverse1d_:function(st){var Mt=mn(st,"x","reverse");return C(Mt.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+Mt.rank+"."}),ol(Mt,0)}}),il=An({reverse2d_:function(st,Mt){var Xr=mn(st,"x","reverse");return C(Xr.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+Xr.rank+"."}),ol(Xr,Mt)}}),sl=An({reverse3d_:function(st,Mt){var Xr=mn(st,"x","reverse");return C(Xr.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+Xr.rank+"."}),ol(Xr,Mt)}}),ul=An({reverse4d_:function(st,Mt){var Xr=mn(st,"x","reverse");return C(Xr.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+Xr.rank+"."}),ol(Xr,Mt)}});function cl(st,Mt,Xr,rn,nn,an){var on=mn(st,"x","maxPool"),sn=on,ln=!1;on.rank===3&&(ln=!0,sn=on.as4D(1,on.shape[0],on.shape[1],on.shape[2])),rn==null&&(rn=[1,1]),C(sn.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+sn.rank+"."}),C(Mo(Xr,rn),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+rn+"'"}),an!=null&&C(A$1(nn),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+an+" but got pad "+nn+"."});var un=Io(sn.shape,Mt,Xr,rn,nn,an);if(un.filterWidth===1&&un.filterHeight===1&&S$3(un.inShape,un.outShape))return on.clone();var cn=[sn],hn=Lt.runKernelFunc(function(fn,to){var uo=fn.maxPool(sn,un);return to([sn,uo]),uo},{x:sn},function(fn,to){var uo=to[0],co=to[1];return{x:function(){return function(Uo,lo,ho,fo,mo,_d,ep,rp){var ap=mn(Uo,"dy","maxPoolBackprop"),sp=mn(lo,"input","maxPoolBackprop"),up=mn(ho,"output","maxPoolBackprop");C(sp.rank===ap.rank,function(){return"Rank of input ("+sp.rank+") does not match rank of dy ("+ap.rank+")"}),_d==null&&(_d=[1,1]),C(Mo(mo,_d),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+mo+" and dilations '"+_d+"'"}),C(ap.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+ap.rank+"."}),C(sp.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+sp.rank+"."}),rp!=null&&C(A$1(ep),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+rp+" but got pad "+ep+"."});var pp=Io(sp.shape,fo,mo,_d,ep,rp);return Lt.runKernelFunc(function(hp){return hp.maxPoolBackprop(ap,sp,up,pp)},{$dy:ap,$input:sp})}(fn,uo,co,Mt,Xr,rn,nn)}}},"MaxPool",un,cn);return ln?hn.as3D(hn.shape[1],hn.shape[2],hn.shape[3]):hn}function ll(st,Mt,Xr,rn,nn,an){var on=mn(st,"x","avgPool","float32");rn==null&&(rn=[1,1]),C(Mo(Xr,rn),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+rn+"'"});var sn=on,ln=!1;on.rank===3&&(ln=!0,sn=on.as4D(1,on.shape[0],on.shape[1],on.shape[2])),C(sn.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+sn.rank+"."}),an!=null&&C(A$1(nn),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+an+" but got pad "+nn+"."});var un=Io(sn.shape,Mt,Xr,rn,nn,an);if(un.filterWidth===1&&un.filterHeight===1&&S$3(un.inShape,un.outShape))return on.clone();var cn=Lt.runKernelFunc(function(hn){return hn.avgPool(sn,un)},{x:sn},function(hn){return{x:function(){return function(fn,to,uo,co,Uo,lo){var ho=mn(fn,"dy","avgPoolBackprop"),fo=mn(to,"input","avgPoolBackprop");C(fo.rank===ho.rank,function(){return"Rank of input ("+fo.rank+") does not match rank of dy ("+ho.rank+")"}),Uo==null&&(Uo=[1,1]),C(Mo(co,Uo),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+co+" and dilations '"+Uo+"'"});var mo=fo,_d=ho,ep=!1;fo.rank===3&&(ep=!0,mo=fo.as4D(1,fo.shape[0],fo.shape[1],fo.shape[2]),_d=ho.as4D(1,ho.shape[0],ho.shape[1],ho.shape[2])),C(_d.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_d.rank+"."}),C(mo.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+mo.rank+"."});var rp=Io(mo.shape,uo,co,Uo,lo),ap=Lt.runKernelFunc(function(sp){return sp.avgPoolBackprop(_d,mo,rp)},{dy4D:_d,input4D:mo});return ep?ap.as3D(ap.shape[1],ap.shape[2],ap.shape[3]):ap}(hn,sn,Mt,Xr,rn,nn)}}},"AvgPool",un);return cn=cn.cast(on.dtype),ln?cn.as3D(cn.shape[1],cn.shape[2],cn.shape[3]):cn}var hl=An({maxPool_:function(st,Mt,Xr,rn,nn){return cl(st,Mt,Xr,1,rn,nn)}}),fl=An({avgPool_:function(st,Mt,Xr,rn,nn){return ll(st,Mt,Xr,1,rn,nn)}}),dl=An({pool_:function(st,Mt,Xr,rn,nn,an){nn==null&&(nn=[1,1]),an==null&&(an=1),rn===0&&(rn="valid");var on=mn(st,"x","maxPool"),sn=on,ln=!1;on.rank===3&&(ln=!0,sn=on.as4D(1,on.shape[0],on.shape[1],on.shape[2])),C(Mo(an,nn),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+an+" and dilations '"+nn+"'"});var un,cn=Io(sn.shape,Mt,an,nn,rn),hn=[cn.dilationHeight,cn.dilationWidth];un=rn==="same"?function(mo,_d){var ep=mo.map(function(sp,up){return sp+(sp-1)*(_d[up]-1)}).map(function(sp){return sp-1}),rp=ep.map(function(sp){return Math.floor(sp/2)}),ap=ep.map(function(sp,up){return sp-rp[up]});return ep.map(function(sp,up){return[rp[up],ap[up]]})}([cn.filterHeight,cn.filterWidth],hn):[[0,0],[0,0]];var fn=hn[0]===1&&hn[1]===1,to=function(mo,_d,ep){var rp=ep.map(function(gp){return gp[0]}),ap=ep.map(function(gp){return gp[1]}),sp=mo.concat(rp,ap),up=_d.map(function(gp,mp){return(gp-sp[mp]%gp)%gp}),pp=ap.map(function(gp,mp){return gp+up[mp]}),hp=_d.map(function(gp,mp){return[rp[mp],pp[mp]]}),vp=_d.map(function(gp,mp){return[0,up[mp]]});return[hp,vp]}([cn.inHeight,cn.inWidth],hn,un),uo=to[0],co=to[1],Uo=fn?rn:"valid",lo=fn?sn:Mr(sn,hn,uo),ho=(Xr==="avg"?function(){return ll(lo,Mt,an,1,Uo)}:function(){return cl(lo,Mt,an,1,Uo)})(),fo=fn?ho:vr(ho,hn,co);return ln?fo.as3D(fo.shape[1],fo.shape[2],fo.shape[3]):fo}}),pl=An({maxPool3d_:function(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an="NDHWC");var sn=mn(st,"x","maxPool3d"),ln=sn,un=!1;sn.rank===4&&(un=!0,ln=sn.as5D(1,sn.shape[0],sn.shape[1],sn.shape[2],sn.shape[3])),on==null&&(on=[1,1,1]),C(ln.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+ln.rank+"."}),C(an==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+an}),C(Mo(Xr,on),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+on+"'"}),nn!=null&&C(A$1(rn),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+nn+" but got pad "+rn+"."});var cn=ko(ln.shape,Mt,Xr,on,rn,nn,an),hn=Lt.runKernelFunc(function(fn,to){var uo=fn.maxPool3d(ln,cn);return to([ln,uo]),uo},{x:ln},function(fn,to){var uo=to[0],co=to[1];return{x:function(){return function(Uo,lo,ho,fo,mo,_d,ep,rp){var ap=mn(Uo,"dy","maxPool3dBackprop"),sp=mn(lo,"input","maxPool3dBackprop"),up=mn(ho,"output","maxPool3dBackprop"),pp=ap,hp=sp,vp=up,gp=!1;sp.rank===4&&(gp=!0,pp=ap.as5D(1,ap.shape[0],ap.shape[1],ap.shape[2],ap.shape[3]),hp=sp.as5D(1,sp.shape[0],sp.shape[1],sp.shape[2],sp.shape[3]),vp=up.as5D(1,up.shape[0],up.shape[1],up.shape[2],up.shape[3])),C(pp.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+pp.rank+"."}),C(hp.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+hp.rank+"."}),C(vp.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+vp.rank+"."}),_d==null&&(_d=[1,1,1]),C(Mo(mo,_d),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+mo+" and dilations '"+_d+"'"}),rp!=null&&C(A$1(ep),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+rp+" but got pad "+ep+"."});var mp=ko(hp.shape,fo,mo,_d,ep,rp),lp=Lt.runKernelFunc(function(cp){return cp.maxPool3dBackprop(pp,hp,vp,mp)},{dy5D:pp,input5D:hp});return gp?lp.as4D(lp.shape[1],lp.shape[2],lp.shape[3],lp.shape[4]):lp}(fn,uo,co,Mt,Xr,on,rn,nn)}}});return un?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),vl=An({avgPool3d_:function(st,Mt,Xr,rn,nn,an,on){an===void 0&&(an="NDHWC");var sn=mn(st,"x","avgPool3d","float32"),ln=sn,un=!1;sn.rank===4&&(un=!0,ln=sn.as5D(1,sn.shape[0],sn.shape[1],sn.shape[2],sn.shape[3])),on==null&&(on=[1,1,1]),C(ln.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+ln.rank+"."}),C(an==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+an}),C(Mo(Xr,on),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+Xr+" and dilations '"+on+"'"}),nn!=null&&C(A$1(rn),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+nn+" but got pad "+rn+"."});var cn=ko(ln.shape,Mt,Xr,on,rn,nn,an),hn=Lt.runKernelFunc(function(fn){return fn.avgPool3d(ln,cn)},{x:ln},function(fn){return{x:function(){return function(to,uo,co,Uo,lo,ho,fo){var mo=mn(to,"dy","avgPool3dBackprop"),_d=mn(uo,"input","avgPool3dBackprop"),ep=mo,rp=_d,ap=!1;_d.rank===4&&(ap=!0,ep=mo.as5D(1,mo.shape[0],mo.shape[1],mo.shape[2],mo.shape[3]),rp=_d.as5D(1,_d.shape[0],_d.shape[1],_d.shape[2],_d.shape[3])),C(ep.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+ep.rank+"."}),C(rp.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+rp.rank+"."}),lo==null&&(lo=[1,1,1]),C(Mo(Uo,lo),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+Uo+" and dilations '"+lo+"'"}),fo!=null&&C(A$1(ho),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+fo+" but got pad "+ho+"."});var sp=ko(rp.shape,co,Uo,lo,ho,fo),up=Lt.runKernelFunc(function(pp){return pp.avgPool3dBackprop(ep,rp,sp)},{dy5D:ep,input5D:rp});return ap?up.as4D(up.shape[1],up.shape[2],up.shape[3],up.shape[4]):up}(fn,ln,Mt,Xr,on,rn,nn)}}});return hn=hn.cast(ln.dtype),un?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),ml=An({slice_:function(st,Mt,Xr){var rn,nn,an=mn(st,"x","slice");if(an.rank===0)throw new Error("Slicing scalar is not possible");(rn=typeof Mt=="number"?[Mt].concat(new Array(an.rank-1).fill(0)):Mt.length<an.rank?Mt.concat(new Array(an.rank-Mt.length).fill(0)):Mt.slice()).forEach(function(ln){C(ln!==-1,function(){return"slice() does not support negative begin indexing."})}),nn=(nn=Xr==null?new Array(an.rank).fill(-1):typeof Xr=="number"?[Xr].concat(new Array(an.rank-1).fill(-1)):Xr.length<an.rank?Xr.concat(new Array(an.rank-Xr.length).fill(-1)):Xr).map(function(ln,un){return ln>=0?ln:(C(ln===-1,function(){return"Negative size values should be exactly -1 but got "+ln+" for the slice() size at index "+un+"."}),an.shape[un]-rn[un])}),eo(an,rn,nn);var on=an.shape,sn={begin:rn,size:nn};return Lt.runKernelFunc(function(ln){return ln.slice(an,rn,nn)},{x:an},function(ln){for(var un=[],cn=0;cn<ln.rank;cn++)un.push([rn[cn],on[cn]-rn[cn]-nn[cn]]);return{x:function(){return ln.pad(un)}}},"Slice",sn)}}),gl=An({slice1d_:function(st,Mt,Xr){var rn=mn(st,"x","slice1d");return C(rn.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,[Mt],[Xr])}}),yl=An({slice2d_:function(st,Mt,Xr){var rn=mn(st,"x","slice2d");return C(rn.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,Mt,Xr)}}),xl=An({slice3d_:function(st,Mt,Xr){var rn=mn(st,"x","slice3d");return C(rn.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,Mt,Xr)}}),bl=An({slice4d_:function(st,Mt,Xr){var rn=mn(st,"x","slice4d");return C(rn.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,Mt,Xr)}});function wl(st,Mt,Xr,rn,nn){return Mt.rank<Xr.rank&&(Mt=Mt.reshape(wn(Mt.shape,rn))),st.rank<Xr.rank&&(st=st.reshape(wn(st.shape,rn))),{x:function(){var an=st.mul(Xr.equal(Mt).cast(st.dtype));return nn==null?an:an.transpose(nn)}}}var Cl=An({all_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","all","bool"),nn=O$1(Mt,rn.shape),an=nn,on=En(an,rn.rank);on!=null&&(rn=rn.transpose(on),an=In(an.length,rn.rank));var sn=Lt.runKernelFunc(function(un){return un.all(rn,an)},{$x:rn});if(Xr){var ln=wn(sn.shape,nn);return sn.reshape(ln)}return sn}}),El=An({any_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","any","bool"),nn=O$1(Mt,rn.shape),an=nn,on=En(an,rn.rank);on!=null&&(rn=rn.transpose(on),an=In(an.length,rn.rank));var sn=Lt.runKernelFunc(function(un){return un.any(rn,an)},{$x:rn});if(Xr){var ln=wn(sn.shape,nn);return sn.reshape(ln)}return sn}}),Rl=An({argMax_:function(st,Mt){Mt===void 0&&(Mt=0);var Xr=mn(st,"x","argMax");Mt==null&&(Mt=0);var rn=O$1(Mt,Xr.shape),nn=En(rn,Xr.rank);nn!=null&&(Xr=Xr.transpose(nn),rn=In(rn.length,Xr.rank));var an={axis:rn[0]},on=[Xr];return Lt.runKernelFunc(function(sn,ln){var un=sn.argMax(Xr,rn[0]);return ln([Xr]),un},{x:Xr},function(sn,ln){var un=ln[0];return{x:function(){return Xn(un)}}},"ArgMax",an,on)}}),Il=An({argMin_:function(st,Mt){Mt===void 0&&(Mt=0);var Xr=mn(st,"x","argMin");Mt==null&&(Mt=0);var rn=O$1(Mt,Xr.shape),nn=En(rn,Xr.rank);return nn!=null&&(Xr=Xr.transpose(nn),rn=In(rn.length,Xr.rank)),Lt.runKernelFunc(function(an,on){var sn=an.argMin(Xr,rn[0]);return on([Xr]),sn},{$x:Xr},function(an,on){var sn=on[0];return{$x:function(){return Xn(sn)}}})}}),kl=An({logSumExp_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","logSumExp"),nn=O$1(Mt,rn.shape),an=rn.max(nn,!0),on=rn.sub(an).exp().sum(nn).log(),sn=an.reshape(on.shape).add(on);if(Xr){var ln=wn(sn.shape,nn);return sn.reshape(ln)}return sn}}),Sl=An({max_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","max"),nn=rn,an=O$1(Mt,rn.shape),on=an,sn=En(on,rn.rank);sn!=null&&(rn=rn.transpose(sn),on=In(on.length,rn.rank));var ln=[rn],un=Lt.runKernelFunc(function(hn,fn){var to=hn.max(rn,on);return fn([nn,to]),to},{x:rn},function(hn,fn){return wl(hn,fn[1],fn[0],an,sn)},"Max",{axes:on},ln,[!0]);if(Xr){var cn=wn(un.shape,an);un=un.reshape(cn)}return un}}),Al=An({mean_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","mean"),nn=O$1(Mt,rn.shape),an=k(bn(rn.shape,nn)[1]);return vo(function(on){var sn=On(an);return{value:(sn.dtype===on.dtype?on:on.cast(sn.dtype)).div(sn).sum(Mt,Xr),gradFunc:function(ln){var un=on.shape.slice();return nn.forEach(function(cn){un[cn]=1}),ln.reshape(un).mul(zn(on.shape,"float32")).div(an)}}})(rn)}}),Dl=An({min_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","min"),nn=rn,an=O$1(Mt,rn.shape),on=an,sn=En(on,rn.rank);sn!=null&&(rn=rn.transpose(sn),on=In(on.length,rn.rank));var ln=[rn],un=Lt.runKernelFunc(function(hn,fn){var to=hn.min(rn,on);return fn([nn,to]),to},{x:rn},function(hn,fn){return wl(hn,fn[1],fn[0],an,sn)},"Min",{axes:on},ln,[!0]);if(Xr){var cn=wn(un.shape,an);un=un.reshape(cn)}return un}}),Tl=An({moments_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=O$1(Mt,(st=mn(st,"x","moments")).shape),nn=st.mean(rn,Xr),an=nn.shape;Xr||(an=wn(nn.shape,rn));var on=st.toFloat().sub(nn.reshape(an)).square();return{mean:nn,variance:on.mean(rn,Xr)}}}),Nl=An({sum_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","sum");rn.dtype==="bool"&&(rn=rn.toInt());var nn=O$1(Mt,rn.shape);return vo(function(an){var on=En(nn,an.rank),sn=nn,ln=an;on!=null&&(ln=an.transpose(on),sn=In(sn.length,an.rank));var un=function(to){var uo=an.shape.slice();return nn.forEach(function(co){uo[co]=1}),to.reshape(uo).mul(zn(an.shape,"float32"))},cn={axes:sn},hn=Lt.runKernelFunc(function(to){return to.sum(ln,sn)},{x:ln},function(to){return{x:function(){return un(to)}}},"Sum",cn);if(Xr){var fn=wn(hn.shape,nn);hn=hn.reshape(fn)}return{value:hn,gradFunc:un}})(rn)}}),Fl=An({prod_:function(st,Mt,Xr){Mt===void 0&&(Mt=null),Xr===void 0&&(Xr=!1);var rn=mn(st,"x","prod");rn.dtype==="bool"&&(rn=rn.toInt());var nn=O$1(Mt,rn.shape),an=En(nn,rn.rank),on=nn,sn=rn;an!=null&&(sn=rn.transpose(an),on=In(on.length,rn.rank));var ln=Lt.runKernelFunc(function(cn){return cn.prod(sn,on)},{permutedX:sn});if(Xr){var un=wn(ln.shape,nn);ln=ln.reshape(un)}return ln}}),_l=An({elu_:function(st){var Mt=mn(st,"x","elu");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.elu(Mt);return rn([nn]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){return Lt.runKernelFunc(function(an){return an.eluDer(Xr,nn)},{dy:Xr,y:nn})}}})}}),Ol=An({leakyRelu_:function(st,Mt){Mt===void 0&&(Mt=.2);var Xr=mn(st,"x","leakyRelu");return hc(On(Mt).mul(Xr),Xr)}}),Ml=An({prelu_:function(st,Mt){var Xr=mn(st,"x","prelu"),rn=mn(Mt,"alpha","prelu");return Lt.runKernelFunc(function(nn,an){var on=nn.prelu(Xr,rn);return an([Xr,rn]),on},{x:Xr,alpha:rn},function(nn,an){var on=an[0],sn=an[1],ln=on.greater(0);return{x:function(){return ec(ln,nn,nn.mul(sn))},alpha:function(){var un=ec(ln,Xn(nn),nn.mul(on)),cn=Eo(sn.shape,nn.shape);return cn.length>0&&(un=un.sum(cn)),un.reshape(sn.shape)}}},"Prelu")}}),Bl=An({relu_:function(st){var Mt=mn(st,"x","relu");return Mt.dtype==="bool"?Mt.toInt():Lt.runKernelFunc(function(Xr,rn){var nn=Xr.relu(Mt);return rn([Mt]),nn},{x:Mt},function(Xr,rn){var nn=rn[0];return{x:function(){return Xr.mulStrict(nn.step().toFloat())}}},"Relu")}}),Pl=An({relu6_:function(st){var Mt=mn(st,"x","relu6");return Mt.dtype==="bool"?Mt.toInt():Lt.runKernelFunc(function(Xr,rn){var nn=Xr.relu6(Mt);return rn([Mt]),nn},{x:Mt},function(Xr,rn){var nn=rn[0],an=nn.lessEqual(6).mul(nn.step());return{x:function(){return Xr.mulStrict(an.toFloat())}}},"Relu6")}}),Ll=An({selu_:function(st){var Mt=mn(st,"x","selu");return Lt.runKernelFunc(function(Xr,rn){var nn=Xr.selu(Mt);return rn([Mt]),nn},{$x:Mt},function(Xr,rn){var nn=rn[0];return{$x:function(){var an=nn.greater(On(0)),on=On(bs),sn=On(ws),ln=Xr.mul(sn),un=Xr.mul(on).mul(nn.toFloat().exp());return ec(an,ln,un)}}})}}),Wl=An({transpose_:function(st,Mt){var Xr=mn(st,"x","transpose");if(Mt==null&&(Mt=Xr.shape.map(function(nn,an){return an}).reverse()),C(Xr.rank===Mt.length,function(){return"Error in transpose: rank of input "+Xr.rank+" must match length of perm "+Mt+"."}),Mt.forEach(function(nn){C(nn>=0&&nn<Xr.rank,function(){return"All entries in 'perm' must be between 0 and "+(Xr.rank-1)+" but got "+Mt})}),Xr.rank<=1)return Xr.clone();var rn={perm:Mt};return Lt.runKernelFunc(function(nn){return nn.transpose(Xr,Mt)},{x:Xr},function(nn){var an=Rn(Mt);return{x:function(){return nn.transpose(an)}}},"Transpose",rn)}}),Ul=An({localResponseNormalization_:function(st,Mt,Xr,rn,nn){Mt===void 0&&(Mt=5),Xr===void 0&&(Xr=1),rn===void 0&&(rn=1),nn===void 0&&(nn=.5);var an=mn(st,"x","localResponseNormalization");C(an.rank===4||an.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+an.rank+"."}),C(A$1(Mt),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+Mt+"."});var on=an,sn=!1;an.rank===3&&(sn=!0,on=an.as4D(1,an.shape[0],an.shape[1],an.shape[2]));var ln=Lt.runKernelFunc(function(un,cn){var hn=un.localResponseNormalization4D(on,Mt,Xr,rn,nn);return cn([on,hn]),hn},{x4D:on},function(un,cn){var hn=cn[0],fn=cn[1];return{x4D:function(){return Lt.runKernelFunc(function(to){return to.LRNGrad(un,hn,fn,Mt,Xr,rn,nn)},{})}}});return sn?ln.as3D(ln.shape[1],ln.shape[2],ln.shape[3]):ln}}),Vl=An({norm_:function(st,Mt,Xr,rn){Mt===void 0&&(Mt="euclidean"),Xr===void 0&&(Xr=null),rn===void 0&&(rn=!1);var nn=function sn(ln,un,cn){if(cn===void 0&&(cn=null),ln.rank===0)return ln.abs();if(ln.rank!==1&&cn===null)return sn(ln.reshape([-1]),un,cn);if(ln.rank===1||typeof cn=="number"||Array.isArray(cn)&&cn.length===1){if(un===1)return ln.abs().sum(cn);if(un===1/0)return ln.abs().max(cn);if(un===-1/0)return ln.abs().min(cn);if(un==="euclidean"||un===2)return ln.abs().pow(On(2,"int32")).sum(cn).sqrt();throw new Error("Error in norm: invalid ord value: "+un)}if(Array.isArray(cn)&&cn.length===2){if(un===1)return ln.abs().sum(cn[0]).max(cn[1]-1);if(un===1/0)return ln.abs().sum(cn[1]).max(cn[0]);if(un===-1/0)return ln.abs().sum(cn[1]).min(cn[0]);if(un==="fro"||un==="euclidean")return ln.square().sum(cn).sqrt();throw new Error("Error in norm: invalid ord value: "+un)}throw new Error("Error in norm: invalid axis: "+cn)}(st=mn(st,"x","norm"),Mt,Xr),an=nn.shape;if(rn){var on=O$1(Xr,st.shape);an=wn(nn.shape,on)}return nn.reshape(an)}}),zl=An({basicLSTMCell_:function(st,Mt,Xr,rn,nn,an){var on=mn(st,"forgetBias","basicLSTMCell"),sn=mn(Mt,"lstmKernel","basicLSTMCell"),ln=mn(Xr,"lstmBias","basicLSTMCell"),un=mn(rn,"data","basicLSTMCell"),cn=mn(nn,"c","basicLSTMCell"),hn=mn(an,"h","basicLSTMCell"),fn=un.concat(hn,1).matMul(sn).add(ln),to=fn.shape[0],uo=fn.shape[1]/4,co=[to,uo],Uo=fn.slice([0,0],co),lo=fn.slice([0,uo],co),ho=fn.slice([0,2*uo],co),fo=fn.slice([0,3*uo],co),mo=Uo.sigmoid().mulStrict(lo.tanh()).addStrict(cn.mulStrict(on.add(ho).sigmoid())),_d=mo.tanh().mulStrict(fo.sigmoid());return[mo,_d]}}),Gl=An({multiRNNCell_:function(st,Mt,Xr,rn){for(var nn=mn(Mt,"data","multiRNNCell"),an=gn(Xr,"c","multiRNNCell"),on=gn(rn,"h","multiRNNCell"),sn=nn,ln=[],un=0;un<st.length;un++){var cn=st[un](sn,an[un],on[un]);ln.push(cn[0]),ln.push(cn[1]),sn=cn[1]}var hn=[],fn=[];for(un=0;un<ln.length;un+=2)hn.push(ln[un]),fn.push(ln[un+1]);return[hn,fn]}}),Hl=An({movingAverage_:function(st,Mt,Xr,rn,nn){nn===void 0&&(nn=!0);var an=mn(st,"v","movingAverage"),on=mn(Mt,"x","movingAverage"),sn=mn(Xr,"decay","movingAverage");Ft(an,on),C(S$3(an.shape,on.shape),function(){return"Shape mismatch in v and x"});var ln=On(1),un=ln.sub(sn),cn=on.sub(an).mul(un);if(nn){C(rn!=null,function(){return"When using zeroDebias: true, step is required."});var hn=mn(rn,"step","movingAverage");cn=cn.div(ln.sub(xc(sn,hn)))}return an.add(cn)}}),ql=An({stridedSlice_:function(st,Mt,Xr,rn,nn,an,on,sn,ln){if(nn===void 0&&(nn=0),an===void 0&&(an=0),on===void 0&&(on=0),sn===void 0&&(sn=0),ln===void 0&&(ln=0),rn==null&&(rn=new Array(Mt.length)),on!==0)throw new Error("ellipsis mask is not yet supported");var un=mn(st,"x","stridedSlice"),cn=no(sn),hn=un.shape.slice();cn.forEach(function(Uo){Mt[Uo]=0,Xr[Uo]=1,hn.splice(Uo,0,1)}),un=un.reshape(hn);for(var fn=0;fn<un.rank;fn++)Mt[fn]=oo(nn,Mt,rn,un.shape,fn),Xr[fn]=ao(an,Xr,rn,un.shape,fn),rn[fn]=rn[fn]||1;var to=no(ln);to.forEach(function(Uo){Xr[Uo]=Mt[Uo]+1,rn[Uo]=1});var uo=ro(Mt,Xr,rn),co=uo.filter(function(Uo,lo){return to.indexOf(lo)===-1});return rn.every(function(Uo){return Uo===1})?ml(un,Mt,uo).reshape(co):Lt.runKernelFunc(function(Uo){return Uo.stridedSlice(un,Mt,Xr,rn)},{$x:un}).reshape(co)}}),Kl=An({topk_:function(st,Mt,Xr){Mt===void 0&&(Mt=1),Xr===void 0&&(Xr=!0);var rn=mn(st,"x","topk");if(rn.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var nn=rn.shape[rn.shape.length-1];if(Mt>nn)throw new Error("'k' passed to topk() must be <= the last dimension ("+nn+") but got "+Mt);var an=Lt.runKernelFunc(function(on){return on.topk(rn,Mt,Xr)},{$x:rn});return{values:an[0],indices:an[1]}}}),jl=An({scatterND_:function(st,Mt,Xr){var rn=mn(st,"indices","scatterND","int32"),nn=mn(Mt,"updates","scatterND");return Jr(nn,rn,Xr),Lt.runKernelFunc(function(an){return an.scatterND(rn,nn,Xr)},{indices:rn,updates:nn},null,"ScatterNd",{shape:Xr})}}),Xl=An({fft_:function(st){C(st.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+st.dtype+"."});var Mt=st.shape[st.shape.length-1],Xr=st.size/Mt,rn=st.as2D(Xr,Mt);return Lt.runKernelFunc(function(nn){return nn.fft(rn)},{input:st}).reshape(st.shape)}}),Yl=An({ifft_:function(st){C(st.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+st.dtype+"."});var Mt=st.shape[st.shape.length-1],Xr=st.size/Mt,rn=st.as2D(Xr,Mt);return Lt.runKernelFunc(function(nn){return nn.ifft(rn)},{input:st}).reshape(st.shape)}}),$l=An({rfft_:function(st,Mt){C(st.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+st.dtype});var Xr,rn=st.shape[st.shape.length-1],nn=st.size/rn;if(Mt!=null&&Mt<rn){var an=st.shape.map(function(lo){return 0}),on=st.shape.map(function(lo){return lo});on[st.shape.length-1]=Mt,Xr=st.slice(an,on),rn=Mt}else if(Mt!=null&&Mt>rn){var sn=st.shape.map(function(lo){return lo});sn[st.shape.length-1]=Mt-rn,Xr=st.concat(Gn(sn),st.shape.length-1),rn=Mt}else Xr=st;var ln=Xr.zerosLike(),un=Dn(Xr,ln).as2D(nn,rn),cn=Xl(un),hn=Math.floor(rn/2)+1,fn=Tn(cn),to=Nn(cn),uo=fn.split([hn,rn-hn],fn.shape.length-1),co=to.split([hn,rn-hn],to.shape.length-1),Uo=Xr.shape.slice();return Uo[Xr.shape.length-1]=hn,Dn(uo[0],co[0]).reshape(Uo)}}),Ql=An({irfft_:function(st){var Mt=st.shape[st.shape.length-1],Xr=st.size/Mt;if(Mt<=2){var rn=st.as2D(Xr,Mt),nn=Yl(rn);return Tn(nn)}var an=[Xr,2*(Mt-1)],on=Tn(st).as2D(Xr,Mt),sn=Nn(st).as2D(Xr,Mt),ln=on.slice([0,1],[Xr,Mt-2]).reverse(1),un=sn.slice([0,1],[Xr,Mt-2]).reverse(1).mul(On(-1)),cn=on.concat(ln,1),hn=sn.concat(un,1);return rn=Dn(cn,hn).as2D(an[0],an[1]),nn=Yl(rn),Tn(nn)}}),Jl=Object.freeze({fft:Xl,ifft:Yl,rfft:$l,irfft:Ql}),Zl=An({sparseToDense_:function(st,Mt,Xr,rn){rn===void 0&&(rn=0);var nn=mn(st,"sparseIndices","sparseToDense","int32"),an=mn(Mt,"sparseValues","sparseToDense"),on=mn(rn,"defaultValue","sparseToDense",an.dtype);return function(sn,ln,un,cn){if(sn.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+sn.dtype+".");if(sn.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+sn.shape+".");var hn=sn.rank>0?sn.shape[0]:1,fn=sn.rank>1?sn.shape[1]:1;if(un.length!==fn)throw new Error("outputShape has incorrect number of elements:, "+un.length+", should be: "+fn+".");var to=ln.size;if(ln.rank!==0&&(ln.rank!==1||to!==hn))throw new Error("sparseValues has incorrect shape "+ln.shape+", should be [] or ["+hn+"]");if(ln.dtype!==cn.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(nn,an,Xr,on),Lt.runKernelFunc(function(sn){return sn.sparseToDense(nn,an,Xr,on)},{$sparseIndices:nn,$sparseValues:an,$defaultValue:on})}}),th=An({gatherND_:function(st,Mt){var Xr=mn(Mt,"indices","gatherND","int32"),rn=mn(st,"x","gatherND");return Lt.runKernelFunc(function(nn){return nn.gatherND(rn,Xr)},{x:rn,indices:Xr},null,"GatherNd")}}),eh=An({diag_:function(st){var Mt=mn(st,"x","diag").flatten(),Xr=st.shape.concat(st.shape);return Lt.runKernelFunc(function(rn){return rn.diag(Mt)},{$x:Mt}).reshape(Xr)}}),nh=An({dropout_:function(st,Mt,Xr,rn){var nn=mn(st,"x","dropout");if(C(nn.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+nn.dtype+" tensor instead."}),C(Mt>=0&&Mt<1,function(){return"rate must be a float in the range [0, 1), but got "+Mt+"."}),Mt===0)return st instanceof wt?nn.clone():nn;var an=function(ln,un){if(un==null)return ln.shape.slice();if(S$3(ln.shape,un))return un;if(ln.shape.length===un.length){for(var cn=[],hn=0;hn<ln.shape.length;hn++)un[hn]==null&&ln.shape[hn]!=null?cn.push(ln.shape[hn]):cn.push(un[hn]);return cn}return un}(nn,Xr),on=1-Mt,sn=_r(an,0,1,"float32",rn).add(on).floor().div(on);return nn.mul(sn)}});function rh(st,Mt,Xr){for(var rn=1-st%2,nn=new Float32Array(st),an=0;an<st;++an){var on=2*Math.PI*an/(st+rn-1);nn[an]=Mt-Xr*Math.cos(on)}return Mn(nn,"float32")}var oh=An({hannWindow_:function(st){return rh(st,.5,.5)}}),ah=An({hammingWindow_:function(st){return rh(st,.54,.46)}}),ih=An({frame_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=!1),nn===void 0&&(nn=0);for(var an=0,on=[];an+Mt<=st.size;)on.push(ml(st,an,Mt)),an+=Xr;if(rn)for(;an<st.size;){var sn=an+Mt-st.size,ln=Yn([ml(st,an,Mt-sn),Hn([sn],nn)]);on.push(ln),an+=Xr}return on.length===0?Bn([],[0,Mt]):Yn(on).as2D(on.length,Mt)}}),sh=An({stft_:function(st,Mt,Xr,rn,nn){var an;nn===void 0&&(nn=oh),rn==null&&(an=Mt,rn=Math.floor(Math.pow(2,Math.ceil(Math.log(an)/Math.log(2)))));for(var on=ih(st,Mt,Xr),sn=gc(on,nn(Mt)),ln=[],un=0;un<on.shape[0];un++)ln.push($l(sn.slice([un,0],[1,Mt]),rn));return Yn(ln)}}),uh=Object.freeze({hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh}),ch,lh=function(st,Mt,Xr){return Xr===void 0&&(Xr=1),n(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo;return r$2(this,function(lo){switch(lo.label){case 0:return rn=mn(st,"predictions","inTopK"),nn=mn(Mt,"targets","inTopK"),C(rn.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+rn.rank}),C(rn.rank-1===nn.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+rn.rank+" and targets rank "+nn.rank}),E(rn.shape.slice(0,rn.shape.length-1),nn.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),an=rn.shape[rn.shape.length-1],C(Xr>0&&Xr<=an,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+an+"), but got "+Xr}),[4,rn.data()];case 1:return on=lo.sent(),[4,nn.data()];case 2:for(sn=lo.sent(),ln=[on.length/an,an],cn=ln[1],hn=B$1("bool",un=ln[0]),fn=0;fn<un;fn++){for(to=fn*cn,uo=on.subarray(to,to+cn),co=[],Uo=0;Uo<uo.length;Uo++)co.push({value:uo[Uo],index:Uo});for(co.sort(function(ho,fo){return fo.value-ho.value}),hn[fn]=0,Uo=0;Uo<Xr;Uo++)if(co[Uo].index===sn[fn]){hn[fn]=1;break}}return st!==rn&&rn.dispose(),Mt!==nn&&nn.dispose(),[2,Fn(hn,nn.shape,"bool")]}})})};(function(st){st[st.NONE=0]="NONE",st[st.MEAN=1]="MEAN",st[st.SUM=2]="SUM",st[st.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ch||(ch={}));var hh=An({absoluteDifference_:function(st,Mt,Xr,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var nn=mn(st,"labels","absoluteDifference"),an=mn(Mt,"predictions","absoluteDifference"),on=null;Xr!=null&&(on=mn(Xr,"weights","absoluteDifference")),E(nn.shape,an.shape,"Error in absoluteDifference: ");var sn=nn.sub(an).abs();return fh(sn,on,rn)}}),fh=An({computeWeightedLoss_:function(st,Mt,Xr){Xr===void 0&&(Xr=ch.SUM_BY_NONZERO_WEIGHTS);var rn=mn(st,"losses","computeWeightedLoss"),nn=null;Mt!=null&&(nn=mn(Mt,"weights","computeWeightedLoss"));var an=nn==null?rn:rn.mul(nn);if(Xr===ch.NONE)return an;if(Xr===ch.SUM)return an.sum();if(Xr===ch.MEAN){if(nn==null)return an.mean();var on=rn.size/nn.size,sn=an.sum().div(nn.sum());return on>1?sn.div(On(on)):sn}if(Xr===ch.SUM_BY_NONZERO_WEIGHTS){if(nn==null)return an.sum().div(On(rn.size));var ln=nn.mul(zn(rn.shape)).notEqual(On(0)).sum().toFloat();return an.sum().div(ln)}throw Error("Unknown reduction: "+Xr)}}),dh=An({cosineDistance_:function(st,Mt,Xr,rn,nn){nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(st,"labels","cosineDistance"),on=mn(Mt,"predictions","cosineDistance"),sn=null;rn!=null&&(sn=mn(rn,"weights","cosineDistance")),E(an.shape,on.shape,"Error in cosineDistance: ");var ln=On(1).sub(an.mul(on).sum(Xr,!0));return fh(ln,sn,nn)}}),ph=An({hingeLoss_:function(st,Mt,Xr,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var nn=mn(st,"labels","hingeLoss"),an=mn(Mt,"predictions","hingeLoss"),on=null;Xr!=null&&(on=mn(Xr,"weights","hingeLoss")),E(nn.shape,an.shape,"Error in hingeLoss: ");var sn=On(1);nn=On(2).mul(nn).sub(sn);var ln=sn.sub(nn.mul(an)).relu();return fh(ln,on,rn)}}),vh=An({huberLoss_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=1),nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(st,"labels","huberLoss"),on=mn(Mt,"predictions","huberLoss"),sn=null;Xr!=null&&(sn=mn(Xr,"weights","huberLoss")),E(an.shape,on.shape,"Error in huberLoss: ");var ln=On(rn),un=on.sub(an).abs(),cn=dc(un,ln),hn=un.sub(cn),fn=On(.5).mul(cn.square()).add(ln.mul(hn));return fh(fn,sn,nn)}}),mh=An({logLoss_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=1e-7),nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(st,"labels","logLoss"),on=mn(Mt,"predictions","logLoss"),sn=null;Xr!=null&&(sn=mn(Xr,"weights","logLoss")),E(an.shape,on.shape,"Error in logLoss: ");var ln=On(1),un=On(rn),cn=an.mul(on.add(un).log()).neg().sub(ln.sub(an).mul(ln.sub(on).add(un).log()));return fh(cn,sn,nn)}}),gh=An({meanSquaredError_:function(st,Mt,Xr,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var nn=mn(st,"labels","meanSquaredError"),an=mn(Mt,"predictions","meanSquaredError"),on=null;Xr!=null&&(on=mn(Xr,"weights","meanSquaredError")),E(nn.shape,an.shape,"Error in meanSquaredError: ");var sn=nn.squaredDifference(an);return fh(sn,on,rn)}}),yh=An({sigmoidCrossEntropy_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=0),nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(st,"multiClassLabels","sigmoidCrossEntropy"),on=mn(Mt,"logits","sigmoidCrossEntropy"),sn=null;if(Xr!=null&&(sn=mn(Xr,"weights","sigmoidCrossEntropy")),E(an.shape,on.shape,"Error in sigmoidCrossEntropy: "),rn>0){var ln=On(rn),un=On(1),cn=On(.5);an=an.mul(un.sub(ln)).add(cn.mul(ln))}var hn=function(fn,to){var uo=mn(fn,"labels","sigmoidCrossEntropyWithLogits"),co=mn(to,"logits","sigmoidCrossEntropyWithLogits");E(uo.shape,co.shape,"Error in sigmoidCrossEntropyWithLogits: ");var Uo=co.relu(),lo=co.mul(uo),ho=co.abs().neg().exp().log1p();return Uo.sub(lo).add(ho)}(an,on);return fh(hn,sn,nn)}}),xh=An({softmaxCrossEntropy_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=0),nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(st,"onehotLabels","softmaxCrossEntropy"),on=mn(Mt,"logits","softmaxCrossEntropy"),sn=null;if(Xr!=null&&(sn=mn(Xr,"weights","softmaxCrossEntropy")),E(an.shape,on.shape,"Error in softmaxCrossEntropy: "),rn>0){var ln=On(rn),un=On(1),cn=On(an.shape[1]);an=an.mul(un.sub(ln)).add(ln.div(cn))}var hn=function(fn,to,uo){if(uo===void 0&&(uo=-1),uo===-1&&(uo=to.rank-1),uo!==to.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+to.rank+" and dim was "+uo);return vo(function(co,Uo,lo){var ho=Uo.logSumExp([uo],!0),fo=Uo.toFloat().sub(ho);return lo([co,fo]),{value:fo.mul(co).neg().sum([uo]),gradFunc:function(mo,_d){var ep=_d[0],rp=_d[1],ap=wn(mo.shape,[uo]);return[mo.reshape(ap).mul(ep.toFloat().sub(rp.exp())),mo.reshape(ap).mul(rp.exp().sub(ep.toFloat()))]}}})(fn,to)}(an,on);return fh(hn,sn,nn)}}),bh=Object.freeze({get Reduction(){return ch},absoluteDifference:hh,computeWeightedLoss:fh,cosineDistance:dh,hingeLoss:ph,huberLoss:vh,logLoss:mh,meanSquaredError:gh,sigmoidCrossEntropy:yh,softmaxCrossEntropy:xh});function wh(st,Mt){return Mt===void 0&&(Mt=!1),Lt.tidy(function(){if(st.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+st.shape.length+"D Tensor.");for(var Xr=st.shape[0],rn=st.shape[1],nn=Cr(Xr),an=st.clone(),on=Bn([[1]],[1,1]),sn=on.clone(),ln=Xr>=rn?rn:Xr,un=function(hn){var fn,to=an,uo=sn,co=nn;fn=Lt.tidy(function(){var Uo=an.slice([hn,hn],[Xr-hn,1]),lo=Uo.norm(),ho=an.slice([hn,hn],[1,1]),fo=Bn([[-1]]).where(ho.greater(0),Bn([[1]])),mo=ho.sub(fo.mul(lo)),_d=Uo.div(mo);sn=_d.shape[0]===1?on.clone():on.concat(_d.slice([1,0],[_d.shape[0]-1,_d.shape[1]]),0);var ep=fo.matMul(mo).div(lo).neg(),rp=an.slice([hn,0],[Xr-hn,rn]),ap=ep.mul(sn);if(hn===0)an=rp.sub(ap.matMul(sn.transpose().matMul(rp)));else{var sp=rp.sub(ap.matMul(sn.transpose().matMul(rp)));an=an.slice([0,0],[hn,rn]).concat(sp,0)}var up=nn.slice([0,hn],[Xr,nn.shape[1]-hn]);if(hn===0)nn=up.sub(up.matMul(sn).matMul(ap.transpose()));else{var pp=up.sub(up.matMul(sn).matMul(ap.transpose()));nn=nn.slice([0,0],[Xr,hn]).concat(pp,1)}return[sn,an,nn]}),sn=fn[0],an=fn[1],nn=fn[2],tn([to,uo,co])},cn=0;cn<ln;++cn)un(cn);return!Mt&&Xr>rn&&(nn=nn.slice([0,0],[Xr,rn]),an=an.slice([0,0],[rn,rn])),[nn,an]})}var Ch=An({bandPart_:function(st,Mt,Xr){if(Mt%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+Mt+".");if(Xr%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+Xr+".");var rn=mn(st,"a","bandPart");if(rn.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+rn.rank+".");var nn=rn.shape,an=rn.shape.slice(-2),on=an[0],sn=an[1];if(!(Mt<=on))throw new Error("bandPart(): numLower ("+Mt+") must not be greater than the number of rows ("+on+").");if(!(Xr<=sn))throw new Error("bandPart(): numUpper ("+Xr+") must not be greater than the number of columns ("+sn+").");Mt<0&&(Mt=on),Xr<0&&(Xr=sn);var ln=Kn(0,on,1,"int32").reshape([-1,1]),un=Kn(0,sn,1,"int32"),cn=Cc(ln,un),hn=Qu(cn.lessEqual(On(+Mt,"int32")),cn.greaterEqual(On(-Xr,"int32"))),fn=Gn([on,sn],rn.dtype);return Pr(Ur(rn.reshape([-1,on,sn])).map(function(to){return ec(hn,to,fn)})).reshape(nn)}}),Eh=An({gramSchmidt_:function(st){var Mt;if(Array.isArray(st)){Mt=!1,C(st!=null&&st.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var Xr=st[0].shape[0],rn=function(ln){C(st[ln].shape[0]===Xr,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+st[ln].shape[0]+" vs. "+Xr+")"})},nn=1;nn<st.length;++nn)rn(nn)}else Mt=!0,st=tr(st,st.shape[0],0).map(function(ln){return Br(ln,[0])});C(st.length<=st[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+st.length+") exceeds number of dimensions ("+st[0].shape[0]+")."});var an=[],on=st,sn=function(ln){an.push(Lt.tidy(function(){var un=on[ln];if(ln>0)for(var cn=0;cn<ln;++cn){var hn=Nl(an[cn].mulStrict(un)).mul(an[cn]);un=un.sub(hn)}return un.div(Vl(un,"euclidean"))}))};for(nn=0;nn<st.length;++nn)sn(nn);return Mt?Pr(an,0):an}}),Rh=An({qr_:function(st,Mt){if(Mt===void 0&&(Mt=!1),st.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+st.rank);if(st.rank===2)return wh(st,Mt);var Xr=st.shape.slice(0,st.shape.length-2).reduce(function(on,sn){return on*sn}),rn=Ur(st.reshape([Xr,st.shape[st.shape.length-2],st.shape[st.shape.length-1]]),0),nn=[],an=[];return rn.forEach(function(on){var sn=wh(on,Mt),ln=sn[0],un=sn[1];nn.push(ln),an.push(un)}),[Pr(nn,0).reshape(st.shape),Pr(an,0).reshape(st.shape)]}}),Ih=Object.freeze({bandPart:Ch,gramSchmidt:Eh,qr:Rh});function kh(st,Mt,Xr,rn,nn,an){rn==null&&(rn=.5),nn==null&&(nn=Number.NEGATIVE_INFINITY),an==null&&(an=0);var on=st.shape[0];return Xr=Math.min(Xr,on),C(0<=rn&&rn<=1,function(){return"iouThreshold must be in [0, 1], but was '"+rn+"'"}),C(st.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+st.rank+"'"}),C(st.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+st.shape[1]}),C(Mt.rank===1,function(){return"scores must be a 1D tensor"}),C(Mt.shape[0]===on,function(){return"scores has incompatible shape with boxes. Expected "+on+", but was "+Mt.shape[0]}),C(0<=an&&an<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+an+"'"}),{maxOutputSize:Xr,iouThreshold:rn,scoreThreshold:nn,softNmsSigma:an}}var Sh=An({resizeBilinear_:function(st,Mt,Xr){Xr===void 0&&(Xr=!1);var rn=mn(st,"images","resizeBilinear");C(rn.rank===3||rn.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+rn.rank+"."}),C(Mt.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+Mt+"."});var nn=rn,an=!1;rn.rank===3&&(an=!0,nn=rn.as4D(1,rn.shape[0],rn.shape[1],rn.shape[2]));var on=Mt[0],sn=Mt[1],ln=Lt.runKernelFunc(function(un,cn){return cn([nn]),un.resizeBilinear(nn,on,sn,Xr)},{x:nn},function(un,cn){return{x:function(){return Lt.runKernelFunc(function(hn){return hn.resizeBilinearBackprop(un,cn[0],Xr)},{})}}},"ResizeBilinear",{alignCorners:Xr,newHeight:on,newWidth:sn});return an?ln.as3D(ln.shape[1],ln.shape[2],ln.shape[3]):ln}}),Ah=An({resizeNearestNeighbor_:function(st,Mt,Xr){Xr===void 0&&(Xr=!1);var rn=mn(st,"images","resizeNearestNeighbor");C(rn.rank===3||rn.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+rn.rank+"."}),C(Mt.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+Mt+"."}),C(rn.dtype==="float32"||rn.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var nn=rn,an=!1;rn.rank===3&&(an=!0,nn=rn.as4D(1,rn.shape[0],rn.shape[1],rn.shape[2]));var on=Mt[0],sn=Mt[1],ln=Lt.runKernelFunc(function(un,cn){return cn([nn]),un.resizeNearestNeighbor(nn,on,sn,Xr)},{batchImages:nn},function(un,cn){return{batchImages:function(){return Lt.runKernelFunc(function(hn){return hn.resizeNearestNeighborBackprop(un,cn[0],Xr)},{})}}});return an?ln.as3D(ln.shape[1],ln.shape[2],ln.shape[3]):ln}}),Dh=An({nonMaxSuppression_:function(st,Mt,Xr,rn,nn){rn===void 0&&(rn=.5),nn===void 0&&(nn=Number.NEGATIVE_INFINITY);var an=mn(st,"boxes","nonMaxSuppression"),on=mn(Mt,"scores","nonMaxSuppression"),sn=kh(an,on,Xr,rn,nn);Xr=sn.maxOutputSize,rn=sn.iouThreshold,nn=sn.scoreThreshold;var ln={maxOutputSize:Xr,iouThreshold:rn,scoreThreshold:nn};return Lt.runKernelFunc(function(un){return un.nonMaxSuppression(an,on,Xr,rn,nn)},{boxes:an,scores:on},null,"NonMaxSuppressionV3",ln)}}),Th=function(st,Mt,Xr,rn,nn){return rn===void 0&&(rn=.5),nn===void 0&&(nn=Number.NEGATIVE_INFINITY),n(this,void 0,void 0,function(){var an,on,sn,ln,un,cn,hn;return r$2(this,function(fn){switch(fn.label){case 0:return an=mn(st,"boxes","nonMaxSuppressionAsync"),on=mn(Mt,"scores","nonMaxSuppressionAsync"),sn=kh(an,on,Xr,rn,nn),Xr=sn.maxOutputSize,rn=sn.iouThreshold,nn=sn.scoreThreshold,[4,Promise.all([an.data(),on.data()])];case 1:return ln=fn.sent(),un=ln[0],cn=ln[1],hn=jo(un,cn,Xr,rn,nn),an!==st&&an.dispose(),on!==Mt&&on.dispose(),[2,hn]}})})},Nh=An({nonMaxSuppressionWithScore_:function(st,Mt,Xr,rn,nn,an){rn===void 0&&(rn=.5),nn===void 0&&(nn=Number.NEGATIVE_INFINITY),an===void 0&&(an=0);var on=mn(st,"boxes","nonMaxSuppression"),sn=mn(Mt,"scores","nonMaxSuppression"),ln=kh(on,sn,Xr,rn,nn,an),un={maxOutputSize:Xr=ln.maxOutputSize,iouThreshold:rn=ln.iouThreshold,scoreThreshold:nn=ln.scoreThreshold,softNmsSigma:an=ln.softNmsSigma},cn=Lt.runKernel("NonMaxSuppressionV5",{boxes:on,scores:sn},un);return{selectedIndices:cn[0],selectedScores:cn[1]}}}),Fh=function(st,Mt,Xr,rn,nn,an){return rn===void 0&&(rn=.5),nn===void 0&&(nn=Number.NEGATIVE_INFINITY),an===void 0&&(an=0),n(this,void 0,void 0,function(){var on,sn,ln,un,cn,hn,fn;return r$2(this,function(to){switch(to.label){case 0:return on=mn(st,"boxes","nonMaxSuppressionAsync"),sn=mn(Mt,"scores","nonMaxSuppressionAsync"),ln=kh(on,sn,Xr,rn,nn,an),Xr=ln.maxOutputSize,rn=ln.iouThreshold,nn=ln.scoreThreshold,an=ln.softNmsSigma,[4,Promise.all([on.data(),sn.data()])];case 1:return un=to.sent(),cn=un[0],hn=un[1],fn=Xo(cn,hn,Xr,rn,nn,an),on!==st&&on.dispose(),sn!==Mt&&sn.dispose(),[2,fn]}})})},_h=An({cropAndResize_:function(st,Mt,Xr,rn,nn,an){var on=mn(st,"image","cropAndResize"),sn=mn(Mt,"boxes","cropAndResize","float32"),ln=mn(Xr,"boxInd","cropAndResize","int32");nn=nn||"bilinear",an=an||0;var un=sn.shape[0];return C(on.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+on.rank+"."}),C(sn.rank===2&&sn.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+un+",4] but had shape "+sn.shape+"."}),C(ln.rank===1&&ln.shape[0]===un,function(){return"Error in cropAndResize: boxInd must be have size ["+un+"] but had shape "+sn.shape+"."}),C(rn.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+rn.length+"."}),C(rn[0]>=1&&rn[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+rn}),C(nn==="bilinear"||nn==="nearest",function(){return"method must be bilinear or nearest, but was "+nn}),Lt.runKernelFunc(function(cn,hn){return cn.cropAndResize(on,sn,ln,rn,nn,an)},{images:on,boxes:sn,boxInd:ln},null,"CropAndResize",{method:nn,extrapolationValue:an,cropSize:rn})}}),Oh=Object.freeze({resizeBilinear:Sh,resizeNearestNeighbor:Ah,nonMaxSuppression:Dh,nonMaxSuppressionAsync:Th,nonMaxSuppressionWithScore:Nh,nonMaxSuppressionWithScoreAsync:Fh,cropAndResize:_h}),Mh=function(st,Mt){return!(st>0)||Mt==="linear"},Bh=function(st,Mt,Xr){if(Xr==null||Xr==="linear")return st;if(Xr==="relu")return st.mul(Mt.step());throw new Error("Gradient for activation "+Xr+" has not been implemented yet.")},Ph=function(st,Mt){var Xr=Mt,rn=Eo(st.shape,Mt.shape);return rn.length>0&&(Xr=Xr.sum(rn)),Xr.reshape(st.shape)},Lh=function(st,Mt,Xr){if(Mt==="linear")return st;if(Mt==="relu")return Bl(st);if(Mt==="elu")return _l(st);if(Mt==="relu6")return Pl(st);if(Mt==="prelu")return Ml(st,Xr);throw new Error("Unknown fused activation "+Mt+".")},Wh=An({fusedMatMul_:function(st){var Mt,Xr=st.a,rn=st.b,nn=st.transposeA,an=nn!==void 0&&nn,on=st.transposeB,sn=on!==void 0&&on,ln=st.bias,un=st.activation,cn=un===void 0?"linear":un,hn=st.preluActivationWeights;if(Mh(Lt.state.gradientDepth,cn)===!1){var fn=el(Xr,rn,an,sn);return ln!=null&&(fn=rc(fn,ln)),Lh(fn,cn,hn)}var to=mn(Xr,"a","fused matMul"),uo=mn(rn,"b","fused matMul");Mt=Nt(to,uo),to=Mt[0],uo=Mt[1];var co=an?to.shape[to.rank-2]:to.shape[to.rank-1],Uo=sn?uo.shape[uo.rank-1]:uo.shape[uo.rank-2],lo=an?to.shape[to.rank-1]:to.shape[to.rank-2],ho=sn?uo.shape[uo.rank-2]:uo.shape[uo.rank-1],fo=to.shape.slice(0,-2),mo=uo.shape.slice(0,-2),_d=k(fo),ep=k(mo);C(to.rank>=2&&uo.rank>=2&&to.rank===uo.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+to.rank+" and "+uo.rank+"."}),C(S$3(fo,mo),function(){return"Error in fused matMul: outer dimensions ("+fo+") and ("+mo+") of Tensors with shapes "+to.shape+" and "+uo.shape+" must match."}),C(co===Uo,function(){return"Error in fused matMul: inner shapes ("+co+") and ("+Uo+") of Tensors with shapes "+to.shape+" and "+uo.shape+" and transposeA="+an+" and transposeB="+sn+" must match."});var rp,ap,sp=to.shape.slice(0,-2).concat([lo,ho]),up=an?to.as3D(_d,co,lo):to.as3D(_d,lo,co),pp=sn?uo.as3D(ep,ho,Uo):uo.as3D(ep,Uo,ho);ln!=null&&Ro(sp,(rp=Nt(rp=mn(ln,"bias","fused matMul"),to)[0]).shape),hn!=null&&(ap=mn(hn,"prelu weights","fused matMul"));var hp={a:up,b:pp};ln!=null&&(hp.bias=rp),hn!=null&&(hp.preluActivationWeights=ap);var vp=[up,pp];return Lt.runKernelFunc(function(gp,mp){var lp=gp.fusedBatchMatMul({a:up,b:pp,transposeA:an,transposeB:sn,bias:rp,activation:cn,preluActivationWeights:ap});return mp([up,pp,lp]),lp},hp,function(gp,mp){var lp=mp[0],cp=mp[1],tp=mp[2],np=Bh(gp,tp,cn),fp={};return ln!=null&&(fp={bias:function(){return Ph(rp,np)}}),Object.assign(an||sn?!an&&sn?{a:function(){return np.matMul(cp,!1,!1)},b:function(){return np.matMul(lp,!0,!1)}}:an&&!sn?{a:function(){return cp.matMul(np,!1,!0)},b:function(){return lp.matMul(np,!1,!1)}}:{a:function(){return cp.matMul(np,!0,!0)},b:function(){return np.matMul(lp,!0,!0)}}:{a:function(){return np.matMul(cp,!1,!0)},b:function(){return lp.matMul(np,!0,!1)}},fp)},"_FusedMatMul",{transposeA:an,transposeB:sn,activation:cn},vp,[!0]).reshape(sp)}}),Uh=An({fusedConv2d_:function(st){var Mt=st.x,Xr=st.filter,rn=st.strides,nn=st.pad,an=st.dataFormat,on=an===void 0?"NHWC":an,sn=st.dilations,ln=sn===void 0?[1,1]:sn,un=st.dimRoundingMode,cn=st.bias,hn=st.activation,fn=hn===void 0?"linear":hn,to=st.preluActivationWeights;if(fn=fn||"linear",Mh(Lt.state.gradientDepth,fn)===!1){var uo=qc(Mt,Xr,rn,nn,on,ln,un);return cn!=null&&(uo=rc(uo,cn)),Lh(uo,fn,to)}var co=mn(Mt,"x","conv2d"),Uo=mn(Xr,"filter","conv2d"),lo=co,ho=!1;co.rank===3&&(ho=!0,lo=co.as4D(1,co.shape[0],co.shape[1],co.shape[2])),C(lo.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+lo.rank+"."}),C(Uo.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+Uo.rank+"."}),un!=null&&C(A$1(nn),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+un+" but got pad "+nn+"."}),C(lo.shape[3]===Uo.shape[2],function(){return"Error in conv2d: depth of input ("+lo.shape[3]+") must match input depth for filter "+Uo.shape[2]+"."}),C(Mo(rn,ln),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+rn+" and dilations '"+ln+"'"}),C(on==="NHWC",function(){return"Error in conv2d: got dataFormat of "+on+" but only NHWC is currently supported."});var fo,mo,_d=So(lo.shape,Uo.shape,rn,ln,nn,un);cn!=null&&(fo=Nt(fo=mn(cn,"bias","fused conv2d"),co)[0],Ro(_d.outShape,fo.shape)),to!=null&&(mo=mn(to,"prelu weights","fused conv2d"));var ep={x:lo,filter:Uo};cn!=null&&(ep.bias=fo),to!=null&&(ep.preluActivationWeights=mo);var rp=[Uo,lo],ap=Lt.runKernelFunc(function(sp,up){var pp=sp.fusedConv2d({input:lo,filter:Uo,convInfo:_d,bias:fo,activation:fn,preluActivationWeights:mo});return up([Uo,lo,pp]),pp},ep,function(sp,up){var pp=up,hp=pp[0],vp=pp[1],gp=pp[2],mp=Bh(sp,gp,fn);C(Oo(ln),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+ln+"'"});var lp={};return cn!=null&&(lp={bias:function(){return Ph(fo,mp)}}),Object.assign({x:function(){return Xc(vp.shape,mp,hp,rn,nn)},filter:function(){return jc(vp,mp,hp.shape,rn,nn)}},lp)},"FusedConv2D",{convInfo:_d,activation:fn},rp,[!0]);return ho?ap.as3D(ap.shape[1],ap.shape[2],ap.shape[3]):ap}}),Vh=An({fusedDepthwiseConv2d_:function(st){var Mt=st.x,Xr=st.filter,rn=st.strides,nn=st.pad,an=st.dataFormat,on=an===void 0?"NHWC":an,sn=st.dilations,ln=sn===void 0?[1,1]:sn,un=st.dimRoundingMode,cn=st.bias,hn=st.activation,fn=hn===void 0?"linear":hn,to=st.preluActivationWeights;if(Mh(Lt.state.gradientDepth,fn)===!1){var uo=Yc(Mt,Xr,rn,nn,on,ln,un);return cn!=null&&(uo=rc(uo,cn)),Lh(uo,fn,to)}var co=mn(Mt,"x","depthwiseConv2d"),Uo=mn(Xr,"filter","depthwiseConv2d"),lo=co,ho=!1;co.rank===3&&(ho=!0,lo=co.as4D(1,co.shape[0],co.shape[1],co.shape[2])),C(lo.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+lo.rank+"."}),C(Uo.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+Uo.rank+"."}),C(lo.shape[3]===Uo.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+lo.shape[3]+") must match the inChannels dimension in filter "+Uo.shape[2]+"."}),ln==null&&(ln=[1,1]),C(Mo(rn,ln),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+rn+" and dilations '"+ln+"'"}),un!=null&&C(A$1(nn),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+un+" but got pad "+nn+"."});var fo,mo,_d=So(lo.shape,Uo.shape,rn,ln,nn,un,!0);cn!=null&&(fo=Nt(fo=mn(cn,"bias","fused conv2d"),co)[0],Ro(_d.outShape,fo.shape)),to!=null&&(mo=mn(to,"prelu weights","fused depthwiseConv2d"));var ep={x:lo,filter:Uo};cn!=null&&(ep.bias=fo),to!=null&&(ep.preluActivationWeights=mo);var rp=[Uo,lo],ap=Lt.runKernelFunc(function(sp,up){var pp=sp.fusedDepthwiseConv2D({input:lo,filter:Uo,convInfo:_d,bias:fo,activation:fn,preluActivationWeights:mo});return up([Uo,lo,pp]),pp},ep,function(sp,up){C(Oo(ln),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+ln+"'"});var pp=up[0],hp=up[1],vp=up[2],gp=Bh(sp,vp,fn),mp={};return cn!=null&&(mp={bias:function(){return Ph(fo,gp)}}),Object.assign({x:function(){return $c(hp.shape,gp,pp,_d)},filter:function(){return Qc(hp,gp,pp.shape,_d)}},mp)},"FusedDepthwiseConv2D",{convInfo:_d,activation:fn},rp,[!0]);return ho?ap.as3D(ap.shape[1],ap.shape[2],ap.shape[3]):ap}}),zh=Object.freeze({matMul:Wh,conv2d:Uh,depthwiseConv2d:Vh}),Gh=Object.freeze({image:Oh,linalg:Ih,losses:bh,spectral:Jl,fused:zh,signal:uh,square:tu,squaredDifference:nu,conv1d:Hc,conv2d:qc,conv3d:Kc,depthwiseConv2d:Yc,separableConv2d:Jc,conv2dTranspose:Zc,conv3dTranspose:tl,op:An,batchNormalization2d:Gu,batchNormalization3d:Hu,batchNormalization4d:qu,batchNormalization:Ku,batchNorm:ju,batchNorm2d:Xu,batchNorm3d:Yu,batchNorm4d:$u,booleanMaskAsync:Uc,complex:Dn,real:Tn,imag:Nn,concat:Yn,concat1d:$n,concat2d:Qn,concat3d:Jn,concat4d:Zn,split:tr,matMul:el,dot:nl,outerProduct:rl,reverse:ol,reverse1d:al,reverse2d:il,reverse3d:sl,reverse4d:ul,maxPool:hl,avgPool:fl,pool:dl,maxPool3d:pl,avgPool3d:vl,slice:ml,slice1d:gl,slice2d:yl,slice3d:xl,slice4d:bl,abs:ru,acos:ou,acosh:au,asin:iu,asinh:su,atan:uu,atanh:cu,ceil:lu,clipByValue:hu,cos:fu,cosh:du,erf:pu,exp:vu,expm1:mu,floor:gu,log:yu,log1p:xu,logSigmoid:bu,neg:wu,reciprocal:Cu,round:Eu,rsqrt:Ru,sigmoid:Iu,sign:ku,isNaN:Su,isInf:Au,isFinite:Du,sin:Tu,sinh:Nu,softplus:Fu,sqrt:_u,step:Ou,tan:Mu,tanh:Bu,all:Cl,any:El,argMax:Rl,argMin:Il,logSumExp:kl,max:Sl,mean:Al,min:Dl,moments:Tl,sum:Nl,prod:Fl,equal:Rc,equalStrict:Ic,greater:kc,greaterEqual:Sc,greaterEqualStrict:Ac,greaterStrict:Dc,less:Tc,lessEqual:Nc,lessEqualStrict:Fc,lessStrict:_c,notEqual:Oc,notEqualStrict:Mc,add:rc,addN:oc,addStrict:ac,atan2:ic,div:sc,divNoNan:uc,divStrict:cc,floorDiv:lc,maximum:hc,maximumStrict:fc,minimum:dc,minimumStrict:pc,mod:vc,modStrict:mc,mul:gc,mulStrict:yc,pow:xc,powStrict:bc,squaredDifferenceStrict:wc,sub:Cc,subStrict:Ec,elu:_l,leakyRelu:Ol,prelu:Ml,relu:Bl,relu6:Pl,selu:Ll,logicalAnd:Qu,logicalNot:Ju,logicalOr:Zu,logicalXor:tc,where:ec,whereAsync:nc,buffer:dr,print:pr,batchToSpaceND:vr,broadcastTo:mr,cast:gr,clone:yr,cumsum:xr,depthToSpace:br,expandDims:wr,eye:Cr,multinomial:Er,oneHot:Rr,pad:Ir,pad1d:kr,pad2d:Sr,pad3d:Ar,pad4d:Dr,rand:Tr,randomNormal:Nr,randomGamma:Fr,randomUniform:_r,reshape:Or,spaceToBatchND:Mr,squeeze:Br,stack:Pr,tile:Lr,truncatedNormal:Wr,unstack:Ur,setdiff1dAsync:Vr,fill:Hn,linspace:qn,ones:zn,range:Kn,scalar:On,tensor:Fn,tensor1d:Mn,tensor2d:Bn,tensor3d:Pn,tensor4d:Ln,tensor5d:Wn,tensor6d:Un,variable:Vn,zeros:Gn,onesLike:jn,zerosLike:Xn,transpose:Wl,softmax:go,logSoftmax:yo,localResponseNormalization:Ul,norm:Vl,gather:Lc,unsortedSegmentSum:Wc,basicLSTMCell:zl,multiRNNCell:Gl,movingAverage:Hl,stridedSlice:ql,topk:Kl,scatterND:jl,fft:Xl,ifft:Yl,rfft:$l,irfft:Ql,sparseToDense:Zl,gatherND:th,diag:eh,dropout:nh,hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh,inTopKAsync:lh});function Hh(st,Mt){Array.isArray(st)||(st=[st]),st.forEach(function(Xr){Xr!=null&&C(Xr.dtype!=="complex64",function(){return Mt+" does not support complex64 tensors."})})}function qh(st,Mt,Xr,rn){if(Xr==="linear")return st.linear(Mt);if(Xr==="relu")return st.relu(Mt);if(Xr==="elu")return st.elu(Mt);if(Xr==="relu6")return st.relu6(Mt);if(Xr==="prelu")return st.prelu(Mt,rn);throw new Error("Activation "+Xr+" has not been implemented for the CPU backend.")}var Kh=function(st){function Mt(){var Xr=st.call(this)||this;return Xr.blockSize=48,Xr.firstUse=!0,Xr.data=new xo(Xr,Lt),Xr}return e$3(Mt,st),Mt.prototype.write=function(Xr,rn,nn){this.firstUse&&(this.firstUse=!1,i$2().get("IS_NODE")&&dn(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var an={};return this.data.set(an,{values:Xr,dtype:nn}),an},Mt.prototype.move=function(Xr,rn,nn,an){this.data.set(Xr,{values:rn,dtype:an})},Mt.prototype.numDataIds=function(){return this.data.numDataIds()},Mt.prototype.read=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){return[2,this.readSync(Xr)]})})},Mt.prototype.readSync=function(Xr){var rn=this.data.get(Xr),nn=rn.dtype,an=rn.complexTensors;return nn==="complex64"?Vo(this.readSync(an.real.dataId),this.readSync(an.imag.dataId)):this.data.get(Xr).values},Mt.prototype.bufferSync=function(Xr){var rn=this.readSync(Xr.dataId),nn=rn;if(Xr.dtype==="string")try{nn=rn.map(function(an){return ot(an)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return dr(Xr.shape,Xr.dtype,nn)},Mt.prototype.makeOutput=function(Xr,rn,nn){var an=this.write(Xr,rn,nn);return Lt.makeTensorFromDataId(an,rn,nn,this)},Mt.prototype.disposeData=function(Xr){if(this.data.has(Xr)){var rn=this.data.get(Xr).complexTensors;rn!=null&&(rn.real.dispose(),rn.imag.dispose()),this.data.delete(Xr)}},Mt.prototype.time=function(Xr){return n(this,void 0,void 0,function(){var rn;return r$2(this,function(nn){return rn=et(),Xr(),[2,{kernelMs:et()-rn}]})})},Mt.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},Mt.prototype.complex=function(Xr,rn){var nn=this.makeOutput(null,Xr.shape,"complex64");return this.data.get(nn.dataId).complexTensors={real:Lt.keep(Xr.clone()),imag:Lt.keep(rn.clone())},nn},Mt.prototype.real=function(Xr){return this.data.get(Xr.dataId).complexTensors.real.clone()},Mt.prototype.imag=function(Xr){return this.data.get(Xr.dataId).complexTensors.imag.clone()},Mt.prototype.slice=function(Xr,rn,nn){if(Hh(Xr,"slice"),io(Xr.shape,rn,nn)){var an=so(rn,Xr.strides),on=k(nn);return Fn(this.readSync(Xr.dataId).subarray(an,an+on),nn,Xr.dtype)}for(var sn=dr(nn,Xr.dtype),ln=this.bufferSync(Xr),un=0;un<sn.size;++un){var cn=sn.indexToLoc(un).map(function(hn,fn){return hn+rn[fn]});sn.values[un]=ln.get.apply(ln,cn)}return sn.toTensor()},Mt.prototype.stridedSlice=function(Xr,rn,nn,an){Hh(Xr,"stridedSlice");var on=ro(rn,nn,an);if(on.some(function(to){return to===0}))return Fn([],on);for(var sn=dr(on,Xr.dtype),ln=this.bufferSync(Xr),un=0;un<sn.size;un++){for(var cn=sn.indexToLoc(un),hn=new Array(cn.length),fn=0;fn<hn.length;fn++)hn[fn]=cn[fn]*an[fn]+rn[fn];sn.set.apply(sn,[ln.get.apply(ln,hn)].concat(cn))}return sn.toTensor()},Mt.prototype.diag=function(Xr){for(var rn=this.readSync(Xr.dataId),nn=dr([Xr.size,Xr.size],Xr.dtype),an=nn.values,on=0;on<rn.length;on++)an[on*Xr.size+on]=rn[on];return nn.toTensor()},Mt.prototype.unstack=function(Xr,rn){for(var nn=Xr.shape[rn],an=new Array(Xr.rank-1),on=0,sn=0;sn<Xr.rank;sn++)sn!==rn&&(an[on++]=Xr.shape[sn]);var ln=new Array(Xr.rank).fill(0),un=Xr.shape.slice();un[rn]=1;var cn=new Array(nn);for(sn=0;sn<cn.length;sn++)ln[rn]=sn,cn[sn]=this.slice(Xr,ln,un).reshape(an);return cn},Mt.prototype.reverse=function(Xr,rn){Hh(Xr,"reverse");for(var nn=dr(Xr.shape,Xr.dtype),an=this.bufferSync(Xr),on=function(ln){var un=nn.indexToLoc(ln),cn=un.slice();rn.forEach(function(hn){return cn[hn]=Xr.shape[hn]-1-cn[hn]}),nn.set.apply(nn,[an.get.apply(an,cn)].concat(un))},sn=0;sn<nn.size;sn++)on(sn);return nn.toTensor()},Mt.prototype.concat=function(Xr,rn){var nn=this;if(Xr[0].dtype==="complex64"){var an=Xr.map(function(to){return Tn(to)}),on=Xr.map(function(to){return Nn(to)});return Dn(this.concat(an,rn),this.concat(on,rn))}var sn=Xr.map(function(to){var uo=k(to.shape.slice(rn));return to.as2D(-1,uo)}),ln=Sn(sn.map(function(to){return to.shape}),1),un=dr(ln,Xr[0].dtype).values;if(sn[0].shape[0]===1){var cn=0;sn.forEach(function(to){un.set(nn.readSync(to.dataId),cn),cn+=to.size})}else{var hn=0;sn.forEach(function(to){for(var uo=nn.readSync(to.dataId),co=0,Uo=0;Uo<to.shape[0];++Uo)for(var lo=Uo*ln[1]+hn,ho=0;ho<to.shape[1];++ho)un[lo+ho]=uo[co++];hn+=to.shape[1]})}var fn=Sn(Xr.map(function(to){return to.shape}),rn);return Fn(un,fn,Xr[0].dtype)},Mt.prototype.neg=function(Xr){return Hh(Xr,"neg"),this.multiply(On(-1),Xr)},Mt.prototype.add=function(Xr,rn){return Xr.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(Xr.cast("complex64"),rn.cast("complex64"),function(nn,an,on,sn){return{real:nn+on,imag:an+sn}}):this.broadcastedBinaryOp(Xr,rn,Dt(Xr.dtype,rn.dtype),function(nn,an){return nn+an})},Mt.prototype.addN=function(Xr){var rn=this;Hh(Xr,"addN");for(var nn=Xr.map(function(cn){return rn.readSync(cn.dataId)}),an=dr(Xr[0].shape,Xr[0].dtype),on=an.values,sn=0;sn<Xr.length;sn++)for(var ln=nn[sn],un=0;un<on.length;un++)on[un]+=ln[un];return an.toTensor()},Mt.prototype.softmax=function(Xr,rn){var nn=O$1([rn],Xr.shape),an=this.max(Xr,nn),on=wn(an.shape,nn),sn=this.subtract(Xr,an.reshape(on)),ln=this.exp(sn),un=this.sum(ln,nn).reshape(on);return this.realDivide(ln,un)},Mt.prototype.subtract=function(Xr,rn){return Xr.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(Xr.cast("complex64"),rn.cast("complex64"),function(nn,an,on,sn){return{real:nn-on,imag:an-sn}}):this.broadcastedBinaryOp(Xr,rn,Dt(Xr.dtype,rn.dtype),function(nn,an){return nn-an})},Mt.prototype.pow=function(Xr,rn){return Hh([Xr,rn],"pow"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){return Math.pow(nn,an)})},Mt.prototype.batchMatMul=function(Xr,rn,nn,an){Hh([Xr,rn],"matMul");for(var on=nn?Xr.shape[1]:Xr.shape[2],sn=nn?Xr.shape[2]:Xr.shape[1],ln=an?rn.shape[1]:rn.shape[2],un=Xr.shape[0],cn=this.readSync(Xr.dataId),hn=this.readSync(rn.dataId),fn=nn?[Xr.strides[0],1,Xr.strides[1]]:[Xr.strides[0],Xr.strides[1],1],to=fn[0],uo=fn[1],co=fn[2],Uo=an?[1,rn.strides[1],rn.strides[0]]:[rn.strides[1],1,rn.strides[0]],lo=Uo[0],ho=Uo[1],fo=Uo[2],mo=sn*ln,_d=dr([un,sn,ln],Xr.dtype),ep=_d.values,rp=this.blockSize,ap=0;ap<un;ap++)for(var sp=0;sp<sn;sp+=rp)for(var up=0;up<ln;up+=rp)for(var pp=0;pp<on;pp+=rp)for(var hp=Math.min(sp+rp,sn),vp=Math.min(up+rp,ln),gp=Math.min(pp+rp,on),mp=sp;mp<hp;mp++)for(var lp=up;lp<vp;lp++){for(var cp=0,tp=pp;tp<gp;tp++)cp+=cn[ap*to+mp*uo+tp*co]*hn[tp*lo+lp*ho+ap*fo];ep[ap*mo+(mp*ln+lp)]+=cp}return _d.toTensor()},Mt.prototype.fusedBatchMatMul=function(Xr){var rn=Xr.a,nn=Xr.b,an=Xr.transposeA,on=Xr.transposeB,sn=Xr.bias,ln=Xr.activation,un=Xr.preluActivationWeights,cn=this.batchMatMul(rn,nn,an,on);return sn&&(cn=this.add(cn,sn)),ln&&(cn=qh(this,cn,ln,un)),cn},Mt.prototype.multiply=function(Xr,rn){return Xr.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(Xr.cast("complex64"),rn.cast("complex64"),function(nn,an,on,sn){return{real:nn*on-an*sn,imag:nn*sn+an*on}}):this.broadcastedBinaryOp(Xr,rn,Dt(Xr.dtype,rn.dtype),function(nn,an){return nn*an})},Mt.prototype.realDivide=function(Xr,rn){return Hh([Xr,rn],"realDivide"),this.broadcastedBinaryOp(Xr,rn,"float32",function(nn,an){return nn/an})},Mt.prototype.floorDiv=function(Xr,rn){return Hh([Xr,rn],"floorDiv"),this.broadcastedBinaryOp(Xr,rn,"int32",function(nn,an){return Math.floor(nn/an)})},Mt.prototype.sum=function(Xr,rn){Hh(Xr,"sum"),Cn("sum",rn,Xr.rank);for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Dt(Xr.dtype,"int32")),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=0,uo=0;uo<ln;++uo)to+=cn[fn+uo];un[hn]=to}return sn},Mt.prototype.prod=function(Xr,rn){Hh(Xr,"sum");for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Dt(Xr.dtype,"int32")),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=1,uo=0;uo<ln;++uo)to*=cn[fn+uo];un[hn]=to}return sn},Mt.prototype.unsortedSegmentSum=function(Xr,rn,nn){Hh(Xr,"unsortedSegmentSum");for(var an=[],on=Xr.rank-rn.rank,sn=0;sn<on;++sn)rn=rn.expandDims(sn+1);for(sn=0;sn<nn;++sn){var ln=On(sn,"int32"),un=Rc(ln,rn).asType("float32").mul(Xr).sum(0);an.push(un)}return Pr(an)},Mt.prototype.argMin=function(Xr,rn){Hh(Xr,"argMin");var nn=[rn];Cn("argMin",nn,Xr.rank);for(var an=bn(Xr.shape,nn),on=an[0],sn=an[1],ln=Gn(on,"int32"),un=k(sn),cn=this.readSync(ln.dataId),hn=this.readSync(Xr.dataId),fn=0;fn<cn.length;++fn){for(var to=fn*un,uo=hn[to],co=0,Uo=0;Uo<un;++Uo){var lo=hn[to+Uo];lo<uo&&(uo=lo,co=Uo)}cn[fn]=co}return ln},Mt.prototype.argMax=function(Xr,rn){Hh(Xr,"argMax");var nn=[rn];Cn("argMax",nn,Xr.rank);for(var an=bn(Xr.shape,nn),on=an[0],sn=an[1],ln=Gn(on,"int32"),un=k(sn),cn=this.readSync(ln.dataId),hn=this.readSync(Xr.dataId),fn=0;fn<cn.length;++fn){for(var to=fn*un,uo=hn[to],co=0,Uo=0;Uo<un;++Uo){var lo=hn[to+Uo];lo>uo&&(uo=lo,co=Uo)}cn[fn]=co}return ln},Mt.prototype.cumsum=function(Xr,rn,nn,an){if(Hh(Xr,"cumsum"),rn!==Xr.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(Xr.rank-1)+" but got axis="+rn);for(var on=Dt(Xr.dtype,"int32"),sn=Gn(Xr.shape,on),ln=this.readSync(sn.dataId),un=this.readSync(Xr.dataId),cn=Xr.shape[Xr.rank-1],hn=an?function(Uo,lo){return Uo+cn-lo-1}:function(Uo,lo){return Uo+lo},fn=0;fn<un.length;fn+=cn)for(var to=0;to<cn;to++){var uo=hn(fn,to);if(to===0)ln[uo]=nn?0:un[uo];else{var co=hn(fn,to-1);ln[uo]=nn?un[co]+ln[co]:un[uo]+ln[co]}}return sn},Mt.prototype.equal=function(Xr,rn){return Hh([Xr,rn],"equal"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn===an?1:0})},Mt.prototype.notEqual=function(Xr,rn){return Hh([Xr,rn],"notEqual"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn!==an?1:0})},Mt.prototype.less=function(Xr,rn){return Hh([Xr,rn],"less"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn<an?1:0})},Mt.prototype.lessEqual=function(Xr,rn){return Hh([Xr,rn],"lessEqual"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn<=an?1:0})},Mt.prototype.greater=function(Xr,rn){return Hh([Xr,rn],"greater"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn>an?1:0})},Mt.prototype.greaterEqual=function(Xr,rn){return Hh([Xr,rn],"greaterEqual"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn>=an?1:0})},Mt.prototype.logicalNot=function(Xr){Hh(Xr,"logicalNot");for(var rn=this.readSync(Xr.dataId),nn=new Uint8Array(rn.length),an=0;an<rn.length;++an)nn[an]=rn[an]?0:1;return this.makeOutput(nn,Xr.shape,"bool")},Mt.prototype.logicalAnd=function(Xr,rn){return Hh([Xr,rn],"logicalAnd"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn&&an})},Mt.prototype.logicalOr=function(Xr,rn){return Hh([Xr,rn],"logicalOr"),this.broadcastedBinaryOp(Xr,rn,"bool",function(nn,an){return nn||an})},Mt.prototype.select=function(Xr,rn,nn){Hh([Xr,rn,nn],"select");for(var an=this.readSync(Xr.dataId),on=this.readSync(rn.dataId),sn=this.readSync(nn.dataId),ln=Gn(rn.shape,Dt(rn.dtype,nn.dtype)),un=this.readSync(ln.dataId),cn=0,hn=Xr.rank===0||Xr.rank>1||rn.rank===1?1:k(rn.shape.slice(1)),fn=0;fn<an.length;fn++)for(var to=0;to<hn;to++)an[fn]===1?un[cn++]=on[fn]:un[cn++]=sn[fn];return ln},Mt.prototype.where=function(Xr){Hh([Xr],"where");var rn=this.readSync(Xr.dataId);return na(Xr.shape,rn)},Mt.prototype.topk=function(Xr,rn,nn){return Hh(Xr,"topk"),ea(this.readSync(Xr.dataId),Xr.shape,Xr.dtype,rn)},Mt.prototype.min=function(Xr,rn){Hh(Xr,"min"),Cn("min",rn,Xr.rank);for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Xr.dtype),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=cn[fn],uo=0;uo<ln;++uo){var co=cn[fn+uo];co<to&&(to=co)}un[hn]=to}return sn},Mt.prototype.minimum=function(Xr,rn){return Hh([Xr,rn],"minimum"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){return Math.min(nn,an)})},Mt.prototype.mod=function(Xr,rn){return Hh([Xr,rn],"mod"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){var on=nn%an;return nn<0&&an<0||nn>=0&&an>=0?on:(on+an)%an})},Mt.prototype.max=function(Xr,rn){Hh(Xr,"max"),Cn("max",rn,Xr.rank);for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Xr.dtype),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=cn[fn],uo=0;uo<ln;++uo){var co=cn[fn+uo];co>to&&(to=co)}un[hn]=to}return sn},Mt.prototype.maximum=function(Xr,rn){return Hh([Xr,rn],"maximum"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){return Math.max(nn,an)})},Mt.prototype.all=function(Xr,rn){Hh(Xr,"all"),Cn("all",rn,Xr.rank);for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Xr.dtype),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=cn[fn],uo=0;uo<ln;++uo){var co=cn[fn+uo];to=to&&co}un[hn]=to}return sn},Mt.prototype.any=function(Xr,rn){Hh(Xr,"any"),Cn("any",rn,Xr.rank);for(var nn=bn(Xr.shape,rn),an=nn[0],on=nn[1],sn=Gn(an,Xr.dtype),ln=k(on),un=this.readSync(sn.dataId),cn=this.readSync(Xr.dataId),hn=0;hn<un.length;++hn){for(var fn=hn*ln,to=cn[fn],uo=0;uo<ln;++uo){var co=cn[fn+uo];to=to||co}un[hn]=to}return sn},Mt.prototype.squaredDifference=function(Xr,rn){return Hh([Xr,rn],"squaredDifference"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){var on=nn-an;return on*on})},Mt.prototype.ceil=function(Xr){Hh(Xr,"ceil");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)nn[an]=Math.ceil(rn[an]);return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.floor=function(Xr){Hh(Xr,"floor");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)nn[an]=Math.floor(rn[an]);return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.sign=function(Xr){Hh(Xr,"x");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)rn[an]<0?nn[an]=-1:rn[an]>0?nn[an]=1:nn[an]=0;return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.isNaN=function(Xr){Hh(Xr,"x");for(var rn=this.readSync(Xr.dataId),nn=new Uint8Array(rn.length),an=0;an<rn.length;++an)Number.isNaN(rn[an])&&(nn[an]=1);return this.makeOutput(nn,Xr.shape,"bool")},Mt.prototype.isInf=function(Xr){Hh(Xr,"x");for(var rn=this.readSync(Xr.dataId),nn=new Uint8Array(rn.length),an=0;an<rn.length;++an)Math.abs(rn[an])===1/0&&(nn[an]=1);return this.makeOutput(nn,Xr.shape,"bool")},Mt.prototype.isFinite=function(Xr){Hh(Xr,"x");for(var rn=this.readSync(Xr.dataId),nn=new Uint8Array(rn.length),an=0;an<rn.length;++an)Number.isFinite(rn[an])&&(nn[an]=1);return this.makeOutput(nn,Xr.shape,"bool")},Mt.prototype.round=function(Xr){Hh(Xr,"round");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an){var on=Math.floor(rn[an]);rn[an]-on<.5?nn[an]=Math.floor(rn[an]):rn[an]-on>.5?nn[an]=Math.ceil(rn[an]):nn[an]=on%2==0?on:on+1}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.exp=function(Xr){Hh(Xr,"exp");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)nn[an]=Math.exp(rn[an]);return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.expm1=function(Xr){Hh(Xr,"expm1");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)nn[an]=Math.expm1(rn[an]);return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.log=function(Xr){Hh(Xr,"log");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an){var on=rn[an];nn[an]=Math.log(on)}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.log1p=function(Xr){Hh(Xr,"log1p");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an){var on=rn[an];nn[an]=Math.log1p(on)}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.sqrt=function(Xr){Hh(Xr,"sqrt");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an){var on=rn[an];nn[an]=Math.sqrt(on)}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.rsqrt=function(Xr){Hh(Xr,"rsqrt");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an){var on=rn[an];nn[an]=1/Math.sqrt(on)}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.reciprocal=function(Xr){Hh(Xr,"reciprocal");for(var rn=this.readSync(Xr.dataId),nn=new Float32Array(rn.length),an=0;an<rn.length;++an)nn[an]=1/rn[an];return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.linear=function(Xr){return Xr},Mt.prototype.relu=function(Xr){Hh(Xr,"relu");for(var rn=Gn(Xr.shape,Xr.dtype),nn=this.readSync(rn.dataId),an=this.readSync(Xr.dataId),on=0;on<an.length;++on)nn[on]=Math.max(0,an[on]);return rn},Mt.prototype.relu6=function(Xr){Hh(Xr,"relu");for(var rn=Gn(Xr.shape,Xr.dtype),nn=this.readSync(rn.dataId),an=this.readSync(Xr.dataId),on=0;on<an.length;++on)nn[on]=Math.min(Math.max(0,an[on]),6);return rn},Mt.prototype.prelu=function(Xr,rn){return Hh([Xr,rn],"prelu"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){return nn<0?an*nn:nn})},Mt.prototype.elu=function(Xr){Hh(Xr,"elu");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an){var on=nn[an];rn[an]=on>=0?on:Math.exp(on)-1}return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.eluDer=function(Xr,rn){Hh([Xr,rn],"eluDer");for(var nn=new Float32Array(rn.size),an=this.readSync(rn.dataId),on=this.readSync(Xr.dataId),sn=0;sn<an.length;++sn){var ln=an[sn];nn[sn]=ln>=1?on[sn]:on[sn]*(ln+1)}return this.makeOutput(nn,rn.shape,"float32")},Mt.prototype.selu=function(Xr){Hh(Xr,"selu");for(var rn=bs,nn=ws,an=new Float32Array(Xr.size),on=this.readSync(Xr.dataId),sn=0;sn<on.length;++sn){var ln=on[sn];an[sn]=ln>=0?nn*ln:rn*(Math.exp(ln)-1)}return this.makeOutput(an,Xr.shape,"float32")},Mt.prototype.clip=function(Xr,rn,nn){Hh(Xr,"clip");for(var an=new Float32Array(Xr.size),on=this.readSync(Xr.dataId),sn=0;sn<on.length;++sn){var ln=on[sn];an[sn]=ln>nn?nn:ln<rn?rn:ln}return this.makeOutput(an,Xr.shape,"float32")},Mt.prototype.abs=function(Xr){for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.abs(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.complexAbs=function(Xr){for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<Xr.size;++an){var on=nn[2*an],sn=nn[2*an+1];rn[an]=Math.hypot(on,sn)}return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.int=function(Xr){Hh(Xr,"int");for(var rn=new Int32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=nn[an];return this.makeOutput(rn,Xr.shape,"int32")},Mt.prototype.sigmoid=function(Xr){Hh(Xr,"sigmoid");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=1/(1+Math.exp(-nn[an]));return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.softplus=function(Xr){Hh(Xr,"softplus");for(var rn=Math.log(11920928955078125e-23)+2,nn=new Float32Array(Xr.size),an=this.readSync(Xr.dataId),on=0;on<an.length;++on){var sn=an[on]>-rn,ln=an[on]<rn,un=Math.exp(an[on]),cn=void 0;cn=ln?un:sn?an[on]:Math.log(1+un),nn[on]=cn}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.sin=function(Xr){Hh(Xr,"sin");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.sin(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.cos=function(Xr){Hh(Xr,"cos");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.cos(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.tan=function(Xr){Hh(Xr,"tan");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.tan(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.asin=function(Xr){Hh(Xr,"asin");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.asin(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.acos=function(Xr){Hh(Xr,"acos");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.acos(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.atan=function(Xr){Hh(Xr,"atan");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.atan(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.atan2=function(Xr,rn){return Hh([Xr,rn],"atan2"),this.broadcastedBinaryOp(Xr,rn,Xr.dtype,function(nn,an){return Math.atan2(nn,an)})},Mt.prototype.sinh=function(Xr){Hh(Xr,"sinh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.sinh(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.cosh=function(Xr){Hh(Xr,"cosh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.cosh(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.tanh=function(Xr){Hh(Xr,"tanh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=D$1(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.asinh=function(Xr){Hh(Xr,"asinh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.asinh(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.acosh=function(Xr){Hh(Xr,"acosh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.acosh(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.atanh=function(Xr){Hh(Xr,"atanh");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an)rn[an]=Math.atanh(nn[an]);return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.erf=function(Xr){Hh(Xr,"erf");for(var rn=new Float32Array(Xr.size),nn=this.readSync(Xr.dataId),an=0;an<nn.length;++an){var on=Math.sign(nn[an]),sn=Math.abs(nn[an]),ln=1/(1+.3275911*sn);rn[an]=on*(1-((((1.061405429*ln-1.453152027)*ln+1.421413741)*ln-.284496736)*ln+.254829592)*ln*Math.exp(-sn*sn))}return this.makeOutput(rn,Xr.shape,"float32")},Mt.prototype.step=function(Xr,rn){rn===void 0&&(rn=0),Hh(Xr,"step");for(var nn=new Float32Array(Xr.size),an=this.readSync(Xr.dataId),on=0;on<an.length;++on){var sn=an[on];isNaN(sn)?nn[on]=NaN:nn[on]=sn>0?1:rn}return this.makeOutput(nn,Xr.shape,"float32")},Mt.prototype.fusedConv2d=function(Xr){var rn=Xr.input,nn=Xr.filter,an=Xr.convInfo,on=Xr.bias,sn=Xr.activation,ln=Xr.preluActivationWeights,un=this.conv2d(rn,nn,an);return on&&(un=this.add(un,on)),sn&&(un=qh(this,un,sn,ln)),un},Mt.prototype.conv2d=function(Xr,rn,nn){Hh([Xr,rn],"conv2d");for(var an=nn.filterHeight,on=nn.filterWidth,sn=nn.dilationHeight,ln=nn.dilationWidth,un=nn.padInfo.left,cn=nn.padInfo.top,hn=nn.dataFormat==="channelsLast",fn=dr(nn.outShape,Xr.dtype),to=Xr.strides[0],uo=hn?Xr.strides[1]:Xr.strides[2],co=hn?Xr.strides[2]:1,Uo=hn?1:Xr.strides[1],lo=fn.strides[0],ho=hn?fn.strides[1]:fn.strides[2],fo=hn?fn.strides[2]:1,mo=hn?1:fn.strides[1],_d=this.readSync(Xr.dataId),ep=this.readSync(rn.dataId),rp=fn.values,ap=0;ap<nn.batchSize;++ap)for(var sp=ap*to,up=ap*lo,pp=0;pp<nn.outHeight;++pp)for(var hp=up+pp*ho,vp=pp*nn.strideHeight-cn,gp=0;gp<an;gp++){var mp=vp+gp*sn;if(!(mp<0||mp>=nn.inHeight))for(var lp=gp*rn.strides[0],cp=sp+mp*uo,tp=0;tp<nn.outWidth;++tp)for(var np=hp+tp*fo,fp=tp*nn.strideWidth-un,dp=0;dp<on;dp++){var yp=fp+dp*ln;if(!(yp<0||yp>=nn.inWidth))for(var bp=cp+yp*co,_p=lp+dp*rn.strides[1],Cp=0;Cp<nn.inChannels;++Cp){for(var Sp=_d[bp+Cp*Uo],Rp=0;Rp<nn.outChannels;++Rp)rp[np+Rp*mo]+=Sp*ep[_p+Rp];_p+=nn.outChannels}}}return fn.toTensor()},Mt.prototype.conv3d=function(Xr,rn,nn){for(var an=nn.filterDepth,on=nn.filterHeight,sn=nn.filterWidth,ln=nn.dilationDepth,un=nn.dilationHeight,cn=nn.dilationWidth,hn=nn.padInfo.front,fn=nn.padInfo.left,to=nn.padInfo.top,uo=dr(nn.outShape,Xr.dtype),co=this.readSync(Xr.dataId),Uo=this.readSync(rn.dataId),lo=uo.values,ho=0;ho<nn.batchSize;++ho)for(var fo=ho*Xr.strides[0],mo=ho*uo.strides[0],_d=0;_d<nn.outDepth;++_d)for(var ep=mo+_d*uo.strides[1],rp=_d*nn.strideDepth-hn,ap=0;ap<an;ap++){var sp=rp+ap*ln;if(!(sp<0||sp>=nn.inDepth))for(var up=ap*rn.strides[0],pp=fo+sp*Xr.strides[1],hp=0;hp<nn.outHeight;++hp)for(var vp=ep+hp*uo.strides[2],gp=hp*nn.strideHeight-to,mp=0;mp<on;mp++){var lp=gp+mp*un;if(!(lp<0||lp>=nn.inHeight))for(var cp=up+mp*rn.strides[1],tp=pp+lp*Xr.strides[2],np=0;np<nn.outWidth;++np)for(var fp=vp+np*nn.outChannels,dp=np*nn.strideWidth-fn,yp=0;yp<sn;yp++){var bp=dp+yp*cn;if(!(bp<0||bp>=nn.inWidth))for(var _p=cp+yp*rn.strides[2],Cp=tp+bp*nn.inChannels,Sp=_p,Rp=0;Rp<nn.inChannels;++Rp){for(var Dp=co[Cp+Rp],Lp=0;Lp<nn.outChannels;++Lp)lo[fp+Lp]+=Dp*Uo[Sp+Lp];Sp+=nn.outChannels}}}}return uo.toTensor()},Mt.prototype.conv2dDerInput=function(Xr,rn,nn){Hh([Xr,rn],"conv2dDerInput");for(var an=dr(nn.inShape,"float32"),on=an.values,sn=this.readSync(Xr.dataId),ln=this.readSync(rn.dataId),un=rn.strides,cn=un[0],hn=un[1],fn=un[2],to=nn.batchSize,uo=nn.filterHeight,co=nn.filterWidth,Uo=nn.inChannels,lo=nn.inHeight,ho=nn.inWidth,fo=nn.outChannels,mo=nn.outHeight,_d=nn.outWidth,ep=nn.strideHeight,rp=nn.strideWidth,ap=nn.dataFormat,sp=uo-1-nn.padInfo.top,up=co-1-nn.padInfo.left,pp=ap==="channelsLast",hp=an.strides[0],vp=pp?an.strides[1]:an.strides[2],gp=pp?an.strides[2]:1,mp=pp?1:an.strides[1],lp=Xr.strides[0],cp=pp?Xr.strides[1]:Xr.strides[2],tp=pp?Xr.strides[2]:1,np=pp?1:Xr.strides[1],fp=0;fp<to;++fp)for(var dp=0;dp<Uo;++dp)for(var yp=0;yp<lo;++yp)for(var bp=yp-sp,_p=Math.max(0,Math.ceil(bp/ep)),Cp=Math.min(mo,(uo+bp)/ep),Sp=0;Sp<ho;++Sp){for(var Rp=Sp-up,Dp=Math.max(0,Math.ceil(Rp/rp)),Lp=Math.min(_d,(co+Rp)/rp),Bp=0,Tp=_p;Tp<Cp;++Tp)for(var Mp=Tp*ep-bp,Ap=Dp;Ap<Lp;++Ap)for(var kp=lp*fp+cp*Tp+tp*Ap,jp=cn*(uo-1-Mp)+hn*(co-1-(Ap*rp-Rp))+fn*dp,Vp=0;Vp<fo;++Vp)Bp+=sn[kp+np*Vp]*ln[jp+Vp];on[hp*fp+vp*yp+gp*Sp+mp*dp]=Bp}return an.toTensor()},Mt.prototype.conv3dDerInput=function(Xr,rn,nn){for(var an=dr(nn.inShape,"float32"),on=an.values,sn=an.strides,ln=sn[0],un=sn[1],cn=sn[2],hn=sn[3],fn=this.readSync(Xr.dataId),to=Xr.strides,uo=to[0],co=to[1],Uo=to[2],lo=to[3],ho=this.readSync(rn.dataId),fo=rn.strides,mo=fo[0],_d=fo[1],ep=fo[2],rp=fo[3],ap=nn.batchSize,sp=nn.filterDepth,up=nn.filterHeight,pp=nn.filterWidth,hp=nn.inChannels,vp=nn.inDepth,gp=nn.inHeight,mp=nn.inWidth,lp=nn.outChannels,cp=nn.outDepth,tp=nn.outHeight,np=nn.outWidth,fp=nn.strideDepth,dp=nn.strideHeight,yp=nn.strideWidth,bp=sp-1-nn.padInfo.front,_p=up-1-nn.padInfo.top,Cp=pp-1-nn.padInfo.left,Sp=0;Sp<ap;++Sp)for(var Rp=0;Rp<hp;++Rp)for(var Dp=0;Dp<vp;++Dp)for(var Lp=Dp-bp,Bp=Math.max(0,Math.ceil(Lp/fp)),Tp=Math.min(cp,(sp+Lp)/fp),Mp=0;Mp<gp;++Mp)for(var Ap=Mp-_p,kp=Math.max(0,Math.ceil(Ap/dp)),jp=Math.min(tp,(up+Ap)/dp),Vp=0;Vp<mp;++Vp){for(var Wp=Vp-Cp,qp=Math.max(0,Math.ceil(Wp/yp)),Up=Math.min(np,(pp+Wp)/yp),Qp=0,Hp=Bp;Hp<Tp;++Hp)for(var Kp=Hp*fp-Lp,Xp=kp;Xp<jp;++Xp)for(var Zp=Xp*dp-Ap,Jp=qp;Jp<Up;++Jp)for(var n0=uo*Sp+co*Hp+Uo*Xp+lo*Jp,i0=mo*(sp-1-Kp)+_d*(up-1-Zp)+ep*(pp-1-(Jp*yp-Wp))+rp*Rp,e0=0;e0<lp;++e0)Qp+=fn[n0+e0]*ho[i0+e0];on[ln*Sp+un*Dp+cn*Mp+hn*Vp+Rp]=Qp}return an.toTensor()},Mt.prototype.conv2dDerFilter=function(Xr,rn,nn){Hh([Xr,rn],"conv2dDerFilter");for(var an=nn.strideHeight,on=nn.strideWidth,sn=nn.filterHeight,ln=nn.filterWidth,un=nn.dataFormat==="channelsLast",cn=dr(nn.filterShape,"float32"),hn=nn.padInfo.left,fn=nn.padInfo.top,to=this.bufferSync(Xr),uo=this.bufferSync(rn),co=0;co<sn;++co)for(var Uo=Math.max(0,Math.ceil((fn-co)/an)),lo=Math.min(nn.outHeight,(nn.inHeight+fn-co)/an),ho=0;ho<ln;++ho)for(var fo=Math.max(0,Math.ceil((hn-ho)/on)),mo=Math.min(nn.outWidth,(nn.inWidth+hn-ho)/on),_d=0;_d<nn.inChannels;++_d)for(var ep=0;ep<nn.outChannels;++ep){for(var rp=0,ap=0;ap<nn.batchSize;++ap)for(var sp=Uo;sp<lo;++sp)for(var up=co+sp*an-fn,pp=fo;pp<mo;++pp){var hp=ho+pp*on-hn;rp+=un?to.get(ap,up,hp,_d)*uo.get(ap,sp,pp,ep):to.get(ap,_d,up,hp)*uo.get(ap,ep,sp,pp)}cn.set(rp,co,ho,_d,ep)}return cn.toTensor()},Mt.prototype.conv3dDerFilter=function(Xr,rn,nn){for(var an=nn.strideDepth,on=nn.strideHeight,sn=nn.strideWidth,ln=nn.filterDepth,un=nn.filterHeight,cn=nn.filterWidth,hn=dr(nn.filterShape,"float32"),fn=hn.values,to=hn.strides,uo=to[0],co=to[1],Uo=to[2],lo=to[3],ho=this.readSync(rn.dataId),fo=rn.strides,mo=fo[0],_d=fo[1],ep=fo[2],rp=fo[3],ap=this.readSync(Xr.dataId),sp=Xr.strides,up=sp[0],pp=sp[1],hp=sp[2],vp=sp[3],gp=nn.padInfo.front,mp=nn.padInfo.left,lp=nn.padInfo.top,cp=0;cp<ln;++cp)for(var tp=Math.max(0,Math.ceil((gp-cp)/an)),np=Math.min(nn.outDepth,(nn.inDepth+gp-cp)/an),fp=cp*uo,dp=0;dp<un;++dp)for(var yp=Math.max(0,Math.ceil((lp-dp)/on)),bp=Math.min(nn.outHeight,(nn.inHeight+lp-dp)/on),_p=dp*co+fp,Cp=0;Cp<cn;++Cp)for(var Sp=Math.max(0,Math.ceil((mp-Cp)/sn)),Rp=Math.min(nn.outWidth,(nn.inWidth+mp-Cp)/sn),Dp=Cp*Uo+_p,Lp=0;Lp<nn.inChannels;++Lp)for(var Bp=Lp*lo+Dp,Tp=0;Tp<nn.outChannels;++Tp){for(var Mp=0,Ap=0;Ap<nn.batchSize;++Ap)for(var kp=Ap*up,jp=Ap*mo,Vp=tp;Vp<np;++Vp)for(var Wp=(cp+Vp*an-gp)*pp+kp,qp=Vp*_d+jp,Up=yp;Up<bp;++Up)for(var Qp=(dp+Up*on-lp)*hp+Wp,Hp=Up*ep+qp,Kp=Sp;Kp<Rp;++Kp){var Xp=Kp*rp+Hp;Mp+=ap[(Cp+Kp*sn-mp)*vp+Qp+Lp]*ho[Xp+Tp]}fn[Bp+Tp]=Mp}return hn.toTensor()},Mt.prototype.fusedDepthwiseConv2D=function(Xr){var rn=Xr.input,nn=Xr.filter,an=Xr.convInfo,on=Xr.bias,sn=Xr.activation,ln=Xr.preluActivationWeights,un=this.depthwiseConv2D(rn,nn,an);return on&&(un=this.add(un,on)),sn&&(un=qh(this,un,sn,ln)),un},Mt.prototype.depthwiseConv2D=function(Xr,rn,nn){Hh([Xr,rn],"depthwiseConv2D");for(var an=nn.filterHeight,on=nn.filterWidth,sn=nn.dilationHeight,ln=nn.dilationWidth,un=nn.padInfo.left,cn=nn.padInfo.top,hn=nn.outChannels/nn.inChannels,fn=dr(nn.outShape,Xr.dtype),to=this.readSync(Xr.dataId),uo=this.readSync(rn.dataId),co=fn.values,Uo=0;Uo<nn.batchSize;++Uo)for(var lo=Uo*Xr.strides[0],ho=Uo*fn.strides[0],fo=0;fo<nn.outHeight;++fo)for(var mo=ho+fo*fn.strides[1],_d=fo*nn.strideHeight-un,ep=0;ep<an;++ep){var rp=_d+ep*sn;if(!(rp<0||rp>=nn.inHeight))for(var ap=ep*rn.strides[0],sp=lo+rp*Xr.strides[1],up=0;up<nn.outWidth;++up)for(var pp=mo+up*fn.strides[2],hp=up*nn.strideWidth-cn,vp=0;vp<on;++vp){var gp=hp+vp*ln;if(!(gp<0||gp>=nn.inWidth))for(var mp=ap+vp*rn.strides[1],lp=sp+gp*nn.inChannels,cp=pp,tp=mp,np=0;np<nn.inChannels;++np){for(var fp=to[lp+np],dp=0;dp<hn;++dp)co[cp+dp]+=fp*uo[tp+dp];cp+=hn,tp+=hn}}}return fn.toTensor()},Mt.prototype.depthwiseConv2DDerInput=function(Xr,rn,nn){Hh([Xr,rn],"depthwiseConv2DDerInput");for(var an=dr(nn.inShape,"float32"),on=an.values,sn=an.strides,ln=sn[0],un=sn[1],cn=sn[2],hn=this.readSync(Xr.dataId),fn=Xr.strides,to=fn[0],uo=fn[1],co=fn[2],Uo=this.readSync(rn.dataId),lo=rn.strides,ho=lo[0],fo=lo[1],mo=lo[2],_d=nn.batchSize,ep=nn.filterHeight,rp=nn.filterWidth,ap=nn.inChannels,sp=nn.inHeight,up=nn.inWidth,pp=nn.outChannels,hp=nn.outHeight,vp=nn.outWidth,gp=nn.strideHeight,mp=nn.strideWidth,lp=ep-1-nn.padInfo.top,cp=rp-1-nn.padInfo.left,tp=pp/ap,np=0;np<_d;++np)for(var fp=0;fp<ap;++fp)for(var dp=0;dp<sp;++dp)for(var yp=dp-lp,bp=Math.max(0,Math.ceil(yp/gp)),_p=Math.min(hp,(ep+yp)/gp),Cp=0;Cp<up;++Cp){for(var Sp=Cp-cp,Rp=Math.max(0,Math.ceil(Sp/mp)),Dp=Math.min(vp,(rp+Sp)/mp),Lp=0,Bp=bp;Bp<_p;++Bp)for(var Tp=Bp*gp-yp,Mp=Rp;Mp<Dp;++Mp)for(var Ap=to*np+uo*Bp+co*Mp,kp=ho*(ep-1-Tp)+fo*(rp-1-(Mp*mp-Sp))+mo*fp,jp=0;jp<tp;++jp)Lp+=hn[Ap+(fp*tp+jp)]*Uo[kp+jp];on[ln*np+un*dp+cn*Cp+fp]=Lp}return an.toTensor()},Mt.prototype.depthwiseConv2DDerFilter=function(Xr,rn,nn){Hh([Xr,rn],"depthwiseConv2DDerFilter");for(var an=nn.strideHeight,on=nn.strideWidth,sn=nn.filterHeight,ln=nn.filterWidth,un=dr(nn.filterShape,"float32"),cn=nn.padInfo.left,hn=nn.padInfo.top,fn=nn.outChannels/nn.inChannels,to=this.bufferSync(Xr),uo=this.bufferSync(rn),co=0;co<sn;++co)for(var Uo=Math.max(0,Math.ceil((hn-co)/an)),lo=Math.min(nn.outHeight,(nn.inHeight+hn-co)/an),ho=0;ho<ln;++ho)for(var fo=Math.max(0,Math.ceil((cn-ho)/on)),mo=Math.min(nn.outWidth,(nn.inWidth+cn-ho)/on),_d=0;_d<nn.outChannels;++_d){for(var ep=Math.trunc(_d/fn),rp=_d%fn,ap=0,sp=0;sp<nn.batchSize;++sp)for(var up=Uo;up<lo;++up)for(var pp=co+up*an-hn,hp=fo;hp<mo;++hp){var vp=ho+hp*on-cn;ap+=to.get(sp,pp,vp,ep)*uo.get(sp,up,hp,_d)}un.set(ap,co,ho,ep,rp)}return un.toTensor()},Mt.prototype.tile=function(Xr,rn){return Hh(Xr,"tile"),ta(this.bufferSync(Xr),rn)},Mt.prototype.pad=function(Xr,rn,nn){Hh(Xr,"pad");var an=rn.map(function(fn,to){return fn[0]+Xr.shape[to]+fn[1]}),on=rn.map(function(fn){return fn[0]}),sn=this.bufferSync(Xr),ln=dr(an,Xr.dtype);nn!==0&&ln.values.fill(nn);for(var un=0;un<Xr.size;un++){var cn=sn.indexToLoc(un),hn=cn.map(function(fn,to){return fn+on[to]});ln.set.apply(ln,[sn.get.apply(sn,cn)].concat(hn))}return ln.toTensor()},Mt.prototype.transpose=function(Xr,rn){Hh(Xr,"transpose");for(var nn=new Array(Xr.rank),an=0;an<nn.length;an++)nn[an]=Xr.shape[rn[an]];var on=this.readSync(Xr.dataId),sn=dr(nn,Xr.dtype),ln=this.bufferSync(Xr);for(an=0;an<Xr.size;++an){for(var un=ln.indexToLoc(an),cn=new Array(un.length),hn=0;hn<cn.length;hn++)cn[hn]=un[rn[hn]];var fn=sn.locToIndex(cn);sn.values[fn]=on[an]}return sn.toTensor()},Mt.prototype.gather=function(Xr,rn,nn){Hh([Xr,rn],"gather");var an=Xr.shape.slice(),on=this.readSync(rn.dataId);an[nn]=on.length;for(var sn=dr(an,Xr.dtype),ln=this.bufferSync(Xr),un=0;un<sn.size;++un){var cn=sn.indexToLoc(un),hn=cn.slice();hn[nn]=on[cn[nn]];var fn=ln.locToIndex(hn);sn.values[un]=ln.values[fn]}return sn.toTensor()},Mt.prototype.batchToSpaceND=function(Xr,rn,nn){Hh([Xr],"batchToSpaceND");var an=rn.reduce(function(hn,fn){return hn*fn}),on=zr(Xr.shape,rn,an),sn=Gr(on.length,rn.length),ln=Hr(Xr.shape,rn,an),un=qr(nn,rn.length),cn=Kr(ln,nn,rn.length);return Xr.reshape(on).transpose(sn).reshape(ln).slice(un,cn)},Mt.prototype.spaceToBatchND=function(Xr,rn,nn){Hh([Xr],"spaceToBatchND");var an=rn.reduce(function(fn,to){return fn*to}),on=[[0,0]];on.push.apply(on,nn);for(var sn=1+rn.length;sn<Xr.shape.length;++sn)on.push([0,0]);var ln=Xr.pad(on),un=zr(ln.shape,rn,an,!1),cn=Gr(un.length,rn.length,!1),hn=Hr(ln.shape,rn,an,!1);return ln.reshape(un).transpose(cn).reshape(hn)},Mt.prototype.pool=function(Xr,rn,nn){Hh(Xr,"pool");for(var an=rn.strideHeight,on=rn.strideWidth,sn=rn.dilationHeight,ln=rn.dilationWidth,un=rn.effectiveFilterHeight,cn=rn.effectiveFilterWidth,hn=rn.padInfo.top,fn=rn.padInfo.left,to=nn==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,uo=this.readSync(Xr.dataId),co=dr(rn.outShape,Xr.dtype),Uo=co.values,lo=rn.outShape[1]*rn.outShape[2]*rn.outShape[3],ho=rn.outShape[2]*rn.outShape[3],fo=rn.outShape[3],mo=0;mo<rn.batchSize;++mo)for(var _d=mo*lo,ep=mo*Xr.strides[0],rp=0;rp<rn.inChannels;++rp)for(var ap=0;ap<rn.outHeight;++ap)for(var sp=ap*an-hn,up=Math.max(0,sp),pp=Math.min(rn.inHeight,un+sp),hp=_d+ap*ho,vp=0;vp<rn.outWidth;++vp){for(var gp=vp*on-fn,mp=Math.max(0,gp),lp=Math.min(rn.inWidth,cn+gp),cp=to,tp=0,np=0,fp=up;fp<pp;fp+=sn){for(var dp=ep+fp*Xr.strides[1],yp=mp;yp<lp;yp+=ln){var bp=uo[dp+yp*Xr.strides[2]+rp];nn==="max"&&bp>cp?cp=bp:nn==="avg"&&(tp+=bp,np++)}if(isNaN(cp))break}Uo[hp+vp*fo+rp]=nn==="avg"?tp/np:cp}return co.toTensor()},Mt.prototype.maxPool=function(Xr,rn){return this.pool(Xr,rn,"max")},Mt.prototype.maxPoolPositions=function(Xr,rn){for(var nn=dr(rn.outShape,"int32"),an=rn.strideHeight,on=rn.strideWidth,sn=rn.dilationHeight,ln=rn.dilationWidth,un=rn.effectiveFilterHeight,cn=rn.effectiveFilterWidth,hn=rn.padInfo.top,fn=rn.padInfo.left,to=this.bufferSync(Xr),uo=0;uo<rn.batchSize;++uo)for(var co=0;co<rn.inChannels;++co)for(var Uo=0;Uo<rn.outHeight;++Uo){for(var lo=Uo*an-hn,ho=lo;ho<0;)ho+=sn;for(var fo=Math.min(rn.inHeight,un+lo),mo=0;mo<rn.outWidth;++mo){for(var _d=mo*on-fn,ep=_d;ep<0;)ep+=ln;for(var rp=Math.min(rn.inWidth,cn+_d),ap=Number.NEGATIVE_INFINITY,sp=-1,up=ho;up<fo;up+=sn)for(var pp=up-lo,hp=ep;hp<rp;hp+=ln){var vp=hp-_d,gp=to.get(uo,up,hp,co);gp>ap&&(ap=gp,sp=pp*cn+vp)}nn.set(sp,uo,Uo,mo,co)}}return nn.toTensor()},Mt.prototype.maxPoolBackprop=function(Xr,rn,nn,an){Hh([rn,nn],"maxPoolBackprop");for(var on=this.maxPoolPositions(rn,an),sn=an.strideHeight,ln=an.strideWidth,un=an.dilationHeight,cn=an.dilationWidth,hn=an.effectiveFilterHeight,fn=an.effectiveFilterWidth,to=fn-1-an.padInfo.left,uo=hn-1-an.padInfo.top,co=dr(rn.shape,"float32"),Uo=this.bufferSync(on),lo=this.bufferSync(Xr),ho=0;ho<an.batchSize;++ho)for(var fo=0;fo<an.inChannels;++fo)for(var mo=0;mo<an.inHeight;++mo)for(var _d=0;_d<an.inWidth;++_d){for(var ep=mo-uo,rp=_d-to,ap=0,sp=0;sp<hn;sp+=un){var up=(ep+sp)/sn;if(!(up<0||up>=an.outHeight||Math.floor(up)!==up))for(var pp=0;pp<fn;pp+=cn){var hp=(rp+pp)/ln;if(!(hp<0||hp>=an.outWidth||Math.floor(hp)!==hp)){var vp=hn*fn-1-Uo.get(ho,up,hp,fo)===sp*fn+pp?1:0;vp!==0&&(ap+=lo.get(ho,up,hp,fo)*vp)}}}co.set(ap,ho,mo,_d,fo)}return co.toTensor()},Mt.prototype.avgPoolBackprop=function(Xr,rn,nn){Hh([Xr,rn],"avgPoolBackprop");for(var an=nn.strideHeight,on=nn.strideWidth,sn=nn.filterHeight,ln=nn.filterWidth,un=nn.dilationHeight,cn=nn.dilationWidth,hn=nn.effectiveFilterHeight,fn=nn.effectiveFilterWidth,to=fn-1-nn.padInfo.left,uo=hn-1-nn.padInfo.top,co=dr(rn.shape,"float32"),Uo=1/(sn*ln),lo=this.bufferSync(Xr),ho=0;ho<nn.batchSize;++ho)for(var fo=0;fo<nn.inChannels;++fo)for(var mo=0;mo<nn.inHeight;++mo)for(var _d=0;_d<nn.inWidth;++_d){for(var ep=mo-uo,rp=_d-to,ap=0,sp=0;sp<hn;sp+=un){var up=(ep+sp)/an;if(!(up<0||up>=nn.outHeight||Math.floor(up)!==up))for(var pp=0;pp<fn;pp+=cn){var hp=(rp+pp)/on;hp<0||hp>=nn.outWidth||Math.floor(hp)!==hp||(ap+=lo.get(ho,up,hp,fo))}}co.set(ap*Uo,ho,mo,_d,fo)}return co.toTensor()},Mt.prototype.pool3d=function(Xr,rn,nn){Hh(Xr,"pool3d");for(var an=rn.strideDepth,on=rn.strideHeight,sn=rn.strideWidth,ln=rn.dilationDepth,un=rn.dilationHeight,cn=rn.dilationWidth,hn=rn.effectiveFilterDepth,fn=rn.effectiveFilterHeight,to=rn.effectiveFilterWidth,uo=rn.padInfo.front,co=rn.padInfo.top,Uo=rn.padInfo.left,lo=nn==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,ho=this.readSync(Xr.dataId),fo=dr(rn.outShape,Xr.dtype),mo=fo.values,_d=rn.outShape[1]*rn.outShape[2]*rn.outShape[3]*rn.outShape[4],ep=rn.outShape[2]*rn.outShape[3]*rn.outShape[4],rp=rn.outShape[3]*rn.outShape[4],ap=rn.outShape[4],sp=0;sp<rn.batchSize;++sp)for(var up=sp*_d,pp=sp*Xr.strides[0],hp=0;hp<rn.inChannels;++hp)for(var vp=0;vp<rn.outDepth;++vp){for(var gp=vp*an-uo,mp=gp;mp<0;)mp+=ln;for(var lp=Math.min(rn.inDepth,hn+gp),cp=up+vp*ep,tp=0;tp<rn.outHeight;++tp){for(var np=tp*on-co,fp=np;fp<0;)fp+=un;for(var dp=Math.min(rn.inHeight,fn+np),yp=cp+tp*rp,bp=0;bp<rn.outWidth;++bp){for(var _p=bp*sn-Uo,Cp=_p;Cp<0;)Cp+=cn;for(var Sp=Math.min(rn.inWidth,to+_p),Rp=yp+bp*ap,Dp=lo,Lp=0,Bp=0,Tp=mp;Tp<lp;Tp+=ln){for(var Mp=pp+Tp*Xr.strides[1],Ap=fp;Ap<dp;Ap+=un){for(var kp=Mp+Ap*Xr.strides[2],jp=Cp;jp<Sp;jp+=cn){var Vp=ho[kp+jp*Xr.strides[3]+hp];if(nn==="max"&&Vp>Dp?Dp=Vp:nn==="avg"&&(Lp+=Vp,Bp++),isNaN(Dp))break}if(isNaN(Dp))break}if(isNaN(Dp))break}mo[Rp+hp]=nn==="avg"?Lp/Bp:Dp}}}return fo.toTensor()},Mt.prototype.avgPool3d=function(Xr,rn){return Hh(Xr,"avgPool3d"),this.pool3d(Xr,rn,"avg").toFloat()},Mt.prototype.avgPool3dBackprop=function(Xr,rn,nn){Hh([Xr,rn],"avgPool3dBackprop");for(var an=nn.strideDepth,on=nn.strideHeight,sn=nn.strideWidth,ln=nn.filterDepth,un=nn.filterHeight,cn=nn.filterWidth,hn=nn.dilationDepth,fn=nn.dilationHeight,to=nn.dilationWidth,uo=nn.effectiveFilterDepth,co=nn.effectiveFilterHeight,Uo=nn.effectiveFilterWidth,lo=uo-1-nn.padInfo.front,ho=Uo-1-nn.padInfo.left,fo=co-1-nn.padInfo.top,mo=dr(rn.shape,"float32"),_d=1/(ln*un*cn),ep=this.bufferSync(Xr),rp=0;rp<nn.batchSize;++rp)for(var ap=0;ap<nn.inChannels;++ap)for(var sp=0;sp<nn.inDepth;++sp)for(var up=0;up<nn.inHeight;++up)for(var pp=0;pp<nn.inWidth;++pp){for(var hp=sp-lo,vp=up-fo,gp=pp-ho,mp=0,lp=0;lp<uo;lp+=hn){var cp=(hp+lp)/an;if(!(cp<0||cp>=nn.outDepth||Math.floor(cp)!==cp))for(var tp=0;tp<co;tp+=fn){var np=(vp+tp)/on;if(!(np<0||np>=nn.outHeight||Math.floor(np)!==np))for(var fp=0;fp<Uo;fp+=to){var dp=(gp+fp)/sn;dp<0||dp>=nn.outWidth||Math.floor(dp)!==dp||(mp+=ep.get(rp,cp,np,dp,ap))}}}mo.set(mp*_d,rp,sp,up,pp,ap)}return mo.toTensor()},Mt.prototype.maxPool3d=function(Xr,rn){return Hh(Xr,"maxPool3d"),this.pool3d(Xr,rn,"max").toFloat()},Mt.prototype.maxPool3dPositions=function(Xr,rn){for(var nn=dr(rn.outShape,"int32"),an=rn.strideDepth,on=rn.strideHeight,sn=rn.strideWidth,ln=rn.dilationDepth,un=rn.dilationHeight,cn=rn.dilationWidth,hn=rn.effectiveFilterDepth,fn=rn.effectiveFilterHeight,to=rn.effectiveFilterWidth,uo=rn.padInfo.front,co=rn.padInfo.top,Uo=rn.padInfo.left,lo=this.bufferSync(Xr),ho=0;ho<rn.batchSize;++ho)for(var fo=0;fo<rn.inChannels;++fo)for(var mo=0;mo<rn.outDepth;++mo){for(var _d=mo*an-uo,ep=_d;ep<0;)ep+=ln;for(var rp=Math.min(rn.inDepth,hn+_d),ap=0;ap<rn.outHeight;++ap){for(var sp=ap*on-co,up=sp;up<0;)up+=un;for(var pp=Math.min(rn.inHeight,fn+sp),hp=0;hp<rn.outWidth;++hp){for(var vp=hp*sn-Uo,gp=vp;gp<0;)gp+=cn;for(var mp=Math.min(rn.inWidth,to+vp),lp=Number.NEGATIVE_INFINITY,cp=-1,tp=ep;tp<rp;tp+=ln)for(var np=tp-_d,fp=up;fp<pp;fp+=un)for(var dp=fp-sp,yp=gp;yp<mp;yp+=cn){var bp=yp-vp,_p=lo.get(ho,tp,fp,yp,fo);_p>=lp&&(lp=_p,cp=np*fn*to+dp*fn+bp)}nn.set(cp,ho,mo,ap,hp,fo)}}}return nn.toTensor()},Mt.prototype.maxPool3dBackprop=function(Xr,rn,nn,an){Hh([rn,nn],"maxPool3dBackprop");for(var on=this.maxPool3dPositions(rn,an),sn=an.strideDepth,ln=an.strideHeight,un=an.strideWidth,cn=an.dilationDepth,hn=an.dilationHeight,fn=an.dilationWidth,to=an.effectiveFilterDepth,uo=an.effectiveFilterHeight,co=an.effectiveFilterWidth,Uo=to-1-an.padInfo.front,lo=co-1-an.padInfo.left,ho=uo-1-an.padInfo.top,fo=dr(rn.shape,"float32"),mo=this.bufferSync(on),_d=this.bufferSync(Xr),ep=0;ep<an.batchSize;++ep)for(var rp=0;rp<an.inChannels;++rp)for(var ap=0;ap<an.inDepth;++ap)for(var sp=0;sp<an.inHeight;++sp)for(var up=0;up<an.inWidth;++up){for(var pp=ap-Uo,hp=sp-ho,vp=up-lo,gp=0,mp=0;mp<to;mp+=cn){var lp=(pp+mp)/sn;if(!(lp<0||lp>=an.outDepth||Math.floor(lp)!==lp))for(var cp=0;cp<uo;cp+=hn){var tp=(hp+cp)/ln;if(!(tp<0||tp>=an.outHeight||Math.floor(tp)!==tp))for(var np=0;np<co;np+=fn){var fp=(vp+np)/un;if(!(fp<0||fp>=an.outWidth||Math.floor(fp)!==fp)){var dp=to*uo*co-1-mo.get(ep,lp,tp,fp,rp)===mp*uo*co+cp*co+np?1:0;dp!==0&&(gp+=_d.get(ep,lp,tp,fp,rp)*dp)}}}}fo.set(gp,ep,ap,sp,up,rp)}return fo.toTensor()},Mt.prototype.cast=function(Xr,rn){return Po(Xr,rn,this)},Mt.prototype.reshape=function(Xr,rn){return Lo(Xr,rn)},Mt.prototype.avgPool=function(Xr,rn){return Hh(Xr,"avgPool"),this.pool(Xr,rn,"avg").toFloat()},Mt.prototype.resizeBilinear=function(Xr,rn,nn,an){Hh(Xr,"resizeBilinear");for(var on=Xr.shape,sn=on[0],ln=on[1],un=on[2],cn=on[3],hn=this.readSync(Xr.dataId),fn=new Float32Array(k([sn,rn,nn,cn])),to=[an&&rn>1?ln-1:ln,an&&nn>1?un-1:un],uo=[an&&rn>1?rn-1:rn,an&&nn>1?nn-1:nn],co=0,Uo=to[0]/uo[0],lo=to[1]/uo[1],ho=0;ho<sn;ho++)for(var fo=0;fo<rn;fo++)for(var mo=Uo*fo,_d=Math.floor(mo),ep=mo-_d,rp=Math.min(ln-1,Math.ceil(mo)),ap=ho*Xr.strides[0]+_d*Xr.strides[1],sp=ho*Xr.strides[0]+rp*Xr.strides[1],up=0;up<nn;up++)for(var pp=lo*up,hp=Math.floor(pp),vp=pp-hp,gp=Math.min(un-1,Math.ceil(pp)),mp=ap+hp*Xr.strides[2],lp=sp+hp*Xr.strides[2],cp=ap+gp*Xr.strides[2],tp=sp+gp*Xr.strides[2],np=0;np<cn;np++){var fp=hn[mp+np],dp=hn[lp+np],yp=fp+(hn[cp+np]-fp)*vp,bp=yp+(dp+(hn[tp+np]-dp)*vp-yp)*ep;fn[co++]=bp}return Fn(fn,[sn,rn,nn,cn])},Mt.prototype.resizeBilinearBackprop=function(Xr,rn,nn){Hh([Xr,rn],"resizeBilinearBackprop");for(var an=rn.shape,on=an[0],sn=an[1],ln=an[2],un=an[3],cn=Xr.shape,hn=cn[1],fn=cn[2],to=new Float32Array(on*sn*ln*un),uo=[nn&&hn>1?sn-1:sn,nn&&fn>1?ln-1:ln],co=[nn&&hn>1?hn-1:hn,nn&&fn>1?fn-1:fn],Uo=uo[0]/co[0],lo=uo[1]/co[1],ho=this.readSync(Xr.dataId),fo=0,mo=0;mo<on;mo++)for(var _d=mo*rn.strides[0],ep=0;ep<hn;ep++)for(var rp=ep*Uo,ap=Math.floor(rp),sp=Math.min(Math.ceil(rp),sn-1),up=_d+ap*rn.strides[1],pp=_d+sp*rn.strides[1],hp=rp-ap,vp=1-hp,gp=0;gp<fn;gp++)for(var mp=gp*lo,lp=Math.floor(mp),cp=Math.min(Math.ceil(mp),ln-1),tp=mp-lp,np=1-tp,fp=up+lp*rn.strides[2],dp=up+cp*rn.strides[2],yp=pp+lp*rn.strides[2],bp=pp+cp*rn.strides[2],_p=vp*np,Cp=vp*tp,Sp=hp*np,Rp=hp*tp,Dp=0;Dp<un;Dp++){var Lp=ho[fo++];to[fp+Dp]+=Lp*_p,to[dp+Dp]+=Lp*Cp,to[yp+Dp]+=Lp*Sp,to[bp+Dp]+=Lp*Rp}return Ln(to,[on,ln,sn,un],rn.dtype)},Mt.prototype.resizeNearestNeighbor=function(Xr,rn,nn,an){Hh(Xr,"resizeNearestNeighbor");for(var on=Xr.shape,sn=on[0],ln=on[1],un=on[2],cn=on[3],hn=this.readSync(Xr.dataId),fn=new Float32Array(sn*rn*nn*cn),to=[an&&rn>1?ln-1:ln,an&&nn>1?un-1:un],uo=[an&&rn>1?rn-1:rn,an&&nn>1?nn-1:nn],co=to[0]/uo[0],Uo=to[1]/uo[1],lo=0,ho=0;ho<sn;ho++)for(var fo=ho*Xr.strides[0],mo=0;mo<rn;mo++)for(var _d=co*mo,ep=fo+Math.min(ln-1,an?Math.round(_d):Math.floor(_d))*Xr.strides[1],rp=0;rp<nn;rp++)for(var ap=Uo*rp,sp=ep+Math.min(un-1,an?Math.round(ap):Math.floor(ap))*Xr.strides[2],up=0;up<cn;up++){var pp=hn[sp+up];fn[lo++]=pp}return Fn(fn,[sn,rn,nn,cn],Xr.dtype)},Mt.prototype.resizeNearestNeighborBackprop=function(Xr,rn,nn){Hh([Xr,rn],"resizeNearestNeighborBackprop");for(var an=rn.shape,on=an[0],sn=an[1],ln=an[2],un=an[3],cn=Xr.shape,hn=cn[1],fn=cn[2],to=new Float32Array(on*sn*ln*un),uo=this.readSync(Xr.dataId),co=[nn&&hn>1?sn-1:sn,nn&&fn>1?ln-1:ln],Uo=[nn&&hn>1?hn-1:hn,nn&&fn>1?fn-1:fn],lo=co[0]/Uo[0],ho=co[1]/Uo[1],fo=1/lo,mo=1/ho,_d=2*Math.ceil(fo)+2,ep=2*Math.ceil(mo)+2,rp=0;rp<on;rp++)for(var ap=rp*rn.strides[0],sp=0;sp<sn;sp++)for(var up=ap+sp*rn.strides[1],pp=Math.floor(sp*fo),hp=Math.floor(pp-_d/2),vp=0;vp<ln;vp++)for(var gp=up+vp*rn.strides[2],mp=Math.floor(vp*mo),lp=Math.floor(mp-ep/2),cp=0;cp<un;cp++){for(var tp=0,np=0;np<_d;np++){var fp=np+hp;if(!(fp<0||fp>=hn)){var dp=ap+fp*Xr.strides[1],yp=fp*lo;if(sp===Math.min(sn-1,nn?Math.round(yp):Math.floor(yp)))for(var bp=0;bp<ep;bp++){var _p=bp+lp;if(!(_p<0||_p>=fn)){var Cp=dp+_p*Xr.strides[2],Sp=_p*ho;vp===Math.min(ln-1,nn?Math.round(Sp):Math.floor(Sp))&&(tp+=uo[Cp+cp])}}}}to[gp+cp]=tp}return Ln(to,rn.shape,rn.dtype)},Mt.prototype.batchNormalization=function(Xr,rn,nn,an,on,sn){Hh([Xr,rn,nn,on,sn],"batchNorm");for(var ln=this.readSync(Xr.dataId),un=this.readSync(rn.dataId),cn=this.readSync(nn.dataId),hn=on?this.readSync(on.dataId):new Float32Array([1]),fn=sn?this.readSync(sn.dataId):new Float32Array([0]),to=new Float32Array(ln.length),uo=fn.length,co=hn.length,Uo=cn.length,lo=un.length,ho=0,fo=0,mo=0,_d=0,ep=0;ep<ln.length;++ep)to[ep]=fn[ho++]+(ln[ep]-un[fo++])*hn[mo++]/Math.sqrt(cn[_d++]+an),ho>=uo&&(ho=0),fo>=lo&&(fo=0),mo>=co&&(mo=0),_d>=Uo&&(_d=0);return Ln(to,Xr.shape)},Mt.prototype.localResponseNormalization4D=function(Xr,rn,nn,an,on){Hh(Xr,"localResponseNormalization4D");var sn=Xr.shape[3],ln=sn-1,un=this.readSync(Xr.dataId),cn=Xr.size,hn=new Float32Array(cn);function fn(Uo){for(var lo=Uo%sn,ho=Uo-lo+Math.max(0,lo-rn),fo=Uo-lo+Math.min(lo+rn,ln),mo=0;ho<=fo;ho++){var _d=un[ho];mo+=_d*_d}return mo}for(var to=0;to<cn;to++){var uo=fn(to),co=un[to]*Math.pow(nn+an*uo,-on);hn[to]=co}return Ln(hn,Xr.shape)},Mt.prototype.LRNGrad=function(Xr,rn,nn,an,on,sn,ln){Hh(Xr,"LRNGrad");for(var un=Xr.shape[3],cn=this.readSync(Xr.dataId),hn=this.readSync(rn.dataId),fn=this.readSync(nn.dataId),to=new Float32Array(Xr.size),uo=Xr.size,co=0;co<uo;co++){for(var Uo=co%un,lo=co-Uo+Math.max(0,Uo-an),ho=co-Uo+Math.min(un,Uo+an+1),fo=0,mo=lo;mo<ho;mo++)fo+=Math.pow(hn[mo],2);for(fo=sn*fo+on,mo=lo;mo<ho;mo++){var _d=-2*sn*ln*hn[mo]*fn[co]/fo;co===mo&&(_d+=Math.pow(fo,-ln)),_d*=cn[co],to[mo]+=_d}}return Ln(to,Xr.shape)},Mt.prototype.multinomial=function(Xr,rn,nn,an){Hh(Xr,"multinomial");for(var on=rn?Xr:go(Xr),sn=on.shape[0],ln=on.shape[1],un=Gn([sn,nn],"int32"),cn=this.readSync(un.dataId),hn=this.readSync(on.dataId),fn=0;fn<sn;++fn){var to=fn*ln,uo=new Float32Array(ln-1);uo[0]=hn[to];for(var co=1;co<uo.length;++co)uo[co]=uo[co-1]+hn[to+co];for(var Uo=cr(an.toString()),lo=fn*nn,ho=0;ho<nn;++ho){var fo=Uo();cn[lo+ho]=uo.length;for(var mo=0;mo<uo.length;mo++)if(fo<uo[mo]){cn[lo+ho]=mo;break}}}return un},Mt.prototype.oneHot=function(Xr,rn,nn,an){Hh(Xr,"oneHot");var on=new Float32Array(Xr.size*rn);on.fill(an);for(var sn=this.readSync(Xr.dataId),ln=0;ln<Xr.size;++ln)sn[ln]>=0&&sn[ln]<rn&&(on[ln*rn+sn[ln]]=nn);return Bn(on,[Xr.size,rn],"int32")},Mt.prototype.nonMaxSuppression=function(Xr,rn,nn,an,on){return Hh(Xr,"nonMaxSuppression"),jo(this.readSync(Xr.dataId),this.readSync(rn.dataId),nn,an,on)},Mt.prototype.fft=function(Xr){return this.fftBatch(Xr,!1)},Mt.prototype.ifft=function(Xr){return this.fftBatch(Xr,!0)},Mt.prototype.fftBatch=function(Xr,rn){for(var nn=Xr.shape[0],an=Xr.shape[1],on=dr(Xr.shape,"float32"),sn=dr(Xr.shape,"float32"),ln=Tn(Xr).as2D(nn,an),un=Nn(Xr).as2D(nn,an),cn=0;cn<nn;cn++)for(var hn=ln.slice([cn,0],[1,an]),fn=un.slice([cn,0],[1,an]),to=Dn(hn,fn),uo=this.readSync(this.fftImpl(to,rn).dataId),co=0;co<an;co++){var Uo=zo(uo,co);on.values[cn*an+co]=Uo.real,sn.values[cn*an+co]=Uo.imag}return Dn(on.toTensor(),sn.toTensor()).as2D(nn,an)},Mt.prototype.fftImpl=function(Xr,rn){var nn=Xr.as1D(),an=nn.size;if(this.isExponentOf2(an)){var on=this.fftRadix2(nn,an,rn).as2D(Xr.shape[0],Xr.shape[1]);return rn&&(on=Dn(Tn(on).div(On(an)),Nn(on).div(On(an)))),on}var sn=this.readSync(Xr.dataId),ln=function(un){for(var cn=new Float32Array(un.length/2),hn=new Float32Array(un.length/2),fn=0;fn<un.length;fn+=2)cn[fn/2]=un[fn],hn[fn/2]=un[fn+1];return{real:cn,imag:hn}}(this.fourierTransformByMatmul(sn,an,rn));return Dn(ln.real,ln.imag).as2D(Xr.shape[0],Xr.shape[1])},Mt.prototype.isExponentOf2=function(Xr){return(Xr&Xr-1)==0},Mt.prototype.fftRadix2=function(Xr,rn,nn){if(rn===1)return Xr;var an=this.readSync(Xr.dataId),on=rn/2,sn=function(lo){for(var ho=Math.ceil(lo.length/4),fo=new Float32Array(ho),mo=new Float32Array(ho),_d=0;_d<lo.length;_d+=4)fo[Math.floor(_d/4)]=lo[_d],mo[Math.floor(_d/4)]=lo[_d+1];return{real:fo,imag:mo}}(an),ln=Dn(sn.real,sn.imag).as1D(),un=function(lo){for(var ho=Math.floor(lo.length/4),fo=new Float32Array(ho),mo=new Float32Array(ho),_d=2;_d<lo.length;_d+=4)fo[Math.floor(_d/4)]=lo[_d],mo[Math.floor(_d/4)]=lo[_d+1];return{real:fo,imag:mo}}(an),cn=Dn(un.real,un.imag).as1D();ln=this.fftRadix2(ln,on,nn),cn=this.fftRadix2(cn,on,nn);var hn=function(lo,ho){for(var fo=new Float32Array(lo/2),mo=new Float32Array(lo/2),_d=0;_d<Math.ceil(lo/2);_d++){var ep=(ho?2:-2)*Math.PI*(_d/lo);fo[_d]=Math.cos(ep),mo[_d]=Math.sin(ep)}return{real:fo,imag:mo}}(rn,nn),fn=Dn(hn.real,hn.imag).mul(cn),to=ln.add(fn),uo=ln.sub(fn),co=Tn(to).concat(Tn(uo)),Uo=Nn(to).concat(Nn(uo));return Dn(co,Uo).as1D()},Mt.prototype.fourierTransformByMatmul=function(Xr,rn,nn){for(var an=new Float32Array(2*rn),on=0;on<rn;on++){for(var sn=0,ln=0,un=0;un<rn;un++){var cn=Ho(on*un,rn,nn),hn=zo(Xr,un);sn+=hn.real*cn.real-hn.imag*cn.imag,ln+=hn.real*cn.imag+hn.imag*cn.real}nn&&(sn/=rn,ln/=rn),Go(an,sn,ln,on)}return an},Mt.prototype.depthToSpace=function(Xr,rn,nn){C(nn==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+nn}),C(rn>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+rn});for(var an=Xr.shape[0],on=Xr.shape[1],sn=Xr.shape[2],ln=Xr.shape[3],un=on*rn,cn=sn*rn,hn=ln/(rn*rn),fn=this.readSync(Xr.dataId),to=new Float32Array(an*un*cn*hn),uo=0,co=0;co<an;++co)for(var Uo=0;Uo<un;++Uo)for(var lo=Math.floor(Uo/rn),ho=Uo%rn,fo=0;fo<cn;++fo)for(var mo=Math.floor(fo/rn),_d=(ho*rn+fo%rn)*hn,ep=0;ep<hn;++ep){var rp=ep+_d+ln*(mo+sn*(lo+on*co));to[uo++]=fn[rp]}return Ln(to,[an,un,cn,hn])},Mt.prototype.broadcastedBinaryOp=function(Xr,rn,nn,an){var on=Ro(Xr.shape,rn.shape),sn=dr(on,nn),ln=this.readSync(Xr.dataId),un=this.readSync(rn.dataId),cn=Co(Xr.shape,on),hn=Co(rn.shape,on),fn=sn.values;if(cn.length+hn.length===0)for(var to=0;to<fn.length;++to)fn[to]=an(ln[to%ln.length],un[to%un.length]);else{var uo=this.bufferSync(Xr),co=this.bufferSync(rn),Uo=function(lo){var ho=sn.indexToLoc(lo),fo=ho.slice(-Xr.rank);cn.forEach(function(rp){return fo[rp]=0});var mo=uo.locToIndex(fo),_d=ho.slice(-rn.rank);hn.forEach(function(rp){return _d[rp]=0});var ep=co.locToIndex(_d);fn[lo]=an(ln[mo],un[ep])};for(to=0;to<fn.length;++to)Uo(to)}return sn.toTensor()},Mt.prototype.broadcastedBinaryComplexOp=function(Xr,rn,nn){var an=Ro(Xr.shape,rn.shape),on=dr(an,"float32"),sn=dr(an,"float32"),ln=this.readSync(Xr.dataId),un=this.readSync(rn.dataId),cn=Co(Xr.shape,an),hn=Co(rn.shape,an),fn=on.values,to=sn.values;if(cn.length+hn.length===0)for(var uo=0;uo<fn.length;uo++){var co=uo%ln.length,Uo=uo%un.length,lo=nn(ln[2*co],ln[2*co+1],un[2*Uo],un[2*Uo+1]);fn[uo]=lo.real,to[uo]=lo.imag}else{var ho=this.bufferSync(this.data.get(Xr.dataId).complexTensors.real),fo=this.bufferSync(this.data.get(rn.dataId).complexTensors.real),mo=function(_d){var ep=on.indexToLoc(_d),rp=ep.slice(-Xr.rank);cn.forEach(function(hp){return rp[hp]=0});var ap=ho.locToIndex(rp),sp=ep.slice(-rn.rank);hn.forEach(function(hp){return sp[hp]=0});var up=fo.locToIndex(sp),pp=nn(ln[2*ap],ln[2*ap+1],un[2*up],un[2*up+1]);fn[_d]=pp.real,to[_d]=pp.imag};for(uo=0;uo<fn.length;uo++)mo(uo)}return this.complex(on.toTensor(),sn.toTensor())},Mt.prototype.split=function(Xr,rn,nn){return Zo(Xr,rn,nn)},Mt.prototype.dispose=function(){},Mt.prototype.floatPrecision=function(){return 32},Mt.prototype.epsilon=function(){return 1e-7},Mt.prototype.cropAndResize=function(Xr,rn,nn,an,on,sn){for(var ln=Xr.shape,un=ln[0],cn=ln[1],hn=ln[2],fn=ln[3],to=rn.shape[0],uo=an[0],co=an[1],Uo=dr([to,uo,co,fn],"float32"),lo=this.readSync(rn.dataId),ho=this.readSync(nn.dataId),fo=this.readSync(Xr.dataId),mo=Xr.strides,_d=Uo.strides,ep=0;ep<to;ep++){var rp=4*ep,ap=lo[rp],sp=lo[rp+1],up=lo[rp+2],pp=lo[rp+3],hp=ho[ep];if(!(hp>=un))for(var vp=uo>1?(up-ap)*(cn-1)/(uo-1):0,gp=co>1?(pp-sp)*(hn-1)/(co-1):0,mp=0;mp<uo;mp++){var lp=uo>1?ap*(cn-1)+mp*vp:.5*(ap+up)*(cn-1);if(lp<0||lp>cn-1)for(var cp=0;cp<co;cp++)for(var tp=0;tp<fn;tp++){var np=tp+cp*_d[2]+mp*_d[1]+ep*_d[0];Uo.values[np]=sn}else if(on==="bilinear"){var fp=Math.floor(lp),dp=Math.ceil(lp),yp=lp-fp;for(cp=0;cp<co;cp++)if((Tp=co>1?sp*(hn-1)+cp*gp:.5*(sp+pp)*(hn-1))<0||Tp>hn-1)for(tp=0;tp<fn;tp++)np=tp+cp*_d[2]+mp*_d[1]+ep*_d[0],Uo.values[np]=sn;else{var bp=Math.floor(Tp),_p=Math.ceil(Tp),Cp=Tp-bp;for(tp=0;tp<fn;tp++){var Sp=fo[np=tp+bp*mo[2]+fp*mo[1]+hp*mo[0]],Rp=fo[np=tp+_p*mo[2]+fp*mo[1]+hp*mo[0]],Dp=fo[np=tp+bp*mo[2]+dp*mo[1]+hp*mo[0]],Lp=Sp+(Rp-Sp)*Cp,Bp=Dp+(fo[np=tp+_p*mo[2]+dp*mo[1]+hp*mo[0]]-Dp)*Cp;np=tp+cp*_d[2]+mp*_d[1]+ep*_d[0],Uo.values[np]=Lp+(Bp-Lp)*yp}}}else for(cp=0;cp<co;++cp){var Tp;if((Tp=co>1?sp*(hn-1)+cp*gp:.5*(sp+pp)*(hn-1))<0||Tp>hn-1)for(tp=0;tp<fn;tp++)np=tp+cp*_d[2]+mp*_d[1]+ep*_d[0],Uo.values[np]=sn;else{var Mp=Math.round(Tp),Ap=Math.round(lp);for(tp=0;tp<fn;tp++){var kp=tp+Mp*mo[2]+Ap*mo[1]+hp*mo[0],jp=tp+cp*_d[2]+mp*_d[1]+ep*_d[0];Uo.values[jp]=fo[kp]}}}}}return Uo.toTensor()},Mt.prototype.sparseToDense=function(Xr,rn,nn,an){var on=Zr(0,Xr,nn),sn=on.sliceRank,ln=on.numUpdates,un=on.sliceSize,cn=on.strides,hn=on.outputSize;return this.scatter(Xr,rn,nn,hn,un,ln,sn,cn,an,!1)},Mt.prototype.gatherND=function(Xr,rn){var nn=rn.shape,an=nn[nn.length-1],on=jr(Xr,rn),sn=on[0],ln=on[1],un=on[2],cn=on[3];if(ln===0)return Fn([],sn,Xr.dtype);for(var hn=new gt([ln,un],Xr.dtype),fn=this.readSync(rn.dataId),to=this.readSync(Xr.dataId),uo=0;uo<ln;uo++){for(var co=[],Uo=0,lo=0;lo<an;lo++){var ho=fn[uo*an+lo];Uo+=ho*cn[lo],co.push(ho)}if(Uo<0||Uo>=Xr.size/un)throw new Error("Invalid indices: "+co+" does not index into "+Xr.shape);for(var fo=0;fo<un;fo++)hn.values[uo*un+fo]=to[Uo*un+fo]}return hn.toTensor().reshape(sn)},Mt.prototype.scatterND=function(Xr,rn,nn){var an=Zr(0,Xr,nn),on=an.sliceRank,sn=an.numUpdates,ln=an.sliceSize,un=an.strides,cn=an.outputSize,hn=On(0);return this.scatter(Xr,rn,nn,cn,ln,sn,on,un,hn,!0)},Mt.prototype.fill=function(Xr,rn,nn){var an=P(nn=nn||j$1(rn),k(Xr));return an.fill(rn),Lt.makeTensor(an,Xr,nn,this)},Mt.prototype.onesLike=function(Xr){if(Xr.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(Xr.shape,1,Xr.dtype)},Mt.prototype.zerosLike=function(Xr){var rn=P(Xr.dtype,k(Xr.shape));return this.makeOutput(rn,Xr.shape,Xr.dtype)},Mt.prototype.linspace=function(Xr,rn,nn){return Wo(Xr,rn,nn)},Mt.prototype.scatter=function(Xr,rn,nn,an,on,sn,ln,un,cn,hn){var fn=[an/on,on],to=this.readSync(Xr.dataId),uo=this.readSync(rn.dataId);if(an===0)return Fn([],nn,rn.dtype);var co=new gt(fn,rn.dtype);co.values.fill(this.readSync(cn.dataId)[0]);for(var Uo=0;Uo<sn;Uo++){for(var lo=[],ho=0,fo=0;fo<ln;fo++){var mo=to[Uo*ln+fo];lo.push(mo),ho+=mo*un[fo]}if(ho<0||ho>=an/on)throw new Error("Invalid indices: "+lo+" does not index into "+nn);for(var _d=0;_d<on;_d++)hn?co.values[ho*on+_d]+=uo[Uo*on+_d]:co.values[ho*on+_d]=rn.rank===0?uo[0]:uo[Uo*on+_d]}return co.toTensor().reshape(nn)},Mt}(bo);Lt.registerBackend("cpu",function(){return new Kh},1);for(var jh=0,Xh=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=st.attrs,nn=Mt,an=nn.boxes,on=nn.scores,sn=rn,ln=sn.maxOutputSize,un=sn.iouThreshold,cn=sn.scoreThreshold,hn=sn.softNmsSigma,fn=Xr;Hh(an,"NonMaxSuppressionWithScore");var to=Xo(fn.data.get(an.dataId).values,fn.data.get(on.dataId).values,ln,un,cn,hn);return[to.selectedIndices,to.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=Mt.x,nn=Xr;Hh(rn,"square");for(var an=nn.data.get(rn.dataId).values,on=new Float32Array(an.length),sn=0;sn<an.length;++sn){var ln=an[sn];on[sn]=ln*ln}return{dataId:nn.write(on,rn.shape,rn.dtype),shape:rn.shape,dtype:rn.dtype}}},{kernelName:eu,backendName:"cpu",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=Mt,nn=rn.a,an=rn.b,on=Xr;Hh([nn,an],eu);var sn=on.data.get(nn.dataId).values,ln=on.data.get(an.dataId).values,un=function(fn,to,uo,co,Uo,lo){var ho=Ro(fn,to),fo=ho.length,mo=$$1(ho),_d=B$1(Uo,k(ho)),ep=fn.length,rp=to.length,ap=$$1(fn),sp=$$1(to),up=Co(fn,ho),pp=Co(to,ho);if(up.length+pp.length===0)for(var hp=0;hp<_d.length;++hp)_d[hp]=lo(uo[hp%uo.length],co[hp%co.length]);else{var vp=function(gp){var mp=it(gp,fo,mo),lp=mp.slice(-ep);up.forEach(function(fp){return lp[fp]=0});var cp=at(lp,ep,ap),tp=mp.slice(-rp);pp.forEach(function(fp){return tp[fp]=0});var np=at(tp,rp,sp);_d[gp]=lo(uo[cp],co[np])};for(hp=0;hp<_d.length;++hp)vp(hp)}return[_d,ho]}(nn.shape,an.shape,sn,ln,nn.dtype,function(fn,to){var uo=fn-to;return uo*uo}),cn=un[0],hn=un[1];return{dataId:on.write(cn,hn,nn.dtype),shape:hn,dtype:nn.dtype}}}];jh<Xh.length;jh++)d$3(Xh[jh]);var Yh,$h=function(st){this.variableNames=["A"];var Mt=ua(),Xr=st[0],rn=st[1];this.outputShape=st,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+rn+".0, "+Xr+`.0);

        vec4 values = `+Mt.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Qh=function(st){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var Mt=ua(),Xr=st[0],rn=st[1];this.outputShape=st,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+rn+".0, "+Xr+`.0);
            vec4 values = `+Mt.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+Mt.output+` = result;
      }
    `};for(var Jh=0,Zh=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=st.attrs,nn=Mt.pixels,an=rn.numChannels,on=typeof HTMLVideoElement<"u"&&nn instanceof HTMLVideoElement,sn=typeof HTMLImageElement<"u"&&nn instanceof HTMLImageElement,ln=on?[nn.videoWidth,nn.videoHeight]:[nn.width,nn.height],un=ln[0],cn=ln[1],hn=[cn,un],fn=[cn,un,an];(sn||on)&&(Yh==null&&(Yh=document.createElement("canvas").getContext("2d")),Yh.canvas.width=un,Yh.canvas.height=cn,Yh.drawImage(nn,0,0,un,cn),nn=Yh.canvas);var to=Xr.makeTensorInfo(hn,"int32");Xr.texData.get(to.dataId).usage=zt.PIXELS,Xr.gpgpu.uploadPixelDataToTexture(Xr.getTexture(to.dataId),nn);var uo=i$2().getBool("WEBGL_PACK")?new Qh(fn):new $h(fn),co=Xr.runWebGLProgram(uo,[to],"int32");return Xr.disposeData(to.dataId),co}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=st.attrs;dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var nn=Mt,an=nn.boxes,on=nn.scores,sn=rn,ln=sn.maxOutputSize,un=sn.iouThreshold,cn=sn.scoreThreshold,hn=sn.softNmsSigma,fn=Xr,to=Xo(fn.readSync(an.dataId),fn.readSync(on.dataId),ln,un,cn,hn);return[to.selectedIndices,to.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=Mt.x,nn=Xr,an=new Cs(rn.shape,"return x * x;");return nn.runWebGLProgram(an,[rn],rn.dtype)}},{kernelName:eu,backendName:"webgl",kernelFunc:function(st){var Mt=st.inputs,Xr=st.backend,rn=Mt,nn=rn.a,an=rn.b,on=Xr,sn=i$2().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La("return (a - b) * (a - b);",nn.shape,an.shape):new Ba("return (a - b) * (a - b);",nn.shape,an.shape);return on.compileAndRun(sn,[nn,an])}}];Jh<Zh.length;Jh++)d$3(Zh[Jh]);for(var tf=0,ef=[{kernelName:"Square",gradFunc:function(st,Mt){var Xr=Mt[0];return{x:function(){return st.mul(Xr.toFloat().mul(2))}}}},{kernelName:eu,gradFunc:function(st,Mt){var Xr=Mt[0],rn=Mt[1],nn=On(2);return{a:function(){return gc(st,gc(nn,Cc(Xr,rn)))},b:function(){return gc(st,gc(nn,Cc(rn,Xr)))}}}}];tf<ef.length;tf++)p$3(ef[tf]);var nf=function(){function st(){}return st.prototype.fetch=function(Mt,Xr){return fetch(Mt,Xr)},st.prototype.now=function(){return performance.now()},st.prototype.encode=function(Mt,Xr){if(Xr!=="utf-8"&&Xr!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+Xr);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(Mt)},st.prototype.decode=function(Mt,Xr){return new TextDecoder(Xr).decode(Mt)},st}();i$2().get("IS_BROWSER")&&i$2().setPlatform("browser",new nf);var rf,of=function(){return require("node-fetch")},af=function(){function st(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return st.prototype.fetch=function(Mt,Xr){return i$2().global.fetch!=null?i$2().global.fetch(Mt,Xr):(rf==null&&(rf=of()),rf(Mt,Xr))},st.prototype.now=function(){var Mt=process.hrtime();return 1e3*Mt[0]+Mt[1]/1e6},st.prototype.encode=function(Mt,Xr){if(Xr!=="utf-8"&&Xr!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+Xr);return this.textEncoder.encode(Mt)},st.prototype.decode=function(Mt,Xr){return Mt.length===0?"":new this.util.TextDecoder(Xr).decode(Mt)},st}();i$2().get("IS_NODE")&&i$2().setPlatform("node",new af);var sf={float32:4,int32:4,uint16:2,uint8:1,bool:1},uf=4;function cf(st,Mt){for(var Xr={},rn=0,nn=function(sn){var ln=sn.name,un=sn.dtype,cn=sn.shape,hn=k(cn),fn=void 0;if("quantization"in sn){var to=sn.quantization;if(to.dtype!=="uint8"&&to.dtype!=="uint16")throw new Error("Weight "+sn.name+" has unknown quantization dtype "+to.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var uo=sf[to.dtype],co=st.slice(rn,rn+hn*uo),Uo=to.dtype==="uint8"?new Uint8Array(co):new Uint16Array(co);if(un==="float32")fn=Float32Array.from(Uo,function(ep){return ep*to.scale+to.min});else{if(un!=="int32")throw new Error("Unsupported dtype in weight '"+ln+"': "+un);fn=Int32Array.from(Uo,function(ep){return Math.round(ep*to.scale+to.min)})}rn+=hn*uo}else if(un==="string"){var lo=k(sn.shape);fn=[];for(var ho=0;ho<lo;ho++){var fo=new Uint32Array(st.slice(rn,rn+uf))[0];rn+=uf;var mo=new Uint8Array(st.slice(rn,rn+fo));fn.push(mo),rn+=fo}}else{var _d=sf[un];if(co=st.slice(rn,rn+hn*_d),un==="float32")fn=new Float32Array(co);else if(un==="int32")fn=new Int32Array(co);else{if(un!=="bool")throw new Error("Unsupported dtype in weight '"+ln+"': "+un);fn=new Uint8Array(co)}rn+=hn*_d}Xr[ln]=Fn(fn,cn,un)},an=0,on=Mt;an<on.length;an++)nn(on[an]);return Xr}function lf(st){if(st===null)throw new Error("Invalid input value: "+JSON.stringify(st));var Mt=0,Xr=[];st.forEach(function(an){if(Mt+=an.byteLength,Xr.push(an.byteLength===an.buffer.byteLength?an:new an.constructor(an)),!(an instanceof Float32Array||an instanceof Int32Array||an instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+an.constructor.name)});var rn=new Uint8Array(Mt),nn=0;return Xr.forEach(function(an){rn.set(new Uint8Array(an.buffer),nn),nn+=an.byteLength}),rn.buffer}var hf=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ff(st){return hf?Buffer.byteLength(st):new Blob([st]).size}function df(st){var Mt=0;st.forEach(function(nn){Mt+=nn.byteLength});var Xr=new Uint8Array(Mt),rn=0;return st.forEach(function(nn){Xr.set(new Uint8Array(nn),rn),rn+=nn.byteLength}),Xr.buffer}function pf(st){for(st=st.trim();st.endsWith("/");)st=st.slice(0,st.length-1);var Mt=st.split("/");return Mt[Mt.length-1]}function vf(st){if(st.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:st.modelTopology==null?0:ff(JSON.stringify(st.modelTopology)),weightSpecsBytes:st.weightSpecs==null?0:ff(JSON.stringify(st.weightSpecs)),weightDataBytes:st.weightData==null?0:st.weightData.byteLength}}var mf=function(){function st(){this.saveRouters=[],this.loadRouters=[]}return st.getInstance=function(){return st.instance==null&&(st.instance=new st),st.instance},st.registerSaveRouter=function(Mt){st.getInstance().saveRouters.push(Mt)},st.registerLoadRouter=function(Mt){st.getInstance().loadRouters.push(Mt)},st.getSaveHandlers=function(Mt){return st.getHandlers(Mt,"save")},st.getLoadHandlers=function(Mt,Xr){return st.getHandlers(Mt,"load",Xr)},st.getHandlers=function(Mt,Xr,rn){var nn=[];return(Xr==="load"?st.getInstance().loadRouters:st.getInstance().saveRouters).forEach(function(an){var on=an(Mt,rn);on!==null&&nn.push(on)}),nn},st}(),gf="://",yf=function(){function st(){this.managers={}}return st.getInstance=function(){return st.instance==null&&(st.instance=new st),st.instance},st.registerManager=function(Mt,Xr){C(Mt!=null,function(){return"scheme must not be undefined or null."}),Mt.endsWith(gf)&&(Mt=Mt.slice(0,Mt.indexOf(gf))),C(Mt.length>0,function(){return"scheme must not be an empty string."});var rn=st.getInstance();C(rn.managers[Mt]==null,function(){return"A model store manager is already registered for scheme '"+Mt+"'."}),rn.managers[Mt]=Xr},st.getManager=function(Mt){var Xr=this.getInstance().managers[Mt];if(Xr==null)throw new Error("Cannot find model manager for scheme '"+Mt+"'");return Xr},st.getSchemes=function(){return Object.keys(this.getInstance().managers)},st}();function xf(st){if(st.indexOf(gf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yf.getSchemes().join(","));return{scheme:st.split(gf)[0],path:st.split(gf)[1]}}function bf(st,Mt,Xr){return Xr===void 0&&(Xr=!1),n(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un,cn,hn;return r$2(this,function(fn){switch(fn.label){case 0:return C(st!==Mt,function(){return"Old path and new path are the same: '"+st+"'"}),C((rn=mf.getLoadHandlers(st)).length>0,function(){return"Copying failed because no load handler is found for source URL "+st+"."}),C(rn.length<2,function(){return"Copying failed because more than one ("+rn.length+") load handlers for source URL "+st+"."}),nn=rn[0],C((an=mf.getSaveHandlers(Mt)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+Mt+"."}),C(an.length<2,function(){return"Copying failed because more than one ("+rn.length+") save handlers for destination URL "+Mt+"."}),on=an[0],sn=xf(st).scheme,ln=xf(st).path,un=sn===xf(st).scheme,[4,nn.load()];case 1:return cn=fn.sent(),Xr&&un?[4,yf.getManager(sn).removeModel(ln)]:[3,3];case 2:fn.sent(),fn.label=3;case 3:return[4,on.save(cn)];case 4:return hn=fn.sent(),!Xr||un?[3,6]:[4,yf.getManager(sn).removeModel(ln)];case 5:fn.sent(),fn.label=6;case 6:return[2,hn.modelArtifactsInfo]}})})}var wf="models_store",Cf="model_info_store";function Ef(){if(!i$2().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var st=window||self,Mt=st.indexedDB||st.mozIndexedDB||st.webkitIndexedDB||st.msIndexedDB||st.shimIndexedDB;if(Mt==null)throw new Error("The current browser does not appear to support IndexedDB.");return Mt}function Rf(st){var Mt=st.result;Mt.createObjectStore(wf,{keyPath:"modelPath"}),Mt.createObjectStore(Cf,{keyPath:"modelPath"})}var If=function(){function st(Mt){if(this.indexedDB=Ef(),Mt==null||!Mt)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=Mt}return st.prototype.save=function(Mt){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){if(Mt.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,Mt)]})})},st.prototype.load=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Mt){return[2,this.databaseAction(this.modelPath)]})})},st.prototype.databaseAction=function(Mt,Xr){var rn=this;return new Promise(function(nn,an){var on=rn.indexedDB.open("tensorflowjs",1);on.onupgradeneeded=function(){return Rf(on)},on.onsuccess=function(){var sn=on.result;if(Xr==null){var ln=sn.transaction(wf,"readonly"),un=ln.objectStore(wf).get(rn.modelPath);un.onsuccess=function(){if(un.result==null)return sn.close(),an(new Error("Cannot find model with path '"+rn.modelPath+"' in IndexedDB."));nn(un.result.modelArtifacts)},un.onerror=function(co){return sn.close(),an(un.error)},ln.oncomplete=function(){return sn.close()}}else{var cn,hn=vf(Xr),fn=sn.transaction(Cf,"readwrite"),to=fn.objectStore(Cf),uo=to.put({modelPath:rn.modelPath,modelArtifactsInfo:hn});uo.onsuccess=function(){var co=(cn=sn.transaction(wf,"readwrite")).objectStore(wf).put({modelPath:rn.modelPath,modelArtifacts:Xr,modelArtifactsInfo:hn});co.onsuccess=function(){return nn({modelArtifactsInfo:hn})},co.onerror=function(Uo){var lo=(to=fn.objectStore(Cf)).delete(rn.modelPath);lo.onsuccess=function(){return sn.close(),an(co.error)},lo.onerror=function(ho){return sn.close(),an(co.error)}}},uo.onerror=function(co){return sn.close(),an(uo.error)},fn.oncomplete=function(){cn==null?sn.close():cn.oncomplete=function(){return sn.close()}}}},on.onerror=function(sn){return an(on.error)}})},st.URL_SCHEME="indexeddb://",st}(),kf=function(st){return i$2().getBool("IS_BROWSER")&&!Array.isArray(st)&&st.startsWith(If.URL_SCHEME)?(Mt=st.slice(If.URL_SCHEME.length),new If(Mt)):null;var Mt};mf.registerSaveRouter(kf),mf.registerLoadRouter(kf);var Sf=function(){function st(){this.indexedDB=Ef()}return st.prototype.listModels=function(){return n(this,void 0,void 0,function(){var Mt=this;return r$2(this,function(Xr){return[2,new Promise(function(rn,nn){var an=Mt.indexedDB.open("tensorflowjs",1);an.onupgradeneeded=function(){return Rf(an)},an.onsuccess=function(){var on=an.result,sn=on.transaction(Cf,"readonly"),ln=sn.objectStore(Cf).getAll();ln.onsuccess=function(){for(var un={},cn=0,hn=ln.result;cn<hn.length;cn++){var fn=hn[cn];un[fn.modelPath]=fn.modelArtifactsInfo}rn(un)},ln.onerror=function(un){return on.close(),nn(ln.error)},sn.oncomplete=function(){return on.close()}},an.onerror=function(on){return nn(an.error)}})]})})},st.prototype.removeModel=function(Mt){return n(this,void 0,void 0,function(){var Xr=this;return r$2(this,function(rn){var nn;return Mt=(nn=Mt).startsWith(If.URL_SCHEME)?nn.slice(If.URL_SCHEME.length):nn,[2,new Promise(function(an,on){var sn=Xr.indexedDB.open("tensorflowjs",1);sn.onupgradeneeded=function(){return Rf(sn)},sn.onsuccess=function(){var ln,un=sn.result,cn=un.transaction(Cf,"readwrite"),hn=cn.objectStore(Cf),fn=hn.get(Mt);fn.onsuccess=function(){if(fn.result==null)return un.close(),on(new Error("Cannot find model with path '"+Mt+"' in IndexedDB."));var to=hn.delete(Mt),uo=function(){var co=(ln=un.transaction(wf,"readwrite")).objectStore(wf).delete(Mt);co.onsuccess=function(){return an(fn.result.modelArtifactsInfo)},co.onerror=function(Uo){return on(fn.error)}};to.onsuccess=uo,to.onerror=function(co){return uo(),un.close(),on(fn.error)}},fn.onerror=function(to){return un.close(),on(fn.error)},cn.oncomplete=function(){ln==null?un.close():ln.oncomplete=function(){return un.close()}}},sn.onerror=function(ln){return on(sn.error)}})]})})},st}();if(i$2().getBool("IS_BROWSER"))try{yf.registerManager(If.URL_SCHEME,new Sf)}catch(st){}var Af="/",Df="tensorflowjs_models",Tf="info",Nf="model_topology",Ff="weight_specs",_f="weight_data",Of="model_metadata";function Mf(st){return{info:[Df,st,Tf].join(Af),topology:[Df,st,Nf].join(Af),weightSpecs:[Df,st,Ff].join(Af),weightData:[Df,st,_f].join(Af),modelMetadata:[Df,st,Of].join(Af)}}function Bf(st){var Mt=st.split(Af);if(Mt.length<3)throw new Error("Invalid key format: "+st);return Mt.slice(1,Mt.length-1).join(Af)}var Pf=function(){function st(Mt){if(!i$2().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,Mt==null||!Mt)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=Mt,this.keys=Mf(this.modelPath)}return st.prototype.save=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn;return r$2(this,function(an){if(Mt.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");Xr=JSON.stringify(Mt.modelTopology),rn=JSON.stringify(Mt.weightSpecs),nn=vf(Mt);try{return this.LS.setItem(this.keys.info,JSON.stringify(nn)),this.LS.setItem(this.keys.topology,Xr),this.LS.setItem(this.keys.weightSpecs,rn),this.LS.setItem(this.keys.weightData,function(on){if(hf)return Buffer.from(on).toString("base64");for(var sn=new Uint8Array(on),ln="",un=0,cn=sn.length;un<cn;un++)ln+=String.fromCharCode(sn[un]);return btoa(ln)}(Mt.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:Mt.format,generatedBy:Mt.generatedBy,convertedBy:Mt.convertedBy,userDefinedMetadata:Mt.userDefinedMetadata})),[2,{modelArtifactsInfo:nn}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+nn.modelTopologyBytes+", weightSpecsBytes="+nn.weightSpecsBytes+", weightDataBytes="+nn.weightDataBytes+".")}return[2]})})},st.prototype.load=function(){return n(this,void 0,void 0,function(){var Mt,Xr,rn,nn,an,on,sn;return r$2(this,function(ln){if((Mt=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(Mt.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(Xr={},(rn=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(Xr.modelTopology=rn,(nn=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(Xr.weightSpecs=nn,(an=this.LS.getItem(this.keys.modelMetadata))!=null&&(on=JSON.parse(an),Xr.format=on.format,Xr.generatedBy=on.generatedBy,Xr.convertedBy=on.convertedBy,Xr.userDefinedMetadata=on.userDefinedMetadata),(sn=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return Xr.weightData=function(un){if(hf){var cn=Buffer.from(un,"base64");return cn.buffer.slice(cn.byteOffset,cn.byteOffset+cn.byteLength)}for(var hn=atob(un),fn=new Uint8Array(hn.length),to=0;to<hn.length;++to)fn.set([hn.charCodeAt(to)],to);return fn.buffer}(sn),[2,Xr]})})},st.URL_SCHEME="localstorage://",st}(),Lf=function(st){return i$2().getBool("IS_BROWSER")&&!Array.isArray(st)&&st.startsWith(Pf.URL_SCHEME)?(Mt=st.slice(Pf.URL_SCHEME.length),new Pf(Mt)):null;var Mt};mf.registerSaveRouter(Lf),mf.registerLoadRouter(Lf);var Wf=function(){function st(){C(i$2().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),C(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return st.prototype.listModels=function(){return n(this,void 0,void 0,function(){var Mt,Xr,rn,nn,an,on;return r$2(this,function(sn){for(Mt={},Xr=Df+Af,rn=Af+Tf,nn=0;nn<this.LS.length;++nn)(an=this.LS.key(nn)).startsWith(Xr)&&an.endsWith(rn)&&(on=Bf(an),Mt[on]=JSON.parse(this.LS.getItem(an)));return[2,Mt]})})},st.prototype.removeModel=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn;return r$2(this,function(nn){var an;if(Mt=(an=Mt).startsWith(Pf.URL_SCHEME)?an.slice(Pf.URL_SCHEME.length):an,Xr=Mf(Mt),this.LS.getItem(Xr.info)==null)throw new Error("Cannot find model at path '"+Mt+"'");return rn=JSON.parse(this.LS.getItem(Xr.info)),this.LS.removeItem(Xr.info),this.LS.removeItem(Xr.topology),this.LS.removeItem(Xr.weightSpecs),this.LS.removeItem(Xr.weightData),[2,rn]})})},st}();if(i$2().getBool("IS_BROWSER"))try{yf.registerManager(Pf.URL_SCHEME,new Wf)}catch(st){}var Uf="model",Vf=".json",zf=".weights.bin";function Gf(st){return new Promise(function(Mt){return setTimeout(Mt)}).then(st)}var Hf=function(){function st(Mt){if(!i$2().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");Mt.startsWith(st.URL_SCHEME)&&(Mt=Mt.slice(st.URL_SCHEME.length)),Mt!=null&&Mt.length!==0||(Mt=Uf),this.modelTopologyFileName=Mt+Vf,this.weightDataFileName=Mt+zf}return st.prototype.save=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn;return r$2(this,function(ln){switch(ln.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(Xr=window.URL.createObjectURL(new Blob([Mt.weightData],{type:"application/octet-stream"})),!(Mt.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return rn=[{paths:["./"+this.weightDataFileName],weights:Mt.weightSpecs}],nn={modelTopology:Mt.modelTopology,format:Mt.format,generatedBy:Mt.generatedBy,convertedBy:Mt.convertedBy,weightsManifest:rn},an=window.URL.createObjectURL(new Blob([JSON.stringify(nn)],{type:"application/json"})),(on=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,on.href=an,[4,Gf(function(){return on.dispatchEvent(new MouseEvent("click"))})];case 2:return ln.sent(),Mt.weightData==null?[3,4]:((sn=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,sn.href=Xr,[4,Gf(function(){return sn.dispatchEvent(new MouseEvent("click"))})]);case 3:ln.sent(),ln.label=4;case 4:return[2,{modelArtifactsInfo:vf(Mt)}]}})})},st.URL_SCHEME="downloads://",st}(),qf=function(){function st(Mt){if(Mt==null||Mt.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+Mt);this.files=Mt}return st.prototype.load=function(){return n(this,void 0,void 0,function(){var Mt,Xr,rn=this;return r$2(this,function(nn){return Mt=this.files[0],Xr=this.files.slice(1),[2,new Promise(function(an,on){var sn=new FileReader;sn.onload=function(ln){var un=JSON.parse(ln.target.result),cn=un.modelTopology;if(cn!=null){Xr.length===0&&an({modelTopology:cn});var hn=un.weightsManifest;if(hn!=null){var fn;try{fn=rn.checkManifestAndWeightFiles(hn,Xr)}catch(Uo){return void on(Uo)}var to=[],uo=[],co=[];hn.forEach(function(Uo){Uo.paths.forEach(function(lo){uo.push(lo),co.push(null)}),to.push.apply(to,Uo.weights)}),hn.forEach(function(Uo){Uo.paths.forEach(function(lo){var ho=new FileReader;ho.onload=function(fo){var mo=fo.target.result,_d=uo.indexOf(lo);co[_d]=mo,co.indexOf(null)===-1&&an({modelTopology:cn,weightSpecs:to,weightData:df(co),format:un.format,generatedBy:un.generatedBy,convertedBy:un.convertedBy,userDefinedMetadata:un.userDefinedMetadata})},ho.onerror=function(fo){return on("Failed to weights data from file of path '"+lo+"'.")},ho.readAsArrayBuffer(fn[lo])})})}else on(new Error("weightManifest field is missing from file "+Mt.name))}else on(new Error("modelTopology field is missing from file "+Mt.name))},sn.onerror=function(ln){return on("Failed to read model topology and weights manifest JSON from file '"+Mt.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},sn.readAsText(Mt)})]})})},st.prototype.checkManifestAndWeightFiles=function(Mt,Xr){for(var rn=[],nn=Xr.map(function(ln){return pf(ln.name)}),an={},on=0,sn=Mt;on<sn.length;on++)sn[on].paths.forEach(function(ln){var un=pf(ln);if(rn.indexOf(un)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+un+"'");if(rn.push(un),nn.indexOf(un)===-1)throw new Error("Weight file with basename '"+un+"' is not provided.");an[ln]=Xr[nn.indexOf(un)]});if(rn.length!==Xr.length)throw new Error("Mismatch in the number of files in weights manifest ("+rn.length+") and the number of weight files provided ("+Xr.length+").");return an},st}();function Kf(st,Mt,Xr,rn){(function(an){C(an!=null&&Array.isArray(an)&&an.length>0,function(){return"promises must be a none empty array"})})(st),function(an,on){C(an>=0&&an<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+an}),C(on>=0&&on<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+on}),C(on>=an,function(){return"startFraction must be no more than endFraction, but got startFraction "+an+" and endFraction "+on})}(Xr=Xr??0,rn=rn??1);var nn=0;return Promise.all(st.map(function(an){return an.then(function(on){var sn=Xr+ ++nn/st.length*(rn-Xr);return Mt(sn),on}),an}))}function jf(st,Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln,un,cn;return r$2(this,function(hn){switch(hn.label){case 0:return Mt==null&&(Mt={}),Xr=Mt.fetchFunc==null?i$2().platform.fetch:Mt.fetchFunc,rn=st.map(function(fn){return Xr(fn,Mt.requestInit,{isBinary:!0})}),nn=0,an=.5,Mt.onProgress!=null?[3,2]:[4,Promise.all(rn)];case 1:return on=hn.sent(),[3,4];case 2:return[4,Kf(rn,Mt.onProgress,nn,an)];case 3:on=hn.sent(),hn.label=4;case 4:return sn=on.map(function(fn){return fn.arrayBuffer()}),ln=.5,un=1,Mt.onProgress!=null?[3,6]:[4,Promise.all(sn)];case 5:return cn=hn.sent(),[3,8];case 6:return[4,Kf(sn,Mt.onProgress,ln,un)];case 7:cn=hn.sent(),hn.label=8;case 8:return[2,cn]}})})}function Xf(st){var Mt=this;return function(Xr,rn,nn){return rn===void 0&&(rn=""),n(Mt,void 0,void 0,function(){var an,on,sn,ln,un,cn,hn,fn,to,uo;return r$2(this,function(co){switch(co.label){case 0:if(an=Xr.map(function(){return!1}),on={},sn=nn!=null?nn.map(function(){return!1}):[],ln=[],Xr.forEach(function(Uo,lo){var ho=0;Uo.weights.forEach(function(fo){var mo="quantization"in fo?fo.quantization.dtype:fo.dtype,_d=sf[mo]*k(fo.shape),ep=function(){an[lo]=!0,on[lo]==null&&(on[lo]=[]),on[lo].push({manifestEntry:fo,groupOffset:ho,sizeBytes:_d})};nn!=null?nn.forEach(function(rp,ap){rp===fo.name&&(ep(),sn[ap]=!0)}):ep(),ln.push(fo.name),ho+=_d})}),!sn.every(function(Uo){return Uo}))throw un=nn.filter(function(Uo,lo){return!sn[lo]}),new Error("Could not find weights in manifest with names: "+un.join(", ")+`. 
Manifest JSON has weights with names: `+ln.join(", ")+".");return cn=an.reduce(function(Uo,lo,ho){return lo&&Uo.push(ho),Uo},[]),hn=[],cn.forEach(function(Uo){Xr[Uo].paths.forEach(function(lo){var ho=rn+(rn.endsWith("/")?"":"/")+lo;hn.push(ho)})}),[4,st(hn)];case 1:return fn=co.sent(),to={},uo=0,cn.forEach(function(Uo){for(var lo=Xr[Uo].paths.length,ho=0,fo=0;fo<lo;fo++)ho+=fn[uo+fo].byteLength;for(var mo=new ArrayBuffer(ho),_d=new Uint8Array(mo),ep=0,rp=0;rp<lo;rp++){var ap=new Uint8Array(fn[uo+rp]);_d.set(ap,ep),ep+=ap.byteLength}on[Uo].forEach(function(sp){var up=cf(mo.slice(sp.groupOffset,sp.groupOffset+sp.sizeBytes),[sp.manifestEntry]);for(var pp in up)to[pp]=up[pp]}),uo+=lo}),[2,to]}})})}}mf.registerSaveRouter(function(st){return i$2().getBool("IS_BROWSER")&&!Array.isArray(st)&&st.startsWith(Hf.URL_SCHEME)?function(Mt){return Mt===void 0&&(Mt="model"),new Hf(Mt)}(st.slice(Hf.URL_SCHEME.length)):null});var Yf=function(){function st(Mt,Xr){if(this.DEFAULT_METHOD="POST",Xr==null&&(Xr={}),this.weightPathPrefix=Xr.weightPathPrefix,this.onProgress=Xr.onProgress,Xr.fetchFunc!=null?(C(typeof Xr.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=Xr.fetchFunc):this.fetch=i$2().platform.fetch,C(Mt!=null&&Mt.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(Mt)&&C(Mt.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+Mt.length+")."}),this.path=Mt,Xr.requestInit!=null&&Xr.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=Xr.requestInit||{}}return st.prototype.save=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an;return r$2(this,function(on){switch(on.label){case 0:if(Mt.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(Xr=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,rn=[{paths:["./model.weights.bin"],weights:Mt.weightSpecs}],nn={modelTopology:Mt.modelTopology,format:Mt.format,generatedBy:Mt.generatedBy,convertedBy:Mt.convertedBy,userDefinedMetadata:Mt.userDefinedMetadata,weightsManifest:rn},Xr.body.append("model.json",new Blob([JSON.stringify(nn)],{type:"application/json"}),"model.json"),Mt.weightData!=null&&Xr.body.append("model.weights.bin",new Blob([Mt.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,Xr)];case 1:if((an=on.sent()).ok)return[2,{modelArtifactsInfo:vf(Mt),responses:[an]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+an.status+".")}})})},st.prototype.load=function(){return n(this,void 0,void 0,function(){var Mt,Xr,rn,nn,an,on,sn,ln,un,cn,hn,fn;return r$2(this,function(to){switch(to.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(Mt=to.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+Mt.status+". Please verify this URL points to the model JSON of the model to load.");to.label=2;case 2:return to.trys.push([2,4,,5]),[4,Mt.json()];case 3:return Xr=to.sent(),[3,5];case 4:throw to.sent(),rn="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?rn+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":rn+=" Please make sure the server is serving valid JSON for this request.",new Error(rn);case 5:if(nn=Xr.modelTopology,an=Xr.weightsManifest,on=Xr.generatedBy,sn=Xr.convertedBy,ln=Xr.format,un=Xr.userDefinedMetadata,nn==null&&an==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return an==null?[3,7]:[4,this.loadWeights(an)];case 6:fn=to.sent(),cn=fn[0],hn=fn[1],to.label=7;case 7:return[2,{modelTopology:nn,weightSpecs:cn,weightData:hn,userDefinedMetadata:un,generatedBy:on,convertedBy:sn,format:ln}]}})})},st.prototype.loadWeights=function(Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln,un,cn,hn,fn;return r$2(this,function(to){switch(to.label){case 0:for(Xr=Array.isArray(this.path)?this.path[1]:this.path,rn=function(uo){var co=uo.lastIndexOf("/"),Uo=uo.lastIndexOf("?"),lo=uo.substring(0,co),ho=Uo>co?uo.substring(Uo):"";return[lo+"/",ho]}(Xr),nn=rn[0],an=rn[1],on=this.weightPathPrefix||nn,sn=[],ln=0,un=Mt;ln<un.length;ln++)cn=un[ln],sn.push.apply(sn,cn.weights);return hn=[],Mt.forEach(function(uo){uo.paths.forEach(function(co){hn.push(on+co+an)})}),[4,jf(hn,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return fn=to.sent(),[2,[sn,df(fn)]]}})})},st.URL_SCHEME_REGEX=/^https?:\/\//,st}();function $f(st){return st.match(Yf.URL_SCHEME_REGEX)!=null}var Qf=function(st,Mt){return typeof fetch>"u"?null:(Array.isArray(st)?st.every(function(Xr){return $f(Xr)}):$f(st))?Jf(st,{onProgress:Mt}):null};function Jf(st,Mt){return new Yf(st,Mt)}mf.registerSaveRouter(Qf),mf.registerLoadRouter(Qf);var Zf=function(){function st(Mt){this.modelArtifacts=Mt}return st.prototype.load=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Mt){return[2,this.modelArtifacts]})})},st}(),td=function(){function st(Mt){this.saveHandler=Mt}return st.prototype.save=function(Mt){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){return[2,this.saveHandler(Mt)]})})},st}(),ed=Object.freeze({browserFiles:function(st){return new qf(st)},browserHTTPRequest:function(st,Mt){return Jf(st,Mt)},concatenateArrayBuffers:df,decodeWeights:cf,encodeWeights:function(st,Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn=this;return r$2(this,function(ln){switch(ln.label){case 0:for(Xr=[],rn=[],nn=Array.isArray(st)?st.map(function(un){return un.name}):Object.keys(st),an=function(un){var cn=nn[un],hn=Array.isArray(st)?st[un].tensor:st[cn];if(hn.dtype!=="float32"&&hn.dtype!=="int32"&&hn.dtype!=="bool"&&hn.dtype!=="string")throw new Error("Unsupported dtype in weight '"+cn+"': "+hn.dtype);var fn={name:cn,shape:hn.shape,dtype:hn.dtype};if(hn.dtype==="string"){var to=new Promise(function(uo){return n(sn,void 0,void 0,function(){var co,Uo,lo,ho,fo,mo,_d;return r$2(this,function(ep){switch(ep.label){case 0:return[4,hn.bytes()];case 1:for(co=ep.sent(),Uo=co.reduce(function(rp,ap){return rp+ap.length},0)+uf*co.length,lo=new Uint8Array(Uo),ho=0,fo=0;fo<co.length;fo++)mo=co[fo],_d=new Uint8Array(new Uint32Array([mo.length]).buffer),lo.set(_d,ho),ho+=uf,lo.set(mo,ho),ho+=mo.length;return uo(lo),[2]}})})});rn.push(to)}else rn.push(hn.data());Mt!=null&&(fn.group=Mt),Xr.push(fn)},on=0;on<nn.length;++on)an(on);return[4,Promise.all(rn)];case 1:return[2,{data:lf(ln.sent()),specs:Xr}]}})})},fromMemory:function(st,Mt,Xr,rn){return arguments.length===1?st.modelTopology!=null||st.weightSpecs!=null?new Zf(st):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:st})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:st,weightSpecs:Mt,weightData:Xr,trainingConfig:rn}))},getLoadHandlers:function(st,Mt){return mf.getLoadHandlers(st,Mt)},getModelArtifactsInfoForJSON:vf,getSaveHandlers:function(st){return mf.getSaveHandlers(st)},http:Jf,isHTTPScheme:$f,loadWeights:function(st,Mt,Xr,rn){return Mt===void 0&&(Mt=""),n(this,void 0,void 0,function(){return r$2(this,function(nn){return[2,Xf(function(an){return jf(an,{requestInit:rn})})(st,Mt,Xr)]})})},registerLoadRouter:function(st){return mf.registerLoadRouter(st)},registerSaveRouter:function(st){return mf.registerSaveRouter(st)},weightsLoaderFactory:Xf,withSaveHandler:function(st){return new td(st)},copyModel:function(st,Mt){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){return[2,bf(st,Mt,!1)]})})},listModels:function(){return n(this,void 0,void 0,function(){var st,Mt,Xr,rn,nn,an,on;return r$2(this,function(sn){switch(sn.label){case 0:st=yf.getSchemes(),Mt={},Xr=0,rn=st,sn.label=1;case 1:return Xr<rn.length?(nn=rn[Xr],[4,yf.getManager(nn).listModels()]):[3,4];case 2:for(on in an=sn.sent())Mt[nn+gf+on]=an[on];sn.label=3;case 3:return Xr++,[3,1];case 4:return[2,Mt]}})})},moveModel:function(st,Mt){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){return[2,bf(st,Mt,!0)]})})},removeModel:function(st){return n(this,void 0,void 0,function(){var Mt;return r$2(this,function(Xr){return Mt=xf(st),[2,yf.getManager(Mt.scheme).removeModel(Mt.path)]})})}}),nd;An({confusionMatrix_:function(st,Mt,Xr){var rn=mn(st,"labels","confusionMatrix"),nn=mn(Mt,"predictions","confusionMatrix");C(Xr==null||Xr>0&&Number.isInteger(Xr),function(){return"If provided, numClasses must be a positive integer, but got "+Xr}),C(rn.rank===1,function(){return"Expected the rank of labels to be 1, but got "+rn.rank}),C(nn.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+nn.rank}),C(rn.shape[0]===nn.shape[0],function(){return"Mismatch in the number of examples: "+rn.shape[0]+" vs. "+nn.shape[0]+". Labels and predictions should have the same number of elements."}),C(Xr>0&&Number.isInteger(Xr),function(){return"numClasses is required to be a positive integer, but got "+Xr});var an=Rr(rn.asType("int32"),Xr),on=Rr(nn.asType("int32"),Xr);return an.transpose().matMul(on).asType("int32")}});var ad=An({fromPixels_:function(st,Mt){if(Mt===void 0&&(Mt=3),Mt>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(st==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var Xr=!1,rn=!1,nn=!1,an=!1,on=!1;if(st.data instanceof Uint8Array)Xr=!0;else if(typeof ImageData<"u"&&st instanceof ImageData)rn=!0;else if(typeof HTMLVideoElement<"u"&&st instanceof HTMLVideoElement)nn=!0;else if(typeof HTMLImageElement<"u"&&st instanceof HTMLImageElement)an=!0;else{if(st.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+st.constructor.name);on=!0}if(nn&&nn&&st.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(l$2("FromPixels",Lt.backendName)!=null)return Lt.runKernel("FromPixels",{pixels:st},{numChannels:Mt});var sn,ln,un=nn?[st.videoWidth,st.videoHeight]:[st.width,st.height],cn=un[0],hn=un[1];if(on?sn=st.getContext("2d").getImageData(0,0,cn,hn).data:rn||Xr?sn=st.data:(an||nn)&&(nd==null&&(nd=document.createElement("canvas").getContext("2d")),nd.canvas.width=cn,nd.canvas.height=hn,nd.drawImage(st,0,0,cn,hn),sn=nd.getImageData(0,0,cn,hn).data),Mt===4)ln=new Int32Array(sn);else{var fn=cn*hn;ln=new Int32Array(fn*Mt);for(var to=0;to<fn;to++)for(var uo=0;uo<Mt;++uo)ln[to*Mt+uo]=sn[4*to+uo]}return Pn(ln,[hn,cn,Mt],"int32")}}),id=Object.freeze({toPixels:function(st,Mt){return n(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap;return r$2(this,function(sp){switch(sp.label){case 0:if(Xr=mn(st,"img","toPixels"),st instanceof wt||(Xr=Xr.toInt()),Xr.rank!==2&&Xr.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+Xr.rank+".");if(rn=Xr.shape.slice(0,2),nn=rn[0],an=rn[1],(on=Xr.rank===2?1:Xr.shape[2])>4||on===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+on);return[4,Xr.data()];case 1:return sn=sp.sent(),ln=Xr.min(),un=Xr.max(),[4,Promise.all([ln.data(),un.data()])];case 2:if(cn=sp.sent(),hn=cn[0],fn=cn[1],to=hn[0],uo=fn[0],ln.dispose(),un.dispose(),Xr.dtype==="float32"){if(to<0||uo>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+to+" - "+uo+"].")}else{if(Xr.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+Xr.dtype+". Please use float32 or int32 tensors.");if(to<0||uo>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+to+" - "+uo+"].")}for(co=Xr.dtype==="float32"?255:1,Uo=new Uint8ClampedArray(an*nn*4),lo=0;lo<nn*an;++lo)ho=void 0,fo=void 0,mo=void 0,_d=void 0,on===1?(ho=sn[lo]*co,fo=sn[lo]*co,mo=sn[lo]*co,_d=255):on===3?(ho=sn[3*lo]*co,fo=sn[3*lo+1]*co,mo=sn[3*lo+2]*co,_d=255):on===4&&(ho=sn[4*lo]*co,fo=sn[4*lo+1]*co,mo=sn[4*lo+2]*co,_d=sn[4*lo+3]*co),Uo[(ep=4*lo)+0]=Math.round(ho),Uo[ep+1]=Math.round(fo),Uo[ep+2]=Math.round(mo),Uo[ep+3]=Math.round(_d);return Mt!=null&&(Mt.width=an,Mt.height=nn,rp=Mt.getContext("2d"),ap=new ImageData(Uo,an,nn),rp.putImageData(ap,0,0)),Xr!==st&&Xr.dispose(),[2,Uo]}})})},fromPixels:ad}),sd=function(){function st(){}return st.prototype.getClassName=function(){return this.constructor.className},st.fromConfig=function(Mt,Xr){return new Mt(Xr)},st}(),ud=function(){function st(){this.classNameMap={}}return st.getMap=function(){return st.instance==null&&(st.instance=new st),st.instance},st.register=function(Mt){st.getMap().classNameMap[Mt.className]=[Mt,Mt.fromConfig]},st}();function cd(st){C(st.className!=null,function(){return"Class being registered does not have the static className property defined."}),C(typeof st.className=="string",function(){return"className is required to be a string, but got type "+typeof st.className}),C(st.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),ud.register(st)}var xd=function(st){function Mt(){return st!==null&&st.apply(this,arguments)||this}return e$3(Mt,st),Mt.prototype.minimize=function(Xr,rn,nn){rn===void 0&&(rn=!1);var an=this.computeGradients(Xr,nn),on=an.value,sn=an.grads;if(nn!=null){var ln=nn.map(function(un){return{name:un.name,tensor:sn[un.name]}});this.applyGradients(ln)}else this.applyGradients(sn);return tn(sn),rn?on:(on.dispose(),null)},Object.defineProperty(Mt.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),Mt.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},Mt.prototype.computeGradients=function(Xr,rn){return po(Xr,rn)},Mt.prototype.dispose=function(){this.iterations_!=null&&tn(this.iterations_)},Mt.prototype.saveIterations=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:On(this.iterations_,"int32")}]})})},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},Mt.prototype.extractIterations=function(Xr){return n(this,void 0,void 0,function(){var rn;return r$2(this,function(nn){switch(nn.label){case 0:return rn=this,[4,Xr[0].tensor.data()];case 1:return rn.iterations_=nn.sent()[0],[2,Xr.slice(1)]}})})},Mt}(sd);Object.defineProperty(xd,Symbol.hasInstance,{value:function(st){return st.minimize!=null&&st.computeGradients!=null&&st.applyGradients!=null}});var bd=function(st){function Mt(Xr,rn,nn){nn===void 0&&(nn=null);var an=st.call(this)||this;return an.learningRate=Xr,an.rho=rn,an.epsilon=nn,an.accumulatedGrads=[],an.accumulatedUpdates=[],nn==null&&(an.epsilon=Lt.backend.epsilon()),an}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this;(Array.isArray(Xr)?Xr.map(function(nn){return nn.name}):Object.keys(Xr)).forEach(function(nn,an){var on=Lt.registeredVariables[nn];rn.accumulatedGrads[an]==null&&(rn.accumulatedGrads[an]={originalName:nn+"/accum_grad",variable:Ze(function(){return Xn(on).variable(!1)})}),rn.accumulatedUpdates[an]==null&&(rn.accumulatedUpdates[an]={originalName:nn+"/accum_var",variable:Ze(function(){return Xn(on).variable(!1)})});var sn=Array.isArray(Xr)?Xr[an].tensor:Xr[nn];if(sn!=null){var ln=rn.accumulatedGrads[an].variable,un=rn.accumulatedUpdates[an].variable;Ze(function(){var cn=ln.mul(rn.rho).add(sn.square().mul(1-rn.rho)),hn=un.add(rn.epsilon).sqrt().div(ln.add(rn.epsilon).sqrt()).mul(sn),fn=un.mul(rn.rho).add(hn.square().mul(1-rn.rho));ln.assign(cn),un.assign(fn);var to=hn.mul(-rn.learningRate).add(on);on.assign(to)})}}),this.incrementIterations()},Mt.prototype.dispose=function(){this.accumulatedUpdates!=null&&(tn(this.accumulatedGrads.map(function(Xr){return Xr.variable})),tn(this.accumulatedUpdates.map(function(Xr){return Xr.variable})))},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var Xr;return r$2(this,function(rn){switch(rn.label){case 0:return Xr=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(Xr.map(function(nn){return{name:nn.originalName,tensor:nn.variable}}))]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){var rn;return r$2(this,function(nn){switch(nn.label){case 0:return[4,this.extractIterations(Xr)];case 1:return Xr=nn.sent(),rn=Xr.length/2,this.accumulatedGrads=Xr.slice(0,rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.accumulatedUpdates=Xr.slice(rn,2*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.rho,rn.epsilon)},Mt.className="Adadelta",Mt}(xd);cd(bd);var wd=function(st){function Mt(Xr,rn){rn===void 0&&(rn=.1);var nn=st.call(this)||this;return nn.learningRate=Xr,nn.initialAccumulatorValue=rn,nn.accumulatedGrads=[],nn}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this;(Array.isArray(Xr)?Xr.map(function(nn){return nn.name}):Object.keys(Xr)).forEach(function(nn,an){var on=Lt.registeredVariables[nn];rn.accumulatedGrads[an]==null&&(rn.accumulatedGrads[an]={originalName:nn+"/accumulator",variable:Ze(function(){return Hn(on.shape,rn.initialAccumulatorValue).variable(!1)})});var sn=Array.isArray(Xr)?Xr[an].tensor:Xr[nn];if(sn!=null){var ln=rn.accumulatedGrads[an].variable;Ze(function(){var un=ln.add(sn.square());ln.assign(un);var cn=sn.div(un.add(Lt.backend.epsilon()).sqrt()).mul(-rn.learningRate).add(on);on.assign(cn)})}}),this.incrementIterations()},Mt.prototype.dispose=function(){this.accumulatedGrads!=null&&tn(this.accumulatedGrads.map(function(Xr){return Xr.variable}))},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){switch(Xr.label){case 0:return[4,this.saveIterations()];case 1:return[2,[Xr.sent()].concat(this.accumulatedGrads.map(function(rn){return{name:rn.originalName,tensor:rn.variable}}))]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(Xr)];case 1:return Xr=rn.sent(),this.accumulatedGrads=Xr.map(function(nn){return{originalName:nn.name,variable:nn.tensor.variable(!1)}}),[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.initialAccumulatorValue)},Mt.className="Adagrad",Mt}(xd);cd(wd);var Cd=function(st){function Mt(Xr,rn,nn,an){an===void 0&&(an=null);var on=st.call(this)||this;return on.learningRate=Xr,on.beta1=rn,on.beta2=nn,on.epsilon=an,on.accumulatedFirstMoment=[],on.accumulatedSecondMoment=[],Ze(function(){on.accBeta1=On(rn).variable(),on.accBeta2=On(nn).variable()}),an==null&&(on.epsilon=Lt.backend.epsilon()),on}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this,nn=Array.isArray(Xr)?Xr.map(function(an){return an.name}):Object.keys(Xr);Ze(function(){var an=Cc(1,rn.accBeta1),on=Cc(1,rn.accBeta2);nn.forEach(function(sn,ln){var un=Lt.registeredVariables[sn];rn.accumulatedFirstMoment[ln]==null&&(rn.accumulatedFirstMoment[ln]={originalName:sn+"/m",variable:Ze(function(){return Xn(un).variable(!1)})}),rn.accumulatedSecondMoment[ln]==null&&(rn.accumulatedSecondMoment[ln]={originalName:sn+"/v",variable:Ze(function(){return Xn(un).variable(!1)})});var cn=Array.isArray(Xr)?Xr[ln].tensor:Xr[sn];if(cn!=null){var hn=rn.accumulatedFirstMoment[ln].variable,fn=rn.accumulatedSecondMoment[ln].variable,to=hn.mul(rn.beta1).add(cn.mul(1-rn.beta1)),uo=fn.mul(rn.beta2).add(cn.square().mul(1-rn.beta2)),co=to.div(an),Uo=uo.div(on);hn.assign(to),fn.assign(uo);var lo=co.div(Uo.sqrt().add(rn.epsilon)).mul(-rn.learningRate).add(un);un.assign(lo)}}),rn.accBeta1.assign(rn.accBeta1.mul(rn.beta1)),rn.accBeta2.assign(rn.accBeta2.mul(rn.beta2))}),this.incrementIterations()},Mt.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(Xr){return Xr.variable})),this.accumulatedSecondMoment!=null&&tn(this.accumulatedSecondMoment.map(function(Xr){return Xr.variable}))},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var Xr;return r$2(this,function(rn){switch(rn.label){case 0:return Xr=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(Xr.map(function(nn){return{name:nn.originalName,tensor:nn.variable}}))]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){var rn,nn=this;return r$2(this,function(an){switch(an.label){case 0:return[4,this.extractIterations(Xr)];case 1:return Xr=an.sent(),Ze(function(){nn.accBeta1.assign(xc(nn.beta1,nn.iterations_+1)),nn.accBeta2.assign(xc(nn.beta2,nn.iterations_+1))}),rn=Xr.length/2,this.accumulatedFirstMoment=Xr.slice(0,rn).map(function(on){return{originalName:on.name,variable:on.tensor.variable(!1)}}),this.accumulatedSecondMoment=Xr.slice(rn,2*rn).map(function(on){return{originalName:on.name,variable:on.tensor.variable(!1)}}),[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.beta1,rn.beta2,rn.epsilon)},Mt.className="Adam",Mt}(xd);cd(Cd);var Ed=function(st){function Mt(Xr,rn,nn,an,on){an===void 0&&(an=null),on===void 0&&(on=0);var sn=st.call(this)||this;return sn.learningRate=Xr,sn.beta1=rn,sn.beta2=nn,sn.epsilon=an,sn.decay=on,sn.accumulatedFirstMoment=[],sn.accumulatedWeightedInfNorm=[],Ze(function(){sn.iteration=On(0).variable(),sn.accBeta1=On(rn).variable()}),an==null&&(sn.epsilon=Lt.backend.epsilon()),sn}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this,nn=Array.isArray(Xr)?Xr.map(function(an){return an.name}):Object.keys(Xr);Ze(function(){var an=Cc(1,rn.accBeta1),on=sc(-rn.learningRate,rn.iteration.mul(rn.decay).add(1));nn.forEach(function(sn,ln){var un=Lt.registeredVariables[sn];rn.accumulatedFirstMoment[ln]==null&&(rn.accumulatedFirstMoment[ln]={originalName:sn+"/m",variable:Xn(un).variable(!1)}),rn.accumulatedWeightedInfNorm[ln]==null&&(rn.accumulatedWeightedInfNorm[ln]={originalName:sn+"/v",variable:Xn(un).variable(!1)});var cn=Array.isArray(Xr)?Xr[ln].tensor:Xr[sn];if(cn!=null){var hn=rn.accumulatedFirstMoment[ln].variable,fn=rn.accumulatedWeightedInfNorm[ln].variable,to=hn.mul(rn.beta1).add(cn.mul(1-rn.beta1)),uo=fn.mul(rn.beta2),co=cn.abs(),Uo=uo.maximum(co);hn.assign(to),fn.assign(Uo);var lo=on.div(an).mul(to.div(Uo.add(rn.epsilon))).add(un);un.assign(lo)}}),rn.iteration.assign(rn.iteration.add(1)),rn.accBeta1.assign(rn.accBeta1.mul(rn.beta1))}),this.incrementIterations()},Mt.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(Xr){return Xr.variable})),this.accumulatedWeightedInfNorm!=null&&tn(this.accumulatedWeightedInfNorm.map(function(Xr){return Xr.variable}))},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){throw new Error("getWeights() is not implemented for Adamax yet.")})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){throw new Error("setWeights() is not implemented for Adamax yet.")})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.beta1,rn.beta2,rn.epsilon,rn.decay)},Mt.className="Adamax",Mt}(xd);cd(Ed);var Rd=function(st){function Mt(Xr){var rn=st.call(this)||this;return rn.learningRate=Xr,rn.setLearningRate(Xr),rn}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this;(Array.isArray(Xr)?Xr.map(function(nn){return nn.name}):Object.keys(Xr)).forEach(function(nn,an){var on=Array.isArray(Xr)?Xr[an].tensor:Xr[nn];if(on!=null){var sn=Lt.registeredVariables[nn];Ze(function(){var ln=rn.c.mul(on).add(sn);sn.assign(ln)})}}),this.incrementIterations()},Mt.prototype.setLearningRate=function(Xr){this.learningRate=Xr,this.c!=null&&this.c.dispose(),this.c=en(On(-Xr))},Mt.prototype.dispose=function(){this.c.dispose()},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){switch(Xr.label){case 0:return[4,this.saveIterations()];case 1:return[2,[Xr.sent()]]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(Xr)];case 1:if((Xr=rn.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate)},Mt.className="SGD",Mt}(xd);cd(Rd);var Id=function(st){function Mt(Xr,rn,nn){nn===void 0&&(nn=!1);var an=st.call(this,Xr)||this;return an.learningRate=Xr,an.momentum=rn,an.useNesterov=nn,an.accumulations=[],an.m=On(an.momentum),an}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this;(Array.isArray(Xr)?Xr.map(function(nn){return nn.name}):Object.keys(Xr)).forEach(function(nn,an){var on=Lt.registeredVariables[nn];rn.accumulations[an]==null&&(rn.accumulations[an]={originalName:nn+"/momentum",variable:Ze(function(){return Xn(on).variable(!1)})});var sn=rn.accumulations[an].variable,ln=Array.isArray(Xr)?Xr[an].tensor:Xr[nn];ln!=null&&Ze(function(){var un,cn=rn.m.mul(sn).add(ln);un=rn.useNesterov?rn.c.mul(ln.add(cn.mul(rn.m))).add(on):rn.c.mul(cn).add(on),sn.assign(cn),on.assign(un)})}),this.incrementIterations()},Mt.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&tn(this.accumulations.map(function(Xr){return Xr.variable}))},Mt.prototype.setMomentum=function(Xr){this.momentum=Xr},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r$2(this,function(Xr){switch(Xr.label){case 0:return[4,this.saveIterations()];case 1:return[2,[Xr.sent()].concat(this.accumulations.map(function(rn){return{name:rn.originalName,tensor:rn.variable}}))]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){return r$2(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(Xr)];case 1:return Xr=rn.sent(),this.accumulations=Xr.map(function(nn){return{originalName:nn.name,variable:nn.tensor.variable(!1)}}),[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.momentum,rn.useNesterov)},Mt.className="Momentum",Mt}(Rd);cd(Id);var kd=function(st){function Mt(Xr,rn,nn,an,on){rn===void 0&&(rn=.9),nn===void 0&&(nn=0),an===void 0&&(an=null),on===void 0&&(on=!1);var sn=st.call(this)||this;if(sn.learningRate=Xr,sn.decay=rn,sn.momentum=nn,sn.epsilon=an,sn.accumulatedMeanSquares=[],sn.accumulatedMoments=[],sn.accumulatedMeanGrads=[],sn.centered=on,an==null&&(sn.epsilon=Lt.backend.epsilon()),Xr==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return sn}return e$3(Mt,st),Mt.prototype.applyGradients=function(Xr){var rn=this;(Array.isArray(Xr)?Xr.map(function(nn){return nn.name}):Object.keys(Xr)).forEach(function(nn,an){var on=Lt.registeredVariables[nn];rn.accumulatedMeanSquares[an]==null&&(rn.accumulatedMeanSquares[an]={originalName:nn+"/rms",variable:Ze(function(){return Xn(on).variable(!1)})}),rn.accumulatedMoments[an]==null&&(rn.accumulatedMoments[an]={originalName:nn+"/momentum",variable:Ze(function(){return Xn(on).variable(!1)})}),rn.accumulatedMeanGrads[an]==null&&rn.centered&&(rn.accumulatedMeanGrads[an]={originalName:nn+"/mg",variable:Ze(function(){return Xn(on).variable(!1)})});var sn=Array.isArray(Xr)?Xr[an].tensor:Xr[nn];if(sn!=null){var ln=rn.accumulatedMeanSquares[an].variable,un=rn.accumulatedMoments[an].variable;Ze(function(){var cn=ln.mul(rn.decay).add(sn.square().mul(1-rn.decay));if(rn.centered){var hn=rn.accumulatedMeanGrads[an].variable,fn=hn.mul(rn.decay).add(sn.mul(1-rn.decay)),to=un.mul(rn.momentum).add(sn.mul(rn.learningRate).div(cn.sub(fn.square().add(rn.epsilon)).sqrt()));ln.assign(cn),hn.assign(fn),un.assign(to);var uo=on.sub(to);on.assign(uo)}else{var co=ln.mul(rn.decay).add(sn.square().mul(1-rn.decay));to=un.mul(rn.momentum).add(sn.mul(rn.learningRate).div(co.add(rn.epsilon).sqrt())),ln.assign(co),un.assign(to),uo=on.sub(to),on.assign(uo)}})}}),this.incrementIterations()},Mt.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&tn(this.accumulatedMeanSquares.map(function(Xr){return Xr.variable})),this.accumulatedMeanGrads!=null&&this.centered&&tn(this.accumulatedMeanGrads.map(function(Xr){return Xr.variable})),this.accumulatedMoments!=null&&tn(this.accumulatedMoments.map(function(Xr){return Xr.variable}))},Mt.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var Xr;return r$2(this,function(rn){switch(rn.label){case 0:return Xr=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&Xr.push.apply(Xr,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(Xr.map(function(nn){return{name:nn.originalName,tensor:nn.variable}}))]}})})},Mt.prototype.setWeights=function(Xr){return n(this,void 0,void 0,function(){var rn;return r$2(this,function(nn){switch(nn.label){case 0:return[4,this.extractIterations(Xr)];case 1:return Xr=nn.sent(),rn=this.centered?Xr.length/3:Xr.length/2,this.accumulatedMeanSquares=Xr.slice(0,rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.accumulatedMoments=Xr.slice(rn,2*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=Xr.slice(2*rn,3*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}})),[2]}})})},Mt.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},Mt.fromConfig=function(Xr,rn){return new Xr(rn.learningRate,rn.decay,rn.momentum,rn.epsilon,rn.centered)},Mt.className="RMSProp",Mt}(xd);cd(kd);typeof requestAnimationFrame<"u"||typeof setImmediate<"u"&&setImmediate;wt.prototype.squaredDifference=function(st){return nu(this,st)},xt=Gh;function drawContour(st,Mt,Xr){if(Xr===void 0&&(Xr=!1),st.beginPath(),Mt.slice(1).forEach(function(an,on){var sn=an.x,ln=an.y,un=Mt[on];st.moveTo(un.x,un.y),st.lineTo(sn,ln)}),Xr){var rn=Mt[Mt.length-1],nn=Mt[0];if(!rn||!nn)return;st.moveTo(rn.x,rn.y),st.lineTo(nn.x,nn.y)}st.stroke()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(st,Mt){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xr,rn){Xr.__proto__=rn}||function(Xr,rn){for(var nn in rn)rn.hasOwnProperty(nn)&&(Xr[nn]=rn[nn])},extendStatics(st,Mt)};function __extends(st,Mt){extendStatics(st,Mt);function Xr(){this.constructor=st}st.prototype=Mt===null?Object.create(Mt):(Xr.prototype=Mt.prototype,new Xr)}var __assign=function(){return __assign=Object.assign||function(Mt){for(var Xr,rn=1,nn=arguments.length;rn<nn;rn++){Xr=arguments[rn];for(var an in Xr)Object.prototype.hasOwnProperty.call(Xr,an)&&(Mt[an]=Xr[an])}return Mt},__assign.apply(this,arguments)};function __awaiter$7(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})}function __generator(st,Mt){var Xr={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},rn,nn,an,on;return on={next:sn(0),throw:sn(1),return:sn(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function sn(un){return function(cn){return ln([un,cn])}}function ln(un){if(rn)throw new TypeError("Generator is already executing.");for(;Xr;)try{if(rn=1,nn&&(an=un[0]&2?nn.return:un[0]?nn.throw||((an=nn.return)&&an.call(nn),0):nn.next)&&!(an=an.call(nn,un[1])).done)return an;switch(nn=0,an&&(un=[un[0]&2,an.value]),un[0]){case 0:case 1:an=un;break;case 4:return Xr.label++,{value:un[1],done:!1};case 5:Xr.label++,nn=un[1],un=[0];continue;case 7:un=Xr.ops.pop(),Xr.trys.pop();continue;default:if(an=Xr.trys,!(an=an.length>0&&an[an.length-1])&&(un[0]===6||un[0]===2)){Xr=0;continue}if(un[0]===3&&(!an||un[1]>an[0]&&un[1]<an[3])){Xr.label=un[1];break}if(un[0]===6&&Xr.label<an[1]){Xr.label=an[1],an=un;break}if(an&&Xr.label<an[2]){Xr.label=an[2],Xr.ops.push(un);break}an[2]&&Xr.ops.pop(),Xr.trys.pop();continue}un=Mt.call(st,Xr)}catch(cn){un=[6,cn],nn=0}finally{rn=an=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}}function __spreadArrays(){for(var st=0,Mt=0,Xr=arguments.length;Mt<Xr;Mt++)st+=arguments[Mt].length;for(var rn=Array(st),nn=0,Mt=0;Mt<Xr;Mt++)for(var an=arguments[Mt],on=0,sn=an.length;on<sn;on++,nn++)rn[nn]=an[on];return rn}var Dimensions=function(){function st(Mt,Xr){if(!isValidNumber(Mt)||!isValidNumber(Xr))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:Mt,height:Xr}));this._width=Mt,this._height=Xr}return Object.defineProperty(st.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),st.prototype.reverse=function(){return new st(1/this.width,1/this.height)},st}();function isTensor(st,Mt){return st instanceof wt&&st.shape.length===Mt}function isTensor2D(st){return isTensor(st,2)}function isTensor3D(st){return isTensor(st,3)}function isTensor4D(st){return isTensor(st,4)}function isFloat(st){return st%1!==0}function isEven(st){return st%2===0}function round(st,Mt){Mt===void 0&&(Mt=2);var Xr=Math.pow(10,Mt);return Math.floor(st*Xr)/Xr}function isDimensions(st){return st&&st.width&&st.height}function computeReshapedDimensions(st,Mt){var Xr=st.width,rn=st.height,nn=Mt/Math.max(rn,Xr);return new Dimensions(Math.round(Xr*nn),Math.round(rn*nn))}function getCenterPoint(st){return st.reduce(function(Mt,Xr){return Mt.add(Xr)},new Point(0,0)).div(new Point(st.length,st.length))}function range(st,Mt,Xr){return Array(st).fill(0).map(function(rn,nn){return Mt+nn*Xr})}function isValidNumber(st){return!!st&&st!==1/0&&st!==-1/0&&!isNaN(st)||st===0}function isValidProbablitiy(st){return isValidNumber(st)&&0<=st&&st<=1}var Point=function(){function st(Mt,Xr){this._x=Mt,this._y=Xr}return Object.defineProperty(st.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),st.prototype.add=function(Mt){return new st(this.x+Mt.x,this.y+Mt.y)},st.prototype.sub=function(Mt){return new st(this.x-Mt.x,this.y-Mt.y)},st.prototype.mul=function(Mt){return new st(this.x*Mt.x,this.y*Mt.y)},st.prototype.div=function(Mt){return new st(this.x/Mt.x,this.y/Mt.y)},st.prototype.abs=function(){return new st(Math.abs(this.x),Math.abs(this.y))},st.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},st.prototype.floor=function(){return new st(Math.floor(this.x),Math.floor(this.y))},st}(),Box=function(){function st(Mt,Xr){Xr===void 0&&(Xr=!0);var rn=Mt||{},nn=[rn.left,rn.top,rn.right,rn.bottom].every(isValidNumber),an=[rn.x,rn.y,rn.width,rn.height].every(isValidNumber);if(!an&&!nn)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(rn));var on=an?[rn.x,rn.y,rn.width,rn.height]:[rn.left,rn.top,rn.right-rn.left,rn.bottom-rn.top],sn=on[0],ln=on[1],un=on[2],cn=on[3];st.assertIsValidBox({x:sn,y:ln,width:un,height:cn},"Box.constructor",Xr),this._x=sn,this._y=ln,this._width=un,this._height=cn}return st.isRect=function(Mt){return!!Mt&&[Mt.x,Mt.y,Mt.width,Mt.height].every(isValidNumber)},st.assertIsValidBox=function(Mt,Xr,rn){if(rn===void 0&&(rn=!1),!st.isRect(Mt))throw new Error(Xr+" - invalid box: "+JSON.stringify(Mt)+", expected object with properties x, y, width, height");if(!rn&&(Mt.width<0||Mt.height<0))throw new Error(Xr+" - width ("+Mt.width+") and height ("+Mt.height+") must be positive numbers")},Object.defineProperty(st.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"topLeft",{get:function(){return new Point(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"topRight",{get:function(){return new Point(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"bottomLeft",{get:function(){return new Point(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"bottomRight",{get:function(){return new Point(this.right,this.bottom)},enumerable:!0,configurable:!0}),st.prototype.round=function(){var Mt=[this.x,this.y,this.width,this.height].map(function(on){return Math.round(on)}),Xr=Mt[0],rn=Mt[1],nn=Mt[2],an=Mt[3];return new st({x:Xr,y:rn,width:nn,height:an})},st.prototype.floor=function(){var Mt=[this.x,this.y,this.width,this.height].map(function(on){return Math.floor(on)}),Xr=Mt[0],rn=Mt[1],nn=Mt[2],an=Mt[3];return new st({x:Xr,y:rn,width:nn,height:an})},st.prototype.toSquare=function(){var Mt=this,Xr=Mt.x,rn=Mt.y,nn=Mt.width,an=Mt.height,on=Math.abs(nn-an);return nn<an&&(Xr-=on/2,nn+=on),an<nn&&(rn-=on/2,an+=on),new st({x:Xr,y:rn,width:nn,height:an})},st.prototype.rescale=function(Mt){var Xr=isDimensions(Mt)?Mt.width:Mt,rn=isDimensions(Mt)?Mt.height:Mt;return new st({x:this.x*Xr,y:this.y*rn,width:this.width*Xr,height:this.height*rn})},st.prototype.pad=function(Mt,Xr){var rn=[this.x-Mt/2,this.y-Xr/2,this.width+Mt,this.height+Xr],nn=rn[0],an=rn[1],on=rn[2],sn=rn[3];return new st({x:nn,y:an,width:on,height:sn})},st.prototype.clipAtImageBorders=function(Mt,Xr){var rn=this,nn=rn.x,an=rn.y,on=rn.right,sn=rn.bottom,ln=Math.max(nn,0),un=Math.max(an,0),cn=on-ln,hn=sn-un,fn=Math.min(cn,Mt-ln),to=Math.min(hn,Xr-un);return new st({x:ln,y:un,width:fn,height:to}).floor()},st.prototype.shift=function(Mt,Xr){var rn=this,nn=rn.width,an=rn.height,on=this.x+Mt,sn=this.y+Xr;return new st({x:on,y:sn,width:nn,height:an})},st.prototype.padAtBorders=function(Mt,Xr){var rn=this.width+1,nn=this.height+1,an=1,on=1,sn=rn,ln=nn,un=this.left,cn=this.top,hn=this.right,fn=this.bottom;return hn>Xr&&(sn=-hn+Xr+rn,hn=Xr),fn>Mt&&(ln=-fn+Mt+nn,fn=Mt),un<1&&(ln=2-un,un=1),cn<1&&(ln=2-cn,cn=1),{dy:on,edy:ln,dx:an,edx:sn,y:cn,ey:fn,x:un,ex:hn,w:rn,h:nn}},st.prototype.calibrate=function(Mt){return new st({left:this.left+Mt.left*this.width,top:this.top+Mt.top*this.height,right:this.right+Mt.right*this.width,bottom:this.bottom+Mt.bottom*this.height}).toSquare().round()},st}(),BoundingBox=function(st){__extends(Mt,st);function Mt(Xr,rn,nn,an,on){return on===void 0&&(on=!1),st.call(this,{left:Xr,top:rn,right:nn,bottom:an},on)||this}return Mt}(Box),ObjectDetection=function(){function st(Mt,Xr,rn,nn,an){this._imageDims=new Dimensions(an.width,an.height),this._score=Mt,this._classScore=Xr,this._className=rn,this._box=new Box(nn).rescale(this._imageDims)}return Object.defineProperty(st.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"relativeBox",{get:function(){return new Box(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),st.prototype.forSize=function(Mt,Xr){return new st(this.score,this.classScore,this.className,this.relativeBox,{width:Mt,height:Xr})},st}(),FaceDetection=function(st){__extends(Mt,st);function Mt(Xr,rn,nn){return st.call(this,Xr,Xr,"",rn,nn)||this}return Mt.prototype.forSize=function(Xr,rn){var nn=st.prototype.forSize.call(this,Xr,rn),an=nn.score,on=nn.relativeBox,sn=nn.imageDims;return new Mt(an,on,sn)},Mt}(ObjectDetection);function iou(st,Mt,Xr){Xr===void 0&&(Xr=!0);var rn=Math.max(0,Math.min(st.right,Mt.right)-Math.max(st.left,Mt.left)),nn=Math.max(0,Math.min(st.bottom,Mt.bottom)-Math.max(st.top,Mt.top)),an=rn*nn;return Xr?an/(st.area+Mt.area-an):an/Math.min(st.area,Mt.area)}function minBbox(st){var Mt=st.map(function(sn){return sn.x}),Xr=st.map(function(sn){return sn.y}),rn=Mt.reduce(function(sn,ln){return ln<sn?ln:sn},1/0),nn=Xr.reduce(function(sn,ln){return ln<sn?ln:sn},1/0),an=Mt.reduce(function(sn,ln){return sn<ln?ln:sn},0),on=Xr.reduce(function(sn,ln){return sn<ln?ln:sn},0);return new BoundingBox(rn,nn,an,on)}function nonMaxSuppression$1(st,Mt,Xr,rn){rn===void 0&&(rn=!0);for(var nn=Mt.map(function(sn,ln){return{score:sn,boxIndex:ln}}).sort(function(sn,ln){return sn.score-ln.score}).map(function(sn){return sn.boxIndex}),an=[],on=function(){var sn=nn.pop();an.push(sn);for(var ln=nn,un=[],cn=0;cn<ln.length;cn++){var hn=ln[cn],fn=st[sn],to=st[hn];un.push(iou(fn,to,rn))}nn=nn.filter(function(uo,co){return un[co]<=Xr})};nn.length>0;)on();return an}function normalize$1(st,Mt){return Ze(function(){var Xr=Mt[0],rn=Mt[1],nn=Mt[2],an=Hn(__spreadArrays(st.shape.slice(0,3),[1]),Xr),on=Hn(__spreadArrays(st.shape.slice(0,3),[1]),rn),sn=Hn(__spreadArrays(st.shape.slice(0,3),[1]),nn),ln=Yn([an,on,sn],3);return Cc(st,ln)})}function padToSquare(st,Mt){return Mt===void 0&&(Mt=!1),Ze(function(){var Xr=st.shape.slice(1),rn=Xr[0],nn=Xr[1];if(rn===nn)return st;var an=Math.abs(rn-nn),on=Math.round(an*(Mt?.5:1)),sn=rn>nn?2:1,ln=function(to){var uo=st.shape.slice();return uo[sn]=to,Hn(uo,0)},un=ln(on),cn=an-un.shape[sn],hn=Mt&&cn?ln(cn):null,fn=[hn,st,un].filter(function(to){return!!to}).map(function(to){return to.toFloat()});return Yn(fn,sn)})}function sigmoid(st){return 1/(1+Math.exp(-st))}var Rect=function(st){__extends(Mt,st);function Mt(Xr,rn,nn,an,on){return on===void 0&&(on=!1),st.call(this,{x:Xr,y:rn,width:nn,height:an},on)||this}return Mt}(Box),relX=.5,relY=.43,relScale=.45,FaceLandmarks=function(){function st(Mt,Xr,rn){rn===void 0&&(rn=new Point(0,0));var nn=Xr.width,an=Xr.height;this._imgDims=new Dimensions(nn,an),this._shift=rn,this._positions=Mt.map(function(on){return on.mul(new Point(nn,an)).add(rn)})}return Object.defineProperty(st.prototype,"shift",{get:function(){return new Point(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"relativePositions",{get:function(){var Mt=this;return this._positions.map(function(Xr){return Xr.sub(Mt._shift).div(new Point(Mt.imageWidth,Mt.imageHeight))})},enumerable:!0,configurable:!0}),st.prototype.forSize=function(Mt,Xr){return new this.constructor(this.relativePositions,{width:Mt,height:Xr})},st.prototype.shiftBy=function(Mt,Xr){return new this.constructor(this.relativePositions,this._imgDims,new Point(Mt,Xr))},st.prototype.shiftByPoint=function(Mt){return this.shiftBy(Mt.x,Mt.y)},st.prototype.align=function(Mt,Xr){if(Xr===void 0&&(Xr={}),Mt){var rn=Mt instanceof FaceDetection?Mt.box.floor():new Box(Mt);return this.shiftBy(rn.x,rn.y).align(null,Xr)}var nn=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},Xr),an=nn.useDlibAlignment,on=nn.minBoxPadding;return an?this.alignDlib():this.alignMinBbox(on)},st.prototype.alignDlib=function(){var Mt=this.getRefPointsForAlignment(),Xr=Mt[0],rn=Mt[1],nn=Mt[2],an=function(hn){return nn.sub(hn).magnitude()},on=(an(Xr)+an(rn))/2,sn=Math.floor(on/relScale),ln=getCenterPoint(Mt),un=Math.floor(Math.max(0,ln.x-relX*sn)),cn=Math.floor(Math.max(0,ln.y-relY*sn));return new Rect(un,cn,Math.min(sn,this.imageWidth+un),Math.min(sn,this.imageHeight+cn))},st.prototype.alignMinBbox=function(Mt){var Xr=minBbox(this.positions);return Xr.pad(Xr.width*Mt,Xr.height*Mt)},st.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},st}(),FaceLandmarks5=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.getRefPointsForAlignment=function(){var Xr=this.positions;return[Xr[0],Xr[1],getCenterPoint([Xr[3],Xr[4]])]},Mt}(FaceLandmarks),FaceLandmarks68=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.getJawOutline=function(){return this.positions.slice(0,17)},Mt.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},Mt.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},Mt.prototype.getNose=function(){return this.positions.slice(27,36)},Mt.prototype.getLeftEye=function(){return this.positions.slice(36,42)},Mt.prototype.getRightEye=function(){return this.positions.slice(42,48)},Mt.prototype.getMouth=function(){return this.positions.slice(48,68)},Mt.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(getCenterPoint)},Mt}(FaceLandmarks),FaceMatch=function(){function st(Mt,Xr){this._label=Mt,this._distance=Xr}return Object.defineProperty(st.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),st.prototype.toString=function(Mt){return Mt===void 0&&(Mt=!0),""+this.label+(Mt?" ("+round(this.distance)+")":"")},st}(),LabeledBox=function(st){__extends(Mt,st);function Mt(Xr,rn){var nn=st.call(this,Xr)||this;return nn._label=rn,nn}return Mt.assertIsValidLabeledBox=function(Xr,rn){if(Box.assertIsValidBox(Xr,rn),!isValidNumber(Xr.label))throw new Error(rn+" - expected property label ("+Xr.label+") to be a number")},Object.defineProperty(Mt.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Mt}(Box),LabeledFaceDescriptors=function(){function st(Mt,Xr){if(typeof Mt!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(Xr)||Xr.some(function(rn){return!(rn instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=Mt,this._descriptors=Xr}return Object.defineProperty(st.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),st.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(Mt){return Array.from(Mt)})}},st.fromJSON=function(Mt){var Xr=Mt.descriptors.map(function(rn){return new Float32Array(rn)});return new st(Mt.label,Xr)},st}();(function(st){__extends(Mt,st);function Mt(Xr,rn,nn,an){var on=st.call(this,Xr,rn)||this;return on._score=nn,on._classScore=an,on}return Mt.assertIsValidPredictedBox=function(Xr,rn){if(LabeledBox.assertIsValidLabeledBox(Xr,rn),!isValidProbablitiy(Xr.score)||!isValidProbablitiy(Xr.classScore))throw new Error(rn+" - expected properties score ("+Xr.score+") and ("+Xr.classScore+") to be a number between [0, 1]")},Object.defineProperty(Mt.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Mt})(LabeledBox);function isWithFaceDetection(st){return st.detection instanceof FaceDetection}function extendWithFaceDetection(st,Mt){var Xr={detection:Mt};return Object.assign({},st,Xr)}function createBrowserEnv(){var st=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},Mt=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:st,readFile:Mt}}function createFileSystem(st){var Mt="";if(!st)try{st=require("fs")}catch(rn){Mt=rn.toString()}var Xr=st?function(rn){return new Promise(function(nn,an){st.readFile(rn,function(on,sn){return on?an(on):nn(sn)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+Mt)};return{readFile:Xr}}function createNodejsEnv(){var st=global.Canvas||global.HTMLCanvasElement,Mt=global.Image||global.HTMLImageElement,Xr=function(){if(st)return new st;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},rn=function(){if(Mt)return new Mt;throw new Error("createImageElement - missing Image implementation for nodejs environment")},nn=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},an=createFileSystem();return __assign({Canvas:st||function(){function on(){}return on}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function on(){}return on}(),Image:Mt||function(){function on(){}return on}(),ImageData:global.ImageData||function(){function on(){}return on}(),Video:global.HTMLVideoElement||function(){function on(){}return on}(),createCanvasElement:Xr,createImageElement:rn,fetch:nn},an)}function isBrowser$1(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function isNodejs(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var environment;function getEnv(){if(!environment)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return environment}function setEnv(st){environment=st}function initialize(){isBrowser$1()&&setEnv(createBrowserEnv()),isNodejs()&&setEnv(createNodejsEnv())}function monkeyPatch(st){if(environment||initialize(),!environment)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var Mt=st.Canvas,Xr=Mt===void 0?environment.Canvas:Mt,rn=st.Image,nn=rn===void 0?environment.Image:rn;environment.Canvas=Xr,environment.Image=nn,environment.createCanvasElement=st.createCanvasElement||function(){return new Xr},environment.createImageElement=st.createImageElement||function(){return new nn},environment.ImageData=st.ImageData||environment.ImageData,environment.Video=st.Video||environment.Video,environment.fetch=st.fetch||environment.fetch,environment.readFile=st.readFile||environment.readFile}var env={getEnv,setEnv,initialize,createBrowserEnv,createFileSystem,createNodejsEnv,monkeyPatch,isBrowser:isBrowser$1,isNodejs};initialize();function resolveInput(st){return!env.isNodejs()&&typeof st=="string"?document.getElementById(st):st}function getContext2dOrThrow(st){var Mt=env.getEnv(),Xr=Mt.Canvas,rn=Mt.CanvasRenderingContext2D;if(st instanceof rn)return st;var nn=resolveInput(st);if(!(nn instanceof Xr))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var an=nn.getContext("2d");if(!an)throw new Error("resolveContext2d - canvas 2d context is null");return an}var AnchorPosition;(function(st){st.TOP_LEFT="TOP_LEFT",st.TOP_RIGHT="TOP_RIGHT",st.BOTTOM_LEFT="BOTTOM_LEFT",st.BOTTOM_RIGHT="BOTTOM_RIGHT"})(AnchorPosition||(AnchorPosition={}));var DrawTextFieldOptions=function(){function st(Mt){Mt===void 0&&(Mt={});var Xr=Mt.anchorPosition,rn=Mt.backgroundColor,nn=Mt.fontColor,an=Mt.fontSize,on=Mt.fontStyle,sn=Mt.padding;this.anchorPosition=Xr||AnchorPosition.TOP_LEFT,this.backgroundColor=rn||"rgba(0, 0, 0, 0.5)",this.fontColor=nn||"rgba(255, 255, 255, 1)",this.fontSize=an||14,this.fontStyle=on||"Georgia",this.padding=sn||4}return st}(),DrawTextField=function(){function st(Mt,Xr,rn){rn===void 0&&(rn={}),this.text=typeof Mt=="string"?[Mt]:Mt instanceof st?Mt.text:Mt,this.anchor=Xr,this.options=new DrawTextFieldOptions(rn)}return st.prototype.measureWidth=function(Mt){var Xr=this.options.padding;return this.text.map(function(rn){return Mt.measureText(rn).width}).reduce(function(rn,nn){return rn<nn?nn:rn},0)+2*Xr},st.prototype.measureHeight=function(){var Mt=this.options,Xr=Mt.fontSize,rn=Mt.padding;return this.text.length*Xr+2*rn},st.prototype.getUpperLeft=function(Mt,Xr){var rn=this.options.anchorPosition,nn=rn===AnchorPosition.BOTTOM_RIGHT||rn===AnchorPosition.TOP_RIGHT,an=rn===AnchorPosition.BOTTOM_LEFT||rn===AnchorPosition.BOTTOM_RIGHT,on=this.measureWidth(Mt),sn=this.measureHeight(),ln=nn?this.anchor.x-on:this.anchor.x,un=an?this.anchor.y-sn:this.anchor.y;if(Xr){var cn=Xr.width,hn=Xr.height,fn=Math.max(Math.min(ln,cn-on),0),to=Math.max(Math.min(un,hn-sn),0);return{x:fn,y:to}}return{x:ln,y:un}},st.prototype.draw=function(Mt){var Xr=resolveInput(Mt),rn=getContext2dOrThrow(Xr),nn=this.options,an=nn.backgroundColor,on=nn.fontColor,sn=nn.fontSize,ln=nn.fontStyle,un=nn.padding;rn.font=sn+"px "+ln;var cn=this.measureWidth(rn),hn=this.measureHeight();rn.fillStyle=an;var fn=this.getUpperLeft(rn,Xr);rn.fillRect(fn.x,fn.y,cn,hn),rn.fillStyle=on,this.text.forEach(function(to,uo){var co=un+fn.x,Uo=un+fn.y+(uo+1)*sn;rn.fillText(to,co,Uo)})},st}(),DrawBoxOptions=function(){function st(Mt){Mt===void 0&&(Mt={});var Xr=Mt.boxColor,rn=Mt.lineWidth,nn=Mt.label,an=Mt.drawLabelOptions;this.boxColor=Xr||"rgba(0, 0, 255, 1)",this.lineWidth=rn||2,this.label=nn;var on={anchorPosition:AnchorPosition.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new DrawTextFieldOptions(Object.assign({},on,an))}return st}(),DrawBox=function(){function st(Mt,Xr){Xr===void 0&&(Xr={}),this.box=new Box(Mt),this.options=new DrawBoxOptions(Xr)}return st.prototype.draw=function(Mt){var Xr=getContext2dOrThrow(Mt),rn=this.options,nn=rn.boxColor,an=rn.lineWidth,on=this.box,sn=on.x,ln=on.y,un=on.width,cn=on.height;Xr.strokeStyle=nn,Xr.lineWidth=an,Xr.strokeRect(sn,ln,un,cn);var hn=this.options.label;hn&&new DrawTextField([hn],{x:sn-an/2,y:ln},this.options.drawLabelOptions).draw(Mt)},st}();function drawDetections(st,Mt){var Xr=Array.isArray(Mt)?Mt:[Mt];Xr.forEach(function(rn){var nn=rn instanceof FaceDetection?rn.score:isWithFaceDetection(rn)?rn.detection.score:void 0,an=rn instanceof FaceDetection?rn.box:isWithFaceDetection(rn)?rn.detection.box:new Box(rn),on=nn?""+round(nn):void 0;new DrawBox(an,{label:on}).draw(st)})}function isMediaLoaded(st){var Mt=env.getEnv(),Xr=Mt.Image,rn=Mt.Video;return st instanceof Xr&&st.complete||st instanceof rn&&st.readyState>=3}function awaitMediaLoaded(st){return new Promise(function(Mt,Xr){if(st instanceof env.getEnv().Canvas||isMediaLoaded(st))return Mt();function rn(an){an.currentTarget&&(an.currentTarget.removeEventListener("load",rn),an.currentTarget.removeEventListener("error",nn),Mt(an))}function nn(an){an.currentTarget&&(an.currentTarget.removeEventListener("load",rn),an.currentTarget.removeEventListener("error",nn),Xr(an))}st.addEventListener("load",rn),st.addEventListener("error",nn)})}function bufferToImage(st){return new Promise(function(Mt,Xr){if(!(st instanceof Blob))return Xr("bufferToImage - expected buf to be of type: Blob");var rn=new FileReader;rn.onload=function(){if(typeof rn.result!="string")return Xr("bufferToImage - expected reader.result to be a string, in onload");var nn=env.getEnv().createImageElement();nn.onload=function(){return Mt(nn)},nn.onerror=Xr,nn.src=rn.result},rn.onerror=Xr,rn.readAsDataURL(st)})}function getMediaDimensions(st){var Mt=env.getEnv(),Xr=Mt.Image,rn=Mt.Video;return st instanceof Xr?new Dimensions(st.naturalWidth,st.naturalHeight):st instanceof rn?new Dimensions(st.videoWidth,st.videoHeight):new Dimensions(st.width,st.height)}function createCanvas(st){var Mt=st.width,Xr=st.height,rn=env.getEnv().createCanvasElement,nn=rn();return nn.width=Mt,nn.height=Xr,nn}function createCanvasFromMedia(st,Mt){var Xr=env.getEnv().ImageData;if(!(st instanceof Xr)&&!isMediaLoaded(st))throw new Error("createCanvasFromMedia - media has not finished loading yet");var rn=Mt||getMediaDimensions(st),nn=rn.width,an=rn.height,on=createCanvas({width:nn,height:an});return st instanceof Xr?getContext2dOrThrow(on).putImageData(st,0,0):getContext2dOrThrow(on).drawImage(st,0,0,nn,an),on}function imageTensorToCanvas(st,Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn;return __generator(this,function(ln){switch(ln.label){case 0:return Xr=Mt||env.getEnv().createCanvasElement(),rn=st.shape.slice(isTensor4D(st)?1:0),nn=rn[0],an=rn[1],on=rn[2],sn=Ze(function(){return st.as3D(nn,an,on).toInt()}),[4,id.toPixels(sn,Xr)];case 1:return ln.sent(),sn.dispose(),[2,Xr]}})})}function isMediaElement(st){var Mt=env.getEnv(),Xr=Mt.Image,rn=Mt.Canvas,nn=Mt.Video;return st instanceof Xr||st instanceof rn||st instanceof nn}function imageToSquare(st,Mt,Xr){Xr===void 0&&(Xr=!1);var rn=env.getEnv(),nn=rn.Image,an=rn.Canvas;if(!(st instanceof nn||st instanceof an))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var on=getMediaDimensions(st),sn=Mt/Math.max(on.height,on.width),ln=sn*on.width,un=sn*on.height,cn=createCanvas({width:Mt,height:Mt}),hn=st instanceof an?st:createCanvasFromMedia(st),fn=Math.abs(ln-un)/2,to=Xr&&ln<un?fn:0,uo=Xr&&un<ln?fn:0;return getContext2dOrThrow(cn).drawImage(hn,to,uo,ln,un),cn}var NetInput=function(){function st(Mt,Xr){var rn=this;if(Xr===void 0&&(Xr=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(Mt))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+Mt);this._treatAsBatchInput=Xr,this._batchSize=Mt.length,Mt.forEach(function(nn,an){if(isTensor3D(nn)){rn._imageTensors[an]=nn,rn._inputDimensions[an]=nn.shape;return}if(isTensor4D(nn)){var on=nn.shape[0];if(on!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+on+" passed, but not supported in input array");rn._imageTensors[an]=nn,rn._inputDimensions[an]=nn.shape.slice(1);return}var sn=nn instanceof env.getEnv().Canvas?nn:createCanvasFromMedia(nn);rn._canvases[an]=sn,rn._inputDimensions[an]=[sn.height,sn.width,3]})}return Object.defineProperty(st.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"reshapedInputDimensions",{get:function(){var Mt=this;return range(this.batchSize,0,1).map(function(Xr,rn){return Mt.getReshapedInputDimensions(rn)})},enumerable:!0,configurable:!0}),st.prototype.getInput=function(Mt){return this.canvases[Mt]||this.imageTensors[Mt]},st.prototype.getInputDimensions=function(Mt){return this._inputDimensions[Mt]},st.prototype.getInputHeight=function(Mt){return this._inputDimensions[Mt][0]},st.prototype.getInputWidth=function(Mt){return this._inputDimensions[Mt][1]},st.prototype.getReshapedInputDimensions=function(Mt){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var Xr=this.getInputWidth(Mt),rn=this.getInputHeight(Mt);return computeReshapedDimensions({width:Xr,height:rn},this.inputSize)},st.prototype.toBatchTensor=function(Mt,Xr){var rn=this;return Xr===void 0&&(Xr=!0),this._inputSize=Mt,Ze(function(){var nn=range(rn.batchSize,0,1).map(function(on){var sn=rn.getInput(on);if(sn instanceof wt){var ln=isTensor4D(sn)?sn:sn.expandDims();return ln=padToSquare(ln,Xr),(ln.shape[1]!==Mt||ln.shape[2]!==Mt)&&(ln=Oh.resizeBilinear(ln,[Mt,Mt])),ln.as3D(Mt,Mt,3)}if(sn instanceof env.getEnv().Canvas)return id.fromPixels(imageToSquare(sn,Mt,Xr));throw new Error("toBatchTensor - at batchIdx "+on+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+sn)}),an=Pr(nn.map(function(on){return on.toFloat()})).as4D(rn.batchSize,Mt,Mt,3);return an})},st}();function toNetInput(st){return __awaiter$7(this,void 0,void 0,function(){var Mt,Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:if(st instanceof NetInput)return[2,st];if(Mt=Array.isArray(st)?st:[st],!Mt.length)throw new Error("toNetInput - empty array passed as input");return Xr=function(an){return Array.isArray(st)?" at input index "+an+":":""},rn=Mt.map(resolveInput),rn.forEach(function(an,on){if(!isMediaElement(an)&&!isTensor3D(an)&&!isTensor4D(an))throw typeof Mt[on]=="string"?new Error("toNetInput -"+Xr(on)+" string passed, but could not resolve HTMLElement for element id "+Mt[on]):new Error("toNetInput -"+Xr(on)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(isTensor4D(an)){var sn=an.shape[0];if(sn!==1)throw new Error("toNetInput -"+Xr(on)+" tf.Tensor4D with batchSize "+sn+" passed, but not supported in input array")}}),[4,Promise.all(rn.map(function(an){return isMediaElement(an)&&awaitMediaLoaded(an)}))];case 1:return nn.sent(),[2,new NetInput(rn,Array.isArray(st))]}})})}function extractFaces(st,Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln;return __generator(this,function(un){switch(un.label){case 0:return Xr=env.getEnv().Canvas,rn=st,st instanceof Xr?[3,5]:[4,toNetInput(st)];case 1:if(nn=un.sent(),nn.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return an=nn.getInput(0),an instanceof Xr?(on=an,[3,4]):[3,2];case 2:return[4,imageTensorToCanvas(an)];case 3:on=un.sent(),un.label=4;case 4:rn=on,un.label=5;case 5:return sn=getContext2dOrThrow(rn),ln=Mt.map(function(cn){return cn instanceof FaceDetection?cn.forSize(rn.width,rn.height).box.floor():cn}).map(function(cn){return cn.clipAtImageBorders(rn.width,rn.height)}),[2,ln.map(function(cn){var hn=cn.x,fn=cn.y,to=cn.width,uo=cn.height,co=createCanvas({width:to,height:uo});return getContext2dOrThrow(co).putImageData(sn.getImageData(hn,fn,to,uo),0,0),co})]}})})}function extractFaceTensors(st,Mt){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(Xr){if(!isTensor3D(st)&&!isTensor4D(st))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(isTensor4D(st)&&st.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ze(function(){var rn=st.shape.slice(isTensor4D(st)?1:0),nn=rn[0],an=rn[1],on=rn[2],sn=Mt.map(function(un){return un instanceof FaceDetection?un.forSize(an,nn).box:un}).map(function(un){return un.clipAtImageBorders(an,nn)}),ln=sn.map(function(un){var cn=un.x,hn=un.y,fn=un.width,to=un.height;return xl(st.as3D(nn,an,on),[hn,cn,0],[to,fn,on])});return ln})]})})}function fetchOrThrow(st,Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:return Xr=env.getEnv().fetch,[4,Xr(st,Mt)];case 1:if(rn=nn.sent(),!(rn.status<400))throw new Error("failed to fetch: ("+rn.status+") "+rn.statusText+", from url: "+rn.url);return[2,rn]}})})}function fetchJson(st){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(Mt){switch(Mt.label){case 0:return[4,fetchOrThrow(st)];case 1:return[2,Mt.sent().json()]}})})}function getModelUris(st,Mt){var Xr=Mt+"-weights_manifest.json";if(!st)return{modelBaseUri:"",manifestUri:Xr};if(st==="/")return{modelBaseUri:"/",manifestUri:"/"+Xr};var rn=st.startsWith("http://")?"http://":st.startsWith("https://")?"https://":"";st=st.replace(rn,"");var nn=st.split("/").filter(function(sn){return sn}),an=st.endsWith(".json")?nn[nn.length-1]:Xr,on=rn+(st.endsWith(".json")?nn.slice(0,nn.length-1):nn).join("/");return on=st.startsWith("/")?"/"+on:on,{modelBaseUri:on,manifestUri:on==="/"?"/"+an:on+"/"+an}}function loadWeightMap(st,Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an;return __generator(this,function(on){switch(on.label){case 0:return Xr=getModelUris(st,Mt),rn=Xr.manifestUri,nn=Xr.modelBaseUri,[4,fetchJson(rn)];case 1:return an=on.sent(),[2,ed.loadWeights(an,nn)]}})})}function matchDimensions(st,Mt,Xr){Xr===void 0&&(Xr=!1);var rn=Xr?getMediaDimensions(Mt):Mt,nn=rn.width,an=rn.height;return st.width=nn,st.height=an,{width:nn,height:an}}var NeuralNetwork=function(){function st(Mt){this._name=Mt,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(st.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),st.prototype.getParamFromPath=function(Mt){var Xr=this.traversePropertyPath(Mt),rn=Xr.obj,nn=Xr.objProp;return rn[nn]},st.prototype.reassignParamFromPath=function(Mt,Xr){var rn=this.traversePropertyPath(Mt),nn=rn.obj,an=rn.objProp;nn[an].dispose(),nn[an]=Xr},st.prototype.getParamList=function(){var Mt=this;return this._paramMappings.map(function(Xr){var rn=Xr.paramPath;return{path:rn,tensor:Mt.getParamFromPath(rn)}})},st.prototype.getTrainableParams=function(){return this.getParamList().filter(function(Mt){return Mt.tensor instanceof St})},st.prototype.getFrozenParams=function(){return this.getParamList().filter(function(Mt){return!(Mt.tensor instanceof St)})},st.prototype.variable=function(){var Mt=this;this.getFrozenParams().forEach(function(Xr){var rn=Xr.path,nn=Xr.tensor;Mt.reassignParamFromPath(rn,nn.variable())})},st.prototype.freeze=function(){var Mt=this;this.getTrainableParams().forEach(function(Xr){var rn=Xr.path,nn=Xr.tensor,an=Fn(nn.dataSync());nn.dispose(),Mt.reassignParamFromPath(rn,an)})},st.prototype.dispose=function(Mt){Mt===void 0&&(Mt=!0),this.getParamList().forEach(function(Xr){if(Mt&&Xr.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+Xr.path);Xr.tensor.dispose()}),this._params=void 0},st.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(Mt){var Xr=Mt.tensor;return Array.from(Xr.dataSync())}).reduce(function(Mt,Xr){return Mt.concat(Xr)}))},st.prototype.load=function(Mt){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(Xr){switch(Xr.label){case 0:return Mt instanceof Float32Array?(this.extractWeights(Mt),[2]):[4,this.loadFromUri(Mt)];case 1:return Xr.sent(),[2]}})})},st.prototype.loadFromUri=function(Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr;return __generator(this,function(rn){switch(rn.label){case 0:if(Mt&&typeof Mt!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,loadWeightMap(Mt,this.getDefaultModelName())];case 1:return Xr=rn.sent(),this.loadFromWeightMap(Xr),[2]}})})},st.prototype.loadFromDisk=function(Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn,ln,un,cn,hn;return __generator(this,function(fn){switch(fn.label){case 0:if(Mt&&typeof Mt!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return Xr=env.getEnv().readFile,rn=getModelUris(Mt,this.getDefaultModelName()),nn=rn.manifestUri,an=rn.modelBaseUri,on=function(to){return Promise.all(to.map(function(uo){return Xr(uo).then(function(co){return co.buffer})}))},sn=ed.weightsLoaderFactory(on),cn=(un=JSON).parse,[4,Xr(nn)];case 1:return ln=cn.apply(un,[fn.sent().toString()]),[4,sn(ln,an)];case 2:return hn=fn.sent(),this.loadFromWeightMap(hn),[2]}})})},st.prototype.loadFromWeightMap=function(Mt){var Xr=this.extractParamsFromWeigthMap(Mt),rn=Xr.paramMappings,nn=Xr.params;this._paramMappings=rn,this._params=nn},st.prototype.extractWeights=function(Mt){var Xr=this.extractParams(Mt),rn=Xr.paramMappings,nn=Xr.params;this._paramMappings=rn,this._params=nn},st.prototype.traversePropertyPath=function(Mt){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var Xr=Mt.split("/").reduce(function(an,on){if(!an.nextObj.hasOwnProperty(on))throw new Error("traversePropertyPath - object does not have property "+on+", for path "+Mt);return{obj:an.nextObj,objProp:on,nextObj:an.nextObj[on]}},{nextObj:this.params}),rn=Xr.obj,nn=Xr.objProp;if(!rn||!nn||!(rn[nn]instanceof wt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+Mt);return{obj:rn,objProp:nn}},st}();function depthwiseSeparableConv$1(st,Mt,Xr){return Ze(function(){var rn=Jc(st,Mt.depthwise_filter,Mt.pointwise_filter,Xr,"same");return rn=rc(rn,Mt.bias),rn})}function denseBlock3(st,Mt,Xr){return Xr===void 0&&(Xr=!1),Ze(function(){var rn=Bl(Xr?rc(qc(st,Mt.conv0.filters,[2,2],"same"),Mt.conv0.bias):depthwiseSeparableConv$1(st,Mt.conv0,[2,2])),nn=depthwiseSeparableConv$1(rn,Mt.conv1,[1,1]),an=Bl(rc(rn,nn)),on=depthwiseSeparableConv$1(an,Mt.conv2,[1,1]);return Bl(rc(rn,rc(nn,on)))})}function denseBlock4(st,Mt,Xr,rn){return Xr===void 0&&(Xr=!1),rn===void 0&&(rn=!0),Ze(function(){var nn=Bl(Xr?rc(qc(st,Mt.conv0.filters,rn?[2,2]:[1,1],"same"),Mt.conv0.bias):depthwiseSeparableConv$1(st,Mt.conv0,rn?[2,2]:[1,1])),an=depthwiseSeparableConv$1(nn,Mt.conv1,[1,1]),on=Bl(rc(nn,an)),sn=depthwiseSeparableConv$1(on,Mt.conv2,[1,1]),ln=Bl(rc(nn,rc(an,sn))),un=depthwiseSeparableConv$1(ln,Mt.conv3,[1,1]);return Bl(rc(nn,rc(an,rc(sn,un))))})}function convLayer$1(st,Mt,Xr,rn){return Xr===void 0&&(Xr="same"),rn===void 0&&(rn=!1),Ze(function(){var nn=rc(qc(st,Mt.filters,[1,1],Xr),Mt.bias);return rn?Bl(nn):nn})}function disposeUnusedWeightTensors(st,Mt){Object.keys(st).forEach(function(Xr){Mt.some(function(rn){return rn.originalPath===Xr})||st[Xr].dispose()})}function extractConvParamsFactory(st,Mt){return function(Xr,rn,nn,an){var on=Ln(st(Xr*rn*nn*nn),[nn,nn,Xr,rn]),sn=Mn(st(rn));return Mt.push({paramPath:an+"/filters"},{paramPath:an+"/bias"}),{filters:on,bias:sn}}}function extractFCParamsFactory(st,Mt){return function(Xr,rn,nn){var an=Bn(st(Xr*rn),[Xr,rn]),on=Mn(st(rn));return Mt.push({paramPath:nn+"/weights"},{paramPath:nn+"/bias"}),{weights:an,bias:on}}}var SeparableConvParams=function(){function st(Mt,Xr,rn){this.depthwise_filter=Mt,this.pointwise_filter=Xr,this.bias=rn}return st}();function extractSeparableConvParamsFactory(st,Mt){return function(Xr,rn,nn){var an=Ln(st(9*Xr),[3,3,Xr,1]),on=Ln(st(Xr*rn),[1,1,Xr,rn]),sn=Mn(st(rn));return Mt.push({paramPath:nn+"/depthwise_filter"},{paramPath:nn+"/pointwise_filter"},{paramPath:nn+"/bias"}),new SeparableConvParams(an,on,sn)}}function loadSeparableConvParamsFactory(st){return function(Mt){var Xr=st(Mt+"/depthwise_filter",4),rn=st(Mt+"/pointwise_filter",4),nn=st(Mt+"/bias",1);return new SeparableConvParams(Xr,rn,nn)}}function extractWeightEntryFactory(st,Mt){return function(Xr,rn,nn){var an=st[Xr];if(!isTensor(an,rn))throw new Error("expected weightMap["+Xr+"] to be a Tensor"+rn+"D, instead have "+an);return Mt.push({originalPath:Xr,paramPath:nn||Xr}),an}}function extractWeightsFactory(st){var Mt=st;function Xr(nn){var an=Mt.slice(0,nn);return Mt=Mt.slice(nn),an}function rn(){return Mt}return{extractWeights:Xr,getRemainingWeights:rn}}function extractorsFactory$9(st,Mt){var Xr=extractConvParamsFactory(st,Mt),rn=extractSeparableConvParamsFactory(st,Mt);function nn(on,sn,ln,un){un===void 0&&(un=!1);var cn=un?Xr(on,sn,3,ln+"/conv0"):rn(on,sn,ln+"/conv0"),hn=rn(sn,sn,ln+"/conv1"),fn=rn(sn,sn,ln+"/conv2");return{conv0:cn,conv1:hn,conv2:fn}}function an(on,sn,ln,un){un===void 0&&(un=!1);var cn=nn(on,sn,ln,un),hn=cn.conv0,fn=cn.conv1,to=cn.conv2,uo=rn(sn,sn,ln+"/conv3");return{conv0:hn,conv1:fn,conv2:to,conv3:uo}}return{extractDenseBlock3Params:nn,extractDenseBlock4Params:an}}function extractParams$7(st){var Mt=[],Xr=extractWeightsFactory(st),rn=Xr.extractWeights,nn=Xr.getRemainingWeights,an=extractorsFactory$9(rn,Mt).extractDenseBlock4Params,on=an(3,32,"dense0",!0),sn=an(32,64,"dense1"),ln=an(64,128,"dense2"),un=an(128,256,"dense3");if(nn().length!==0)throw new Error("weights remaing after extract: "+nn().length);return{paramMappings:Mt,params:{dense0:on,dense1:sn,dense2:ln,dense3:un}}}function loadConvParamsFactory(st){return function(Mt){var Xr=st(Mt+"/filters",4),rn=st(Mt+"/bias",1);return{filters:Xr,bias:rn}}}function loadParamsFactory$1(st,Mt){var Xr=extractWeightEntryFactory(st,Mt),rn=loadConvParamsFactory(Xr),nn=loadSeparableConvParamsFactory(Xr);function an(sn,ln){ln===void 0&&(ln=!1);var un=ln?rn(sn+"/conv0"):nn(sn+"/conv0"),cn=nn(sn+"/conv1"),hn=nn(sn+"/conv2");return{conv0:un,conv1:cn,conv2:hn}}function on(sn,ln){ln===void 0&&(ln=!1);var un=ln?rn(sn+"/conv0"):nn(sn+"/conv0"),cn=nn(sn+"/conv1"),hn=nn(sn+"/conv2"),fn=nn(sn+"/conv3");return{conv0:un,conv1:cn,conv2:hn,conv3:fn}}return{extractDenseBlock3Params:an,extractDenseBlock4Params:on}}function extractParamsFromWeigthMap$7(st){var Mt=[],Xr=loadParamsFactory$1(st,Mt).extractDenseBlock4Params,rn={dense0:Xr("dense0",!0),dense1:Xr("dense1"),dense2:Xr("dense2"),dense3:Xr("dense3")};return disposeUnusedWeightTensors(st,Mt),{params:rn,paramMappings:Mt}}var FaceFeatureExtractor=function(st){__extends(Mt,st);function Mt(){return st.call(this,"FaceFeatureExtractor")||this}return Mt.prototype.forwardInput=function(Xr){var rn=this.params;if(!rn)throw new Error("FaceFeatureExtractor - load model before inference");return Ze(function(){var nn=Xr.toBatchTensor(112,!0),an=[122.782,117.001,104.298],on=normalize$1(nn,an).div(On(255)),sn=denseBlock4(on,rn.dense0,!0);return sn=denseBlock4(sn,rn.dense1),sn=denseBlock4(sn,rn.dense2),sn=denseBlock4(sn,rn.dense3),sn=fl(sn,[7,7],[2,2],"valid"),sn})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap$7(Xr)},Mt.prototype.extractParams=function(Xr){return extractParams$7(Xr)},Mt}(NeuralNetwork);function fullyConnectedLayer(st,Mt){return Ze(function(){return rc(el(st,Mt.weights),Mt.bias)})}function extractParams$6(st,Mt,Xr){var rn=[],nn=extractWeightsFactory(st),an=nn.extractWeights,on=nn.getRemainingWeights,sn=extractFCParamsFactory(an,rn),ln=sn(Mt,Xr,"fc");if(on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{paramMappings:rn,params:{fc:ln}}}function extractParamsFromWeigthMap$6(st){var Mt=[],Xr=extractWeightEntryFactory(st,Mt);function rn(an){var on=Xr(an+"/weights",2),sn=Xr(an+"/bias",1);return{weights:on,bias:sn}}var nn={fc:rn("fc")};return disposeUnusedWeightTensors(st,Mt),{params:nn,paramMappings:Mt}}function seperateWeightMaps(st){var Mt={},Xr={};return Object.keys(st).forEach(function(rn){var nn=rn.startsWith("fc")?Xr:Mt;nn[rn]=st[rn]}),{featureExtractorMap:Mt,classifierMap:Xr}}var FaceProcessor=function(st){__extends(Mt,st);function Mt(Xr,rn){var nn=st.call(this,Xr)||this;return nn._faceFeatureExtractor=rn,nn}return Object.defineProperty(Mt.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),Mt.prototype.runNet=function(Xr){var rn=this,nn=this.params;if(!nn)throw new Error(this._name+" - load model before inference");return Ze(function(){var an=Xr instanceof NetInput?rn.faceFeatureExtractor.forwardInput(Xr):Xr;return fullyConnectedLayer(an.as2D(an.shape[0],-1),nn.fc)})},Mt.prototype.dispose=function(Xr){Xr===void 0&&(Xr=!0),this.faceFeatureExtractor.dispose(Xr),st.prototype.dispose.call(this,Xr)},Mt.prototype.loadClassifierParams=function(Xr){var rn=this.extractClassifierParams(Xr),nn=rn.params,an=rn.paramMappings;this._params=nn,this._paramMappings=an},Mt.prototype.extractClassifierParams=function(Xr){return extractParams$6(Xr,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},Mt.prototype.extractParamsFromWeigthMap=function(Xr){var rn=seperateWeightMaps(Xr),nn=rn.featureExtractorMap,an=rn.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(nn),extractParamsFromWeigthMap$6(an)},Mt.prototype.extractParams=function(Xr){var rn=this.getClassifierChannelsIn(),nn=this.getClassifierChannelsOut(),an=nn*rn+nn,on=Xr.slice(0,Xr.length-an),sn=Xr.slice(Xr.length-an);return this.faceFeatureExtractor.extractWeights(on),this.extractClassifierParams(sn)},Mt}(NeuralNetwork),FACE_EXPRESSION_LABELS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],FaceExpressions=function(){function st(Mt){var Xr=this;if(Mt.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+Mt.length);FACE_EXPRESSION_LABELS.forEach(function(rn,nn){Xr[rn]=Mt[nn]})}return st.prototype.asSortedArray=function(){var Mt=this;return FACE_EXPRESSION_LABELS.map(function(Xr){return{expression:Xr,probability:Mt[Xr]}}).sort(function(Xr,rn){return rn.probability-Xr.probability})},st}(),FaceExpressionNet=function(st){__extends(Mt,st);function Mt(Xr){return Xr===void 0&&(Xr=new FaceFeatureExtractor),st.call(this,"FaceExpressionNet",Xr)||this}return Mt.prototype.forwardInput=function(Xr){var rn=this;return Ze(function(){return go(rn.runNet(Xr))})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.predictExpressions=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn,nn,an,on,sn=this;return __generator(this,function(ln){switch(ln.label){case 0:return[4,toNetInput(Xr)];case 1:return rn=ln.sent(),[4,this.forwardInput(rn)];case 2:return nn=ln.sent(),[4,Promise.all(Ur(nn).map(function(un){return __awaiter$7(sn,void 0,void 0,function(){var cn;return __generator(this,function(hn){switch(hn.label){case 0:return[4,un.data()];case 1:return cn=hn.sent(),un.dispose(),[2,cn]}})})}))];case 3:return an=ln.sent(),nn.dispose(),on=an.map(function(un){return new FaceExpressions(un)}),[2,rn.isBatchInput?on:on[0]]}})})},Mt.prototype.getDefaultModelName=function(){return"face_expression_model"},Mt.prototype.getClassifierChannelsIn=function(){return 256},Mt.prototype.getClassifierChannelsOut=function(){return 7},Mt}(FaceProcessor);function extendWithFaceExpressions(st,Mt){var Xr={expressions:Mt};return Object.assign({},st,Xr)}function isWithFaceLandmarks(st){return isWithFaceDetection(st)&&st.landmarks instanceof FaceLandmarks&&st.unshiftedLandmarks instanceof FaceLandmarks&&st.alignedRect instanceof FaceDetection}function extendWithFaceLandmarks(st,Mt){var Xr=st.detection.box,rn=Mt.shiftBy(Xr.x,Xr.y),nn=rn.align(),an=st.detection.imageDims,on=new FaceDetection(st.detection.score,nn.rescale(an.reverse()),an),sn={landmarks:rn,unshiftedLandmarks:Mt,alignedRect:on};return Object.assign({},st,sn)}var DrawFaceLandmarksOptions=function(){function st(Mt){Mt===void 0&&(Mt={});var Xr=Mt.drawLines,rn=Xr===void 0?!0:Xr,nn=Mt.drawPoints,an=nn===void 0?!0:nn,on=Mt.lineWidth,sn=Mt.lineColor,ln=Mt.pointSize,un=Mt.pointColor;this.drawLines=rn,this.drawPoints=an,this.lineWidth=on||1,this.pointSize=ln||2,this.lineColor=sn||"rgba(0, 255, 255, 1)",this.pointColor=un||"rgba(255, 0, 255, 1)"}return st}(),DrawFaceLandmarks=function(){function st(Mt,Xr){Xr===void 0&&(Xr={}),this.faceLandmarks=Mt,this.options=new DrawFaceLandmarksOptions(Xr)}return st.prototype.draw=function(Mt){var Xr=getContext2dOrThrow(Mt),rn=this.options,nn=rn.drawLines,an=rn.drawPoints,on=rn.lineWidth,sn=rn.lineColor,ln=rn.pointSize,un=rn.pointColor;if(nn&&this.faceLandmarks instanceof FaceLandmarks68&&(Xr.strokeStyle=sn,Xr.lineWidth=on,drawContour(Xr,this.faceLandmarks.getJawOutline()),drawContour(Xr,this.faceLandmarks.getLeftEyeBrow()),drawContour(Xr,this.faceLandmarks.getRightEyeBrow()),drawContour(Xr,this.faceLandmarks.getNose()),drawContour(Xr,this.faceLandmarks.getLeftEye(),!0),drawContour(Xr,this.faceLandmarks.getRightEye(),!0),drawContour(Xr,this.faceLandmarks.getMouth(),!0)),an){Xr.strokeStyle=un,Xr.fillStyle=un;var cn=function(hn){Xr.beginPath(),Xr.arc(hn.x,hn.y,ln,0,2*Math.PI),Xr.fill()};this.faceLandmarks.positions.forEach(cn)}},st}();function drawFaceLandmarks(st,Mt){var Xr=Array.isArray(Mt)?Mt:[Mt];Xr.forEach(function(rn){var nn=rn instanceof FaceLandmarks?rn:isWithFaceLandmarks(rn)?rn.landmarks:void 0;if(!nn)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new DrawFaceLandmarks(nn).draw(st)})}function extractorsFactory$8(st,Mt){var Xr=extractConvParamsFactory(st,Mt),rn=extractSeparableConvParamsFactory(st,Mt);function nn(on,sn,ln){var un=rn(on,sn,ln+"/separable_conv0"),cn=rn(sn,sn,ln+"/separable_conv1"),hn=Xr(on,sn,1,ln+"/expansion_conv");return{separable_conv0:un,separable_conv1:cn,expansion_conv:hn}}function an(on,sn){var ln=rn(on,on,sn+"/separable_conv0"),un=rn(on,on,sn+"/separable_conv1"),cn=rn(on,on,sn+"/separable_conv2");return{separable_conv0:ln,separable_conv1:un,separable_conv2:cn}}return{extractConvParams:Xr,extractSeparableConvParams:rn,extractReductionBlockParams:nn,extractMainBlockParams:an}}function extractParams$5(st,Mt){var Xr=[],rn=extractWeightsFactory(st),nn=rn.extractWeights,an=rn.getRemainingWeights,on=extractorsFactory$8(nn,Xr),sn=on.extractConvParams,ln=on.extractSeparableConvParams,un=on.extractReductionBlockParams,cn=on.extractMainBlockParams,hn=sn(3,32,3,"entry_flow/conv_in"),fn=un(32,64,"entry_flow/reduction_block_0"),to=un(64,128,"entry_flow/reduction_block_1"),uo={conv_in:hn,reduction_block_0:fn,reduction_block_1:to},co={};range(Mt,0,1).forEach(function(fo){co["main_block_"+fo]=cn(128,"middle_flow/main_block_"+fo)});var Uo=un(128,256,"exit_flow/reduction_block"),lo=ln(256,512,"exit_flow/separable_conv"),ho={reduction_block:Uo,separable_conv:lo};if(an().length!==0)throw new Error("weights remaing after extract: "+an().length);return{paramMappings:Xr,params:{entry_flow:uo,middle_flow:co,exit_flow:ho}}}function loadParamsFactory(st,Mt){var Xr=extractWeightEntryFactory(st,Mt),rn=loadConvParamsFactory(Xr),nn=loadSeparableConvParamsFactory(Xr);function an(sn){var ln=nn(sn+"/separable_conv0"),un=nn(sn+"/separable_conv1"),cn=rn(sn+"/expansion_conv");return{separable_conv0:ln,separable_conv1:un,expansion_conv:cn}}function on(sn){var ln=nn(sn+"/separable_conv0"),un=nn(sn+"/separable_conv1"),cn=nn(sn+"/separable_conv2");return{separable_conv0:ln,separable_conv1:un,separable_conv2:cn}}return{extractConvParams:rn,extractSeparableConvParams:nn,extractReductionBlockParams:an,extractMainBlockParams:on}}function extractParamsFromWeigthMap$5(st,Mt){var Xr=[],rn=loadParamsFactory(st,Xr),nn=rn.extractConvParams,an=rn.extractSeparableConvParams,on=rn.extractReductionBlockParams,sn=rn.extractMainBlockParams,ln=nn("entry_flow/conv_in"),un=on("entry_flow/reduction_block_0"),cn=on("entry_flow/reduction_block_1"),hn={conv_in:ln,reduction_block_0:un,reduction_block_1:cn},fn={};range(Mt,0,1).forEach(function(Uo){fn["main_block_"+Uo]=sn("middle_flow/main_block_"+Uo)});var to=on("exit_flow/reduction_block"),uo=an("exit_flow/separable_conv"),co={reduction_block:to,separable_conv:uo};return disposeUnusedWeightTensors(st,Xr),{params:{entry_flow:hn,middle_flow:fn,exit_flow:co},paramMappings:Xr}}function conv$1(st,Mt,Xr){return rc(qc(st,Mt.filters,Xr,"same"),Mt.bias)}function reductionBlock(st,Mt,Xr){Xr===void 0&&(Xr=!0);var rn=Xr?Bl(st):st;return rn=depthwiseSeparableConv$1(rn,Mt.separable_conv0,[1,1]),rn=depthwiseSeparableConv$1(Bl(rn),Mt.separable_conv1,[1,1]),rn=hl(rn,[3,3],[2,2],"same"),rn=rc(rn,conv$1(st,Mt.expansion_conv,[2,2])),rn}function mainBlock(st,Mt){var Xr=depthwiseSeparableConv$1(Bl(st),Mt.separable_conv0,[1,1]);return Xr=depthwiseSeparableConv$1(Bl(Xr),Mt.separable_conv1,[1,1]),Xr=depthwiseSeparableConv$1(Bl(Xr),Mt.separable_conv2,[1,1]),Xr=rc(Xr,st),Xr}var TinyXception=function(st){__extends(Mt,st);function Mt(Xr){var rn=st.call(this,"TinyXception")||this;return rn._numMainBlocks=Xr,rn}return Mt.prototype.forwardInput=function(Xr){var rn=this,nn=this.params;if(!nn)throw new Error("TinyXception - load model before inference");return Ze(function(){var an=Xr.toBatchTensor(112,!0),on=[122.782,117.001,104.298],sn=normalize$1(an,on).div(On(256)),ln=Bl(conv$1(sn,nn.entry_flow.conv_in,[2,2]));return ln=reductionBlock(ln,nn.entry_flow.reduction_block_0,!1),ln=reductionBlock(ln,nn.entry_flow.reduction_block_1),range(rn._numMainBlocks,0,1).forEach(function(un){ln=mainBlock(ln,nn.middle_flow["main_block_"+un])}),ln=reductionBlock(ln,nn.exit_flow.reduction_block),ln=Bl(depthwiseSeparableConv$1(ln,nn.exit_flow.separable_conv,[1,1])),ln})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.getDefaultModelName=function(){return"tiny_xception_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap$5(Xr,this._numMainBlocks)},Mt.prototype.extractParams=function(Xr){return extractParams$5(Xr,this._numMainBlocks)},Mt}(NeuralNetwork);function extractParams$4(st){var Mt=[],Xr=extractWeightsFactory(st),rn=Xr.extractWeights,nn=Xr.getRemainingWeights,an=extractFCParamsFactory(rn,Mt),on=an(512,1,"fc/age"),sn=an(512,2,"fc/gender");if(nn().length!==0)throw new Error("weights remaing after extract: "+nn().length);return{paramMappings:Mt,params:{fc:{age:on,gender:sn}}}}function extractParamsFromWeigthMap$4(st){var Mt=[],Xr=extractWeightEntryFactory(st,Mt);function rn(an){var on=Xr(an+"/weights",2),sn=Xr(an+"/bias",1);return{weights:on,bias:sn}}var nn={fc:{age:rn("fc/age"),gender:rn("fc/gender")}};return disposeUnusedWeightTensors(st,Mt),{params:nn,paramMappings:Mt}}var Gender;(function(st){st.FEMALE="female",st.MALE="male"})(Gender||(Gender={}));var AgeGenderNet=function(st){__extends(Mt,st);function Mt(Xr){Xr===void 0&&(Xr=new TinyXception(2));var rn=st.call(this,"AgeGenderNet")||this;return rn._faceFeatureExtractor=Xr,rn}return Object.defineProperty(Mt.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),Mt.prototype.runNet=function(Xr){var rn=this,nn=this.params;if(!nn)throw new Error(this._name+" - load model before inference");return Ze(function(){var an=Xr instanceof NetInput?rn.faceFeatureExtractor.forwardInput(Xr):Xr,on=fl(an,[7,7],[2,2],"valid").as2D(an.shape[0],-1),sn=fullyConnectedLayer(on,nn.fc.age).as1D(),ln=fullyConnectedLayer(on,nn.fc.gender);return{age:sn,gender:ln}})},Mt.prototype.forwardInput=function(Xr){var rn=this;return Ze(function(){var nn=rn.runNet(Xr),an=nn.age,on=nn.gender;return{age:an,gender:go(on)}})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.predictAgeAndGender=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn,nn,an,on,sn,ln,un=this;return __generator(this,function(cn){switch(cn.label){case 0:return[4,toNetInput(Xr)];case 1:return rn=cn.sent(),[4,this.forwardInput(rn)];case 2:return nn=cn.sent(),an=Ur(nn.age),on=Ur(nn.gender),sn=an.map(function(hn,fn){return{ageTensor:hn,genderTensor:on[fn]}}),[4,Promise.all(sn.map(function(hn){var fn=hn.ageTensor,to=hn.genderTensor;return __awaiter$7(un,void 0,void 0,function(){var uo,co,Uo,lo,ho;return __generator(this,function(fo){switch(fo.label){case 0:return[4,fn.data()];case 1:return uo=fo.sent()[0],[4,to.data()];case 2:return co=fo.sent()[0],Uo=co>.5,lo=Uo?Gender.MALE:Gender.FEMALE,ho=Uo?co:1-co,fn.dispose(),to.dispose(),[2,{age:uo,gender:lo,genderProbability:ho}]}})})}))];case 3:return ln=cn.sent(),nn.age.dispose(),nn.gender.dispose(),[2,rn.isBatchInput?ln:ln[0]]}})})},Mt.prototype.getDefaultModelName=function(){return"age_gender_model"},Mt.prototype.dispose=function(Xr){Xr===void 0&&(Xr=!0),this.faceFeatureExtractor.dispose(Xr),st.prototype.dispose.call(this,Xr)},Mt.prototype.loadClassifierParams=function(Xr){var rn=this.extractClassifierParams(Xr),nn=rn.params,an=rn.paramMappings;this._params=nn,this._paramMappings=an},Mt.prototype.extractClassifierParams=function(Xr){return extractParams$4(Xr)},Mt.prototype.extractParamsFromWeigthMap=function(Xr){var rn=seperateWeightMaps(Xr),nn=rn.featureExtractorMap,an=rn.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(nn),extractParamsFromWeigthMap$4(an)},Mt.prototype.extractParams=function(Xr){var rn=1539,nn=Xr.slice(0,Xr.length-rn),an=Xr.slice(Xr.length-rn);return this.faceFeatureExtractor.extractWeights(nn),this.extractClassifierParams(an)},Mt}(NeuralNetwork),FaceLandmark68NetBase=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.postProcess=function(Xr,rn,nn){var an=nn.map(function(sn){var ln=sn.width,un=sn.height,cn=rn/Math.max(un,ln);return{width:ln*cn,height:un*cn}}),on=an.length;return Ze(function(){var sn=function(fn,to){return Pr([Hn([68],fn),Hn([68],to)],1).as2D(1,136).as1D()},ln=function(fn,to){var uo=an[fn],co=uo.width,Uo=uo.height;return to(co,Uo)?Math.abs(co-Uo)/2:0},un=function(fn){return ln(fn,function(to,uo){return to<uo})},cn=function(fn){return ln(fn,function(to,uo){return uo<to})},hn=Xr.mul(Hn([on,136],rn)).sub(Pr(Array.from(Array(on),function(fn,to){return sn(un(to),cn(to))}))).div(Pr(Array.from(Array(on),function(fn,to){return sn(an[to].width,an[to].height)})));return hn})},Mt.prototype.forwardInput=function(Xr){var rn=this;return Ze(function(){var nn=rn.runNet(Xr);return rn.postProcess(nn,Xr.inputSize,Xr.inputDimensions.map(function(an){var on=an[0],sn=an[1];return{height:on,width:sn}}))})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.detectLandmarks=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn,nn,an,on=this;return __generator(this,function(sn){switch(sn.label){case 0:return[4,toNetInput(Xr)];case 1:return rn=sn.sent(),nn=Ze(function(){return Ur(on.forwardInput(rn))}),[4,Promise.all(nn.map(function(ln,un){return __awaiter$7(on,void 0,void 0,function(){var cn,hn,fn,to,uo;return __generator(this,function(co){switch(co.label){case 0:return fn=(hn=Array).from,[4,ln.data()];case 1:return cn=fn.apply(hn,[co.sent()]),to=cn.filter(function(Uo,lo){return isEven(lo)}),uo=cn.filter(function(Uo,lo){return!isEven(lo)}),[2,new FaceLandmarks68(Array(68).fill(0).map(function(Uo,lo){return new Point(to[lo],uo[lo])}),{height:rn.getInputHeight(un),width:rn.getInputWidth(un)})]}})})}))];case 2:return an=sn.sent(),nn.forEach(function(ln){return ln.dispose()}),[2,rn.isBatchInput?an:an[0]]}})})},Mt.prototype.getClassifierChannelsOut=function(){return 136},Mt}(FaceProcessor),FaceLandmark68Net=function(st){__extends(Mt,st);function Mt(Xr){return Xr===void 0&&(Xr=new FaceFeatureExtractor),st.call(this,"FaceLandmark68Net",Xr)||this}return Mt.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},Mt.prototype.getClassifierChannelsIn=function(){return 256},Mt}(FaceLandmark68NetBase);function extractParamsFromWeigthMapTiny(st){var Mt=[],Xr=loadParamsFactory$1(st,Mt).extractDenseBlock3Params,rn={dense0:Xr("dense0",!0),dense1:Xr("dense1"),dense2:Xr("dense2")};return disposeUnusedWeightTensors(st,Mt),{params:rn,paramMappings:Mt}}function extractParamsTiny(st){var Mt=[],Xr=extractWeightsFactory(st),rn=Xr.extractWeights,nn=Xr.getRemainingWeights,an=extractorsFactory$9(rn,Mt).extractDenseBlock3Params,on=an(3,32,"dense0",!0),sn=an(32,64,"dense1"),ln=an(64,128,"dense2");if(nn().length!==0)throw new Error("weights remaing after extract: "+nn().length);return{paramMappings:Mt,params:{dense0:on,dense1:sn,dense2:ln}}}var TinyFaceFeatureExtractor=function(st){__extends(Mt,st);function Mt(){return st.call(this,"TinyFaceFeatureExtractor")||this}return Mt.prototype.forwardInput=function(Xr){var rn=this.params;if(!rn)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ze(function(){var nn=Xr.toBatchTensor(112,!0),an=[122.782,117.001,104.298],on=normalize$1(nn,an).div(On(255)),sn=denseBlock3(on,rn.dense0,!0);return sn=denseBlock3(sn,rn.dense1),sn=denseBlock3(sn,rn.dense2),sn=fl(sn,[14,14],[2,2],"valid"),sn})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMapTiny(Xr)},Mt.prototype.extractParams=function(Xr){return extractParamsTiny(Xr)},Mt}(NeuralNetwork),FaceLandmark68TinyNet=function(st){__extends(Mt,st);function Mt(Xr){return Xr===void 0&&(Xr=new TinyFaceFeatureExtractor),st.call(this,"FaceLandmark68TinyNet",Xr)||this}return Mt.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},Mt.prototype.getClassifierChannelsIn=function(){return 128},Mt}(FaceLandmark68NetBase);(function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt})(FaceLandmark68Net);function scale(st,Mt){return rc(gc(st,Mt.weights),Mt.biases)}function convLayer(st,Mt,Xr,rn,nn){nn===void 0&&(nn="same");var an=Mt.conv,on=an.filters,sn=an.bias,ln=qc(st,on,Xr,nn);return ln=rc(ln,sn),ln=scale(ln,Mt.scale),rn?Bl(ln):ln}function conv(st,Mt){return convLayer(st,Mt,[1,1],!0)}function convNoRelu(st,Mt){return convLayer(st,Mt,[1,1],!1)}function convDown(st,Mt){return convLayer(st,Mt,[2,2],!0,"valid")}function extractorsFactory$7(st,Mt){function Xr(sn,ln,un){var cn=st(sn),hn=cn.length/(ln*un*un);if(isFloat(hn))throw new Error("depth has to be an integer: "+hn+", weights.length: "+cn.length+", numFilters: "+ln+", filterSize: "+un);return Ze(function(){return Wl(Ln(cn,[ln,hn,un,un]),[2,3,1,0])})}function rn(sn,ln,un,cn){var hn=Xr(sn,ln,un),fn=Mn(st(ln));return Mt.push({paramPath:cn+"/filters"},{paramPath:cn+"/bias"}),{filters:hn,bias:fn}}function nn(sn,ln){var un=Mn(st(sn)),cn=Mn(st(sn));return Mt.push({paramPath:ln+"/weights"},{paramPath:ln+"/biases"}),{weights:un,biases:cn}}function an(sn,ln,un,cn){var hn=rn(sn,ln,un,cn+"/conv"),fn=nn(ln,cn+"/scale");return{conv:hn,scale:fn}}function on(sn,ln,un,cn,hn){hn===void 0&&(hn=!1);var fn=an((hn?.5:1)*sn,ln,un,cn+"/conv1"),to=an(sn,ln,un,cn+"/conv2");return{conv1:fn,conv2:to}}return{extractConvLayerParams:an,extractResidualLayerParams:on}}function extractParams$3(st){var Mt=extractWeightsFactory(st),Xr=Mt.extractWeights,rn=Mt.getRemainingWeights,nn=[],an=extractorsFactory$7(Xr,nn),on=an.extractConvLayerParams,sn=an.extractResidualLayerParams,ln=on(4704,32,7,"conv32_down"),un=sn(9216,32,3,"conv32_1"),cn=sn(9216,32,3,"conv32_2"),hn=sn(9216,32,3,"conv32_3"),fn=sn(36864,64,3,"conv64_down",!0),to=sn(36864,64,3,"conv64_1"),uo=sn(36864,64,3,"conv64_2"),co=sn(36864,64,3,"conv64_3"),Uo=sn(147456,128,3,"conv128_down",!0),lo=sn(147456,128,3,"conv128_1"),ho=sn(147456,128,3,"conv128_2"),fo=sn(589824,256,3,"conv256_down",!0),mo=sn(589824,256,3,"conv256_1"),_d=sn(589824,256,3,"conv256_2"),ep=sn(589824,256,3,"conv256_down_out"),rp=Ze(function(){return Wl(Bn(Xr(256*128),[128,256]),[1,0])});if(nn.push({paramPath:"fc"}),rn().length!==0)throw new Error("weights remaing after extract: "+rn().length);var ap={conv32_down:ln,conv32_1:un,conv32_2:cn,conv32_3:hn,conv64_down:fn,conv64_1:to,conv64_2:uo,conv64_3:co,conv128_down:Uo,conv128_1:lo,conv128_2:ho,conv256_down:fo,conv256_1:mo,conv256_2:_d,conv256_down_out:ep,fc:rp};return{params:ap,paramMappings:nn}}function extractorsFactory$6(st,Mt){var Xr=extractWeightEntryFactory(st,Mt);function rn(on){var sn=Xr(on+"/scale/weights",1),ln=Xr(on+"/scale/biases",1);return{weights:sn,biases:ln}}function nn(on){var sn=Xr(on+"/conv/filters",4),ln=Xr(on+"/conv/bias",1),un=rn(on);return{conv:{filters:sn,bias:ln},scale:un}}function an(on){return{conv1:nn(on+"/conv1"),conv2:nn(on+"/conv2")}}return{extractConvLayerParams:nn,extractResidualLayerParams:an}}function extractParamsFromWeigthMap$3(st){var Mt=[],Xr=extractorsFactory$6(st,Mt),rn=Xr.extractConvLayerParams,nn=Xr.extractResidualLayerParams,an=rn("conv32_down"),on=nn("conv32_1"),sn=nn("conv32_2"),ln=nn("conv32_3"),un=nn("conv64_down"),cn=nn("conv64_1"),hn=nn("conv64_2"),fn=nn("conv64_3"),to=nn("conv128_down"),uo=nn("conv128_1"),co=nn("conv128_2"),Uo=nn("conv256_down"),lo=nn("conv256_1"),ho=nn("conv256_2"),fo=nn("conv256_down_out"),mo=st.fc;if(Mt.push({originalPath:"fc",paramPath:"fc"}),!isTensor2D(mo))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+mo);var _d={conv32_down:an,conv32_1:on,conv32_2:sn,conv32_3:ln,conv64_down:un,conv64_1:cn,conv64_2:hn,conv64_3:fn,conv128_down:to,conv128_1:uo,conv128_2:co,conv256_down:Uo,conv256_1:lo,conv256_2:ho,conv256_down_out:fo,fc:mo};return disposeUnusedWeightTensors(st,Mt),{params:_d,paramMappings:Mt}}function residual(st,Mt){var Xr=conv(st,Mt.conv1);return Xr=convNoRelu(Xr,Mt.conv2),Xr=rc(Xr,st),Xr=Bl(Xr),Xr}function residualDown(st,Mt){var Xr=convDown(st,Mt.conv1);Xr=convNoRelu(Xr,Mt.conv2);var rn=fl(st,2,2,"valid"),nn=Gn(rn.shape),an=rn.shape[3]!==Xr.shape[3],on=rn.shape[1]!==Xr.shape[1]||rn.shape[2]!==Xr.shape[2];if(on){var sn=__spreadArrays(Xr.shape);sn[1]=1;var ln=Gn(sn);Xr=Yn([Xr,ln],1);var un=__spreadArrays(Xr.shape);un[2]=1;var cn=Gn(un);Xr=Yn([Xr,cn],2)}return rn=an?Yn([rn,nn],3):rn,Xr=rc(rn,Xr),Xr=Bl(Xr),Xr}var FaceRecognitionNet=function(st){__extends(Mt,st);function Mt(){return st.call(this,"FaceRecognitionNet")||this}return Mt.prototype.forwardInput=function(Xr){var rn=this.params;if(!rn)throw new Error("FaceRecognitionNet - load model before inference");return Ze(function(){var nn=Xr.toBatchTensor(150,!0).toFloat(),an=[122.782,117.001,104.298],on=normalize$1(nn,an).div(On(256)),sn=convDown(on,rn.conv32_down);sn=hl(sn,3,2,"valid"),sn=residual(sn,rn.conv32_1),sn=residual(sn,rn.conv32_2),sn=residual(sn,rn.conv32_3),sn=residualDown(sn,rn.conv64_down),sn=residual(sn,rn.conv64_1),sn=residual(sn,rn.conv64_2),sn=residual(sn,rn.conv64_3),sn=residualDown(sn,rn.conv128_down),sn=residual(sn,rn.conv128_1),sn=residual(sn,rn.conv128_2),sn=residualDown(sn,rn.conv256_down),sn=residual(sn,rn.conv256_1),sn=residual(sn,rn.conv256_2),sn=residualDown(sn,rn.conv256_down_out);var ln=sn.mean([1,2]),un=el(ln,rn.fc);return un})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.computeFaceDescriptor=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn,nn,an,on=this;return __generator(this,function(sn){switch(sn.label){case 0:return[4,toNetInput(Xr)];case 1:return rn=sn.sent(),nn=Ze(function(){return Ur(on.forwardInput(rn))}),[4,Promise.all(nn.map(function(ln){return ln.data()}))];case 2:return an=sn.sent(),nn.forEach(function(ln){return ln.dispose()}),[2,rn.isBatchInput?an:an[0]]}})})},Mt.prototype.getDefaultModelName=function(){return"face_recognition_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap$3(Xr)},Mt.prototype.extractParams=function(Xr){return extractParams$3(Xr)},Mt}(NeuralNetwork);function extendWithFaceDescriptor(st,Mt){var Xr={descriptor:Mt};return Object.assign({},st,Xr)}function extendWithAge(st,Mt){var Xr={age:Mt};return Object.assign({},st,Xr)}function extendWithGender(st,Mt,Xr){var rn={gender:Mt,genderProbability:Xr};return Object.assign({},st,rn)}var MtcnnOptions=function(){function st(Mt){var Xr=Mt===void 0?{}:Mt,rn=Xr.minFaceSize,nn=Xr.scaleFactor,an=Xr.maxNumScales,on=Xr.scoreThresholds,sn=Xr.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=rn||20,this._scaleFactor=nn||.709,this._maxNumScales=an||10,this._scoreThresholds=on||[.6,.7,.7],this._scaleSteps=sn,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(ln){return typeof ln!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(ln){return typeof ln!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(st.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),st}();function extractorsFactory$5(st,Mt){function Xr(ln,un){var cn=Ln(st(9*ln),[3,3,ln,1]),hn=Mn(st(ln)),fn=Mn(st(ln)),to=Mn(st(ln)),uo=Mn(st(ln));return Mt.push({paramPath:un+"/filters"},{paramPath:un+"/batch_norm_scale"},{paramPath:un+"/batch_norm_offset"},{paramPath:un+"/batch_norm_mean"},{paramPath:un+"/batch_norm_variance"}),{filters:cn,batch_norm_scale:hn,batch_norm_offset:fn,batch_norm_mean:to,batch_norm_variance:uo}}function rn(ln,un,cn,hn,fn){var to=Ln(st(ln*un*cn*cn),[cn,cn,ln,un]),uo=Mn(st(un));return Mt.push({paramPath:hn+"/filters"},{paramPath:hn+"/"+(fn?"batch_norm_offset":"bias")}),{filters:to,bias:uo}}function nn(ln,un,cn,hn){var fn=rn(ln,un,cn,hn,!0),to=fn.filters,uo=fn.bias;return{filters:to,batch_norm_offset:uo}}function an(ln,un,cn){var hn=Xr(ln,cn+"/depthwise_conv"),fn=nn(ln,un,1,cn+"/pointwise_conv");return{depthwise_conv:hn,pointwise_conv:fn}}function on(){var ln=nn(3,32,3,"mobilenetv1/conv_0"),un=an(32,64,"mobilenetv1/conv_1"),cn=an(64,128,"mobilenetv1/conv_2"),hn=an(128,128,"mobilenetv1/conv_3"),fn=an(128,256,"mobilenetv1/conv_4"),to=an(256,256,"mobilenetv1/conv_5"),uo=an(256,512,"mobilenetv1/conv_6"),co=an(512,512,"mobilenetv1/conv_7"),Uo=an(512,512,"mobilenetv1/conv_8"),lo=an(512,512,"mobilenetv1/conv_9"),ho=an(512,512,"mobilenetv1/conv_10"),fo=an(512,512,"mobilenetv1/conv_11"),mo=an(512,1024,"mobilenetv1/conv_12"),_d=an(1024,1024,"mobilenetv1/conv_13");return{conv_0:ln,conv_1:un,conv_2:cn,conv_3:hn,conv_4:fn,conv_5:to,conv_6:uo,conv_7:co,conv_8:Uo,conv_9:lo,conv_10:ho,conv_11:fo,conv_12:mo,conv_13:_d}}function sn(){var ln=nn(1024,256,1,"prediction_layer/conv_0"),un=nn(256,512,3,"prediction_layer/conv_1"),cn=nn(512,128,1,"prediction_layer/conv_2"),hn=nn(128,256,3,"prediction_layer/conv_3"),fn=nn(256,128,1,"prediction_layer/conv_4"),to=nn(128,256,3,"prediction_layer/conv_5"),uo=nn(256,64,1,"prediction_layer/conv_6"),co=nn(64,128,3,"prediction_layer/conv_7"),Uo=rn(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),lo=rn(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),ho=rn(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),fo=rn(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),mo=rn(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),_d=rn(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),ep=rn(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),rp=rn(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),ap=rn(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),sp=rn(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),up=rn(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),pp=rn(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),hp={box_encoding_predictor:Uo,class_predictor:lo},vp={box_encoding_predictor:ho,class_predictor:fo},gp={box_encoding_predictor:mo,class_predictor:_d},mp={box_encoding_predictor:ep,class_predictor:rp},lp={box_encoding_predictor:ap,class_predictor:sp},cp={box_encoding_predictor:up,class_predictor:pp};return{conv_0:ln,conv_1:un,conv_2:cn,conv_3:hn,conv_4:fn,conv_5:to,conv_6:uo,conv_7:co,box_predictor_0:hp,box_predictor_1:vp,box_predictor_2:gp,box_predictor_3:mp,box_predictor_4:lp,box_predictor_5:cp}}return{extractMobilenetV1Params:on,extractPredictionLayerParams:sn}}function extractParams$2(st){var Mt=[],Xr=extractWeightsFactory(st),rn=Xr.extractWeights,nn=Xr.getRemainingWeights,an=extractorsFactory$5(rn,Mt),on=an.extractMobilenetV1Params,sn=an.extractPredictionLayerParams,ln=on(),un=sn(),cn=Pn(rn(5118*4),[1,5118,4]),hn={extra_dim:cn};if(Mt.push({paramPath:"output_layer/extra_dim"}),nn().length!==0)throw new Error("weights remaing after extract: "+nn().length);return{params:{mobilenetv1:ln,prediction_layer:un,output_layer:hn},paramMappings:Mt}}function extractorsFactory$4(st,Mt){var Xr=extractWeightEntryFactory(st,Mt);function rn(un,cn,hn){var fn=Xr(un+"/Conv2d_"+cn+"_pointwise/weights",4,hn+"/filters"),to=Xr(un+"/Conv2d_"+cn+"_pointwise/convolution_bn_offset",1,hn+"/batch_norm_offset");return{filters:fn,batch_norm_offset:to}}function nn(un){var cn="mobilenetv1/conv_"+un,hn="MobilenetV1/Conv2d_"+un+"_depthwise",fn=cn+"/depthwise_conv",to=cn+"/pointwise_conv",uo=Xr(hn+"/depthwise_weights",4,fn+"/filters"),co=Xr(hn+"/BatchNorm/gamma",1,fn+"/batch_norm_scale"),Uo=Xr(hn+"/BatchNorm/beta",1,fn+"/batch_norm_offset"),lo=Xr(hn+"/BatchNorm/moving_mean",1,fn+"/batch_norm_mean"),ho=Xr(hn+"/BatchNorm/moving_variance",1,fn+"/batch_norm_variance");return{depthwise_conv:{filters:uo,batch_norm_scale:co,batch_norm_offset:Uo,batch_norm_mean:lo,batch_norm_variance:ho},pointwise_conv:rn("MobilenetV1",un,to)}}function an(){return{conv_0:rn("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:nn(1),conv_2:nn(2),conv_3:nn(3),conv_4:nn(4),conv_5:nn(5),conv_6:nn(6),conv_7:nn(7),conv_8:nn(8),conv_9:nn(9),conv_10:nn(10),conv_11:nn(11),conv_12:nn(12),conv_13:nn(13)}}function on(un,cn){var hn=Xr(un+"/weights",4,cn+"/filters"),fn=Xr(un+"/biases",1,cn+"/bias");return{filters:hn,bias:fn}}function sn(un){var cn=on("Prediction/BoxPredictor_"+un+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+un+"/box_encoding_predictor"),hn=on("Prediction/BoxPredictor_"+un+"/ClassPredictor","prediction_layer/box_predictor_"+un+"/class_predictor");return{box_encoding_predictor:cn,class_predictor:hn}}function ln(){return{conv_0:rn("Prediction",0,"prediction_layer/conv_0"),conv_1:rn("Prediction",1,"prediction_layer/conv_1"),conv_2:rn("Prediction",2,"prediction_layer/conv_2"),conv_3:rn("Prediction",3,"prediction_layer/conv_3"),conv_4:rn("Prediction",4,"prediction_layer/conv_4"),conv_5:rn("Prediction",5,"prediction_layer/conv_5"),conv_6:rn("Prediction",6,"prediction_layer/conv_6"),conv_7:rn("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:sn(0),box_predictor_1:sn(1),box_predictor_2:sn(2),box_predictor_3:sn(3),box_predictor_4:sn(4),box_predictor_5:sn(5)}}return{extractMobilenetV1Params:an,extractPredictionLayerParams:ln}}function extractParamsFromWeigthMap$2(st){var Mt=[],Xr=extractorsFactory$4(st,Mt),rn=Xr.extractMobilenetV1Params,nn=Xr.extractPredictionLayerParams,an=st["Output/extra_dim"];if(Mt.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!isTensor3D(an))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+an);var on={mobilenetv1:rn(),prediction_layer:nn(),output_layer:{extra_dim:an}};return disposeUnusedWeightTensors(st,Mt),{params:on,paramMappings:Mt}}function pointwiseConvLayer(st,Mt,Xr){return Ze(function(){var rn=qc(st,Mt.filters,Xr,"same");return rn=rc(rn,Mt.batch_norm_offset),hu(rn,0,6)})}var epsilon=.0010000000474974513;function depthwiseConvLayer(st,Mt,Xr){return Ze(function(){var rn=Yc(st,Mt.filters,Xr,"same");return rn=ju(rn,Mt.batch_norm_mean,Mt.batch_norm_variance,Mt.batch_norm_offset,Mt.batch_norm_scale,epsilon),hu(rn,0,6)})}function getStridesForLayerIdx(st){return[2,4,6,12].some(function(Mt){return Mt===st})?[2,2]:[1,1]}function mobileNetV1(st,Mt){return Ze(function(){var Xr=null,rn=pointwiseConvLayer(st,Mt.conv_0,[2,2]),nn=[Mt.conv_1,Mt.conv_2,Mt.conv_3,Mt.conv_4,Mt.conv_5,Mt.conv_6,Mt.conv_7,Mt.conv_8,Mt.conv_9,Mt.conv_10,Mt.conv_11,Mt.conv_12,Mt.conv_13];if(nn.forEach(function(an,on){var sn=on+1,ln=getStridesForLayerIdx(sn);rn=depthwiseConvLayer(rn,an.depthwise_conv,ln),rn=pointwiseConvLayer(rn,an.pointwise_conv,[1,1]),sn===11&&(Xr=rn)}),Xr===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:rn,conv11:Xr}})}function nonMaxSuppression(st,Mt,Xr,rn,nn){var an=st.shape[0],on=Math.min(Xr,an),sn=Mt.map(function(cn,hn){return{score:cn,boxIndex:hn}}).filter(function(cn){return cn.score>nn}).sort(function(cn,hn){return hn.score-cn.score}),ln=function(cn){return cn<=rn?1:0},un=[];return sn.forEach(function(cn){if(!(un.length>=on)){for(var hn=cn.score,fn=un.length-1;fn>=0;--fn){var to=IOU(st,cn.boxIndex,un[fn]);if(to!==0&&(cn.score*=ln(to),cn.score<=nn))break}hn===cn.score&&un.push(cn.boxIndex)}}),un}function IOU(st,Mt,Xr){var rn=st.arraySync(),nn=Math.min(rn[Mt][0],rn[Mt][2]),an=Math.min(rn[Mt][1],rn[Mt][3]),on=Math.max(rn[Mt][0],rn[Mt][2]),sn=Math.max(rn[Mt][1],rn[Mt][3]),ln=Math.min(rn[Xr][0],rn[Xr][2]),un=Math.min(rn[Xr][1],rn[Xr][3]),cn=Math.max(rn[Xr][0],rn[Xr][2]),hn=Math.max(rn[Xr][1],rn[Xr][3]),fn=(on-nn)*(sn-an),to=(cn-ln)*(hn-un);if(fn<=0||to<=0)return 0;var uo=Math.max(nn,ln),co=Math.max(an,un),Uo=Math.min(on,cn),lo=Math.min(sn,hn),ho=Math.max(Uo-uo,0)*Math.max(lo-co,0);return ho/(fn+to-ho)}function getCenterCoordinatesAndSizesLayer(st){var Mt=Ur(Wl(st,[1,0])),Xr=[Cc(Mt[2],Mt[0]),Cc(Mt[3],Mt[1])],rn=[rc(Mt[0],sc(Xr[0],On(2))),rc(Mt[1],sc(Xr[1],On(2)))];return{sizes:Xr,centers:rn}}function decodeBoxesLayer(st,Mt){var Xr=getCenterCoordinatesAndSizesLayer(st),rn=Xr.sizes,nn=Xr.centers,an=Ur(Wl(Mt,[1,0])),on=sc(gc(vu(sc(an[2],On(5))),rn[0]),On(2)),sn=rc(gc(sc(an[0],On(10)),rn[0]),nn[0]),ln=sc(gc(vu(sc(an[3],On(5))),rn[1]),On(2)),un=rc(gc(sc(an[1],On(10)),rn[1]),nn[1]);return Wl(Pr([Cc(sn,on),Cc(un,ln),rc(sn,on),rc(un,ln)]),[1,0])}function outputLayer(st,Mt,Xr){return Ze(function(){var rn=st.shape[0],nn=decodeBoxesLayer(Or(Lr(Xr.extra_dim,[rn,1,1]),[-1,4]),Or(st,[-1,4]));nn=Or(nn,[rn,nn.shape[0]/rn,4]);var an=Iu(ml(Mt,[0,0,1],[-1,-1,-1])),on=ml(an,[0,0,0],[-1,-1,1]);on=Or(on,[rn,on.shape[1]]);var sn=Ur(nn),ln=Ur(on);return{boxes:sn,scores:ln}})}function boxPredictionLayer(st,Mt){return Ze(function(){var Xr=st.shape[0],rn=Or(convLayer$1(st,Mt.box_encoding_predictor),[Xr,-1,1,4]),nn=Or(convLayer$1(st,Mt.class_predictor),[Xr,-1,3]);return{boxPredictionEncoding:rn,classPrediction:nn}})}function predictionLayer(st,Mt,Xr){return Ze(function(){var rn=pointwiseConvLayer(st,Xr.conv_0,[1,1]),nn=pointwiseConvLayer(rn,Xr.conv_1,[2,2]),an=pointwiseConvLayer(nn,Xr.conv_2,[1,1]),on=pointwiseConvLayer(an,Xr.conv_3,[2,2]),sn=pointwiseConvLayer(on,Xr.conv_4,[1,1]),ln=pointwiseConvLayer(sn,Xr.conv_5,[2,2]),un=pointwiseConvLayer(ln,Xr.conv_6,[1,1]),cn=pointwiseConvLayer(un,Xr.conv_7,[2,2]),hn=boxPredictionLayer(Mt,Xr.box_predictor_0),fn=boxPredictionLayer(st,Xr.box_predictor_1),to=boxPredictionLayer(nn,Xr.box_predictor_2),uo=boxPredictionLayer(on,Xr.box_predictor_3),co=boxPredictionLayer(ln,Xr.box_predictor_4),Uo=boxPredictionLayer(cn,Xr.box_predictor_5),lo=Yn([hn.boxPredictionEncoding,fn.boxPredictionEncoding,to.boxPredictionEncoding,uo.boxPredictionEncoding,co.boxPredictionEncoding,Uo.boxPredictionEncoding],1),ho=Yn([hn.classPrediction,fn.classPrediction,to.classPrediction,uo.classPrediction,co.classPrediction,Uo.classPrediction],1);return{boxPredictions:lo,classPredictions:ho}})}var SsdMobilenetv1Options=function(){function st(Mt){var Xr=Mt===void 0?{}:Mt,rn=Xr.minConfidence,nn=Xr.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=rn||.5,this._maxResults=nn||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(st.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),st}(),SsdMobilenetv1=function(st){__extends(Mt,st);function Mt(){return st.call(this,"SsdMobilenetv1")||this}return Mt.prototype.forwardInput=function(Xr){var rn=this.params;if(!rn)throw new Error("SsdMobilenetv1 - load model before inference");return Ze(function(){var nn=Xr.toBatchTensor(512,!1).toFloat(),an=Cc(gc(nn,On(.007843137718737125)),On(1)),on=mobileNetV1(an,rn.mobilenetv1),sn=predictionLayer(on.out,on.conv11,rn.prediction_layer),ln=sn.boxPredictions,un=sn.classPredictions;return outputLayer(ln,un,rn.output_layer)})},Mt.prototype.forward=function(Xr){return __awaiter$7(this,void 0,void 0,function(){var rn;return __generator(this,function(nn){switch(nn.label){case 0:return rn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,rn.apply(this,[nn.sent()])]}})})},Mt.prototype.locateFaces=function(Xr,rn){return rn===void 0&&(rn={}),__awaiter$7(this,void 0,void 0,function(){var nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap;return __generator(this,function(sp){switch(sp.label){case 0:return nn=new SsdMobilenetv1Options(rn),an=nn.maxResults,on=nn.minConfidence,[4,toNetInput(Xr)];case 1:for(sn=sp.sent(),ln=this.forwardInput(sn),un=ln.boxes,cn=ln.scores,hn=un[0],fn=cn[0],to=1;to<un.length;to++)un[to].dispose(),cn[to].dispose();return Uo=(co=Array).from,[4,fn.data()];case 2:return uo=Uo.apply(co,[sp.sent()]),lo=.5,ho=nonMaxSuppression(hn,uo,an,lo,on),fo=sn.getReshapedInputDimensions(0),mo=sn.inputSize,_d=mo/fo.width,ep=mo/fo.height,rp=hn.arraySync(),ap=ho.map(function(up){var pp=[Math.max(0,rp[up][0]),Math.min(1,rp[up][2])].map(function(cp){return cp*ep}),hp=pp[0],vp=pp[1],gp=[Math.max(0,rp[up][1]),Math.min(1,rp[up][3])].map(function(cp){return cp*_d}),mp=gp[0],lp=gp[1];return new FaceDetection(uo[up],new Rect(mp,hp,lp-mp,vp-hp),{height:sn.getInputHeight(0),width:sn.getInputWidth(0)})}),hn.dispose(),fn.dispose(),[2,ap]}})})},Mt.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap$2(Xr)},Mt.prototype.extractParams=function(Xr){return extractParams$2(Xr)},Mt}(NeuralNetwork);(function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt})(SsdMobilenetv1);var IOU_THRESHOLD$1=.4,BOX_ANCHORS$1=[new Point(.738768,.874946),new Point(2.42204,2.65704),new Point(4.30971,7.04493),new Point(10.246,4.59428),new Point(12.6868,11.8741)],BOX_ANCHORS_SEPARABLE=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB_SEPARABLE=[117.001,114.697,97.404],DEFAULT_MODEL_NAME="tiny_yolov2_model",DEFAULT_MODEL_NAME_SEPARABLE_CONV="tiny_yolov2_separable_conv_model",isNumber=function(st){return typeof st=="number"};function validateConfig(st){if(!st)throw new Error("invalid config: "+st);if(typeof st.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+st.withSeparableConvs);if(!isNumber(st.iouThreshold)||st.iouThreshold<0||st.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+st.iouThreshold);if(!Array.isArray(st.classes)||!st.classes.length||!st.classes.every(function(Mt){return typeof Mt=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(st.classes));if(!Array.isArray(st.anchors)||!st.anchors.length||!st.anchors.map(function(Mt){return Mt||{}}).every(function(Mt){return isNumber(Mt.x)&&isNumber(Mt.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(st.anchors));if(st.meanRgb&&(!Array.isArray(st.meanRgb)||st.meanRgb.length!==3||!st.meanRgb.every(isNumber)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(st.meanRgb))}function leaky(st){return Ze(function(){var Mt=gc(st,On(.10000000149011612));return rc(Bl(Cc(st,Mt)),Mt)})}function convWithBatchNorm(st,Mt){return Ze(function(){var Xr=Ir(st,[[0,0],[1,1],[1,1],[0,0]]);return Xr=qc(Xr,Mt.conv.filters,[1,1],"valid"),Xr=Cc(Xr,Mt.bn.sub),Xr=gc(Xr,Mt.bn.truediv),Xr=rc(Xr,Mt.conv.bias),leaky(Xr)})}function depthwiseSeparableConv(st,Mt){return Ze(function(){var Xr=Ir(st,[[0,0],[1,1],[1,1],[0,0]]);return Xr=Jc(Xr,Mt.depthwise_filter,Mt.pointwise_filter,[1,1],"valid"),Xr=rc(Xr,Mt.bias),leaky(Xr)})}function extractorsFactory$3(st,Mt){var Xr=extractConvParamsFactory(st,Mt);function rn(on,sn){var ln=Mn(st(on)),un=Mn(st(on));return Mt.push({paramPath:sn+"/sub"},{paramPath:sn+"/truediv"}),{sub:ln,truediv:un}}function nn(on,sn,ln){var un=Xr(on,sn,3,ln+"/conv"),cn=rn(sn,ln+"/bn");return{conv:un,bn:cn}}var an=extractSeparableConvParamsFactory(st,Mt);return{extractConvParams:Xr,extractConvWithBatchNormParams:nn,extractSeparableConvParams:an}}function extractParams$1(st,Mt,Xr,rn){var nn=extractWeightsFactory(st),an=nn.extractWeights,on=nn.getRemainingWeights,sn=[],ln=extractorsFactory$3(an,sn),un=ln.extractConvParams,cn=ln.extractConvWithBatchNormParams,hn=ln.extractSeparableConvParams,fn;if(Mt.withSeparableConvs){var to=rn[0],uo=rn[1],co=rn[2],Uo=rn[3],lo=rn[4],ho=rn[5],fo=rn[6],mo=rn[7],_d=rn[8],ep=Mt.isFirstLayerConv2d?un(to,uo,3,"conv0"):hn(to,uo,"conv0"),rp=hn(uo,co,"conv1"),ap=hn(co,Uo,"conv2"),sp=hn(Uo,lo,"conv3"),up=hn(lo,ho,"conv4"),pp=hn(ho,fo,"conv5"),hp=mo?hn(fo,mo,"conv6"):void 0,vp=_d?hn(mo,_d,"conv7"):void 0,gp=un(_d||mo||fo,5*Xr,1,"conv8");fn={conv0:ep,conv1:rp,conv2:ap,conv3:sp,conv4:up,conv5:pp,conv6:hp,conv7:vp,conv8:gp}}else{var to=rn[0],uo=rn[1],co=rn[2],Uo=rn[3],lo=rn[4],ho=rn[5],fo=rn[6],mo=rn[7],_d=rn[8],ep=cn(to,uo,"conv0"),rp=cn(uo,co,"conv1"),ap=cn(co,Uo,"conv2"),sp=cn(Uo,lo,"conv3"),up=cn(lo,ho,"conv4"),pp=cn(ho,fo,"conv5"),hp=cn(fo,mo,"conv6"),vp=cn(mo,_d,"conv7"),gp=un(_d,5*Xr,1,"conv8");fn={conv0:ep,conv1:rp,conv2:ap,conv3:sp,conv4:up,conv5:pp,conv6:hp,conv7:vp,conv8:gp}}if(on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{params:fn,paramMappings:sn}}function extractorsFactory$2(st,Mt){var Xr=extractWeightEntryFactory(st,Mt);function rn(sn){var ln=Xr(sn+"/sub",1),un=Xr(sn+"/truediv",1);return{sub:ln,truediv:un}}function nn(sn){var ln=Xr(sn+"/filters",4),un=Xr(sn+"/bias",1);return{filters:ln,bias:un}}function an(sn){var ln=nn(sn+"/conv"),un=rn(sn+"/bn");return{conv:ln,bn:un}}var on=loadSeparableConvParamsFactory(Xr);return{extractConvParams:nn,extractConvWithBatchNormParams:an,extractSeparableConvParams:on}}function extractParamsFromWeigthMap$1(st,Mt){var Xr=[],rn=extractorsFactory$2(st,Xr),nn=rn.extractConvParams,an=rn.extractConvWithBatchNormParams,on=rn.extractSeparableConvParams,sn;if(Mt.withSeparableConvs){var ln=Mt.filterSizes&&Mt.filterSizes.length||9;sn={conv0:Mt.isFirstLayerConv2d?nn("conv0"):on("conv0"),conv1:on("conv1"),conv2:on("conv2"),conv3:on("conv3"),conv4:on("conv4"),conv5:on("conv5"),conv6:ln>7?on("conv6"):void 0,conv7:ln>8?on("conv7"):void 0,conv8:nn("conv8")}}else sn={conv0:an("conv0"),conv1:an("conv1"),conv2:an("conv2"),conv3:an("conv3"),conv4:an("conv4"),conv5:an("conv5"),conv6:an("conv6"),conv7:an("conv7"),conv8:nn("conv8")};return disposeUnusedWeightTensors(st,Xr),{params:sn,paramMappings:Xr}}var TinyYolov2SizeType;(function(st){st[st.XS=224]="XS",st[st.SM=320]="SM",st[st.MD=416]="MD",st[st.LG=608]="LG"})(TinyYolov2SizeType||(TinyYolov2SizeType={}));var TinyYolov2Options=function(){function st(Mt){var Xr=Mt===void 0?{}:Mt,rn=Xr.inputSize,nn=Xr.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=rn||416,this._scoreThreshold=nn||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(st.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),st}(),TinyYolov2Base=function(st){__extends(Mt,st);function Mt(Xr){var rn=st.call(this,"TinyYolov2")||this;return validateConfig(Xr),rn._config=Xr,rn}return Object.defineProperty(Mt.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),Mt.prototype.runTinyYolov2=function(Xr,rn){var nn=convWithBatchNorm(Xr,rn.conv0);return nn=hl(nn,[2,2],[2,2],"same"),nn=convWithBatchNorm(nn,rn.conv1),nn=hl(nn,[2,2],[2,2],"same"),nn=convWithBatchNorm(nn,rn.conv2),nn=hl(nn,[2,2],[2,2],"same"),nn=convWithBatchNorm(nn,rn.conv3),nn=hl(nn,[2,2],[2,2],"same"),nn=convWithBatchNorm(nn,rn.conv4),nn=hl(nn,[2,2],[2,2],"same"),nn=convWithBatchNorm(nn,rn.conv5),nn=hl(nn,[2,2],[1,1],"same"),nn=convWithBatchNorm(nn,rn.conv6),nn=convWithBatchNorm(nn,rn.conv7),convLayer$1(nn,rn.conv8,"valid",!1)},Mt.prototype.runMobilenet=function(Xr,rn){var nn=this.config.isFirstLayerConv2d?leaky(convLayer$1(Xr,rn.conv0,"valid",!1)):depthwiseSeparableConv(Xr,rn.conv0);return nn=hl(nn,[2,2],[2,2],"same"),nn=depthwiseSeparableConv(nn,rn.conv1),nn=hl(nn,[2,2],[2,2],"same"),nn=depthwiseSeparableConv(nn,rn.conv2),nn=hl(nn,[2,2],[2,2],"same"),nn=depthwiseSeparableConv(nn,rn.conv3),nn=hl(nn,[2,2],[2,2],"same"),nn=depthwiseSeparableConv(nn,rn.conv4),nn=hl(nn,[2,2],[2,2],"same"),nn=depthwiseSeparableConv(nn,rn.conv5),nn=hl(nn,[2,2],[1,1],"same"),nn=rn.conv6?depthwiseSeparableConv(nn,rn.conv6):nn,nn=rn.conv7?depthwiseSeparableConv(nn,rn.conv7):nn,convLayer$1(nn,rn.conv8,"valid",!1)},Mt.prototype.forwardInput=function(Xr,rn){var nn=this,an=this.params;if(!an)throw new Error("TinyYolov2 - load model before inference");return Ze(function(){var on=Xr.toBatchTensor(rn,!1).toFloat();return on=nn.config.meanRgb?normalize$1(on,nn.config.meanRgb):on,on=on.div(On(256)),nn.config.withSeparableConvs?nn.runMobilenet(on,an):nn.runTinyYolov2(on,an)})},Mt.prototype.forward=function(Xr,rn){return __awaiter$7(this,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return nn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[4,nn.apply(this,[an.sent(),rn])];case 2:return[2,an.sent()]}})})},Mt.prototype.detect=function(Xr,rn){return rn===void 0&&(rn={}),__awaiter$7(this,void 0,void 0,function(){var nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho=this;return __generator(this,function(fo){switch(fo.label){case 0:return nn=new TinyYolov2Options(rn),an=nn.inputSize,on=nn.scoreThreshold,[4,toNetInput(Xr)];case 1:return sn=fo.sent(),[4,this.forwardInput(sn,an)];case 2:return ln=fo.sent(),un=Ze(function(){return Ur(ln)[0].expandDims()}),cn={width:sn.getInputWidth(0),height:sn.getInputHeight(0)},[4,this.extractBoxes(un,sn.getReshapedInputDimensions(0),on)];case 3:return hn=fo.sent(),ln.dispose(),un.dispose(),fn=hn.map(function(mo){return mo.box}),to=hn.map(function(mo){return mo.score}),uo=hn.map(function(mo){return mo.classScore}),co=hn.map(function(mo){return ho.config.classes[mo.label]}),Uo=nonMaxSuppression$1(fn.map(function(mo){return mo.rescale(an)}),to,this.config.iouThreshold,!0),lo=Uo.map(function(mo){return new ObjectDetection(to[mo],uo[mo],co[mo],fn[mo],cn)}),[2,lo]}})})},Mt.prototype.getDefaultModelName=function(){return""},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap$1(Xr,this.config)},Mt.prototype.extractParams=function(Xr){var rn=this.config.filterSizes||Mt.DEFAULT_FILTER_SIZES,nn=rn?rn.length:void 0;if(nn!==7&&nn!==8&&nn!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+nn+" filterSizes in config");return extractParams$1(Xr,this.config,this.boxEncodingSize,rn)},Mt.prototype.extractBoxes=function(Xr,rn,nn){return __awaiter$7(this,void 0,void 0,function(){var an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap,sp,up,pp,hp,vp,gp,mp,lp,cp,tp=this;return __generator(this,function(np){switch(np.label){case 0:return an=rn.width,on=rn.height,sn=Math.max(an,on),ln=sn/an,un=sn/on,cn=Xr.shape[1],hn=this.config.anchors.length,fn=Ze(function(){var fp=Xr.reshape([cn,cn,hn,tp.boxEncodingSize]),dp=fp.slice([0,0,0,0],[cn,cn,hn,4]),yp=fp.slice([0,0,0,4],[cn,cn,hn,1]),bp=tp.withClassScores?go(fp.slice([0,0,0,5],[cn,cn,hn,tp.config.classes.length]),3):On(0);return[dp,yp,bp]}),to=fn[0],uo=fn[1],co=fn[2],Uo=[],[4,uo.array()];case 1:return lo=np.sent(),[4,to.array()];case 2:ho=np.sent(),fo=0,np.label=3;case 3:if(!(fo<cn))return[3,12];mo=0,np.label=4;case 4:if(!(mo<cn))return[3,11];_d=0,np.label=5;case 5:return _d<hn?(ep=sigmoid(lo[fo][mo][_d][0]),!nn||ep>nn?(rp=(mo+sigmoid(ho[fo][mo][_d][0]))/cn*ln,ap=(fo+sigmoid(ho[fo][mo][_d][1]))/cn*un,sp=Math.exp(ho[fo][mo][_d][2])*this.config.anchors[_d].x/cn*ln,up=Math.exp(ho[fo][mo][_d][3])*this.config.anchors[_d].y/cn*un,pp=rp-sp/2,hp=ap-up/2,vp={row:fo,col:mo,anchor:_d},this.withClassScores?[4,this.extractPredictedClass(co,vp)]:[3,7]):[3,9]):[3,10];case 6:return cp=np.sent(),[3,8];case 7:cp={classScore:1,label:0},np.label=8;case 8:gp=cp,mp=gp.classScore,lp=gp.label,Uo.push(__assign({box:new BoundingBox(pp,hp,pp+sp,hp+up),score:ep,classScore:ep*mp,label:lp},vp)),np.label=9;case 9:return _d++,[3,5];case 10:return mo++,[3,4];case 11:return fo++,[3,3];case 12:return to.dispose(),uo.dispose(),co.dispose(),[2,Uo]}})})},Mt.prototype.extractPredictedClass=function(Xr,rn){return __awaiter$7(this,void 0,void 0,function(){var nn,an,on,sn;return __generator(this,function(ln){switch(ln.label){case 0:return nn=rn.row,an=rn.col,on=rn.anchor,[4,Xr.array()];case 1:return sn=ln.sent(),[2,Array(this.config.classes.length).fill(0).map(function(un,cn){return sn[nn][an][on][cn]}).map(function(un,cn){return{classScore:un,label:cn}}).reduce(function(un,cn){return un.classScore>cn.classScore?un:cn})]}})})},Mt.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],Mt}(NeuralNetwork),TinyYolov2=function(st){__extends(Mt,st);function Mt(Xr){Xr===void 0&&(Xr=!0);var rn=this,nn=Object.assign({},{withSeparableConvs:Xr,iouThreshold:IOU_THRESHOLD$1,classes:["face"]},Xr?{anchors:BOX_ANCHORS_SEPARABLE,meanRgb:MEAN_RGB_SEPARABLE}:{anchors:BOX_ANCHORS$1,withClassScores:!0});return rn=st.call(this,nn)||this,rn}return Object.defineProperty(Mt.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),Mt.prototype.locateFaces=function(Xr,rn){return __awaiter$7(this,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return[4,this.detect(Xr,rn)];case 1:return nn=an.sent(),[2,nn.map(function(on){return new FaceDetection(on.score,on.relativeBox,{width:on.imageWidth,height:on.imageHeight})})]}})})},Mt.prototype.getDefaultModelName=function(){return this.withSeparableConvs?DEFAULT_MODEL_NAME_SEPARABLE_CONV:DEFAULT_MODEL_NAME},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return st.prototype.extractParamsFromWeigthMap.call(this,Xr)},Mt}(TinyYolov2Base),TinyFaceDetectorOptions=function(st){__extends(Mt,st);function Mt(){var Xr=st!==null&&st.apply(this,arguments)||this;return Xr._name="TinyFaceDetectorOptions",Xr}return Mt}(TinyYolov2Options),ComposableTask=function(){function st(){}return st.prototype.then=function(Mt){return __awaiter$7(this,void 0,void 0,function(){var Xr;return __generator(this,function(rn){switch(rn.label){case 0:return Xr=Mt,[4,this.run()];case 1:return[2,Xr.apply(void 0,[rn.sent()])]}})})},st.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(Mt){throw new Error("ComposableTask - run is not implemented")})})},st}();function extractAllFacesAndComputeResults(st,Mt,Xr,rn,nn){return nn===void 0&&(nn=function(an){var on=an.alignedRect;return on}),__awaiter$7(this,void 0,void 0,function(){var an,on,sn,ln,un;return __generator(this,function(cn){switch(cn.label){case 0:return an=st.map(function(hn){return isWithFaceLandmarks(hn)?nn(hn):hn.detection}),sn=rn,sn?[3,5]:Mt instanceof wt?[4,extractFaceTensors(Mt,an)]:[3,2];case 1:return ln=cn.sent(),[3,4];case 2:return[4,extractFaces(Mt,an)];case 3:ln=cn.sent(),cn.label=4;case 4:sn=ln,cn.label=5;case 5:return on=sn,[4,Xr(on)];case 6:return un=cn.sent(),on.forEach(function(hn){return hn instanceof wt&&hn.dispose()}),[2,un]}})})}function extractSingleFaceAndComputeResult(st,Mt,Xr,rn,nn){return __awaiter$7(this,void 0,void 0,function(){var an=this;return __generator(this,function(on){return[2,extractAllFacesAndComputeResults([st],Mt,function(sn){return __awaiter$7(an,void 0,void 0,function(){return __generator(this,function(ln){return[2,Xr(sn[0])]})})},rn,nn)]})})}function bgrToRgbTensor(st){return Ze(function(){return Pr(Ur(st,3).reverse(),3)})}var CELL_STRIDE=2,CELL_SIZE=12;function extractorsFactory$1(st,Mt){var Xr=extractConvParamsFactory(st,Mt),rn=extractFCParamsFactory(st,Mt);function nn(un,cn){var hn=Mn(st(un));return Mt.push({paramPath:cn}),hn}function an(un,cn,hn){hn===void 0&&(hn=!1);var fn=Xr(un[0],un[1],3,cn+"/conv1"),to=nn(un[1],cn+"/prelu1_alpha"),uo=Xr(un[1],un[2],3,cn+"/conv2"),co=nn(un[2],cn+"/prelu2_alpha"),Uo=Xr(un[2],un[3],hn?2:3,cn+"/conv3"),lo=nn(un[3],cn+"/prelu3_alpha");return{conv1:fn,prelu1_alpha:to,conv2:uo,prelu2_alpha:co,conv3:Uo,prelu3_alpha:lo}}function on(){var un=an([3,10,16,32],"pnet"),cn=Xr(32,2,1,"pnet/conv4_1"),hn=Xr(32,4,1,"pnet/conv4_2");return __assign(__assign({},un),{conv4_1:cn,conv4_2:hn})}function sn(){var un=an([3,28,48,64],"rnet",!0),cn=rn(576,128,"rnet/fc1"),hn=nn(128,"rnet/prelu4_alpha"),fn=rn(128,2,"rnet/fc2_1"),to=rn(128,4,"rnet/fc2_2");return __assign(__assign({},un),{fc1:cn,prelu4_alpha:hn,fc2_1:fn,fc2_2:to})}function ln(){var un=an([3,32,64,64],"onet"),cn=Xr(64,128,2,"onet/conv4"),hn=nn(128,"onet/prelu4_alpha"),fn=rn(1152,256,"onet/fc1"),to=nn(256,"onet/prelu5_alpha"),uo=rn(256,2,"onet/fc2_1"),co=rn(256,4,"onet/fc2_2"),Uo=rn(256,10,"onet/fc2_3");return __assign(__assign({},un),{conv4:cn,prelu4_alpha:hn,fc1:fn,prelu5_alpha:to,fc2_1:uo,fc2_2:co,fc2_3:Uo})}return{extractPNetParams:on,extractRNetParams:sn,extractONetParams:ln}}function extractParams(st){var Mt=extractWeightsFactory(st),Xr=Mt.extractWeights,rn=Mt.getRemainingWeights,nn=[],an=extractorsFactory$1(Xr,nn),on=an.extractPNetParams,sn=an.extractRNetParams,ln=an.extractONetParams,un=on(),cn=sn(),hn=ln();if(rn().length!==0)throw new Error("weights remaing after extract: "+rn().length);return{params:{pnet:un,rnet:cn,onet:hn},paramMappings:nn}}function extractorsFactory(st,Mt){var Xr=extractWeightEntryFactory(st,Mt);function rn(cn){var hn=Xr(cn+"/weights",4,cn+"/filters"),fn=Xr(cn+"/bias",1);return{filters:hn,bias:fn}}function nn(cn){var hn=Xr(cn+"/weights",2),fn=Xr(cn+"/bias",1);return{weights:hn,bias:fn}}function an(cn){return Xr(cn,1)}function on(cn){var hn=rn(cn+"/conv1"),fn=an(cn+"/prelu1_alpha"),to=rn(cn+"/conv2"),uo=an(cn+"/prelu2_alpha"),co=rn(cn+"/conv3"),Uo=an(cn+"/prelu3_alpha");return{conv1:hn,prelu1_alpha:fn,conv2:to,prelu2_alpha:uo,conv3:co,prelu3_alpha:Uo}}function sn(){var cn=on("pnet"),hn=rn("pnet/conv4_1"),fn=rn("pnet/conv4_2");return __assign(__assign({},cn),{conv4_1:hn,conv4_2:fn})}function ln(){var cn=on("rnet"),hn=nn("rnet/fc1"),fn=an("rnet/prelu4_alpha"),to=nn("rnet/fc2_1"),uo=nn("rnet/fc2_2");return __assign(__assign({},cn),{fc1:hn,prelu4_alpha:fn,fc2_1:to,fc2_2:uo})}function un(){var cn=on("onet"),hn=rn("onet/conv4"),fn=an("onet/prelu4_alpha"),to=nn("onet/fc1"),uo=an("onet/prelu5_alpha"),co=nn("onet/fc2_1"),Uo=nn("onet/fc2_2"),lo=nn("onet/fc2_3");return __assign(__assign({},cn),{conv4:hn,prelu4_alpha:fn,fc1:to,prelu5_alpha:uo,fc2_1:co,fc2_2:Uo,fc2_3:lo})}return{extractPNetParams:sn,extractRNetParams:ln,extractONetParams:un}}function extractParamsFromWeigthMap(st){var Mt=[],Xr=extractorsFactory(st,Mt),rn=Xr.extractPNetParams,nn=Xr.extractRNetParams,an=Xr.extractONetParams,on=rn(),sn=nn(),ln=an();return disposeUnusedWeightTensors(st,Mt),{params:{pnet:on,rnet:sn,onet:ln},paramMappings:Mt}}function getSizesForScale(st,Mt){var Xr=Mt[0],rn=Mt[1];return{height:Math.floor(Xr*st),width:Math.floor(rn*st)}}function pyramidDown(st,Mt,Xr){for(var rn=Xr[0],nn=Xr[1],an=CELL_SIZE/st,on=[],sn=Math.min(rn,nn)*an,ln=0;sn>=12;)on.push(an*Math.pow(Mt,ln)),sn=sn*Mt,ln+=1;return on}var MtcnnBox=function(st){__extends(Mt,st);function Mt(Xr,rn,nn,an){return st.call(this,{left:Xr,top:rn,right:nn,bottom:an},!0)||this}return Mt}(Box);function normalize(st){return Ze(function(){return gc(Cc(st,On(127.5)),On(.0078125))})}function prelu(st,Mt){return Ze(function(){return rc(Bl(st),gc(Mt,wu(Bl(wu(st)))))})}function sharedLayer(st,Mt,Xr){return Xr===void 0&&(Xr=!1),Ze(function(){var rn=convLayer$1(st,Mt.conv1,"valid");return rn=prelu(rn,Mt.prelu1_alpha),rn=hl(rn,Xr?[2,2]:[3,3],[2,2],"same"),rn=convLayer$1(rn,Mt.conv2,"valid"),rn=prelu(rn,Mt.prelu2_alpha),rn=Xr?rn:hl(rn,[3,3],[2,2],"valid"),rn=convLayer$1(rn,Mt.conv3,"valid"),rn=prelu(rn,Mt.prelu3_alpha),rn})}function PNet(st,Mt){return Ze(function(){var Xr=sharedLayer(st,Mt,!0),rn=convLayer$1(Xr,Mt.conv4_1,"valid"),nn=wr(Sl(rn,3),3),an=go(Cc(rn,nn),3),on=convLayer$1(Xr,Mt.conv4_2,"valid");return{prob:an,regions:on}})}function rescaleAndNormalize(st,Mt){return Ze(function(){var Xr=getSizesForScale(Mt,st.shape.slice(1)),rn=Xr.height,nn=Xr.width,an=Oh.resizeBilinear(st,[rn,nn]),on=normalize(an);return Wl(on,[0,2,1,3])})}function extractBoundingBoxes(st,Mt,Xr,rn){for(var nn=[],an=st.arraySync(),on=0;on<st.shape[0];on++)for(var sn=0;sn<st.shape[1];sn++)an[on][sn]>=rn&&nn.push(new Point(sn,on));var ln=nn.map(function(un){var cn=new BoundingBox(Math.round((un.y*CELL_STRIDE+1)/Xr),Math.round((un.x*CELL_STRIDE+1)/Xr),Math.round((un.y*CELL_STRIDE+CELL_SIZE)/Xr),Math.round((un.x*CELL_STRIDE+CELL_SIZE)/Xr)),hn=an[un.y][un.x],fn=Mt.arraySync(),to=new MtcnnBox(fn[un.y][un.x][0],fn[un.y][un.x][1],fn[un.y][un.x][2],fn[un.y][un.x][3]);return{cell:cn,score:hn,region:to}});return ln}function stage1(st,Mt,Xr,rn,nn){nn.stage1=[];var an=Mt.map(function(fn){return Ze(function(){var to={scale:fn},uo=rescaleAndNormalize(st,fn),co=Date.now(),Uo=PNet(uo,rn),lo=Uo.prob,ho=Uo.regions;to.pnet=Date.now()-co;var fo=Ur(Ur(lo,3)[1])[0],mo=Ur(ho)[0];return{scoresTensor:fo,regionsTensor:mo,scale:fn,statsForScale:to}})}),on=an.map(function(fn){var to=fn.scoresTensor,uo=fn.regionsTensor,co=fn.scale,Uo=fn.statsForScale,lo=extractBoundingBoxes(to,uo,co,Xr);if(to.dispose(),uo.dispose(),!lo.length)return nn.stage1.push(Uo),[];var ho=Date.now(),fo=nonMaxSuppression$1(lo.map(function(mo){return mo.cell}),lo.map(function(mo){return mo.score}),.5);return Uo.nms=Date.now()-ho,Uo.numBoxes=fo.length,nn.stage1.push(Uo),fo.map(function(mo){return lo[mo]})}),sn=on.reduce(function(fn,to){return fn.concat(to)},[]),ln=[],un=[];if(sn.length>0){var cn=Date.now(),hn=nonMaxSuppression$1(sn.map(function(fn){return fn.cell}),sn.map(function(fn){return fn.score}),.7);nn.stage1_nms=Date.now()-cn,un=hn.map(function(fn){return sn[fn].score}),ln=hn.map(function(fn){return sn[fn]}).map(function(fn){var to=fn.cell,uo=fn.region;return new BoundingBox(to.left+uo.left*to.width,to.top+uo.top*to.height,to.right+uo.right*to.width,to.bottom+uo.bottom*to.height).toSquare().round()})}return{boxes:ln,scores:un}}function extractImagePatches(st,Mt,Xr){var rn=Xr.width,nn=Xr.height;return __awaiter$7(this,void 0,void 0,function(){var an,on,sn,ln=this;return __generator(this,function(un){switch(un.label){case 0:return an=getContext2dOrThrow(st),[4,Promise.all(Mt.map(function(cn){return __awaiter$7(ln,void 0,void 0,function(){var hn,fn,to,uo,co,Uo,lo,ho;return __generator(this,function(fo){return hn=cn.padAtBorders(st.height,st.width),fn=hn.y,to=hn.ey,uo=hn.x,co=hn.ex,Uo=uo-1,lo=fn-1,ho=an.getImageData(Uo,lo,co-Uo,to-lo),[2,env.isNodejs()?createCanvasFromMedia(ho):createImageBitmap(ho)]})})}))];case 1:return on=un.sent(),sn=[],on.forEach(function(cn){var hn=createCanvas({width:rn,height:nn}),fn=getContext2dOrThrow(hn);fn.drawImage(cn,0,0,rn,nn);for(var to=fn.getImageData(0,0,rn,nn).data,uo=[],co=0;co<to.length;co+=4)uo.push(to[co+2]),uo.push(to[co+1]),uo.push(to[co]);sn.push(uo)}),[2,sn.map(function(cn){var hn=Ze(function(){var fn=Wl(Ln(cn,[1,rn,nn,3]),[0,2,1,3]).toFloat();return normalize(fn)});return hn})]}})})}function RNet(st,Mt){return Ze(function(){var Xr=sharedLayer(st,Mt),rn=Or(Xr,[Xr.shape[0],Mt.fc1.weights.shape[0]]),nn=fullyConnectedLayer(rn,Mt.fc1),an=prelu(nn,Mt.prelu4_alpha),on=fullyConnectedLayer(an,Mt.fc2_1),sn=wr(Sl(on,1),1),ln=go(Cc(on,sn),1),un=fullyConnectedLayer(an,Mt.fc2_2),cn=Ur(ln,1)[1];return{scores:cn,regions:un}})}function stage2(st,Mt,Xr,rn,nn){return __awaiter$7(this,void 0,void 0,function(){var an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho;return __generator(this,function(fo){switch(fo.label){case 0:return an=Date.now(),[4,extractImagePatches(st,Mt,{width:24,height:24})];case 1:return on=fo.sent(),nn.stage2_extractImagePatches=Date.now()-an,an=Date.now(),sn=on.map(function(mo){var _d=RNet(mo,rn);return mo.dispose(),_d}),nn.stage2_rnet=Date.now()-an,ln=sn.length>1?Yn(sn.map(function(mo){return mo.scores})):sn[0].scores,hn=(cn=Array).from,[4,ln.data()];case 2:return un=hn.apply(cn,[fo.sent()]),ln.dispose(),fn=un.map(function(mo,_d){return{score:mo,idx:_d}}).filter(function(mo){return mo.score>Xr}).map(function(mo){var _d=mo.idx;return _d}),to=fn.map(function(mo){return Mt[mo]}),uo=fn.map(function(mo){return un[mo]}),co=[],Uo=[],to.length>0&&(an=Date.now(),lo=nonMaxSuppression$1(to,uo,.7),nn.stage2_nms=Date.now()-an,ho=lo.map(function(mo){var _d=sn[fn[mo]].regions.arraySync();return new MtcnnBox(_d[0][0],_d[0][1],_d[0][2],_d[0][3])}),Uo=lo.map(function(mo){return uo[mo]}),co=lo.map(function(mo,_d){return to[mo].calibrate(ho[_d])})),sn.forEach(function(mo){mo.regions.dispose(),mo.scores.dispose()}),[2,{boxes:co,scores:Uo}]}})})}function ONet(st,Mt){return Ze(function(){var Xr=sharedLayer(st,Mt);Xr=hl(Xr,[2,2],[2,2],"same"),Xr=convLayer$1(Xr,Mt.conv4,"valid"),Xr=prelu(Xr,Mt.prelu4_alpha);var rn=Or(Xr,[Xr.shape[0],Mt.fc1.weights.shape[0]]),nn=fullyConnectedLayer(rn,Mt.fc1),an=prelu(nn,Mt.prelu5_alpha),on=fullyConnectedLayer(an,Mt.fc2_1),sn=wr(Sl(on,1),1),ln=go(Cc(on,sn),1),un=fullyConnectedLayer(an,Mt.fc2_2),cn=fullyConnectedLayer(an,Mt.fc2_3),hn=Ur(ln,1)[1];return{scores:hn,regions:un,points:cn}})}function stage3(st,Mt,Xr,rn,nn){return __awaiter$7(this,void 0,void 0,function(){var an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo;return __generator(this,function(mo){switch(mo.label){case 0:return an=Date.now(),[4,extractImagePatches(st,Mt,{width:48,height:48})];case 1:return on=mo.sent(),nn.stage3_extractImagePatches=Date.now()-an,an=Date.now(),sn=on.map(function(_d){var ep=ONet(_d,rn);return _d.dispose(),ep}),nn.stage3_onet=Date.now()-an,ln=sn.length>1?Yn(sn.map(function(_d){return _d.scores})):sn[0].scores,hn=(cn=Array).from,[4,ln.data()];case 2:return un=hn.apply(cn,[mo.sent()]),ln.dispose(),fn=un.map(function(_d,ep){return{score:_d,idx:ep}}).filter(function(_d){return _d.score>Xr}).map(function(_d){var ep=_d.idx;return ep}),to=fn.map(function(_d){var ep=sn[_d].regions.arraySync();return new MtcnnBox(ep[0][0],ep[0][1],ep[0][2],ep[0][3])}),uo=fn.map(function(_d,ep){return Mt[_d].calibrate(to[ep])}),co=fn.map(function(_d){return un[_d]}),Uo=[],lo=[],ho=[],uo.length>0&&(an=Date.now(),fo=nonMaxSuppression$1(uo,co,.7,!1),nn.stage3_nms=Date.now()-an,Uo=fo.map(function(_d){return uo[_d]}),lo=fo.map(function(_d){return co[_d]}),ho=fo.map(function(_d,ep){return Array(5).fill(0).map(function(rp,ap){var sp=sn[_d].points.arraySync();return new Point(sp[0][ap]*(Uo[ep].width+1)+Uo[ep].left,sp[0][ap+5]*(Uo[ep].height+1)+Uo[ep].top)})})),sn.forEach(function(_d){_d.regions.dispose(),_d.scores.dispose(),_d.points.dispose()}),[2,{boxes:Uo,scores:lo,points:ho}]}})})}var Mtcnn=function(st){__extends(Mt,st);function Mt(){return st.call(this,"Mtcnn")||this}return Mt.prototype.load=function(Xr){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(rn){return console.warn("mtcnn is deprecated and will be removed soon"),[2,st.prototype.load.call(this,Xr)]})})},Mt.prototype.loadFromDisk=function(Xr){return __awaiter$7(this,void 0,void 0,function(){return __generator(this,function(rn){return console.warn("mtcnn is deprecated and will be removed soon"),[2,st.prototype.loadFromDisk.call(this,Xr)]})})},Mt.prototype.forwardInput=function(Xr,rn){return rn===void 0&&(rn={}),__awaiter$7(this,void 0,void 0,function(){var nn,an,on,sn,ln,un,cn,hn,fn,to,uo,co,Uo,lo,ho,fo,mo,_d,ep,rp,ap;return __generator(this,function(sp){switch(sp.label){case 0:if(nn=this.params,!nn)throw new Error("Mtcnn - load model before inference");if(an=Xr.canvases[0],!an)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return on={},sn=Date.now(),ln=Ze(function(){return bgrToRgbTensor(wr(id.fromPixels(an)).toFloat())}),un=function(up){return ln.dispose(),on.total=Date.now()-sn,up},cn=ln.shape.slice(1),hn=cn[0],fn=cn[1],to=new MtcnnOptions(rn),uo=to.minFaceSize,co=to.scaleFactor,Uo=to.maxNumScales,lo=to.scoreThresholds,ho=to.scaleSteps,fo=(ho||pyramidDown(uo,co,[hn,fn])).filter(function(up){var pp=getSizesForScale(up,[hn,fn]);return Math.min(pp.width,pp.height)>CELL_SIZE}).slice(0,Uo),on.scales=fo,on.pyramid=fo.map(function(up){return getSizesForScale(up,[hn,fn])}),mo=Date.now(),[4,stage1(ln,fo,lo[0],nn.pnet,on)];case 1:return _d=sp.sent(),on.total_stage1=Date.now()-mo,_d.boxes.length?(on.stage2_numInputBoxes=_d.boxes.length,mo=Date.now(),[4,stage2(an,_d.boxes,lo[1],nn.rnet,on)]):[2,un({results:[],stats:on})];case 2:return ep=sp.sent(),on.total_stage2=Date.now()-mo,ep.boxes.length?(on.stage3_numInputBoxes=ep.boxes.length,mo=Date.now(),[4,stage3(an,ep.boxes,lo[2],nn.onet,on)]):[2,un({results:[],stats:on})];case 3:return rp=sp.sent(),on.total_stage3=Date.now()-mo,ap=rp.boxes.map(function(up,pp){return extendWithFaceLandmarks(extendWithFaceDetection({},new FaceDetection(rp.scores[pp],new Rect(up.left/fn,up.top/hn,up.width/fn,up.height/hn),{height:hn,width:fn})),new FaceLandmarks5(rp.points[pp].map(function(hp){return hp.sub(new Point(up.left,up.top)).div(new Point(up.width,up.height))}),{width:up.width,height:up.height}))}),[2,un({results:ap,stats:on})]}})})},Mt.prototype.forward=function(Xr,rn){return rn===void 0&&(rn={}),__awaiter$7(this,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return nn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[4,nn.apply(this,[an.sent(),rn])];case 2:return[2,an.sent().results]}})})},Mt.prototype.forwardWithStats=function(Xr,rn){return rn===void 0&&(rn={}),__awaiter$7(this,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return nn=this.forwardInput,[4,toNetInput(Xr)];case 1:return[2,nn.apply(this,[an.sent(),rn])]}})})},Mt.prototype.getDefaultModelName=function(){return"mtcnn_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return extractParamsFromWeigthMap(Xr)},Mt.prototype.extractParams=function(Xr){return extractParams(Xr)},Mt}(NeuralNetwork),IOU_THRESHOLD=.4,BOX_ANCHORS=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB=[117.001,114.697,97.404],TinyFaceDetector=function(st){__extends(Mt,st);function Mt(){var Xr=this,rn={withSeparableConvs:!0,iouThreshold:IOU_THRESHOLD,classes:["face"],anchors:BOX_ANCHORS,meanRgb:MEAN_RGB,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return Xr=st.call(this,rn)||this,Xr}return Object.defineProperty(Mt.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),Mt.prototype.locateFaces=function(Xr,rn){return __awaiter$7(this,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return[4,this.detect(Xr,rn)];case 1:return nn=an.sent(),[2,nn.map(function(on){return new FaceDetection(on.score,on.relativeBox,{width:on.imageWidth,height:on.imageHeight})})]}})})},Mt.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},Mt.prototype.extractParamsFromWeigthMap=function(Xr){return st.prototype.extractParamsFromWeigthMap.call(this,Xr)},Mt}(TinyYolov2Base),nets={ssdMobilenetv1:new SsdMobilenetv1,tinyFaceDetector:new TinyFaceDetector,tinyYolov2:new TinyYolov2,mtcnn:new Mtcnn,faceLandmark68Net:new FaceLandmark68Net,faceLandmark68TinyNet:new FaceLandmark68TinyNet,faceRecognitionNet:new FaceRecognitionNet,faceExpressionNet:new FaceExpressionNet,ageGenderNet:new AgeGenderNet},PredictFaceExpressionsTaskBase=function(st){__extends(Mt,st);function Mt(Xr,rn,nn){var an=st.call(this)||this;return an.parentTask=Xr,an.input=rn,an.extractedFaces=nn,an}return Mt}(ComposableTask),PredictAllFaceExpressionsTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn=this;return __generator(this,function(an){switch(an.label){case 0:return[4,this.parentTask];case 1:return Xr=an.sent(),[4,extractAllFacesAndComputeResults(Xr,this.input,function(on){return __awaiter$7(nn,void 0,void 0,function(){return __generator(this,function(sn){switch(sn.label){case 0:return[4,Promise.all(on.map(function(ln){return nets.faceExpressionNet.predictExpressions(ln)}))];case 1:return[2,sn.sent()]}})})},this.extractedFaces)];case 2:return rn=an.sent(),[2,Xr.map(function(on,sn){return extendWithFaceExpressions(on,rn[sn])})]}})})},Mt.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this,this.input)},Mt}(PredictFaceExpressionsTaskBase),PredictSingleFaceExpressionsTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:return[4,this.parentTask];case 1:return Xr=nn.sent(),Xr?[4,extractSingleFaceAndComputeResult(Xr,this.input,function(an){return nets.faceExpressionNet.predictExpressions(an)},this.extractedFaces)]:[2];case 2:return rn=nn.sent(),[2,extendWithFaceExpressions(Xr,rn)]}})})},Mt.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this,this.input)},Mt}(PredictFaceExpressionsTaskBase),PredictAllFaceExpressionsWithFaceAlignmentTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},Mt}(PredictAllFaceExpressionsTask),PredictSingleFaceExpressionsWithFaceAlignmentTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},Mt}(PredictSingleFaceExpressionsTask),PredictAgeAndGenderTaskBase=function(st){__extends(Mt,st);function Mt(Xr,rn,nn){var an=st.call(this)||this;return an.parentTask=Xr,an.input=rn,an.extractedFaces=nn,an}return Mt}(ComposableTask),PredictAllAgeAndGenderTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn=this;return __generator(this,function(an){switch(an.label){case 0:return[4,this.parentTask];case 1:return Xr=an.sent(),[4,extractAllFacesAndComputeResults(Xr,this.input,function(on){return __awaiter$7(nn,void 0,void 0,function(){return __generator(this,function(sn){switch(sn.label){case 0:return[4,Promise.all(on.map(function(ln){return nets.ageGenderNet.predictAgeAndGender(ln)}))];case 1:return[2,sn.sent()]}})})},this.extractedFaces)];case 2:return rn=an.sent(),[2,Xr.map(function(on,sn){var ln=rn[sn],un=ln.age,cn=ln.gender,hn=ln.genderProbability;return extendWithAge(extendWithGender(on,cn,hn),un)})]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this,this.input)},Mt}(PredictAgeAndGenderTaskBase),PredictSingleAgeAndGenderTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on;return __generator(this,function(sn){switch(sn.label){case 0:return[4,this.parentTask];case 1:return Xr=sn.sent(),Xr?[4,extractSingleFaceAndComputeResult(Xr,this.input,function(ln){return nets.ageGenderNet.predictAgeAndGender(ln)},this.extractedFaces)]:[2];case 2:return rn=sn.sent(),nn=rn.age,an=rn.gender,on=rn.genderProbability,[2,extendWithAge(extendWithGender(Xr,an,on),nn)]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this,this.input)},Mt}(PredictAgeAndGenderTaskBase),PredictAllAgeAndGenderWithFaceAlignmentTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},Mt}(PredictAllAgeAndGenderTask),PredictSingleAgeAndGenderWithFaceAlignmentTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},Mt}(PredictSingleAgeAndGenderTask),ComputeFaceDescriptorsTaskBase=function(st){__extends(Mt,st);function Mt(Xr,rn){var nn=st.call(this)||this;return nn.parentTask=Xr,nn.input=rn,nn}return Mt}(ComposableTask),ComputeAllFaceDescriptorsTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:return[4,this.parentTask];case 1:return Xr=nn.sent(),[4,extractAllFacesAndComputeResults(Xr,this.input,function(an){return Promise.all(an.map(function(on){return nets.faceRecognitionNet.computeFaceDescriptor(on)}))},null,function(an){return an.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return rn=nn.sent(),[2,rn.map(function(an,on){return extendWithFaceDescriptor(Xr[on],an)})]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt}(ComputeFaceDescriptorsTaskBase),ComputeSingleFaceDescriptorTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:return[4,this.parentTask];case 1:return Xr=nn.sent(),Xr?[4,extractSingleFaceAndComputeResult(Xr,this.input,function(an){return nets.faceRecognitionNet.computeFaceDescriptor(an)},null,function(an){return an.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return rn=nn.sent(),[2,extendWithFaceDescriptor(Xr,rn)]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt}(ComputeFaceDescriptorsTaskBase),DetectFaceLandmarksTaskBase=function(st){__extends(Mt,st);function Mt(Xr,rn,nn){var an=st.call(this)||this;return an.parentTask=Xr,an.input=rn,an.useTinyLandmarkNet=nn,an}return Object.defineProperty(Mt.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?nets.faceLandmark68TinyNet:nets.faceLandmark68Net},enumerable:!0,configurable:!0}),Mt}(ComposableTask),DetectAllFaceLandmarksTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on,sn=this;return __generator(this,function(ln){switch(ln.label){case 0:return[4,this.parentTask];case 1:return Xr=ln.sent(),rn=Xr.map(function(un){return un.detection}),this.input instanceof wt?[4,extractFaceTensors(this.input,rn)]:[3,3];case 2:return an=ln.sent(),[3,5];case 3:return[4,extractFaces(this.input,rn)];case 4:an=ln.sent(),ln.label=5;case 5:return nn=an,[4,Promise.all(nn.map(function(un){return sn.landmarkNet.detectLandmarks(un)}))];case 6:return on=ln.sent(),nn.forEach(function(un){return un instanceof wt&&un.dispose()}),[2,Xr.map(function(un,cn){return extendWithFaceLandmarks(un,on[cn])})]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},Mt}(DetectFaceLandmarksTaskBase),DetectSingleFaceLandmarksTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an,on;return __generator(this,function(sn){switch(sn.label){case 0:return[4,this.parentTask];case 1:return Xr=sn.sent(),Xr?(rn=Xr.detection,this.input instanceof wt?[4,extractFaceTensors(this.input,[rn])]:[3,3]):[2];case 2:return an=sn.sent(),[3,5];case 3:return[4,extractFaces(this.input,[rn])];case 4:an=sn.sent(),sn.label=5;case 5:return nn=an,[4,this.landmarkNet.detectLandmarks(nn[0])];case 6:return on=sn.sent(),nn.forEach(function(ln){return ln instanceof wt&&ln.dispose()}),[2,extendWithFaceLandmarks(Xr,on)]}})})},Mt.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},Mt.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},Mt}(DetectFaceLandmarksTaskBase),DetectFacesTaskBase=function(st){__extends(Mt,st);function Mt(Xr,rn){rn===void 0&&(rn=new SsdMobilenetv1Options);var nn=st.call(this)||this;return nn.input=Xr,nn.options=rn,nn}return Mt}(ComposableTask),DetectAllFacesTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn,nn,an;return __generator(this,function(on){switch(on.label){case 0:return Xr=this,rn=Xr.input,nn=Xr.options,nn instanceof MtcnnOptions?[4,nets.mtcnn.forward(rn,nn)]:[3,2];case 1:return[2,on.sent().map(function(sn){return sn.detection})];case 2:if(an=nn instanceof TinyFaceDetectorOptions?function(sn){return nets.tinyFaceDetector.locateFaces(sn,nn)}:nn instanceof SsdMobilenetv1Options?function(sn){return nets.ssdMobilenetv1.locateFaces(sn,nn)}:nn instanceof TinyYolov2Options?function(sn){return nets.tinyYolov2.locateFaces(sn,nn)}:null,!an)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,an(rn)]}})})},Mt.prototype.runAndExtendWithFaceDetections=function(){var Xr=this;return new Promise(function(rn){return __awaiter$7(Xr,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return[4,this.run()];case 1:return nn=an.sent(),[2,rn(nn.map(function(on){return extendWithFaceDetection({},on)}))]}})})})},Mt.prototype.withFaceLandmarks=function(Xr){return Xr===void 0&&(Xr=!1),new DetectAllFaceLandmarksTask(this.runAndExtendWithFaceDetections(),this.input,Xr)},Mt.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this.runAndExtendWithFaceDetections(),this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this.runAndExtendWithFaceDetections(),this.input)},Mt}(DetectFacesTaskBase),DetectSingleFaceTask=function(st){__extends(Mt,st);function Mt(){return st!==null&&st.apply(this,arguments)||this}return Mt.prototype.run=function(){return __awaiter$7(this,void 0,void 0,function(){var Xr,rn;return __generator(this,function(nn){switch(nn.label){case 0:return[4,new DetectAllFacesTask(this.input,this.options)];case 1:return Xr=nn.sent(),rn=Xr[0],Xr.forEach(function(an){an.score>rn.score&&(rn=an)}),[2,rn]}})})},Mt.prototype.runAndExtendWithFaceDetection=function(){var Xr=this;return new Promise(function(rn){return __awaiter$7(Xr,void 0,void 0,function(){var nn;return __generator(this,function(an){switch(an.label){case 0:return[4,this.run()];case 1:return nn=an.sent(),[2,rn(nn?extendWithFaceDetection({},nn):void 0)]}})})})},Mt.prototype.withFaceLandmarks=function(Xr){return Xr===void 0&&(Xr=!1),new DetectSingleFaceLandmarksTask(this.runAndExtendWithFaceDetection(),this.input,Xr)},Mt.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this.runAndExtendWithFaceDetection(),this.input)},Mt.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this.runAndExtendWithFaceDetection(),this.input)},Mt}(DetectFacesTaskBase);function detectSingleFace(st,Mt){return Mt===void 0&&(Mt=new SsdMobilenetv1Options),new DetectSingleFaceTask(st,Mt)}function detectAllFaces(st,Mt){return Mt===void 0&&(Mt=new SsdMobilenetv1Options),new DetectAllFacesTask(st,Mt)}function euclideanDistance(st,Mt){if(st.length!==Mt.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var Xr=Array.from(st),rn=Array.from(Mt);return Math.sqrt(Xr.map(function(nn,an){return nn-rn[an]}).reduce(function(nn,an){return nn+Math.pow(an,2)},0))}var FaceMatcher=function(){function st(Mt,Xr){Xr===void 0&&(Xr=.6),this._distanceThreshold=Xr;var rn=Array.isArray(Mt)?Mt:[Mt];if(!rn.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var nn=1,an=function(){return"person "+nn++};this._labeledDescriptors=rn.map(function(on){if(on instanceof LabeledFaceDescriptors)return on;if(on instanceof Float32Array)return new LabeledFaceDescriptors(an(),[on]);if(on.descriptor&&on.descriptor instanceof Float32Array)return new LabeledFaceDescriptors(an(),[on.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(st.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),st.prototype.computeMeanDistance=function(Mt,Xr){return Xr.map(function(rn){return euclideanDistance(rn,Mt)}).reduce(function(rn,nn){return rn+nn},0)/(Xr.length||1)},st.prototype.matchDescriptor=function(Mt){var Xr=this;return this.labeledDescriptors.map(function(rn){var nn=rn.descriptors,an=rn.label;return new FaceMatch(an,Xr.computeMeanDistance(Mt,nn))}).reduce(function(rn,nn){return rn.distance<nn.distance?rn:nn})},st.prototype.findBestMatch=function(Mt){var Xr=this.matchDescriptor(Mt);return Xr.distance<this.distanceThreshold?Xr:new FaceMatch("unknown",Xr.distance)},st.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(Mt){return Mt.toJSON()})}},st.fromJSON=function(Mt){var Xr=Mt.labeledDescriptors.map(function(rn){return LabeledFaceDescriptors.fromJSON(rn)});return new st(Xr,Mt.distanceThreshold)},st}();function resizeResults(st,Mt){var Xr=new Dimensions(Mt.width,Mt.height),rn=Xr.width,nn=Xr.height;if(rn<=0||nn<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:rn,height:nn}));if(Array.isArray(st))return st.map(function(sn){return resizeResults(sn,{width:rn,height:nn})});if(isWithFaceLandmarks(st)){var an=st.detection.forSize(rn,nn),on=st.unshiftedLandmarks.forSize(an.box.width,an.box.height);return extendWithFaceLandmarks(extendWithFaceDetection(st,an),on)}return isWithFaceDetection(st)?extendWithFaceDetection(st,st.detection.forSize(rn,nn)):st instanceof FaceLandmarks||st instanceof FaceDetection?st.forSize(rn,nn):st}const nm$1="Search",ddd$1=0,h$3=500,w$3=500,meta$1={g:"@lottiefiles/toolkit-js 0.33.2"},layers$1=[{ty:4,nm:"Check Middle",sr:1,st:-60,op:145,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.134,y:1},s:[100,100,100],t:4},{s:[69,69,100],t:16}],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[250,250,0],t:2,ti:[33,0,0],to:[-33,0,0]},{s:[52,250,0],t:14}],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:2},{s:[0],t:20}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-52.5,11.5],[-11,50.5],[60.5,-34.5]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:15,ix:5},c:{a:0,k:[.1216,.8863,.302],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"Check Right",sr:1,st:-2,op:144,ip:58,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[250,250,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Shape 1",ix:1,cix:2,np:3,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-52.5,11.5],[-11,50.5],[60.5,-34.5]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:15,ix:5},c:{a:0,k:[.1569,.6549,.2706],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:2,e:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:58},{s:[100],t:65}],ix:2},o:{a:0,k:0,ix:3},s:{a:0,k:0,ix:1},m:1}],ind:2},{ty:4,nm:"Magnifying Glass",sr:1,st:0,op:144,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[86,86,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[-31.335,-31.31,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,-29.547],[29.547,0],[0,29.547],[-29.547,0]],o:[[0,29.547],[-29.547,0],[0,-29.547],[29.547,0]],v:[[53.5,0],[0,53.5],[-53.5,0],[0,-53.5]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:10,o:{a:0,k:100,ix:4},w:{a:0,k:13,ix:5},c:{a:0,k:[0,0,0],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[86,86],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3,parent:4},{ty:4,nm:"Handle",sr:1,st:0,op:144,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-30.17,-31.17,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.394,y:1},s:[648.829,532.045,0],t:18,ti:[33.833,65.833,0],to:[-71.333,-60.333,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[220.829,170.045,0],t:24,ti:[0,0,0],to:[0,0,0]},{o:{x:.216,y:0},i:{x:0,y:1},s:[220.829,170.045,0],t:28,ti:[-17.667,-10.167,0],to:[13.667,-11.333,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[284.829,168.045,0],t:32,ti:[0,0,0],to:[0,0,0]},{o:{x:.375,y:0},i:{x:.057,y:1},s:[284.829,168.045,0],t:34,ti:[-2.631,-12.748,0],to:[1.667,31.5,0]},{o:{x:.981,y:0},i:{x:.826,y:1},s:[216.829,246.045,0],t:37,ti:[-9.667,-12,0],to:[4.333,21,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[280.829,246.045,0],t:41,ti:[0,0,0],to:[0,0,0]},{o:{x:.333,y:0},i:{x:.04,y:1},s:[280.829,246.045,0],t:44,ti:[-1,-13,0],to:[-2.167,23.667,0]},{o:{x:.871,y:0},i:{x:.667,y:1},s:[222.829,322.045,0],t:48,ti:[-10.667,-.333,0],to:[1,13,0]},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[286.829,324.045,0],t:54,ti:[0,0,0],to:[0,0,0]},{o:{x:.923,y:0},i:{x:.667,y:1},s:[286.829,324.045,0],t:56,ti:[-60.667,-35.333,0],to:[60.667,35.333,0]},{s:[650.829,536.045,0],t:60}],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.221,1.12],[0,0],[1.122,-1.22],[0,0],[-1.221,-1.121],[0,0],[-1.12,1.221],[0,0]],o:[[0,0],[-1.221,-1.12],[0,0],[-1.121,1.221],[0,0],[1.22,1.121],[0,0],[1.121,-1.219]],v:[[46.352,42.076],[-23.804,-22.35],[-28.044,-22.169],[-36.836,-12.594],[-36.656,-8.355],[33.501,56.07],[37.74,55.889],[46.533,46.314]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,.1373,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[38.207,23.72],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"Profile",sr:1,st:4,op:144,ip:9,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[21.129,20.971,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:9},{s:[93.913,93.913,100],t:15}],ix:6,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.08;
    freq = 3;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},sk:{a:0,k:0},p:{a:0,k:[37.904,43.851,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Profile",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[3.642,0],[0,0],[0,3.642],[0,0],[-3.643,0],[0,0],[0,-3.642],[0,0]],o:[[0,0],[-3.643,0],[0,0],[0,-3.642],[0,0],[3.642,0],[0,0],[0,3.642]],v:[[14.126,20.72],[-14.126,20.72],[-20.721,14.126],[-20.721,-14.126],[-14.126,-20.72],[14.126,-20.72],[20.721,-14.126],[20.721,14.126]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.129,20.971],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5,parent:13},{ty:4,nm:"Line 1",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[50.672,13.223,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:10},{s:[93.883,93.883,100],t:16}],ix:6},sk:{a:0,k:0},p:{a:0,k:[65.64,36.578,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:10},{s:[100],t:16}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[20.074,4.963],[-20.074,4.963],[-23.074,1.963],[-23.074,-1.963],[-20.074,-4.963],[20.074,-4.963],[23.074,-1.963],[23.074,1.963]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.746,13.223],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6,parent:13},{ty:4,nm:"Line 2",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[50.421,32.288,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:11},{s:[93.883,93.883,100],t:17}],ix:6},sk:{a:0,k:0},p:{a:0,k:[65.972,54.476,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:11},{s:[100],t:17}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 2",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.658],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.658],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[20.576,4.962],[-20.576,4.962],[-23.576,1.962],[-23.576,-1.962],[-20.576,-4.962],[20.576,-4.962],[23.576,-1.962],[23.576,1.962]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.996,32.288],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7,parent:13},{ty:4,nm:"Line 3",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[.501,60.383,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:12},{s:[93.883,93.883,100],t:18}],ix:6},sk:{a:0,k:0},p:{a:0,k:[18.539,80.853,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:12},{s:[100],t:18}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 3",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[45.159,4.963],[-45.159,4.963],[-48.159,1.963],[-48.159,-1.963],[-45.159,-4.963],[45.159,-4.963],[48.159,-1.963],[48.159,1.963]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.66,60.383],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8,parent:13},{ty:4,nm:"Line 4",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[.752,83.963,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:13},{s:[93.883,93.883,100],t:19}],ix:6},sk:{a:0,k:0},p:{a:0,k:[18.774,102.99,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:13},{s:[100],t:19}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 4",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[45.034,4.962],[-45.034,4.962],[-48.034,1.962],[-48.034,-1.962],[-45.034,-4.962],[45.034,-4.962],[48.034,-1.962],[48.034,1.962]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.786,83.963],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:9,parent:13},{ty:4,nm:"Line 5",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[.25,107.543,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:14},{s:[93.883,93.883,100],t:20}],ix:6},sk:{a:0,k:0},p:{a:0,k:[18.303,125.128,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:14},{s:[100],t:20}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 5",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[45.661,4.962],[-45.661,4.962],[-48.661,1.962],[-48.661,-1.962],[-45.661,-4.962],[45.661,-4.962],[48.661,-1.962],[48.661,1.962]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.911,107.543],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:10,parent:13},{ty:4,nm:"Line 6",sr:1,st:5,op:144,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[.25,131.876,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:15},{s:[93.883,93.883,100],t:21}],ix:6},sk:{a:0,k:0},p:{a:0,k:[18.303,147.972,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:15},{s:[100],t:21}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 6",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.656],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.656],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[45.661,4.963],[-45.661,4.963],[-48.661,1.963],[-48.661,-1.963],[-45.661,-4.963],[45.661,-4.963],[48.661,-1.963],[48.661,1.963]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.911,131.876],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:11,parent:13},{ty:4,nm:"Line 7",sr:1,st:5,op:145,ip:10,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[.501,155.958,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,93.883,100],t:16},{s:[93.883,93.883,100],t:22}],ix:6},sk:{a:0,k:0},p:{a:0,k:[18.539,170.581,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:16},{s:[100],t:22}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Line 7",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.656],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.656]],v:[[45.159,4.963],[-45.159,4.963],[-48.159,1.963],[-48.159,-1.963],[-45.159,-4.963],[45.159,-4.963],[48.159,-1.963],[48.159,1.963]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.66,155.958],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:12,parent:13},{ty:4,nm:"Right Page 1",sr:1,st:-6,op:145,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[64.304,101.087,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100,94.05,100],t:4},{s:[138,138,100],t:16}],ix:6,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[435.776,247,0],t:4,ti:[30.833,-.003,0],to:[-30.833,.003,0]},{s:[250.776,247.017,0],t:16}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0]],o:[[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],v:[[51.292,100.837],[-51.293,100.837],[-64.054,88.076],[-64.054,-88.076],[-51.293,-100.837],[51.292,-100.837],[64.054,-88.076],[64.054,88.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[.9176,.9176,.9176],t:4},{s:[1,1,1],t:16}],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[101.747,96.634],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.304,101.087],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:13},{ty:4,nm:"Right Page 2",sr:1,st:4,op:148,ip:4,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[64.304,101.087,0],ix:1},s:{a:0,k:[100,88.1,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[575.776,252.017,0],t:8,ti:[23.333,.833,0],to:[-23.333,-.833,0]},{s:[435.776,247.017,0],t:20}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 9",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.047],[0,0]],o:[[0,0],[-7.048,0],[0,0],[0,-7.047],[0,0],[7.048,0],[0,0],[0,7.048]],v:[[51.292,100.837],[-51.293,100.837],[-64.054,88.076],[-64.054,-88.076],[-51.293,-100.837],[51.292,-100.837],[64.054,-88.076],[64.054,88.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9176,.9176,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.304,101.087],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:14},{ty:4,nm:"Left Page 1",sr:1,st:0,op:145,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[64.303,101.087,0],ix:1},s:{a:0,k:[100,93.058,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[64.898,247.073,0],t:-2,ti:[26.333,0,0],to:[-26.333,0,0]},{s:[-93.102,247.073,0],t:10}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0]],o:[[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],v:[[51.293,100.837],[-51.292,100.837],[-64.053,88.075],[-64.053,-88.076],[-51.292,-100.837],[51.293,-100.837],[64.054,-88.076],[64.054,88.075]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9176,.9176,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.303,101.087],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:15},{ty:4,nm:"Middle Text",sr:1,st:0,op:144,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[64.911,107,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:3},{s:[75,75,100],t:15}],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[249.339,244.683,0],t:2,ti:[30.667,0,0],to:[-30.667,0,0]},{s:[65.339,244.683,0],t:14}],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:2},{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:8},{s:[0],t:14}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[3.642,0],[0,0],[0,3.642],[0,0],[-3.642,0],[0,0],[0,-3.642],[0,0]],o:[[0,0],[-3.642,0],[0,0],[0,-3.642],[0,0],[3.642,0],[0,0],[0,3.642]],v:[[20.939,27.533],[-20.939,27.533],[-27.534,20.939],[-27.534,-20.939],[-20.939,-27.533],[20.939,-27.533],[27.534,-20.939],[27.534,20.939]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[27.993,27.784],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 2",ix:2,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.656],[0,0],[-1.657,0],[0,0],[0,-1.658],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.658],[0,0],[1.657,0],[0,0],[0,1.656]],v:[[61.661,6.594],[-61.661,6.594],[-64.661,3.594],[-64.661,-3.594],[-61.661,-6.594],[61.661,-6.594],[64.661,-3.594],[64.661,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.911,142.822],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 3",ix:3,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[60.827,6.594],[-60.827,6.594],[-63.827,3.594],[-63.827,-3.594],[-60.827,-6.594],[60.827,-6.594],[63.827,-3.594],[63.827,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.744,111.488],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 4",ix:4,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[28.327,6.594],[-28.327,6.594],[-31.327,3.594],[-31.327,-3.594],[-28.327,-6.594],[28.327,-6.594],[31.327,-3.594],[31.327,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.244,42.822],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 5",ix:5,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[27.661,6.594],[-27.661,6.594],[-30.661,3.594],[-30.661,-3.594],[-27.661,-6.594],[27.661,-6.594],[30.661,-3.594],[30.661,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.911,17.489],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 6",ix:6,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[60.995,6.594],[-60.995,6.594],[-63.995,3.594],[-63.995,-3.594],[-60.995,-6.594],[60.995,-6.594],[63.995,-3.594],[63.995,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.577,80.155],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 7",ix:7,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[61.661,6.594],[-61.661,6.594],[-64.661,3.594],[-64.661,-3.594],[-61.661,-6.594],[61.661,-6.594],[64.661,-3.594],[64.661,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.911,175.155],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 8",ix:8,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],o:[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],v:[[60.995,6.594],[-60.995,6.594],[-63.995,3.594],[-63.995,-3.594],[-60.995,-6.594],[60.995,-6.594],[63.995,-3.594],[63.995,3.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8471,.8471,.8471],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[64.577,207.155],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:16},{ty:4,nm:"Middle Page",sr:1,st:0,op:144,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[91.789,134.239,0],ix:1},s:{a:1,k:[{o:{x:.392,y:0},i:{x:.598,y:1},s:[100,100,100],t:3},{s:[69,69,100],t:15}],ix:6,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.377,y:0},i:{x:.667,y:1},s:[227.461,246.517,0],t:2,ti:[30.167,0,0],to:[-30.167,0,0]},{s:[46.461,246.517,0],t:14}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 0.05;
    freq = 2;
    decay = 8;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[7.048,0],[0,0],[0,7.048],[0,0],[-7.047,0],[0,0],[0,-7.048],[0,0]],o:[[0,0],[-7.047,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],v:[[78.779,133.989],[-78.779,133.989],[-91.539,121.227],[-91.539,-121.228],[-78.779,-133.989],[78.779,-133.989],[91.539,-121.228],[91.539,121.227]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 2",c:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[1,1,1],t:2},{s:[.9176,.9176,.9176],t:14}],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.102,134.239],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:17},{ty:4,nm:"Circle",sr:1,st:0,op:144,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[168.508,168.508,0],ix:1},s:{a:0,k:[115.452,115.452,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[246.09,247.079,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,-92.927],[92.927,0],[0,92.926],[-92.927,0]],o:[[0,92.926],[-92.927,0],[0,-92.927],[92.927,0]],v:[[168.258,0],[-.001,168.258],[-168.258,0],[-.001,-168.258]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.3961,.3961,.3961],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[168.508,168.508],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:18}],v$2="5.4.4",fr$1=24,op$1=72,ip$1=0,assets$1=[],Check={nm:nm$1,ddd:ddd$1,h:h$3,w:w$3,meta:meta$1,layers:layers$1,v:v$2,fr:fr$1,op:op$1,ip:ip$1,assets:assets$1},nm="Comp 1",ddd=0,h$2=350,w$2=350,meta={g:"@lottiefiles/toolkit-js 0.21.1",tc:"#ffffff"},layers=[{ty:4,nm:"Shape Layer 14",sr:1,st:15.0000006109625,op:615.000025049463,ip:15.0000006109625,hd:!1,ddd:0,bm:0,hasMask:!0,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.77,y:0},i:{x:.23,y:1},s:[100,100,100],t:15},{s:[100,-100.355,100],t:55.0000022401959}],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175,0],ix:2},r:{a:0,k:304,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:15},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:30},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:36},{s:[0],t:52.0000021180034}],ix:11}},ef:[],masksProperties:[{nm:"Mask 1",inv:!1,mode:"s",x:{a:0,k:0,ix:4},o:{a:0,k:100,ix:3},pt:{a:0,k:{c:!0,i:[[120.95,0],[0,-144.422],[-120.95,0],[0,144.422]],o:[[-120.95,0],[0,144.422],[120.95,0],[0,-144.422]],v:[[0,-126],[-219,135.5],[0,397],[219,135.5]]},ix:1}}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[282,282],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:1,ix:5},c:{a:0,k:[1,1,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,.7725,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[1,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"Shape Layer 13",sr:1,st:6.00000024438501,op:606.000024682886,ip:6.00000024438501,hd:!1,ddd:0,bm:0,hasMask:!0,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.77,y:0},i:{x:.23,y:1},s:[100,100,100],t:6},{s:[100,-100.355,100],t:46.0000018736184}],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175,0],ix:2},r:{a:0,k:90,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:6},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:21},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:27},{s:[0],t:43.0000017514259}],ix:11}},ef:[],masksProperties:[{nm:"Mask 1",inv:!1,mode:"s",x:{a:0,k:0,ix:4},o:{a:0,k:100,ix:3},pt:{a:0,k:{c:!0,i:[[120.95,0],[0,-144.422],[-120.95,0],[0,144.422]],o:[[-120.95,0],[0,144.422],[120.95,0],[0,-144.422]],v:[[0,-126],[-219,135.5],[0,397],[219,135.5]]},ix:1}}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[282,282],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:1,ix:5},c:{a:0,k:[1,1,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,.7725,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[1,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"Shape Layer 12",sr:1,st:0,op:600.000024438501,ip:0,hd:!1,ddd:0,bm:0,hasMask:!0,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.77,y:0},i:{x:.23,y:1},s:[100,100,100],t:0},{s:[100,-100.355,100],t:40.0000016292334}],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:15},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:21},{s:[0],t:38.0000015477717}],ix:11}},ef:[],masksProperties:[{nm:"Mask 1",inv:!1,mode:"s",x:{a:0,k:0,ix:4},o:{a:0,k:100,ix:3},pt:{a:0,k:{c:!0,i:[[120.95,0],[0,-144.422],[-120.95,0],[0,144.422]],o:[[-120.95,0],[0,144.422],[120.95,0],[0,-144.422]],v:[[0,-126],[-219,135.5],[0,397],[219,135.5]]},ix:1}}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[282,282],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:1,ix:5},c:{a:0,k:[1,1,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,.7725,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[1,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"Shape Layer 11",sr:1,st:24.00000097754,op:50.0000020365418,ip:24.00000097754,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-37.5,-42.5,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:24},{s:[100,100,100],t:48.0000019550801}],ix:6},sk:{a:0,k:0},p:{a:0,k:[191.5,179.5,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:33},{s:[0],t:48.0000019550801}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[8,8],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[0,.6118,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2118,.4039,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-37.5,-42.5],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"Shape Layer 10",sr:1,st:17.0000006924242,op:43.0000017514259,ip:17.0000006924242,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-37.5,-42.5,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:17},{s:[100,100,100],t:41.0000016699642}],ix:6},sk:{a:0,k:0},p:{a:0,k:[207,195.5,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:26},{s:[0],t:41.0000016699642}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[8,8],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[0,.6118,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2118,.4039,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-37.5,-42.5],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"Shape Layer 9",sr:1,st:4.00000016292334,op:30.0000012219251,ip:4.00000016292334,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-37.5,-42.5,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:4},{s:[100,100,100],t:28.0000011404634}],ix:6},sk:{a:0,k:0},p:{a:0,k:[146.5,194.5,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:13},{s:[0],t:28.0000011404634}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[8,8],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[0,.6118,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2118,.4039,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-37.5,-42.5],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"Shape Layer 8",sr:1,st:9.00000036657752,op:35.0000014255792,ip:9.00000036657752,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-37.5,-42.5,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:9},{s:[100,100,100],t:33.0000013441176}],ix:6},sk:{a:0,k:0},p:{a:0,k:[208.5,139.5,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:18},{s:[0],t:33.0000013441176}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[8,8],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[0,.6118,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2118,.4039,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-37.5,-42.5],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"Shape Layer 7",sr:1,st:0,op:26.0000010590017,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-37.5,-42.5,0],ix:1},s:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0,0,100],t:0},{s:[100,100,100],t:24.00000097754}],ix:6},sk:{a:0,k:0},p:{a:0,k:[137.5,132.5,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[100],t:9},{s:[0],t:24.00000097754}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[8,8],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:0,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[0,.6118,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2118,.4039,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[-37.5,-42.5],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8},{ty:4,nm:"Shape Layer 6",sr:1,st:0,op:600.000024438501,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.17,y:0},i:{x:.83,y:1},s:[76,76,100],t:0},{o:{x:.17,y:0},i:{x:.83,y:1},s:[71,71,100],t:6},{o:{x:.17,y:0},i:{x:.83,y:1},s:[83,83,100],t:13},{o:{x:.17,y:0},i:{x:.83,y:1},s:[76,76,100],t:22},{o:{x:.17,y:0},i:{x:.83,y:1},s:[87,87,100],t:33},{o:{x:.17,y:0},i:{x:.83,y:1},s:[76,76,100],t:43},{o:{x:.17,y:0},i:{x:.83,y:1},s:[86,86,100],t:55},{o:{x:.17,y:0},i:{x:.83,y:1},s:[81,81,100],t:67},{o:{x:.17,y:0},i:{x:.83,y:1},s:[90,90,100],t:78},{s:[76,76,100],t:92.0000037472368}],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175.812,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:43,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[314,314],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},c:{a:0,k:[.2039,.5451,.7451],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:0,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,-1],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:9},{ty:4,nm:"Shape Layer 1",sr:1,st:0,op:600.000024438501,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[314,314],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},c:{a:0,k:[.0824,.7255,1],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:0,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,-1],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:10},{ty:4,nm:"Shape Layer 2",sr:1,st:0,op:600.000024438501,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[96.203,96.203,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[175,175,0],ix:2},r:{a:1,k:[{o:{x:.75,y:0},i:{x:.25,y:1},s:[-18],t:0},{o:{x:.75,y:0},i:{x:.25,y:1},s:[14.2],t:43},{s:[-18],t:92.0000037472368}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[314,314],ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:1,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:7,ix:5},d:[{nm:"dash",n:"d",v:{a:0,k:4,ix:1}},{nm:"offset",n:"o",v:{a:0,k:0,ix:7}}],c:{a:0,k:[.4431,.4627,.4745],ix:3}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:0,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,-1],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:11},{ty:4,nm:"shutterstock_1290019165 [Converted] Outlines",sr:1,st:0,op:600.000024438501,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[221,153,0],ix:1},s:{a:0,k:[78,78,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[169,175,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-.368,0],[0,-2.186],[2.187,0],[0,2.187],[-.094,.338],[0,0],[0,.498],[0,0],[0,0],[0,0],[0,1.48],[-2.187,0],[0,-2.188],[1.203,-.68]],o:[[0,0],[0,0],[.339,-.094],[2.187,0],[0,2.187],[-2.187,0],[0,-.369],[0,0],[-.379,-.38],[0,0],[0,0],[0,0],[-1.204,-.68],[0,-2.188],[2.186,0],[0,1.478],[0,0]],v:[[-12.064,-12.298],[-12.064,8.042],[12.943,33.05],[14.008,32.906],[17.967,36.864],[14.008,40.825],[10.048,36.864],[10.193,35.801],[-15.385,10.223],[-15.954,8.848],[-15.954,-15.721],[-15.952,-15.721],[-15.952,-33.415],[-17.967,-36.864],[-14.008,-40.825],[-10.049,-36.864],[-12.064,-33.415]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.749,.8471,.8863],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[176.441,222.604],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 2",ix:2,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.203,.68],[0,0],[0,1.48],[-2.187,0],[0,-2.188],[1.202,-.68],[0,0],[0,-1.48],[2.187,0],[0,2.187]],o:[[0,0],[-1.203,-.68],[0,-2.188],[2.187,0],[0,1.478],[0,0],[1.202,.68],[0,2.187],[-2.187,0],[0,-1.48]],v:[[-1.943,10.559],[-1.943,-10.559],[-3.96,-14.008],[0,-17.968],[3.96,-14.008],[1.945,-10.559],[1.945,10.559],[3.96,14.009],[0,17.968],[-3.96,14.009]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[190.449,199.747],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 3",ix:3,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[7.125,-5.596],[.663,.844],[-.843,.664],[-8.779,0],[-7.834,-6.152],[.662,-.843],[.844,.662],[7.918,0]],o:[[-.843,.662],[-.663,-.843],[7.834,-6.152],[8.779,0],[.843,.664],[-.663,.844],[-7.124,-5.596],[-7.918,0]],v:[[-22.977,5.811],[-25.704,5.484],[-25.378,2.757],[0,-6.473],[25.378,2.757],[25.706,5.484],[22.978,5.811],[0,-2.585]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[274.503,153.067],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 4",ix:4,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.709,-4.699],[1.005,.365],[-.365,1.006],[-.031,4.43],[1.691,4.63],[-1.007,.365],[-.364,-1.007],[.035,-4.895]],o:[[-.364,1.007],[-1.007,-.364],[1.564,-4.302],[.031,-4.435],[-.365,-1.006],[1.005,-.365],[1.85,5.062],[-.035,4.903]],v:[[.653,14.67],[-1.831,15.832],[-2.993,13.349],[-.55,.25],[-2.993,-13.348],[-1.831,-15.832],[.653,-14.67],[3.323,.266]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[331.708,171.729],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 5",ix:5,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.203,.68],[0,0],[0,1.479],[-2.187,0],[0,-2.188],[1.203,-.68],[0,0],[0,-1.48],[2.186,0],[0,2.187]],o:[[0,0],[-1.203,-.68],[0,-2.188],[2.186,0],[0,1.479],[0,0],[1.203,.68],[0,2.187],[-2.187,0],[0,-1.479]],v:[[-1.944,10.559],[-1.944,-10.559],[-3.96,-14.008],[.001,-17.968],[3.96,-14.008],[1.945,-10.559],[1.945,10.559],[3.96,14.009],[.001,17.968],[-3.96,14.009]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.749,.8471,.8863],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[134.415,171.729],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.984,-1.984],[3.028,0],[1.991,1.98],[0,0],[0,3.012],[-1.984,1.985],[-3.027,0],[-1.992,-1.98],[0,0],[0,-3.011]],o:[[-1.984,1.984],[-3.009,0],[0,0],[-1.986,-1.992],[0,-3.029],[1.985,-1.983],[3.007,0],[0,0],[1.986,1.993],[0,3.028]],v:[[7.758,7.757],[.001,10.971],[-7.732,7.765],[-7.756,7.741],[-10.97,0],[-7.756,-7.758],[.001,-10.971],[7.734,-7.765],[7.757,-7.742],[10.971,0]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[-.891,0],[-.577,.577],[0,.882],[.568,.567],[0,0],[.891,0],[.577,-.576],[0,-.882],[-.568,-.567],[0,0]],o:[[.882,0],[.576,-.576],[0,-.891],[0,0],[-.567,-.568],[-.882,0],[-.578,.577],[0,.891],[0,0],[.568,.567]],v:[[2.96,-.023],[5.218,-.958],[6.153,-3.216],[5.232,-5.472],[5.217,-5.488],[2.96,-6.408],[.702,-5.474],[-.233,-3.216],[.687,-.958],[.702,-.943]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Merge Paths 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[274.502,157.721],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 7",ix:7,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-2.187,0],[-.68,1.202],[0,0],[0,0],[0,0],[-1.074,0],[0,0],[-1.773,1.646],[0,2.308],[1.073,0],[0,-1.073],[1.283,-1.179],[1.751,0],[0,0],[0,0],[.351,.352],[0,0],[.498,0],[0,0],[1.48,0],[0,-2.187]],o:[[1.479,0],[0,0],[0,0],[0,0],[0,1.073],[0,0],[2.817,0],[2.075,-1.919],[0,-1.073],[-1.073,0],[0,1.296],[-1.115,1.03],[0,0],[0,0],[0,-.538],[0,0],[-.379,-.379],[0,0],[-.68,-1.203],[-2.187,0],[0,2.187]],v:[[-41.019,-37.06],[-37.569,-39.074],[-13.808,-39.074],[13.071,-12.195],[13.071,43.035],[15.016,44.978],[34.684,44.978],[41.683,42.187],[44.978,35.316],[43.033,33.372],[41.089,35.316],[39.055,39.338],[34.684,41.09],[16.96,41.09],[16.96,-13],[16.391,-14.375],[-11.627,-42.394],[-13.002,-42.963],[-37.569,-42.963],[-41.019,-44.978],[-44.978,-41.019]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.749,.8471,.8863],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[203.452,170.722],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.48,0],[0,2.187],[-2.187,0],[-.679,-1.203],[0,0],[-1.55,1.549],[-3.029,0],[-1.984,-1.983],[0,-3.029],[1.986,-1.986],[0,0],[3.013,0],[1.969,1.842],[0,0],[.403,2.251],[0,0]],o:[[-2.187,0],[0,-2.186],[1.48,0],[0,0],[.403,-2.25],[1.984,-1.985],[3.027,0],[1.986,1.985],[0,3.028],[0,0],[-1.993,1.989],[-2.888,0],[0,0],[-1.551,-1.55],[0,0],[-.679,1.204]],v:[[-17.514,3.959],[-21.473,-.001],[-17.514,-3.96],[-14.064,-1.945],[-.294,-1.945],[2.747,-7.756],[10.504,-10.971],[18.26,-7.758],[21.474,0],[18.26,7.757],[18.253,7.749],[10.504,10.971],[3.013,7.999],[2.748,7.757],[-.294,1.943],[-14.065,1.943]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[-.824,0],[-.567,.568],[0,0],[0,.882],[.578,.577],[.882,0],[.577,-.577],[0,-.883],[-.576,-.577],[0,0]],o:[[.891,0],[0,0],[.578,-.577],[0,-.883],[-.576,-.576],[-.883,0],[-.575,.576],[0,.882],[0,0],[.556,.495]],v:[[10.504,3.192],[12.761,2.272],[12.761,2.258],[13.696,0],[12.761,-2.259],[10.504,-3.192],[8.245,-2.258],[7.312,0],[8.246,2.258],[8.381,2.398]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Merge Paths 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[179.947,157.721],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 9",ix:9,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.68,-1.203],[0,0],[0,-1.073],[1.073,0],[0,0],[1.481,0],[0,2.187],[-2.186,0]],o:[[0,0],[1.073,0],[0,1.074],[0,0],[-.68,1.202],[-2.186,0],[0,-2.185],[1.481,0]],v:[[-9.55,-1.943],[15.016,-1.943],[16.96,0],[15.016,1.946],[-9.55,1.946],[-13.001,3.959],[-16.96,0],[-13.001,-3.959]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,0,0],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[231.469,269.79],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 10",ix:10,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.68,-1.202],[0,0],[0,-1.073],[1.073,0],[0,0],[1.48,0],[0,2.187],[-2.188,0]],o:[[0,0],[1.073,0],[0,1.074],[0,0],[-.68,1.203],[-2.188,0],[0,-2.186],[1.479,0]],v:[[-23.56,-1.945],[29.025,-1.945],[30.969,0],[29.025,1.945],[-23.56,1.945],[-27.009,3.959],[-30.969,0],[-27.009,-3.959]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[231.469,241.774],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 11",ix:11,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[14.008,38.357],[14.008,38.358]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[.874,.013],[0,0],[0,0],[0,0],[0,0],[.567,-.568],[0,-.881],[-.572,-.575],[-.888,0],[-.576,.576],[0,.882],[.567,.567],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-.865,.012],[-.576,.576],[0,.888],[.576,.572],[.882,0],[.577,-.578],[0,-.891],[0,0],[-.558,-.558]],v:[[14.053,38.357],[14.05,38.357],[14.008,38.357],[13.966,38.357],[13.963,38.357],[11.75,39.293],[10.816,41.549],[11.743,43.814],[14.008,44.742],[16.266,43.807],[17.201,41.549],[16.281,39.293],[16.266,39.277]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 3",ix:3,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.047,-.283],[0,0],[0,0],[-.007,-.095],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-1.085,-1.079],[0,0],[0,-3.01],[1.985,-1.984],[3.028,0],[1.985,1.985],[0,0],[0,3.018],[-1.985,1.983],[-1.465,.554],[0,0],[0,0],[0,1.085],[0,0],[1.086,1.084],[0,0],[0,3.017],[-1.985,1.985],[-3.028,0],[-1.992,-1.98],[0,0],[0,-3.01],[1.985,-1.985],[1.464,-.556],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.105,.259],[0,0],[0,0],[.013,.093],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[1.451,.555],[0,0],[1.985,1.993],[0,3.029],[-1.985,1.985],[-3.018,0],[0,0],[-1.985,-1.986],[0,-3.028],[1.087,-1.088],[0,0],[0,0],[-.718,-.706],[0,0],[-1.457,-.556],[0,0],[-1.985,-1.985],[0,-3.029],[1.984,-1.984],[3.006,0],[0,0],[1.985,1.992],[0,3.028],[-1.088,1.086],[0,0],[0,0]],v:[[16.758,10.783],[16.823,10.849],[16.827,10.854],[16.886,10.918],[16.895,10.926],[16.949,10.988],[16.961,11.003],[17.008,11.059],[17.024,11.078],[17.067,11.13],[17.086,11.156],[17.125,11.207],[17.145,11.232],[17.179,11.281],[17.201,11.313],[17.233,11.357],[17.256,11.392],[17.284,11.436],[17.308,11.474],[17.334,11.516],[17.358,11.557],[17.381,11.596],[17.406,11.639],[17.427,11.678],[17.451,11.723],[17.471,11.762],[17.495,11.809],[17.514,11.846],[17.536,11.895],[17.553,11.931],[17.575,11.982],[17.591,12.018],[17.611,12.069],[17.841,12.882],[17.852,12.939],[17.857,12.973],[17.886,13.253],[17.892,13.333],[17.892,13.345],[17.896,13.432],[17.896,13.439],[17.896,13.533],[17.897,13.533],[17.897,31.294],[21.741,33.784],[21.765,33.807],[24.979,41.549],[21.765,49.305],[14.008,52.52],[6.266,49.305],[6.252,49.292],[3.038,41.549],[6.252,33.794],[10.119,31.29],[10.119,15.142],[-16.735,-11.712],[-17.899,-14.486],[-17.899,-31.292],[-21.752,-33.792],[-21.766,-33.807],[-24.979,-41.548],[-21.766,-49.307],[-14.01,-52.52],[-6.276,-49.314],[-6.252,-49.29],[-3.039,-41.548],[-6.252,-33.792],[-10.12,-31.29],[-10.12,-16.095]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 4",ix:4,d:1,ks:{a:0,k:{c:!0,i:[[-.887,0],[-.576,.576],[0,.882],[.568,.568],[0,0],[.892,0],[.577,-.577],[0,-.882],[-.571,-.576]],o:[[.883,0],[.578,-.578],[0,-.892],[0,0],[-.568,-.567],[-.881,0],[-.577,.577],[0,.886],[.576,.573]],v:[[-14.01,-38.356],[-11.752,-39.29],[-10.817,-41.548],[-11.737,-43.807],[-11.752,-43.822],[-14.01,-44.742],[-16.267,-43.807],[-17.202,-41.548],[-16.275,-39.285]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Merge Paths 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,0,0],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[120.407,200.224],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-2.187,0],[0,2.187],[1.204,.68],[0,0],[0,0],[-.369,0],[0,2.186],[2.186,0],[0,-2.186],[-.095,-.338],[0,0],[0,-.498],[0,0],[0,-1.479]],o:[[2.186,0],[0,-1.479],[0,0],[0,0],[.339,.094],[2.186,0],[0,-2.186],[-2.188,0],[0,.369],[0,0],[-.379,.38],[0,0],[-1.202,.68],[0,2.187]],v:[[-14.009,31.977],[-10.049,28.018],[-12.065,24.568],[-12.065,.807],[12.944,-24.202],[14.009,-24.058],[17.968,-28.017],[14.009,-31.977],[10.049,-28.017],[10.194,-26.953],[-15.384,-1.375],[-15.953,.001],[-15.953,24.568],[-17.968,28.018]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.749,.8471,.8863],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[176.442,73.668],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 13",ix:13,cix:2,np:5,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,.854],[.572,.575],[.889,0],[.577,-.577],[0,-.882],[-.572,-.575],[-.888,0],[-.572,.545]],o:[[0,0],[0,0],[0,0],[.545,-.572],[0,-.889],[-.576,-.573],[-.882,0],[-.576,.576],[0,.888],[.576,.573],[.855,0],[0,0]],v:[[-92.29,117.896],[-92.264,117.869],[-92.236,117.842],[-92.209,117.814],[-91.329,115.61],[-92.255,113.346],[-94.521,112.417],[-96.779,113.354],[-97.713,115.61],[-96.786,117.876],[-94.521,118.803],[-92.317,117.921]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-2.161,-3.067],[0,-3.811],[0,0],[2.37,-5.721],[4.666,-4.666],[0,0],[0,0],[2.256,-5.446],[4.438,-4.438],[0,0],[6.649,-2.755],[7.669,0],[0,0],[.705,.719],[0,0],[1.606,0],[1.986,1.983],[0,0],[0,3.018],[-1.984,1.984],[-3.028,0],[-1.986,-1.984],[0,0],[0,-3.019],[.622,-1.375],[0,0],[0,0],[-5.662,2.346],[-4.726,4.725],[0,0],[-1.846,4.457],[0,5.291],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.015,.093],[0,0],[0,0],[-.105,.259],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-1.96,4.732],[0,5.612],[0,0],[1.269,1.802],[1.178,0],[0,0],[0,2.148],[0,0],[2.725,6.581],[5.482,5.482],[0,0],[6.568,2.721],[7.755,0],[0,0],[1.08,-1.086],[0,0],[0,0],[3.01,0],[1.968,1.842],[0,0],[0,3.028],[-1.985,1.985],[0,0],[-3.015,0],[-1.984,-1.984],[-.555,-1.465],[0,0],[-7.556,-3.13],[-6.182,-6.182],[0,0],[-3.135,-7.568],[0,-8.741]],o:[[0,0],[4.031,0],[2.207,3.133],[0,0],[0,6.599],[-2.374,5.733],[0,0],[0,0],[0,6.277],[-2.26,5.456],[0,0],[-5.425,5.425],[-6.64,2.75],[0,0],[-1.086,0],[0,0],[-1.374,.62],[-3.018,0],[0,0],[-1.984,-1.986],[0,-3.028],[1.985,-1.984],[3.019,0],[0,0],[1.984,1.985],[0,1.606],[0,0],[0,0],[6.683,0],[5.648,-2.34],[0,0],[3.741,-3.74],[1.851,-4.468],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.006,-.094],[0,0],[0,0],[.047,-.283],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[3.967,-3.968],[1.965,-4.744],[0,0],[0,-2.364],[-.772,-1.096],[0,0],[-2.148,0],[0,0],[0,-7.754],[-2.721,-6.566],[0,0],[-5.482,-5.481],[-6.58,-2.724],[0,0],[-.554,1.451],[0,0],[0,0],[-1.993,1.986],[-2.888,0],[0,0],[-1.985,-1.985],[0,-3.027],[0,0],[1.993,-1.991],[3.029,0],[1.088,1.088],[0,0],[8.741,0],[7.568,3.135],[0,0],[6.181,6.181],[3.129,7.557],[0,0]],v:[[77.473,-28.365],[92.824,-28.365],[102.13,-23.212],[105.491,-12.018],[105.491,13.191],[101.931,31.684],[91.365,47.295],[77.473,61.186],[77.473,70.193],[74.085,87.79],[64.03,102.646],[35.565,131.113],[17.439,143.386],[-4.039,147.518],[-66.503,147.518],[-69.277,146.354],[-90.016,125.615],[-94.521,126.581],[-102.263,123.369],[-102.278,123.354],[-105.491,115.61],[-102.278,107.854],[-94.521,104.64],[-86.778,107.854],[-86.763,107.869],[-83.55,115.61],[-84.517,120.118],[-64.894,139.739],[-4.039,139.739],[14.491,136.217],[30.066,125.614],[58.531,97.148],[66.915,84.842],[69.696,70.193],[69.696,59.576],[69.698,59.482],[69.698,59.476],[69.702,59.388],[69.702,59.376],[69.707,59.296],[69.737,59.016],[69.741,58.984],[69.751,58.925],[69.981,58.112],[70.002,58.062],[70.017,58.025],[70.04,57.975],[70.056,57.938],[70.079,57.89],[70.098,57.852],[70.122,57.805],[70.142,57.766],[70.166,57.723],[70.186,57.684],[70.211,57.64],[70.235,57.601],[70.259,57.559],[70.285,57.518],[70.308,57.48],[70.337,57.436],[70.36,57.402],[70.391,57.356],[70.414,57.326],[70.448,57.277],[70.468,57.251],[70.507,57.2],[70.525,57.174],[70.568,57.122],[70.584,57.102],[70.631,57.046],[70.643,57.032],[70.698,56.971],[70.706,56.96],[70.765,56.897],[70.77,56.893],[70.835,56.826],[85.866,41.796],[94.761,28.735],[97.713,13.191],[97.713,-12.018],[95.781,-18.745],[92.824,-20.587],[73.585,-20.587],[69.696,-24.477],[69.696,-69.71],[65.602,-91.225],[53.292,-109.314],[46.352,-116.255],[28.262,-128.566],[6.747,-132.658],[-28.233,-132.658],[-30.721,-128.813],[-30.73,-128.805],[-30.745,-128.79],[-38.486,-125.576],[-45.977,-128.549],[-46.242,-128.79],[-49.456,-136.548],[-46.242,-144.304],[-46.234,-144.295],[-38.486,-147.518],[-30.73,-144.304],[-28.226,-140.437],[6.747,-140.437],[31.21,-135.734],[51.851,-121.752],[58.791,-114.813],[72.772,-94.173],[77.473,-69.71]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 3",ix:3,d:1,ks:{a:0,k:{c:!0,i:[[-.823,0],[-.568,.567],[0,0],[0,.891],[.577,.577],[.882,0],[.568,-.568],[0,0],[0,-.881],[-.577,-.577],[0,0]],o:[[.892,0],[0,0],[.568,-.567],[0,-.882],[-.577,-.576],[-.891,0],[0,0],[-.577,.577],[0,.882],[0,0],[.556,.493]],v:[[-38.486,-133.355],[-36.228,-134.274],[-36.214,-134.29],[-35.293,-136.548],[-36.228,-138.805],[-38.486,-139.739],[-40.743,-138.82],[-40.743,-138.804],[-41.678,-136.548],[-40.743,-134.29],[-40.608,-134.148]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Merge Paths 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.749,.8471,.8863],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[256.954,154.18],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 14",ix:14,cix:2,np:5,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-1.465,.556],[0,0],[-.718,.706],[0,0],[-.995,0],[0,0],[-1.084,1.086],[0,0],[-3.02,0],[-1.986,-1.983],[0,0],[0,-3.018],[1.984,-1.986],[0,0],[3.018,0],[1.992,1.98],[0,0],[.555,1.455],[0,0],[0,0],[0,0],[-1.088,-1.087],[0,-3.027],[1.98,-1.992],[0,0],[0,0],[3.01,0],[1.983,1.985],[0,3.029],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[1.087,-1.087],[0,0],[0,-1.086],[0,0],[.76,-.759],[0,0],[.555,-1.458],[0,0],[1.985,-1.983],[3.018,0],[0,0],[1.984,1.986],[0,3.019],[0,0],[-1.986,1.984],[-3.009,0],[0,0],[-1.084,-1.088],[0,0],[0,0],[0,0],[1.465,.556],[1.985,1.985],[0,3.01],[0,0],[0,0],[-1.993,1.986],[-3.029,0],[-1.985,-1.984],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-35.774,48.278],[-31.907,45.775],[-31.907,-14.008],[-30.744,-16.782],[11.258,-58.785],[14.008,-59.924],[17.761,-59.925],[20.26,-63.778],[20.275,-63.793],[28.018,-67.006],[35.76,-63.793],[35.775,-63.778],[38.988,-56.035],[35.775,-48.293],[35.76,-48.278],[28.018,-45.065],[20.284,-48.27],[20.261,-48.293],[17.763,-52.146],[15.618,-52.146],[-24.129,-12.398],[-24.129,45.775],[-20.261,48.278],[-17.047,56.034],[-20.253,63.769],[-20.261,63.777],[-20.276,63.792],[-28.018,67.006],[-35.774,63.792],[-38.988,56.034],[-38.987,55.893],[-38.984,55.752],[-38.981,55.611],[-38.974,55.47],[-38.965,55.33],[-38.956,55.191],[-38.945,55.051],[-38.931,54.913],[-38.917,54.776],[-38.9,54.638],[-38.882,54.501],[-38.861,54.364],[-38.84,54.229],[-38.817,54.093],[-38.792,53.958],[-38.765,53.824],[-38.737,53.691],[-38.707,53.557],[-38.675,53.425],[-38.643,53.293],[-38.607,53.163],[-38.572,53.031],[-38.534,52.902],[-38.495,52.773],[-38.454,52.645],[-38.412,52.517],[-38.411,52.517],[-38.367,52.389],[-38.322,52.263],[-38.274,52.137],[-38.227,52.013],[-38.177,51.888],[-38.126,51.765],[-38.073,51.643],[-38.019,51.521],[-38.018,51.521],[-37.963,51.399],[-37.907,51.279],[-37.905,51.278],[-37.847,51.16],[-37.787,51.041],[-37.727,50.923],[-37.726,50.923],[-37.664,50.806],[-37.6,50.69],[-37.534,50.574],[-37.467,50.46],[-37.4,50.347],[-37.399,50.347],[-37.33,50.235],[-37.259,50.122],[-37.188,50.011],[-37.187,50.011],[-37.114,49.902],[-37.113,49.901],[-37.04,49.793],[-37.039,49.792],[-36.964,49.685],[-36.964,49.684],[-36.886,49.578],[-36.809,49.472],[-36.808,49.471],[-36.729,49.367],[-36.729,49.366],[-36.648,49.263],[-36.648,49.261],[-36.566,49.159],[-36.483,49.057],[-36.482,49.057],[-36.398,48.956],[-36.312,48.856],[-36.226,48.757],[-36.138,48.66],[-36.138,48.659],[-36.049,48.562],[-36.048,48.562],[-35.959,48.467],[-35.958,48.466],[-35.868,48.372],[-35.867,48.371]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[.577,.577],[.85,.022],[0,0],[0,0],[.577,-.577],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.576,-.577],[-.882,0],[-.568,.568],[0,0],[0,.892]],o:[[-.558,-.559],[0,0],[0,0],[-.881,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,.883],[.577,.577],[.891,0],[0,0],[.567,-.568],[0,-.881]],v:[[-25.76,53.777],[-27.936,52.843],[-27.938,52.842],[-28.018,52.842],[-30.275,53.777],[-30.276,53.778],[-30.302,53.804],[-30.304,53.805],[-30.329,53.832],[-30.33,53.832],[-30.355,53.86],[-30.356,53.86],[-30.381,53.887],[-30.382,53.888],[-30.407,53.916],[-30.407,53.917],[-30.432,53.945],[-30.456,53.974],[-30.458,53.974],[-30.482,54.003],[-30.482,54.005],[-30.505,54.033],[-30.529,54.064],[-30.553,54.093],[-30.553,54.094],[-30.576,54.124],[-30.599,54.155],[-30.621,54.186],[-30.643,54.217],[-30.643,54.218],[-30.666,54.249],[-30.666,54.25],[-30.686,54.281],[-30.687,54.281],[-30.707,54.313],[-30.708,54.313],[-30.729,54.346],[-30.748,54.379],[-30.768,54.411],[-30.787,54.445],[-30.806,54.478],[-30.807,54.478],[-30.824,54.513],[-30.825,54.513],[-30.843,54.546],[-30.843,54.547],[-30.861,54.58],[-30.861,54.581],[-30.878,54.615],[-30.895,54.65],[-30.911,54.685],[-30.912,54.685],[-30.928,54.72],[-30.944,54.756],[-30.959,54.792],[-30.974,54.828],[-30.988,54.863],[-31.003,54.9],[-31.017,54.937],[-31.029,54.973],[-31.042,55.01],[-31.055,55.048],[-31.066,55.085],[-31.078,55.122],[-31.089,55.161],[-31.1,55.199],[-31.11,55.236],[-31.119,55.275],[-31.128,55.314],[-31.137,55.352],[-31.146,55.391],[-31.153,55.431],[-31.161,55.469],[-31.167,55.509],[-31.174,55.549],[-31.179,55.589],[-31.185,55.628],[-31.189,55.668],[-31.194,55.708],[-31.198,55.748],[-31.201,55.789],[-31.204,55.83],[-31.206,55.871],[-31.208,55.911],[-31.21,55.952],[-31.21,55.994],[-31.21,56.034],[-30.276,58.293],[-28.018,59.228],[-25.76,58.307],[-25.745,58.293],[-24.825,56.034]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 3",ix:3,d:1,ks:{a:0,k:{c:!0,i:[[-.892,0],[-.576,.573],[0,.888],[.572,.575],[.888,0],[.576,-.573],[0,-.889],[-.569,-.567],[0,0]],o:[[.888,0],[.572,-.575],[0,-.889],[-.576,-.573],[-.888,0],[-.572,.575],[0,.891],[0,0],[.568,.568]],v:[[28.018,-52.843],[30.283,-53.77],[31.21,-56.035],[30.283,-58.3],[28.018,-59.227],[25.752,-58.3],[24.825,-56.035],[25.746,-53.778],[25.76,-53.763]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Merge Paths 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[162.433,73.669],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 15",ix:15,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[8.934,-2.659],[.306,1.028],[-1.028,.305],[-9.541,.018],[-9.757,-2.83],[.297,-1.028],[1.028,.297],[9.151,-.016]],o:[[-1.027,.306],[-.306,-1.027],[9.266,-2.758],[9.519,-.017],[1.028,.296],[-.297,1.027],[-9.405,-2.728],[-9.135,.018]],v:[[-27.458,3.813],[-29.874,2.506],[-28.567,.091],[-.355,-4.101],[28.561,.091],[29.883,2.491],[27.482,3.813],[-.355,-.228]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,0,0],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[274.498,131.867],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 16",ix:16,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.68,1.203],[0,0],[1.48,0],[0,2.187],[-2.187,0],[-.679,-1.203],[0,0],[-1.479,0],[0,-2.186],[2.187,0]],o:[[0,0],[-.679,1.203],[-2.187,0],[0,-2.186],[1.48,0],[0,0],[.68,-1.203],[2.187,0],[0,2.187],[-1.481,0]],v:[[10.559,1.944],[-10.56,1.944],[-14.009,3.959],[-17.969,-.001],[-14.009,-3.959],[-10.56,-1.945],[10.559,-1.945],[14.009,-3.959],[17.969,-.001],[14.009,3.959]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4157,.4157,.4157],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[204.459,101.687],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 17",ix:17,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.68,-1.203],[0,0],[0,0],[0,1.479],[-2.186,0],[0,-2.187],[1.203,-.679],[0,0],[1.074,0],[0,0],[1.479,0],[0,2.187],[-2.188,0]],o:[[0,0],[0,0],[-1.203,-.679],[0,-2.187],[2.187,0],[0,1.48],[0,0],[0,1.074],[0,0],[-.68,1.202],[-2.188,0],[0,-2.187],[1.48,0]],v:[[-10.559,12.065],[12.064,12.065],[12.064,-10.559],[10.049,-14.008],[14.008,-17.968],[17.969,-14.008],[15.954,-10.559],[15.954,14.009],[14.008,15.954],[-10.559,15.954],[-14.008,17.968],[-17.969,14.009],[-14.008,10.049]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[0,0,0],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[204.459,59.659],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:12}],v$1="5.4.1",fr=29.9700012207031,op=92.0000037472368,ip=0,assets=[],FaceScaner={nm,ddd,h:h$2,w:w$2,meta,layers,v:v$1,fr,op,ip,assets},resolveFetch$3=st=>{let Mt;return st?Mt=st:typeof fetch>"u"?Mt=(...Xr)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0).then(({default:rn})=>rn(...Xr)):Mt=fetch,(...Xr)=>Mt(...Xr)};class FunctionsError extends Error{constructor(Mt,Xr="FunctionsError",rn){super(Mt),this.name=Xr,this.context=rn}}class FunctionsFetchError extends FunctionsError{constructor(Mt){super("Failed to send a request to the Edge Function","FunctionsFetchError",Mt)}}class FunctionsRelayError extends FunctionsError{constructor(Mt){super("Relay Error invoking the Edge Function","FunctionsRelayError",Mt)}}class FunctionsHttpError extends FunctionsError{constructor(Mt){super("Edge Function returned a non-2xx status code","FunctionsHttpError",Mt)}}var FunctionRegion;(function(st){st.Any="any",st.ApNortheast1="ap-northeast-1",st.ApNortheast2="ap-northeast-2",st.ApSouth1="ap-south-1",st.ApSoutheast1="ap-southeast-1",st.ApSoutheast2="ap-southeast-2",st.CaCentral1="ca-central-1",st.EuCentral1="eu-central-1",st.EuWest1="eu-west-1",st.EuWest2="eu-west-2",st.EuWest3="eu-west-3",st.SaEast1="sa-east-1",st.UsEast1="us-east-1",st.UsWest1="us-west-1",st.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$6=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};class FunctionsClient{constructor(Mt,{headers:Xr={},customFetch:rn,region:nn=FunctionRegion.Any}={}){this.url=Mt,this.headers=Xr,this.region=nn,this.fetch=resolveFetch$3(rn)}setAuth(Mt){this.headers.Authorization=`Bearer ${Mt}`}invoke(Mt,Xr={}){var rn;return __awaiter$6(this,void 0,void 0,function*(){try{const{headers:nn,method:an,body:on}=Xr;let sn={},{region:ln}=Xr;ln||(ln=this.region),ln&&ln!=="any"&&(sn["x-region"]=ln);let un;on&&(nn&&!Object.prototype.hasOwnProperty.call(nn,"Content-Type")||!nn)&&(typeof Blob<"u"&&on instanceof Blob||on instanceof ArrayBuffer?(sn["Content-Type"]="application/octet-stream",un=on):typeof on=="string"?(sn["Content-Type"]="text/plain",un=on):typeof FormData<"u"&&on instanceof FormData?un=on:(sn["Content-Type"]="application/json",un=JSON.stringify(on)));const cn=yield this.fetch(`${this.url}/${Mt}`,{method:an||"POST",headers:Object.assign(Object.assign(Object.assign({},sn),this.headers),nn),body:un}).catch(uo=>{throw new FunctionsFetchError(uo)}),hn=cn.headers.get("x-relay-error");if(hn&&hn==="true")throw new FunctionsRelayError(cn);if(!cn.ok)throw new FunctionsHttpError(cn);let fn=((rn=cn.headers.get("Content-Type"))!==null&&rn!==void 0?rn:"text/plain").split(";")[0].trim(),to;return fn==="application/json"?to=yield cn.json():fn==="application/octet-stream"?to=yield cn.blob():fn==="multipart/form-data"?to=yield cn.formData():to=yield cn.text(),{data:to,error:null}}catch(nn){return{data:null,error:nn}}})}}var getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request$1=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request:Request$1,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"}));class PostgrestError extends Error{constructor(Mt){super(Mt.message),this.name="PostgrestError",this.details=Mt.details,this.hint=Mt.hint,this.code=Mt.code}}class PostgrestBuilder{constructor(Mt){this.shouldThrowOnError=!1,this.method=Mt.method,this.url=Mt.url,this.headers=Mt.headers,this.schema=Mt.schema,this.body=Mt.body,this.shouldThrowOnError=Mt.shouldThrowOnError,this.signal=Mt.signal,this.isMaybeSingle=Mt.isMaybeSingle,Mt.fetch?this.fetch=Mt.fetch:typeof fetch>"u"?this.fetch=nodeFetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(Mt,Xr){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const rn=this.fetch;let nn=rn(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async an=>{var on,sn,ln;let un=null,cn=null,hn=null,fn=an.status,to=an.statusText;if(an.ok){if(this.method!=="HEAD"){const lo=await an.text();lo===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?cn=lo:cn=JSON.parse(lo))}const co=(on=this.headers.Prefer)===null||on===void 0?void 0:on.match(/count=(exact|planned|estimated)/),Uo=(sn=an.headers.get("content-range"))===null||sn===void 0?void 0:sn.split("/");co&&Uo&&Uo.length>1&&(hn=parseInt(Uo[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(cn)&&(cn.length>1?(un={code:"PGRST116",details:`Results contain ${cn.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},cn=null,hn=null,fn=406,to="Not Acceptable"):cn.length===1?cn=cn[0]:cn=null)}else{const co=await an.text();try{un=JSON.parse(co),Array.isArray(un)&&an.status===404&&(cn=[],un=null,fn=200,to="OK")}catch{an.status===404&&co===""?(fn=204,to="No Content"):un={message:co}}if(un&&this.isMaybeSingle&&(!((ln=un==null?void 0:un.details)===null||ln===void 0)&&ln.includes("0 rows"))&&(un=null,fn=200,to="OK"),un&&this.shouldThrowOnError)throw new PostgrestError(un)}return{error:un,data:cn,count:hn,status:fn,statusText:to}});return this.shouldThrowOnError||(nn=nn.catch(an=>{var on,sn,ln;return{error:{message:`${(on=an==null?void 0:an.name)!==null&&on!==void 0?on:"FetchError"}: ${an==null?void 0:an.message}`,details:`${(sn=an==null?void 0:an.stack)!==null&&sn!==void 0?sn:""}`,hint:"",code:`${(ln=an==null?void 0:an.code)!==null&&ln!==void 0?ln:""}`},data:null,count:null,status:0,statusText:""}})),nn.then(Mt,Xr)}}class PostgrestTransformBuilder extends PostgrestBuilder{select(Mt){let Xr=!1;const rn=(Mt??"*").split("").map(nn=>/\s/.test(nn)&&!Xr?"":(nn==='"'&&(Xr=!Xr),nn)).join("");return this.url.searchParams.set("select",rn),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(Mt,{ascending:Xr=!0,nullsFirst:rn,foreignTable:nn,referencedTable:an=nn}={}){const on=an?`${an}.order`:"order",sn=this.url.searchParams.get(on);return this.url.searchParams.set(on,`${sn?`${sn},`:""}${Mt}.${Xr?"asc":"desc"}${rn===void 0?"":rn?".nullsfirst":".nullslast"}`),this}limit(Mt,{foreignTable:Xr,referencedTable:rn=Xr}={}){const nn=typeof rn>"u"?"limit":`${rn}.limit`;return this.url.searchParams.set(nn,`${Mt}`),this}range(Mt,Xr,{foreignTable:rn,referencedTable:nn=rn}={}){const an=typeof nn>"u"?"offset":`${nn}.offset`,on=typeof nn>"u"?"limit":`${nn}.limit`;return this.url.searchParams.set(an,`${Mt}`),this.url.searchParams.set(on,`${Xr-Mt+1}`),this}abortSignal(Mt){return this.signal=Mt,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:Mt=!1,verbose:Xr=!1,settings:rn=!1,buffers:nn=!1,wal:an=!1,format:on="text"}={}){var sn;const ln=[Mt?"analyze":null,Xr?"verbose":null,rn?"settings":null,nn?"buffers":null,an?"wal":null].filter(Boolean).join("|"),un=(sn=this.headers.Accept)!==null&&sn!==void 0?sn:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${on}; for="${un}"; options=${ln};`,on==="json"?this:this}rollback(){var Mt;return((Mt=this.headers.Prefer)!==null&&Mt!==void 0?Mt:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class PostgrestFilterBuilder extends PostgrestTransformBuilder{eq(Mt,Xr){return this.url.searchParams.append(Mt,`eq.${Xr}`),this}neq(Mt,Xr){return this.url.searchParams.append(Mt,`neq.${Xr}`),this}gt(Mt,Xr){return this.url.searchParams.append(Mt,`gt.${Xr}`),this}gte(Mt,Xr){return this.url.searchParams.append(Mt,`gte.${Xr}`),this}lt(Mt,Xr){return this.url.searchParams.append(Mt,`lt.${Xr}`),this}lte(Mt,Xr){return this.url.searchParams.append(Mt,`lte.${Xr}`),this}like(Mt,Xr){return this.url.searchParams.append(Mt,`like.${Xr}`),this}likeAllOf(Mt,Xr){return this.url.searchParams.append(Mt,`like(all).{${Xr.join(",")}}`),this}likeAnyOf(Mt,Xr){return this.url.searchParams.append(Mt,`like(any).{${Xr.join(",")}}`),this}ilike(Mt,Xr){return this.url.searchParams.append(Mt,`ilike.${Xr}`),this}ilikeAllOf(Mt,Xr){return this.url.searchParams.append(Mt,`ilike(all).{${Xr.join(",")}}`),this}ilikeAnyOf(Mt,Xr){return this.url.searchParams.append(Mt,`ilike(any).{${Xr.join(",")}}`),this}is(Mt,Xr){return this.url.searchParams.append(Mt,`is.${Xr}`),this}in(Mt,Xr){const rn=Xr.map(nn=>typeof nn=="string"&&new RegExp("[,()]").test(nn)?`"${nn}"`:`${nn}`).join(",");return this.url.searchParams.append(Mt,`in.(${rn})`),this}contains(Mt,Xr){return typeof Xr=="string"?this.url.searchParams.append(Mt,`cs.${Xr}`):Array.isArray(Xr)?this.url.searchParams.append(Mt,`cs.{${Xr.join(",")}}`):this.url.searchParams.append(Mt,`cs.${JSON.stringify(Xr)}`),this}containedBy(Mt,Xr){return typeof Xr=="string"?this.url.searchParams.append(Mt,`cd.${Xr}`):Array.isArray(Xr)?this.url.searchParams.append(Mt,`cd.{${Xr.join(",")}}`):this.url.searchParams.append(Mt,`cd.${JSON.stringify(Xr)}`),this}rangeGt(Mt,Xr){return this.url.searchParams.append(Mt,`sr.${Xr}`),this}rangeGte(Mt,Xr){return this.url.searchParams.append(Mt,`nxl.${Xr}`),this}rangeLt(Mt,Xr){return this.url.searchParams.append(Mt,`sl.${Xr}`),this}rangeLte(Mt,Xr){return this.url.searchParams.append(Mt,`nxr.${Xr}`),this}rangeAdjacent(Mt,Xr){return this.url.searchParams.append(Mt,`adj.${Xr}`),this}overlaps(Mt,Xr){return typeof Xr=="string"?this.url.searchParams.append(Mt,`ov.${Xr}`):this.url.searchParams.append(Mt,`ov.{${Xr.join(",")}}`),this}textSearch(Mt,Xr,{config:rn,type:nn}={}){let an="";nn==="plain"?an="pl":nn==="phrase"?an="ph":nn==="websearch"&&(an="w");const on=rn===void 0?"":`(${rn})`;return this.url.searchParams.append(Mt,`${an}fts${on}.${Xr}`),this}match(Mt){return Object.entries(Mt).forEach(([Xr,rn])=>{this.url.searchParams.append(Xr,`eq.${rn}`)}),this}not(Mt,Xr,rn){return this.url.searchParams.append(Mt,`not.${Xr}.${rn}`),this}or(Mt,{foreignTable:Xr,referencedTable:rn=Xr}={}){const nn=rn?`${rn}.or`:"or";return this.url.searchParams.append(nn,`(${Mt})`),this}filter(Mt,Xr,rn){return this.url.searchParams.append(Mt,`${Xr}.${rn}`),this}}class PostgrestQueryBuilder{constructor(Mt,{headers:Xr={},schema:rn,fetch:nn}){this.url=Mt,this.headers=Xr,this.schema=rn,this.fetch=nn}select(Mt,{head:Xr=!1,count:rn}={}){const nn=Xr?"HEAD":"GET";let an=!1;const on=(Mt??"*").split("").map(sn=>/\s/.test(sn)&&!an?"":(sn==='"'&&(an=!an),sn)).join("");return this.url.searchParams.set("select",on),rn&&(this.headers.Prefer=`count=${rn}`),new PostgrestFilterBuilder({method:nn,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(Mt,{count:Xr,defaultToNull:rn=!0}={}){const nn="POST",an=[];if(this.headers.Prefer&&an.push(this.headers.Prefer),Xr&&an.push(`count=${Xr}`),rn||an.push("missing=default"),this.headers.Prefer=an.join(","),Array.isArray(Mt)){const on=Mt.reduce((sn,ln)=>sn.concat(Object.keys(ln)),[]);if(on.length>0){const sn=[...new Set(on)].map(ln=>`"${ln}"`);this.url.searchParams.set("columns",sn.join(","))}}return new PostgrestFilterBuilder({method:nn,url:this.url,headers:this.headers,schema:this.schema,body:Mt,fetch:this.fetch,allowEmpty:!1})}upsert(Mt,{onConflict:Xr,ignoreDuplicates:rn=!1,count:nn,defaultToNull:an=!0}={}){const on="POST",sn=[`resolution=${rn?"ignore":"merge"}-duplicates`];if(Xr!==void 0&&this.url.searchParams.set("on_conflict",Xr),this.headers.Prefer&&sn.push(this.headers.Prefer),nn&&sn.push(`count=${nn}`),an||sn.push("missing=default"),this.headers.Prefer=sn.join(","),Array.isArray(Mt)){const ln=Mt.reduce((un,cn)=>un.concat(Object.keys(cn)),[]);if(ln.length>0){const un=[...new Set(ln)].map(cn=>`"${cn}"`);this.url.searchParams.set("columns",un.join(","))}}return new PostgrestFilterBuilder({method:on,url:this.url,headers:this.headers,schema:this.schema,body:Mt,fetch:this.fetch,allowEmpty:!1})}update(Mt,{count:Xr}={}){const rn="PATCH",nn=[];return this.headers.Prefer&&nn.push(this.headers.Prefer),Xr&&nn.push(`count=${Xr}`),this.headers.Prefer=nn.join(","),new PostgrestFilterBuilder({method:rn,url:this.url,headers:this.headers,schema:this.schema,body:Mt,fetch:this.fetch,allowEmpty:!1})}delete({count:Mt}={}){const Xr="DELETE",rn=[];return Mt&&rn.push(`count=${Mt}`),this.headers.Prefer&&rn.unshift(this.headers.Prefer),this.headers.Prefer=rn.join(","),new PostgrestFilterBuilder({method:Xr,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const version$4="1.9.2",DEFAULT_HEADERS$4={"X-Client-Info":`postgrest-js/${version$4}`};class PostgrestClient{constructor(Mt,{headers:Xr={},schema:rn,fetch:nn}={}){this.url=Mt,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$4),Xr),this.schemaName=rn,this.fetch=nn}from(Mt){const Xr=new URL(`${this.url}/${Mt}`);return new PostgrestQueryBuilder(Xr,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(Mt){return new PostgrestClient(this.url,{headers:this.headers,schema:Mt,fetch:this.fetch})}rpc(Mt,Xr={},{head:rn=!1,count:nn}={}){let an;const on=new URL(`${this.url}/rpc/${Mt}`);let sn;rn?(an="HEAD",Object.entries(Xr).forEach(([un,cn])=>{on.searchParams.append(un,`${cn}`)})):(an="POST",sn=Xr);const ln=Object.assign({},this.headers);return nn&&(ln.Prefer=`count=${nn}`),new PostgrestFilterBuilder({method:an,url:on,headers:ln,schema:this.schemaName,body:sn,fetch:this.fetch,allowEmpty:!1})}}const version$3="2.9.3",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$3}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(st){st[st.connecting=0]="connecting",st[st.open=1]="open",st[st.closing=2]="closing",st[st.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(st){st.closed="closed",st.errored="errored",st.joined="joined",st.joining="joining",st.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(st){st.close="phx_close",st.error="phx_error",st.join="phx_join",st.reply="phx_reply",st.leave="phx_leave",st.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(st){st.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(st){st.Connecting="connecting",st.Open="open",st.Closing="closing",st.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Timer{constructor(Mt,Xr){this.callback=Mt,this.timerCalc=Xr,this.timer=void 0,this.tries=0,this.callback=Mt,this.timerCalc=Xr}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Serializer{constructor(){this.HEADER_LENGTH=1}decode(Mt,Xr){return Mt.constructor===ArrayBuffer?Xr(this._binaryDecode(Mt)):Xr(typeof Mt=="string"?JSON.parse(Mt):{})}_binaryDecode(Mt){const Xr=new DataView(Mt),rn=new TextDecoder;return this._decodeBroadcast(Mt,Xr,rn)}_decodeBroadcast(Mt,Xr,rn){const nn=Xr.getUint8(1),an=Xr.getUint8(2);let on=this.HEADER_LENGTH+2;const sn=rn.decode(Mt.slice(on,on+nn));on=on+nn;const ln=rn.decode(Mt.slice(on,on+an));on=on+an;const un=JSON.parse(rn.decode(Mt.slice(on,Mt.byteLength)));return{ref:null,topic:sn,event:ln,payload:un}}}class Push{constructor(Mt,Xr,rn={},nn=DEFAULT_TIMEOUT){this.channel=Mt,this.event=Xr,this.payload=rn,this.timeout=nn,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(Mt){this.timeout=Mt,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(Mt){this.payload=Object.assign(Object.assign({},this.payload),Mt)}receive(Mt,Xr){var rn;return this._hasReceived(Mt)&&Xr((rn=this.receivedResp)===null||rn===void 0?void 0:rn.response),this.recHooks.push({status:Mt,callback:Xr}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const Mt=Xr=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=Xr,this._matchReceive(Xr)};this.channel._on(this.refEvent,{},Mt),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(Mt,Xr){this.refEvent&&this.channel._trigger(this.refEvent,{status:Mt,response:Xr})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:Mt,response:Xr}){this.recHooks.filter(rn=>rn.status===Mt).forEach(rn=>rn.callback(Xr))}_hasReceived(Mt){return this.receivedResp&&this.receivedResp.status===Mt}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(st){st.SYNC="sync",st.JOIN="join",st.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(Mt,Xr){this.channel=Mt,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const rn=(Xr==null?void 0:Xr.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(rn.state,{},nn=>{const{onJoin:an,onLeave:on,onSync:sn}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,nn,an,on),this.pendingDiffs.forEach(ln=>{this.state=RealtimePresence.syncDiff(this.state,ln,an,on)}),this.pendingDiffs=[],sn()}),this.channel._on(rn.diff,{},nn=>{const{onJoin:an,onLeave:on,onSync:sn}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(nn):(this.state=RealtimePresence.syncDiff(this.state,nn,an,on),sn())}),this.onJoin((nn,an,on)=>{this.channel._trigger("presence",{event:"join",key:nn,currentPresences:an,newPresences:on})}),this.onLeave((nn,an,on)=>{this.channel._trigger("presence",{event:"leave",key:nn,currentPresences:an,leftPresences:on})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(Mt,Xr,rn,nn){const an=this.cloneDeep(Mt),on=this.transformState(Xr),sn={},ln={};return this.map(an,(un,cn)=>{on[un]||(ln[un]=cn)}),this.map(on,(un,cn)=>{const hn=an[un];if(hn){const fn=cn.map(Uo=>Uo.presence_ref),to=hn.map(Uo=>Uo.presence_ref),uo=cn.filter(Uo=>to.indexOf(Uo.presence_ref)<0),co=hn.filter(Uo=>fn.indexOf(Uo.presence_ref)<0);uo.length>0&&(sn[un]=uo),co.length>0&&(ln[un]=co)}else sn[un]=cn}),this.syncDiff(an,{joins:sn,leaves:ln},rn,nn)}static syncDiff(Mt,Xr,rn,nn){const{joins:an,leaves:on}={joins:this.transformState(Xr.joins),leaves:this.transformState(Xr.leaves)};return rn||(rn=()=>{}),nn||(nn=()=>{}),this.map(an,(sn,ln)=>{var un;const cn=(un=Mt[sn])!==null&&un!==void 0?un:[];if(Mt[sn]=this.cloneDeep(ln),cn.length>0){const hn=Mt[sn].map(to=>to.presence_ref),fn=cn.filter(to=>hn.indexOf(to.presence_ref)<0);Mt[sn].unshift(...fn)}rn(sn,cn,ln)}),this.map(on,(sn,ln)=>{let un=Mt[sn];if(!un)return;const cn=ln.map(hn=>hn.presence_ref);un=un.filter(hn=>cn.indexOf(hn.presence_ref)<0),Mt[sn]=un,nn(sn,un,ln),un.length===0&&delete Mt[sn]}),Mt}static map(Mt,Xr){return Object.getOwnPropertyNames(Mt).map(rn=>Xr(rn,Mt[rn]))}static transformState(Mt){return Mt=this.cloneDeep(Mt),Object.getOwnPropertyNames(Mt).reduce((Xr,rn)=>{const nn=Mt[rn];return"metas"in nn?Xr[rn]=nn.metas.map(an=>(an.presence_ref=an.phx_ref,delete an.phx_ref,delete an.phx_ref_prev,an)):Xr[rn]=nn,Xr},{})}static cloneDeep(Mt){return JSON.parse(JSON.stringify(Mt))}onJoin(Mt){this.caller.onJoin=Mt}onLeave(Mt){this.caller.onLeave=Mt}onSync(Mt){this.caller.onSync=Mt}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var PostgresTypes;(function(st){st.abstime="abstime",st.bool="bool",st.date="date",st.daterange="daterange",st.float4="float4",st.float8="float8",st.int2="int2",st.int4="int4",st.int4range="int4range",st.int8="int8",st.int8range="int8range",st.json="json",st.jsonb="jsonb",st.money="money",st.numeric="numeric",st.oid="oid",st.reltime="reltime",st.text="text",st.time="time",st.timestamp="timestamp",st.timestamptz="timestamptz",st.timetz="timetz",st.tsrange="tsrange",st.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(st,Mt,Xr={})=>{var rn;const nn=(rn=Xr.skipTypes)!==null&&rn!==void 0?rn:[];return Object.keys(Mt).reduce((an,on)=>(an[on]=convertColumn(on,st,Mt,nn),an),{})},convertColumn=(st,Mt,Xr,rn)=>{const nn=Mt.find(sn=>sn.name===st),an=nn==null?void 0:nn.type,on=Xr[st];return an&&!rn.includes(an)?convertCell(an,on):noop$1(on)},convertCell=(st,Mt)=>{if(st.charAt(0)==="_"){const Xr=st.slice(1,st.length);return toArray(Mt,Xr)}switch(st){case PostgresTypes.bool:return toBoolean(Mt);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(Mt);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(Mt);case PostgresTypes.timestamp:return toTimestampString(Mt);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(Mt);default:return noop$1(Mt)}},noop$1=st=>st,toBoolean=st=>{switch(st){case"t":return!0;case"f":return!1;default:return st}},toNumber=st=>{if(typeof st=="string"){const Mt=parseFloat(st);if(!Number.isNaN(Mt))return Mt}return st},toJson=st=>{if(typeof st=="string")try{return JSON.parse(st)}catch(Mt){return console.log(`JSON parse error: ${Mt}`),st}return st},toArray=(st,Mt)=>{if(typeof st!="string")return st;const Xr=st.length-1,rn=st[Xr];if(st[0]==="{"&&rn==="}"){let an;const on=st.slice(1,Xr);try{an=JSON.parse("["+on+"]")}catch{an=on?on.split(","):[]}return an.map(sn=>convertCell(Mt,sn))}return st},toTimestampString=st=>typeof st=="string"?st.replace(" ","T"):st;var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(st){st.ALL="*",st.INSERT="INSERT",st.UPDATE="UPDATE",st.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(st){st.BROADCAST="broadcast",st.PRESENCE="presence",st.POSTGRES_CHANGES="postgres_changes"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(st){st.SUBSCRIBED="SUBSCRIBED",st.TIMED_OUT="TIMED_OUT",st.CLOSED="CLOSED",st.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(Mt,Xr={config:{}},rn){this.topic=Mt,this.params=Xr,this.socket=rn,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=Mt.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},Xr.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(nn=>nn.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(nn=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,nn),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(nn,an)=>{this._trigger(this._replyEventName(an),nn)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(Mt,Xr=this.timeout){var rn,nn;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:an,presence:on}}=this.params;this._onError(un=>Mt&&Mt("CHANNEL_ERROR",un)),this._onClose(()=>Mt&&Mt("CLOSED"));const sn={},ln={broadcast:an,presence:on,postgres_changes:(nn=(rn=this.bindings.postgres_changes)===null||rn===void 0?void 0:rn.map(un=>un.filter))!==null&&nn!==void 0?nn:[]};this.socket.accessToken&&(sn.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:ln},sn)),this.joinedOnce=!0,this._rejoin(Xr),this.joinPush.receive("ok",({postgres_changes:un})=>{var cn;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),un===void 0){Mt&&Mt("SUBSCRIBED");return}else{const hn=this.bindings.postgres_changes,fn=(cn=hn==null?void 0:hn.length)!==null&&cn!==void 0?cn:0,to=[];for(let uo=0;uo<fn;uo++){const co=hn[uo],{filter:{event:Uo,schema:lo,table:ho,filter:fo}}=co,mo=un&&un[uo];if(mo&&mo.event===Uo&&mo.schema===lo&&mo.table===ho&&mo.filter===fo)to.push(Object.assign(Object.assign({},co),{id:mo.id}));else{this.unsubscribe(),Mt&&Mt("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=to,Mt&&Mt("SUBSCRIBED");return}}).receive("error",un=>{Mt&&Mt("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(un).join(", ")||"error")))}).receive("timeout",()=>{Mt&&Mt("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(Mt,Xr={}){return await this.send({type:"presence",event:"track",payload:Mt},Xr.timeout||this.timeout)}async untrack(Mt={}){return await this.send({type:"presence",event:"untrack"},Mt)}on(Mt,Xr,rn){return this._on(Mt,Xr,rn)}async send(Mt,Xr={}){var rn,nn;if(!this._canPush()&&Mt.type==="broadcast"){const{event:an,payload:on}=Mt,sn={method:"POST",headers:{apikey:(rn=this.socket.apiKey)!==null&&rn!==void 0?rn:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:an,payload:on}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,sn,(nn=Xr.timeout)!==null&&nn!==void 0?nn:this.timeout)).ok?"ok":"error"}catch(ln){return ln.name==="AbortError"?"timed out":"error"}}else return new Promise(an=>{var on,sn,ln;const un=this._push(Mt.type,Mt,Xr.timeout||this.timeout);Mt.type==="broadcast"&&!(!((ln=(sn=(on=this.params)===null||on===void 0?void 0:on.config)===null||sn===void 0?void 0:sn.broadcast)===null||ln===void 0)&&ln.ack)&&an("ok"),un.receive("ok",()=>an("ok")),un.receive("timeout",()=>an("timed out"))})}updateJoinPayload(Mt){this.joinPush.updatePayload(Mt)}unsubscribe(Mt=this.timeout){this.state=CHANNEL_STATES.leaving;const Xr=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(rn=>{const nn=new Push(this,CHANNEL_EVENTS.leave,{},Mt);nn.receive("ok",()=>{Xr(),rn("ok")}).receive("timeout",()=>{Xr(),rn("timed out")}).receive("error",()=>{rn("error")}),nn.send(),this._canPush()||nn.trigger("ok",{})})}_broadcastEndpointURL(){let Mt=this.socket.endPoint;return Mt=Mt.replace(/^ws/i,"http"),Mt=Mt.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),Mt.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(Mt,Xr,rn){const nn=new AbortController,an=setTimeout(()=>nn.abort(),rn),on=await this.socket.fetch(Mt,Object.assign(Object.assign({},Xr),{signal:nn.signal}));return clearTimeout(an),on}_push(Mt,Xr,rn=this.timeout){if(!this.joinedOnce)throw`tried to push '${Mt}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let nn=new Push(this,Mt,Xr,rn);return this._canPush()?nn.send():(nn.startTimeout(),this.pushBuffer.push(nn)),nn}_onMessage(Mt,Xr,rn){return Xr}_isMember(Mt){return this.topic===Mt}_joinRef(){return this.joinPush.ref}_trigger(Mt,Xr,rn){var nn,an;const on=Mt.toLocaleLowerCase(),{close:sn,error:ln,leave:un,join:cn}=CHANNEL_EVENTS;if(rn&&[sn,ln,un,cn].indexOf(on)>=0&&rn!==this._joinRef())return;let fn=this._onMessage(on,Xr,rn);if(Xr&&!fn)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(on)?(nn=this.bindings.postgres_changes)===null||nn===void 0||nn.filter(to=>{var uo,co,Uo;return((uo=to.filter)===null||uo===void 0?void 0:uo.event)==="*"||((Uo=(co=to.filter)===null||co===void 0?void 0:co.event)===null||Uo===void 0?void 0:Uo.toLocaleLowerCase())===on}).map(to=>to.callback(fn,rn)):(an=this.bindings[on])===null||an===void 0||an.filter(to=>{var uo,co,Uo,lo,ho,fo;if(["broadcast","presence","postgres_changes"].includes(on))if("id"in to){const mo=to.id,_d=(uo=to.filter)===null||uo===void 0?void 0:uo.event;return mo&&((co=Xr.ids)===null||co===void 0?void 0:co.includes(mo))&&(_d==="*"||(_d==null?void 0:_d.toLocaleLowerCase())===((Uo=Xr.data)===null||Uo===void 0?void 0:Uo.type.toLocaleLowerCase()))}else{const mo=(ho=(lo=to==null?void 0:to.filter)===null||lo===void 0?void 0:lo.event)===null||ho===void 0?void 0:ho.toLocaleLowerCase();return mo==="*"||mo===((fo=Xr==null?void 0:Xr.event)===null||fo===void 0?void 0:fo.toLocaleLowerCase())}else return to.type.toLocaleLowerCase()===on}).map(to=>{if(typeof fn=="object"&&"ids"in fn){const uo=fn.data,{schema:co,table:Uo,commit_timestamp:lo,type:ho,errors:fo}=uo;fn=Object.assign(Object.assign({},{schema:co,table:Uo,commit_timestamp:lo,eventType:ho,new:{},old:{},errors:fo}),this._getPayloadRecords(uo))}to.callback(fn,rn)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(Mt){return`chan_reply_${Mt}`}_on(Mt,Xr,rn){const nn=Mt.toLocaleLowerCase(),an={type:nn,filter:Xr,callback:rn};return this.bindings[nn]?this.bindings[nn].push(an):this.bindings[nn]=[an],this}_off(Mt,Xr){const rn=Mt.toLocaleLowerCase();return this.bindings[rn]=this.bindings[rn].filter(nn=>{var an;return!(((an=nn.type)===null||an===void 0?void 0:an.toLocaleLowerCase())===rn&&RealtimeChannel.isEqual(nn.filter,Xr))}),this}static isEqual(Mt,Xr){if(Object.keys(Mt).length!==Object.keys(Xr).length)return!1;for(const rn in Mt)if(Mt[rn]!==Xr[rn])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(Mt){this._on(CHANNEL_EVENTS.close,{},Mt)}_onError(Mt){this._on(CHANNEL_EVENTS.error,{},Xr=>Mt(Xr))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(Mt=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(Mt))}_getPayloadRecords(Mt){const Xr={new:{},old:{}};return(Mt.type==="INSERT"||Mt.type==="UPDATE")&&(Xr.new=convertChangeData(Mt.columns,Mt.record)),(Mt.type==="UPDATE"||Mt.type==="DELETE")&&(Xr.old=convertChangeData(Mt.columns,Mt.old_record)),Xr}}const noop=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u";class RealtimeClient{constructor(Mt,Xr){var rn;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=an=>{let on;return an?on=an:typeof fetch>"u"?on=(...sn)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0).then(({default:ln})=>ln(...sn)):on=fetch,(...sn)=>on(...sn)},this.endPoint=`${Mt}/${TRANSPORTS.websocket}`,Xr!=null&&Xr.transport?this.transport=Xr.transport:this.transport=null,Xr!=null&&Xr.params&&(this.params=Xr.params),Xr!=null&&Xr.headers&&(this.headers=Object.assign(Object.assign({},this.headers),Xr.headers)),Xr!=null&&Xr.timeout&&(this.timeout=Xr.timeout),Xr!=null&&Xr.logger&&(this.logger=Xr.logger),Xr!=null&&Xr.heartbeatIntervalMs&&(this.heartbeatIntervalMs=Xr.heartbeatIntervalMs);const nn=(rn=Xr==null?void 0:Xr.params)===null||rn===void 0?void 0:rn.apikey;nn&&(this.accessToken=nn,this.apiKey=nn),this.reconnectAfterMs=Xr!=null&&Xr.reconnectAfterMs?Xr.reconnectAfterMs:an=>[1e3,2e3,5e3,1e4][an-1]||1e4,this.encode=Xr!=null&&Xr.encode?Xr.encode:(an,on)=>on(JSON.stringify(an)),this.decode=Xr!=null&&Xr.decode?Xr.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(Xr==null?void 0:Xr.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(()=>import("./browser-87f4daa6.js").then(Mt=>Mt.b),[]).then(({default:Mt})=>{this.conn=new Mt(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(Mt,Xr){this.conn&&(this.conn.onclose=function(){},Mt?this.conn.close(Mt,Xr??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(Mt){const Xr=await Mt.unsubscribe();return this.channels.length===0&&this.disconnect(),Xr}async removeAllChannels(){const Mt=await Promise.all(this.channels.map(Xr=>Xr.unsubscribe()));return this.disconnect(),Mt}log(Mt,Xr,rn){this.logger(Mt,Xr,rn)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(Mt,Xr={config:{}}){const rn=new RealtimeChannel(`realtime:${Mt}`,Xr,this);return this.channels.push(rn),rn}push(Mt){const{topic:Xr,event:rn,payload:nn,ref:an}=Mt,on=()=>{this.encode(Mt,sn=>{var ln;(ln=this.conn)===null||ln===void 0||ln.send(sn)})};this.log("push",`${Xr} ${rn} (${an})`,nn),this.isConnected()?on():this.sendBuffer.push(on)}setAuth(Mt){this.accessToken=Mt,this.channels.forEach(Xr=>{Mt&&Xr.updateJoinPayload({access_token:Mt}),Xr.joinedOnce&&Xr._isJoined()&&Xr._push(CHANNEL_EVENTS.access_token,{access_token:Mt})})}_makeRef(){let Mt=this.ref+1;return Mt===this.ref?this.ref=0:this.ref=Mt,this.ref.toString()}_leaveOpenTopic(Mt){let Xr=this.channels.find(rn=>rn.topic===Mt&&(rn._isJoined()||rn._isJoining()));Xr&&(this.log("transport",`leaving duplicate topic "${Mt}"`),Xr.unsubscribe())}_remove(Mt){this.channels=this.channels.filter(Xr=>Xr._joinRef()!==Mt._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=Mt=>this._onConnError(Mt),this.conn.onmessage=Mt=>this._onConnMessage(Mt),this.conn.onclose=Mt=>this._onConnClose(Mt))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}_onConnMessage(Mt){this.decode(Mt.data,Xr=>{let{topic:rn,event:nn,payload:an,ref:on}=Xr;(on&&on===this.pendingHeartbeatRef||nn===(an==null?void 0:an.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${an.status||""} ${rn} ${nn} ${on&&"("+on+")"||""}`,an),this.channels.filter(sn=>sn._isMember(rn)).forEach(sn=>sn._trigger(nn,an,on)),this.stateChangeCallbacks.message.forEach(sn=>sn(Xr))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(Mt=>Mt())}_onConnClose(Mt){this.log("transport","close",Mt),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(Xr=>Xr(Mt))}_onConnError(Mt){this.log("transport",Mt.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(Xr=>Xr(Mt))}_triggerChanError(){this.channels.forEach(Mt=>Mt._trigger(CHANNEL_EVENTS.error))}_appendParams(Mt,Xr){if(Object.keys(Xr).length===0)return Mt;const rn=Mt.match(/\?/)?"&":"?",nn=new URLSearchParams(Xr);return`${Mt}${rn}${nn}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(Mt=>Mt()),this.sendBuffer=[])}_sendHeartbeat(){var Mt;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(Mt=this.conn)===null||Mt===void 0||Mt.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class WSWebSocketDummy{constructor(Mt,Xr,rn){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=Mt,this.close=rn.close}}class StorageError extends Error{constructor(Mt){super(Mt),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(st){return typeof st=="object"&&st!==null&&"__isStorageError"in st}class StorageApiError extends StorageError{constructor(Mt,Xr){super(Mt),this.name="StorageApiError",this.status=Xr}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(Mt,Xr){super(Mt),this.name="StorageUnknownError",this.originalError=Xr}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};const resolveFetch$2=st=>{let Mt;return st?Mt=st:typeof fetch>"u"?Mt=(...Xr)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0).then(({default:rn})=>rn(...Xr)):Mt=fetch,(...Xr)=>Mt(...Xr)},resolveResponse=()=>__awaiter$5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response});var __awaiter$4=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};const _getErrorMessage$1=st=>st.msg||st.message||st.error_description||st.error||JSON.stringify(st),handleError$1=(st,Mt)=>__awaiter$4(void 0,void 0,void 0,function*(){const Xr=yield resolveResponse();st instanceof Xr?st.json().then(rn=>{Mt(new StorageApiError(_getErrorMessage$1(rn),st.status||500))}).catch(rn=>{Mt(new StorageUnknownError(_getErrorMessage$1(rn),rn))}):Mt(new StorageUnknownError(_getErrorMessage$1(st),st))}),_getRequestParams$1=(st,Mt,Xr,rn)=>{const nn={method:st,headers:(Mt==null?void 0:Mt.headers)||{}};return st==="GET"?nn:(nn.headers=Object.assign({"Content-Type":"application/json"},Mt==null?void 0:Mt.headers),nn.body=JSON.stringify(rn),Object.assign(Object.assign({},nn),Xr))};function _handleRequest$1(st,Mt,Xr,rn,nn,an){return __awaiter$4(this,void 0,void 0,function*(){return new Promise((on,sn)=>{st(Xr,_getRequestParams$1(Mt,rn,nn,an)).then(ln=>{if(!ln.ok)throw ln;return rn!=null&&rn.noResolveJson?ln:ln.json()}).then(ln=>on(ln)).catch(ln=>handleError$1(ln,sn))})})}function get(st,Mt,Xr,rn){return __awaiter$4(this,void 0,void 0,function*(){return _handleRequest$1(st,"GET",Mt,Xr,rn)})}function post(st,Mt,Xr,rn,nn){return __awaiter$4(this,void 0,void 0,function*(){return _handleRequest$1(st,"POST",Mt,rn,nn,Xr)})}function put(st,Mt,Xr,rn,nn){return __awaiter$4(this,void 0,void 0,function*(){return _handleRequest$1(st,"PUT",Mt,rn,nn,Xr)})}function remove(st,Mt,Xr,rn,nn){return __awaiter$4(this,void 0,void 0,function*(){return _handleRequest$1(st,"DELETE",Mt,rn,nn,Xr)})}var __awaiter$3=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(Mt,Xr={},rn,nn){this.url=Mt,this.headers=Xr,this.bucketId=rn,this.fetch=resolveFetch$2(nn)}uploadOrUpdate(Mt,Xr,rn,nn){return __awaiter$3(this,void 0,void 0,function*(){try{let an;const on=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),nn),sn=Object.assign(Object.assign({},this.headers),Mt==="POST"&&{"x-upsert":String(on.upsert)});typeof Blob<"u"&&rn instanceof Blob?(an=new FormData,an.append("cacheControl",on.cacheControl),an.append("",rn)):typeof FormData<"u"&&rn instanceof FormData?(an=rn,an.append("cacheControl",on.cacheControl)):(an=rn,sn["cache-control"]=`max-age=${on.cacheControl}`,sn["content-type"]=on.contentType);const ln=this._removeEmptyFolders(Xr),un=this._getFinalPath(ln),cn=yield this.fetch(`${this.url}/object/${un}`,Object.assign({method:Mt,body:an,headers:sn},on!=null&&on.duplex?{duplex:on.duplex}:{})),hn=yield cn.json();return cn.ok?{data:{path:ln,id:hn.Id,fullPath:hn.Key},error:null}:{data:null,error:hn}}catch(an){if(isStorageError(an))return{data:null,error:an};throw an}})}upload(Mt,Xr,rn){return __awaiter$3(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",Mt,Xr,rn)})}uploadToSignedUrl(Mt,Xr,rn,nn){return __awaiter$3(this,void 0,void 0,function*(){const an=this._removeEmptyFolders(Mt),on=this._getFinalPath(an),sn=new URL(this.url+`/object/upload/sign/${on}`);sn.searchParams.set("token",Xr);try{let ln;const un=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},nn),cn=Object.assign(Object.assign({},this.headers),{"x-upsert":String(un.upsert)});typeof Blob<"u"&&rn instanceof Blob?(ln=new FormData,ln.append("cacheControl",un.cacheControl),ln.append("",rn)):typeof FormData<"u"&&rn instanceof FormData?(ln=rn,ln.append("cacheControl",un.cacheControl)):(ln=rn,cn["cache-control"]=`max-age=${un.cacheControl}`,cn["content-type"]=un.contentType);const hn=yield this.fetch(sn.toString(),{method:"PUT",body:ln,headers:cn}),fn=yield hn.json();return hn.ok?{data:{path:an,fullPath:fn.Key},error:null}:{data:null,error:fn}}catch(ln){if(isStorageError(ln))return{data:null,error:ln};throw ln}})}createSignedUploadUrl(Mt){return __awaiter$3(this,void 0,void 0,function*(){try{let Xr=this._getFinalPath(Mt);const rn=yield post(this.fetch,`${this.url}/object/upload/sign/${Xr}`,{},{headers:this.headers}),nn=new URL(this.url+rn.url),an=nn.searchParams.get("token");if(!an)throw new StorageError("No token returned by API");return{data:{signedUrl:nn.toString(),path:Mt,token:an},error:null}}catch(Xr){if(isStorageError(Xr))return{data:null,error:Xr};throw Xr}})}update(Mt,Xr,rn){return __awaiter$3(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",Mt,Xr,rn)})}move(Mt,Xr){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:Mt,destinationKey:Xr},{headers:this.headers}),error:null}}catch(rn){if(isStorageError(rn))return{data:null,error:rn};throw rn}})}copy(Mt,Xr){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:Mt,destinationKey:Xr},{headers:this.headers})).Key},error:null}}catch(rn){if(isStorageError(rn))return{data:null,error:rn};throw rn}})}createSignedUrl(Mt,Xr,rn){return __awaiter$3(this,void 0,void 0,function*(){try{let nn=this._getFinalPath(Mt),an=yield post(this.fetch,`${this.url}/object/sign/${nn}`,Object.assign({expiresIn:Xr},rn!=null&&rn.transform?{transform:rn.transform}:{}),{headers:this.headers});const on=rn!=null&&rn.download?`&download=${rn.download===!0?"":rn.download}`:"";return an={signedUrl:encodeURI(`${this.url}${an.signedURL}${on}`)},{data:an,error:null}}catch(nn){if(isStorageError(nn))return{data:null,error:nn};throw nn}})}createSignedUrls(Mt,Xr,rn){return __awaiter$3(this,void 0,void 0,function*(){try{const nn=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:Xr,paths:Mt},{headers:this.headers}),an=rn!=null&&rn.download?`&download=${rn.download===!0?"":rn.download}`:"";return{data:nn.map(on=>Object.assign(Object.assign({},on),{signedUrl:on.signedURL?encodeURI(`${this.url}${on.signedURL}${an}`):null})),error:null}}catch(nn){if(isStorageError(nn))return{data:null,error:nn};throw nn}})}download(Mt,Xr){return __awaiter$3(this,void 0,void 0,function*(){const nn=typeof(Xr==null?void 0:Xr.transform)<"u"?"render/image/authenticated":"object",an=this.transformOptsToQueryString((Xr==null?void 0:Xr.transform)||{}),on=an?`?${an}`:"";try{const sn=this._getFinalPath(Mt);return{data:yield(yield get(this.fetch,`${this.url}/${nn}/${sn}${on}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(sn){if(isStorageError(sn))return{data:null,error:sn};throw sn}})}getPublicUrl(Mt,Xr){const rn=this._getFinalPath(Mt),nn=[],an=Xr!=null&&Xr.download?`download=${Xr.download===!0?"":Xr.download}`:"";an!==""&&nn.push(an);const sn=typeof(Xr==null?void 0:Xr.transform)<"u"?"render/image":"object",ln=this.transformOptsToQueryString((Xr==null?void 0:Xr.transform)||{});ln!==""&&nn.push(ln);let un=nn.join("&");return un!==""&&(un=`?${un}`),{data:{publicUrl:encodeURI(`${this.url}/${sn}/public/${rn}${un}`)}}}remove(Mt){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:Mt},{headers:this.headers}),error:null}}catch(Xr){if(isStorageError(Xr))return{data:null,error:Xr};throw Xr}})}list(Mt,Xr,rn){return __awaiter$3(this,void 0,void 0,function*(){try{const nn=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),Xr),{prefix:Mt||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,nn,{headers:this.headers},rn),error:null}}catch(nn){if(isStorageError(nn))return{data:null,error:nn};throw nn}})}_getFinalPath(Mt){return`${this.bucketId}/${Mt}`}_removeEmptyFolders(Mt){return Mt.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(Mt){const Xr=[];return Mt.width&&Xr.push(`width=${Mt.width}`),Mt.height&&Xr.push(`height=${Mt.height}`),Mt.resize&&Xr.push(`resize=${Mt.resize}`),Mt.format&&Xr.push(`format=${Mt.format}`),Mt.quality&&Xr.push(`quality=${Mt.quality}`),Xr.join("&")}}const version$2="2.5.5",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$2=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};class StorageBucketApi{constructor(Mt,Xr={},rn){this.url=Mt,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),Xr),this.fetch=resolveFetch$2(rn)}listBuckets(){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(Mt){if(isStorageError(Mt))return{data:null,error:Mt};throw Mt}})}getBucket(Mt){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${Mt}`,{headers:this.headers}),error:null}}catch(Xr){if(isStorageError(Xr))return{data:null,error:Xr};throw Xr}})}createBucket(Mt,Xr={public:!1}){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:Mt,name:Mt,public:Xr.public,file_size_limit:Xr.fileSizeLimit,allowed_mime_types:Xr.allowedMimeTypes},{headers:this.headers}),error:null}}catch(rn){if(isStorageError(rn))return{data:null,error:rn};throw rn}})}updateBucket(Mt,Xr){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${Mt}`,{id:Mt,name:Mt,public:Xr.public,file_size_limit:Xr.fileSizeLimit,allowed_mime_types:Xr.allowedMimeTypes},{headers:this.headers}),error:null}}catch(rn){if(isStorageError(rn))return{data:null,error:rn};throw rn}})}emptyBucket(Mt){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${Mt}/empty`,{},{headers:this.headers}),error:null}}catch(Xr){if(isStorageError(Xr))return{data:null,error:Xr};throw Xr}})}deleteBucket(Mt){return __awaiter$2(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${Mt}`,{},{headers:this.headers}),error:null}}catch(Xr){if(isStorageError(Xr))return{data:null,error:Xr};throw Xr}})}}class StorageClient extends StorageBucketApi{constructor(Mt,Xr={},rn){super(Mt,Xr,rn)}from(Mt){return new StorageFileApi(this.url,this.headers,Mt,this.fetch)}}const version$1="2.41.1";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$1=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};const resolveFetch$1=st=>{let Mt;return st?Mt=st:typeof fetch>"u"?Mt=nodeFetch:Mt=fetch,(...Xr)=>Mt(...Xr)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(st,Mt,Xr)=>{const rn=resolveFetch$1(Xr),nn=resolveHeadersConstructor();return(an,on)=>__awaiter$1(void 0,void 0,void 0,function*(){var sn;const ln=(sn=yield Mt())!==null&&sn!==void 0?sn:st;let un=new nn(on==null?void 0:on.headers);return un.has("apikey")||un.set("apikey",st),un.has("Authorization")||un.set("Authorization",`Bearer ${ln}`),rn(an,Object.assign(Object.assign({},on),{headers:un}))})};function stripTrailingSlash(st){return st.replace(/\/$/,"")}function applySettingDefaults(st,Mt){const{db:Xr,auth:rn,realtime:nn,global:an}=st,{db:on,auth:sn,realtime:ln,global:un}=Mt;return{db:Object.assign(Object.assign({},on),Xr),auth:Object.assign(Object.assign({},sn),rn),realtime:Object.assign(Object.assign({},ln),nn),global:Object.assign(Object.assign({},un),an)}}const version="2.63.0",GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},EXPIRY_MARGIN=10,API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function expiresAt(st){return Math.round(Date.now()/1e3)+st}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(st){const Mt=Math.random()*16|0;return(st=="x"?Mt:Mt&3|8).toString(16)})}const isBrowser=()=>typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const st=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(st,st),globalThis.localStorage.removeItem(st),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(st){const Mt={},Xr=new URL(st);if(Xr.hash&&Xr.hash[0]==="#")try{new URLSearchParams(Xr.hash.substring(1)).forEach((nn,an)=>{Mt[an]=nn})}catch{}return Xr.searchParams.forEach((rn,nn)=>{Mt[nn]=rn}),Mt}const resolveFetch=st=>{let Mt;return st?Mt=st:typeof fetch>"u"?Mt=(...Xr)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0).then(({default:rn})=>rn(...Xr)):Mt=fetch,(...Xr)=>Mt(...Xr)},looksLikeFetchResponse=st=>typeof st=="object"&&st!==null&&"status"in st&&"ok"in st&&"json"in st&&typeof st.json=="function",setItemAsync=async(st,Mt,Xr)=>{await st.setItem(Mt,JSON.stringify(Xr))},getItemAsync=async(st,Mt)=>{const Xr=await st.getItem(Mt);if(!Xr)return null;try{return JSON.parse(Xr)}catch{return Xr}},removeItemAsync=async(st,Mt)=>{await st.removeItem(Mt)};function decodeBase64URL(st){const Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Xr="",rn,nn,an,on,sn,ln,un,cn=0;for(st=st.replace("-","+").replace("_","/");cn<st.length;)on=Mt.indexOf(st.charAt(cn++)),sn=Mt.indexOf(st.charAt(cn++)),ln=Mt.indexOf(st.charAt(cn++)),un=Mt.indexOf(st.charAt(cn++)),rn=on<<2|sn>>4,nn=(sn&15)<<4|ln>>2,an=(ln&3)<<6|un,Xr=Xr+String.fromCharCode(rn),ln!=64&&nn!=0&&(Xr=Xr+String.fromCharCode(nn)),un!=64&&an!=0&&(Xr=Xr+String.fromCharCode(an));return Xr}class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((Mt,Xr)=>{this.resolve=Mt,this.reject=Xr})}}Deferred.promiseConstructor=Promise;function decodeJWTPayload(st){const Mt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,Xr=st.split(".");if(Xr.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!Mt.test(Xr[1]))throw new Error("JWT is not valid: payload is not in base64url format");const rn=Xr[1];return JSON.parse(decodeBase64URL(rn))}async function sleep(st){return await new Promise(Mt=>{setTimeout(()=>Mt(null),st)})}function retryable(st,Mt){return new Promise((rn,nn)=>{(async()=>{for(let an=0;an<1/0;an++)try{const on=await st(an);if(!Mt(an,null,on)){rn(on);return}}catch(on){if(!Mt(an,on)){nn(on);return}}})()})}function dec2hex(st){return("0"+st.toString(16)).substr(-2)}function generatePKCEVerifier(){const Mt=new Uint32Array(56);if(typeof crypto>"u"){const Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",rn=Xr.length;let nn="";for(let an=0;an<56;an++)nn+=Xr.charAt(Math.floor(Math.random()*rn));return nn}return crypto.getRandomValues(Mt),Array.from(Mt,dec2hex).join("")}async function sha256(st){const Xr=new TextEncoder().encode(st),rn=await crypto.subtle.digest("SHA-256",Xr),nn=new Uint8Array(rn);return Array.from(nn).map(an=>String.fromCharCode(an)).join("")}function base64urlencode(st){return btoa(st).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function generatePKCEChallenge(st){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),st;const Xr=await sha256(st);return base64urlencode(Xr)}async function getCodeChallengeAndMethod(st,Mt,Xr=!1){const rn=generatePKCEVerifier();let nn=rn;Xr&&(nn+="/PASSWORD_RECOVERY"),await setItemAsync(st,`${Mt}-code-verifier`,nn);const an=await generatePKCEChallenge(rn);return[an,rn===an?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(st){const Mt=st.headers.get(API_VERSION_HEADER_NAME);if(!Mt||!Mt.match(API_VERSION_REGEX))return null;try{return new Date(`${Mt}T00:00:00.0Z`)}catch{return null}}class AuthError extends Error{constructor(Mt,Xr,rn){super(Mt),this.__isAuthError=!0,this.name="AuthError",this.status=Xr,this.code=rn}}function isAuthError(st){return typeof st=="object"&&st!==null&&"__isAuthError"in st}class AuthApiError extends AuthError{constructor(Mt,Xr,rn){super(Mt,Xr,rn),this.name="AuthApiError",this.status=Xr,this.code=rn}}function isAuthApiError(st){return isAuthError(st)&&st.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(Mt,Xr){super(Mt),this.name="AuthUnknownError",this.originalError=Xr}}class CustomAuthError extends AuthError{constructor(Mt,Xr,rn,nn){super(Mt,rn,nn),this.name=Xr,this.status=rn}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(Mt){super(Mt,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(Mt,Xr=null){super(Mt,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=Xr}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(Mt,Xr=null){super(Mt,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=Xr}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(Mt,Xr){super(Mt,"AuthRetryableFetchError",Xr,void 0)}}function isAuthRetryableFetchError(st){return isAuthError(st)&&st.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(Mt,Xr,rn){super(Mt,"AuthWeakPasswordError",Xr,"weak_password"),this.reasons=rn}}var __rest$1=globalThis&&globalThis.__rest||function(st,Mt){var Xr={};for(var rn in st)Object.prototype.hasOwnProperty.call(st,rn)&&Mt.indexOf(rn)<0&&(Xr[rn]=st[rn]);if(st!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nn=0,rn=Object.getOwnPropertySymbols(st);nn<rn.length;nn++)Mt.indexOf(rn[nn])<0&&Object.prototype.propertyIsEnumerable.call(st,rn[nn])&&(Xr[rn[nn]]=st[rn[nn]]);return Xr};const _getErrorMessage=st=>st.msg||st.message||st.error_description||st.error||JSON.stringify(st),NETWORK_ERROR_CODES=[502,503,504];async function handleError(st){var Mt;if(!looksLikeFetchResponse(st))throw new AuthRetryableFetchError(_getErrorMessage(st),0);if(NETWORK_ERROR_CODES.includes(st.status))throw new AuthRetryableFetchError(_getErrorMessage(st),st.status);let Xr;try{Xr=await st.json()}catch(an){throw new AuthUnknownError(_getErrorMessage(an),an)}let rn;const nn=parseResponseAPIVersion(st);if(nn&&nn.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof Xr=="object"&&Xr&&typeof Xr.code=="string"?rn=Xr.code:typeof Xr=="object"&&Xr&&typeof Xr.error_code=="string"&&(rn=Xr.error_code),rn){if(rn==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(Xr),st.status,((Mt=Xr.weak_password)===null||Mt===void 0?void 0:Mt.reasons)||[])}else if(typeof Xr=="object"&&Xr&&typeof Xr.weak_password=="object"&&Xr.weak_password&&Array.isArray(Xr.weak_password.reasons)&&Xr.weak_password.reasons.length&&Xr.weak_password.reasons.reduce((an,on)=>an&&typeof on=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(Xr),st.status,Xr.weak_password.reasons);throw new AuthApiError(_getErrorMessage(Xr),st.status||500,rn)}const _getRequestParams=(st,Mt,Xr,rn)=>{const nn={method:st,headers:(Mt==null?void 0:Mt.headers)||{}};return st==="GET"?nn:(nn.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},Mt==null?void 0:Mt.headers),nn.body=JSON.stringify(rn),Object.assign(Object.assign({},nn),Xr))};async function _request(st,Mt,Xr,rn){var nn;const an=Object.assign({},rn==null?void 0:rn.headers);an[API_VERSION_HEADER_NAME]||(an[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),rn!=null&&rn.jwt&&(an.Authorization=`Bearer ${rn.jwt}`);const on=(nn=rn==null?void 0:rn.query)!==null&&nn!==void 0?nn:{};rn!=null&&rn.redirectTo&&(on.redirect_to=rn.redirectTo);const sn=Object.keys(on).length?"?"+new URLSearchParams(on).toString():"",ln=await _handleRequest(st,Mt,Xr+sn,{headers:an,noResolveJson:rn==null?void 0:rn.noResolveJson},{},rn==null?void 0:rn.body);return rn!=null&&rn.xform?rn==null?void 0:rn.xform(ln):{data:Object.assign({},ln),error:null}}async function _handleRequest(st,Mt,Xr,rn,nn,an){const on=_getRequestParams(Mt,rn,nn,an);let sn;try{sn=await st(Xr,Object.assign(Object.assign({},on),{cache:"no-store"}))}catch(ln){throw console.error(ln),new AuthRetryableFetchError(_getErrorMessage(ln),0)}if(sn.ok||await handleError(sn),rn!=null&&rn.noResolveJson)return sn;try{return await sn.json()}catch(ln){await handleError(ln)}}function _sessionResponse(st){var Mt;let Xr=null;hasSession(st)&&(Xr=Object.assign({},st),st.expires_at||(Xr.expires_at=expiresAt(st.expires_in)));const rn=(Mt=st.user)!==null&&Mt!==void 0?Mt:st;return{data:{session:Xr,user:rn},error:null}}function _sessionResponsePassword(st){const Mt=_sessionResponse(st);return!Mt.error&&st.weak_password&&typeof st.weak_password=="object"&&Array.isArray(st.weak_password.reasons)&&st.weak_password.reasons.length&&st.weak_password.message&&typeof st.weak_password.message=="string"&&st.weak_password.reasons.reduce((Xr,rn)=>Xr&&typeof rn=="string",!0)&&(Mt.data.weak_password=st.weak_password),Mt}function _userResponse(st){var Mt;return{data:{user:(Mt=st.user)!==null&&Mt!==void 0?Mt:st},error:null}}function _ssoResponse(st){return{data:st,error:null}}function _generateLinkResponse(st){const{action_link:Mt,email_otp:Xr,hashed_token:rn,redirect_to:nn,verification_type:an}=st,on=__rest$1(st,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),sn={action_link:Mt,email_otp:Xr,hashed_token:rn,redirect_to:nn,verification_type:an},ln=Object.assign({},on);return{data:{properties:sn,user:ln},error:null}}function _noResolveJsonResponse(st){return st}function hasSession(st){return st.access_token&&st.refresh_token&&st.expires_in}var __rest=globalThis&&globalThis.__rest||function(st,Mt){var Xr={};for(var rn in st)Object.prototype.hasOwnProperty.call(st,rn)&&Mt.indexOf(rn)<0&&(Xr[rn]=st[rn]);if(st!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nn=0,rn=Object.getOwnPropertySymbols(st);nn<rn.length;nn++)Mt.indexOf(rn[nn])<0&&Object.prototype.propertyIsEnumerable.call(st,rn[nn])&&(Xr[rn[nn]]=st[rn[nn]]);return Xr};class GoTrueAdminApi{constructor({url:Mt="",headers:Xr={},fetch:rn}){this.url=Mt,this.headers=Xr,this.fetch=resolveFetch(rn),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(Mt,Xr="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${Xr}`,{headers:this.headers,jwt:Mt,noResolveJson:!0}),{data:null,error:null}}catch(rn){if(isAuthError(rn))return{data:null,error:rn};throw rn}}async inviteUserByEmail(Mt,Xr={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:Mt,data:Xr.data},headers:this.headers,redirectTo:Xr.redirectTo,xform:_userResponse})}catch(rn){if(isAuthError(rn))return{data:{user:null},error:rn};throw rn}}async generateLink(Mt){try{const{options:Xr}=Mt,rn=__rest(Mt,["options"]),nn=Object.assign(Object.assign({},rn),Xr);return"newEmail"in rn&&(nn.new_email=rn==null?void 0:rn.newEmail,delete nn.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:nn,headers:this.headers,xform:_generateLinkResponse,redirectTo:Xr==null?void 0:Xr.redirectTo})}catch(Xr){if(isAuthError(Xr))return{data:{properties:null,user:null},error:Xr};throw Xr}}async createUser(Mt){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:Mt,headers:this.headers,xform:_userResponse})}catch(Xr){if(isAuthError(Xr))return{data:{user:null},error:Xr};throw Xr}}async listUsers(Mt){var Xr,rn,nn,an,on,sn,ln;try{const un={nextPage:null,lastPage:0,total:0},cn=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(rn=(Xr=Mt==null?void 0:Mt.page)===null||Xr===void 0?void 0:Xr.toString())!==null&&rn!==void 0?rn:"",per_page:(an=(nn=Mt==null?void 0:Mt.perPage)===null||nn===void 0?void 0:nn.toString())!==null&&an!==void 0?an:""},xform:_noResolveJsonResponse});if(cn.error)throw cn.error;const hn=await cn.json(),fn=(on=cn.headers.get("x-total-count"))!==null&&on!==void 0?on:0,to=(ln=(sn=cn.headers.get("link"))===null||sn===void 0?void 0:sn.split(","))!==null&&ln!==void 0?ln:[];return to.length>0&&(to.forEach(uo=>{const co=parseInt(uo.split(";")[0].split("=")[1].substring(0,1)),Uo=JSON.parse(uo.split(";")[1].split("=")[1]);un[`${Uo}Page`]=co}),un.total=parseInt(fn)),{data:Object.assign(Object.assign({},hn),un),error:null}}catch(un){if(isAuthError(un))return{data:{users:[]},error:un};throw un}}async getUserById(Mt){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${Mt}`,{headers:this.headers,xform:_userResponse})}catch(Xr){if(isAuthError(Xr))return{data:{user:null},error:Xr};throw Xr}}async updateUserById(Mt,Xr){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${Mt}`,{body:Xr,headers:this.headers,xform:_userResponse})}catch(rn){if(isAuthError(rn))return{data:{user:null},error:rn};throw rn}}async deleteUser(Mt,Xr=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${Mt}`,{headers:this.headers,body:{should_soft_delete:Xr},xform:_userResponse})}catch(rn){if(isAuthError(rn))return{data:{user:null},error:rn};throw rn}}async _listFactors(Mt){try{const{data:Xr,error:rn}=await _request(this.fetch,"GET",`${this.url}/admin/users/${Mt.userId}/factors`,{headers:this.headers,xform:nn=>({data:{factors:nn},error:null})});return{data:Xr,error:rn}}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}async _deleteFactor(Mt){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${Mt.userId}/factors/${Mt.id}`,{headers:this.headers}),error:null}}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}}const localStorageAdapter={getItem:st=>supportsLocalStorage()?globalThis.localStorage.getItem(st):null,setItem:(st,Mt)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(st,Mt)},removeItem:st=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(st)}};function memoryLocalStorageAdapter(st={}){return{getItem:Mt=>st[Mt]||null,setItem:(Mt,Xr)=>{st[Mt]=Xr},removeItem:Mt=>{delete st[Mt]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(Mt){super(Mt),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(st,Mt,Xr){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",st,Mt);const rn=new globalThis.AbortController;return Mt>0&&setTimeout(()=>{rn.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",st)},Mt),await globalThis.navigator.locks.request(st,Mt===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:rn.signal},async nn=>{if(nn){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",st,nn.name);try{return await Xr()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",st,nn.name)}}else{if(Mt===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",st),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${st}" immediately failed`);if(internals.debug)try{const an=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(an,null,"  "))}catch(an){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",an)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await Xr()}})}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1},AUTO_REFRESH_TICK_DURATION=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3;async function lockNoOp(st,Mt,Xr){return await Xr()}class GoTrueClient{constructor(Mt){var Xr,rn;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.insecureGetSessionWarningShown=!1,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const nn=Object.assign(Object.assign({},DEFAULT_OPTIONS),Mt);if(this.logDebugMessages=!!nn.debug,typeof nn.debug=="function"&&(this.logger=nn.debug),this.persistSession=nn.persistSession,this.storageKey=nn.storageKey,this.autoRefreshToken=nn.autoRefreshToken,this.admin=new GoTrueAdminApi({url:nn.url,headers:nn.headers,fetch:nn.fetch}),this.url=nn.url,this.headers=nn.headers,this.fetch=resolveFetch(nn.fetch),this.lock=nn.lock||lockNoOp,this.detectSessionInUrl=nn.detectSessionInUrl,this.flowType=nn.flowType,nn.lock?this.lock=nn.lock:isBrowser()&&(!((Xr=globalThis==null?void 0:globalThis.navigator)===null||Xr===void 0)&&Xr.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?nn.storage?this.storage=nn.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(an){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",an)}(rn=this.broadcastChannel)===null||rn===void 0||rn.addEventListener("message",async an=>{this._debug("received broadcast notification from other tab or client",an),await this._notifyAllSubscribers(an.data.event,an.data.session,!1)})}this.initialize()}_debug(...Mt){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...Mt),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const Mt=isBrowser()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",Mt),Mt||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:Xr,error:rn}=await this._getSessionFromURL(Mt);if(rn)return this._debug("#_initialize()","error detecting session from URL",rn),(rn==null?void 0:rn.message)==="Identity is already linked"||(rn==null?void 0:rn.message)==="Identity is already linked to another user"?{error:rn}:(await this._removeSession(),{error:rn});const{session:nn,redirectType:an}=Xr;return this._debug("#_initialize()","detected session in URL",nn,"redirect type",an),await this._saveSession(nn),setTimeout(async()=>{an==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",nn):await this._notifyAllSubscribers("SIGNED_IN",nn)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(Mt){return isAuthError(Mt)?{error:Mt}:{error:new AuthUnknownError("Unexpected error during initialization",Mt)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(Mt){var Xr,rn,nn;try{await this._removeSession();const an=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(rn=(Xr=Mt==null?void 0:Mt.options)===null||Xr===void 0?void 0:Xr.data)!==null&&rn!==void 0?rn:{},gotrue_meta_security:{captcha_token:(nn=Mt==null?void 0:Mt.options)===null||nn===void 0?void 0:nn.captchaToken}},xform:_sessionResponse}),{data:on,error:sn}=an;if(sn||!on)return{data:{user:null,session:null},error:sn};const ln=on.session,un=on.user;return on.session&&(await this._saveSession(on.session),await this._notifyAllSubscribers("SIGNED_IN",ln)),{data:{user:un,session:ln},error:null}}catch(an){if(isAuthError(an))return{data:{user:null,session:null},error:an};throw an}}async signUp(Mt){var Xr,rn,nn;try{await this._removeSession();let an;if("email"in Mt){const{email:cn,password:hn,options:fn}=Mt;let to=null,uo=null;this.flowType==="pkce"&&([to,uo]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),an=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:fn==null?void 0:fn.emailRedirectTo,body:{email:cn,password:hn,data:(Xr=fn==null?void 0:fn.data)!==null&&Xr!==void 0?Xr:{},gotrue_meta_security:{captcha_token:fn==null?void 0:fn.captchaToken},code_challenge:to,code_challenge_method:uo},xform:_sessionResponse})}else if("phone"in Mt){const{phone:cn,password:hn,options:fn}=Mt;an=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:cn,password:hn,data:(rn=fn==null?void 0:fn.data)!==null&&rn!==void 0?rn:{},channel:(nn=fn==null?void 0:fn.channel)!==null&&nn!==void 0?nn:"sms",gotrue_meta_security:{captcha_token:fn==null?void 0:fn.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:on,error:sn}=an;if(sn||!on)return{data:{user:null,session:null},error:sn};const ln=on.session,un=on.user;return on.session&&(await this._saveSession(on.session),await this._notifyAllSubscribers("SIGNED_IN",ln)),{data:{user:un,session:ln},error:null}}catch(an){if(isAuthError(an))return{data:{user:null,session:null},error:an};throw an}}async signInWithPassword(Mt){try{await this._removeSession();let Xr;if("email"in Mt){const{email:an,password:on,options:sn}=Mt;Xr=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:an,password:on,gotrue_meta_security:{captcha_token:sn==null?void 0:sn.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in Mt){const{phone:an,password:on,options:sn}=Mt;Xr=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:an,password:on,gotrue_meta_security:{captcha_token:sn==null?void 0:sn.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:rn,error:nn}=Xr;return nn?{data:{user:null,session:null},error:nn}:!rn||!rn.session||!rn.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(rn.session&&(await this._saveSession(rn.session),await this._notifyAllSubscribers("SIGNED_IN",rn.session)),{data:Object.assign({user:rn.user,session:rn.session},rn.weak_password?{weakPassword:rn.weak_password}:null),error:nn})}catch(Xr){if(isAuthError(Xr))return{data:{user:null,session:null},error:Xr};throw Xr}}async signInWithOAuth(Mt){var Xr,rn,nn,an;return await this._removeSession(),await this._handleProviderSignIn(Mt.provider,{redirectTo:(Xr=Mt.options)===null||Xr===void 0?void 0:Xr.redirectTo,scopes:(rn=Mt.options)===null||rn===void 0?void 0:rn.scopes,queryParams:(nn=Mt.options)===null||nn===void 0?void 0:nn.queryParams,skipBrowserRedirect:(an=Mt.options)===null||an===void 0?void 0:an.skipBrowserRedirect})}async exchangeCodeForSession(Mt){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(Mt))}async _exchangeCodeForSession(Mt){const Xr=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[rn,nn]=(Xr??"").split("/"),{data:an,error:on}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:Mt,code_verifier:rn},xform:_sessionResponse});return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),on?{data:{user:null,session:null,redirectType:null},error:on}:!an||!an.session||!an.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(an.session&&(await this._saveSession(an.session),await this._notifyAllSubscribers("SIGNED_IN",an.session)),{data:Object.assign(Object.assign({},an),{redirectType:nn??null}),error:on})}async signInWithIdToken(Mt){await this._removeSession();try{const{options:Xr,provider:rn,token:nn,access_token:an,nonce:on}=Mt,sn=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:rn,id_token:nn,access_token:an,nonce:on,gotrue_meta_security:{captcha_token:Xr==null?void 0:Xr.captchaToken}},xform:_sessionResponse}),{data:ln,error:un}=sn;return un?{data:{user:null,session:null},error:un}:!ln||!ln.session||!ln.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(ln.session&&(await this._saveSession(ln.session),await this._notifyAllSubscribers("SIGNED_IN",ln.session)),{data:ln,error:un})}catch(Xr){if(isAuthError(Xr))return{data:{user:null,session:null},error:Xr};throw Xr}}async signInWithOtp(Mt){var Xr,rn,nn,an,on;try{if(await this._removeSession(),"email"in Mt){const{email:sn,options:ln}=Mt;let un=null,cn=null;this.flowType==="pkce"&&([un,cn]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:hn}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:sn,data:(Xr=ln==null?void 0:ln.data)!==null&&Xr!==void 0?Xr:{},create_user:(rn=ln==null?void 0:ln.shouldCreateUser)!==null&&rn!==void 0?rn:!0,gotrue_meta_security:{captcha_token:ln==null?void 0:ln.captchaToken},code_challenge:un,code_challenge_method:cn},redirectTo:ln==null?void 0:ln.emailRedirectTo});return{data:{user:null,session:null},error:hn}}if("phone"in Mt){const{phone:sn,options:ln}=Mt,{data:un,error:cn}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:sn,data:(nn=ln==null?void 0:ln.data)!==null&&nn!==void 0?nn:{},create_user:(an=ln==null?void 0:ln.shouldCreateUser)!==null&&an!==void 0?an:!0,gotrue_meta_security:{captcha_token:ln==null?void 0:ln.captchaToken},channel:(on=ln==null?void 0:ln.channel)!==null&&on!==void 0?on:"sms"}});return{data:{user:null,session:null,messageId:un==null?void 0:un.message_id},error:cn}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(sn){if(isAuthError(sn))return{data:{user:null,session:null},error:sn};throw sn}}async verifyOtp(Mt){var Xr,rn;try{Mt.type!=="email_change"&&Mt.type!=="phone_change"&&await this._removeSession();let nn,an;"options"in Mt&&(nn=(Xr=Mt.options)===null||Xr===void 0?void 0:Xr.redirectTo,an=(rn=Mt.options)===null||rn===void 0?void 0:rn.captchaToken);const{data:on,error:sn}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},Mt),{gotrue_meta_security:{captcha_token:an}}),redirectTo:nn,xform:_sessionResponse});if(sn)throw sn;if(!on)throw new Error("An error occurred on token verification.");const ln=on.session,un=on.user;return ln!=null&&ln.access_token&&(await this._saveSession(ln),await this._notifyAllSubscribers(Mt.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",ln)),{data:{user:un,session:ln},error:null}}catch(nn){if(isAuthError(nn))return{data:{user:null,session:null},error:nn};throw nn}}async signInWithSSO(Mt){var Xr,rn,nn;try{await this._removeSession();let an=null,on=null;return this.flowType==="pkce"&&([an,on]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in Mt?{provider_id:Mt.providerId}:null),"domain"in Mt?{domain:Mt.domain}:null),{redirect_to:(rn=(Xr=Mt.options)===null||Xr===void 0?void 0:Xr.redirectTo)!==null&&rn!==void 0?rn:void 0}),!((nn=Mt==null?void 0:Mt.options)===null||nn===void 0)&&nn.captchaToken?{gotrue_meta_security:{captcha_token:Mt.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:an,code_challenge_method:on}),headers:this.headers,xform:_ssoResponse})}catch(an){if(isAuthError(an))return{data:null,error:an};throw an}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async Mt=>{const{data:{session:Xr},error:rn}=Mt;if(rn)throw rn;if(!Xr)throw new AuthSessionMissingError;const{error:nn}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:Xr.access_token});return{data:{user:null,session:null},error:nn}})}catch(Mt){if(isAuthError(Mt))return{data:{user:null,session:null},error:Mt};throw Mt}}async resend(Mt){try{Mt.type!="email_change"&&Mt.type!="phone_change"&&await this._removeSession();const Xr=`${this.url}/resend`;if("email"in Mt){const{email:rn,type:nn,options:an}=Mt,{error:on}=await _request(this.fetch,"POST",Xr,{headers:this.headers,body:{email:rn,type:nn,gotrue_meta_security:{captcha_token:an==null?void 0:an.captchaToken}},redirectTo:an==null?void 0:an.emailRedirectTo});return{data:{user:null,session:null},error:on}}else if("phone"in Mt){const{phone:rn,type:nn,options:an}=Mt,{data:on,error:sn}=await _request(this.fetch,"POST",Xr,{headers:this.headers,body:{phone:rn,type:nn,gotrue_meta_security:{captcha_token:an==null?void 0:an.captchaToken}}});return{data:{user:null,session:null,messageId:on==null?void 0:on.message_id},error:sn}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(Xr){if(isAuthError(Xr))return{data:{user:null,session:null},error:Xr};throw Xr}}async getSession(){await this.initializePromise;const Mt=await this._acquireLock(-1,async()=>this._useSession(async Xr=>Xr));return Mt.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown||(console.warn("Using supabase.auth.getSession() is potentially insecure as it loads data directly from the storage medium (typically cookies) which may not be authentic. Prefer using supabase.auth.getUser() instead. To suppress this warning call supabase.auth.getUser() before you call supabase.auth.getSession()."),this.insecureGetSessionWarningShown=!0)),Mt}async _acquireLock(Mt,Xr){this._debug("#_acquireLock","begin",Mt);try{if(this.lockAcquired){const rn=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),nn=(async()=>(await rn,await Xr()))();return this.pendingInLock.push((async()=>{try{await nn}catch{}})()),nn}return await this.lock(`lock:${this.storageKey}`,Mt,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const rn=Xr();for(this.pendingInLock.push((async()=>{try{await rn}catch{}})()),await rn;this.pendingInLock.length;){const nn=[...this.pendingInLock];await Promise.all(nn),this.pendingInLock.splice(0,nn.length)}return await rn}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(Mt){this._debug("#_useSession","begin");try{const Xr=await this.__loadSession();return await Mt(Xr)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let Mt=null;const Xr=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",Xr),Xr!==null&&(this._isValidSession(Xr)?Mt=Xr:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!Mt)return{data:{session:null},error:null};const rn=Mt.expires_at?Mt.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${rn?"":" not"} expired`,"expires_at",Mt.expires_at),!rn){if(this.storage.isServer){let on=Mt.user;delete Mt.user,Object.defineProperty(Mt,"user",{enumerable:!0,get:()=>(Mt.__suppressUserWarning||console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),on),set:sn=>{on=sn}})}return{data:{session:Mt},error:null}}const{session:nn,error:an}=await this._callRefreshToken(Mt.refresh_token);return an?{data:{session:null},error:an}:{data:{session:nn},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(Mt){if(Mt)return await this._getUser(Mt);await this.initializePromise;const Xr=await this._acquireLock(-1,async()=>await this._getUser());return Xr.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown=!0),Xr}async _getUser(Mt){try{return Mt?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:Mt,xform:_userResponse}):await this._useSession(async Xr=>{var rn,nn;const{data:an,error:on}=Xr;if(on)throw on;return await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(nn=(rn=an.session)===null||rn===void 0?void 0:rn.access_token)!==null&&nn!==void 0?nn:void 0,xform:_userResponse})})}catch(Xr){if(isAuthError(Xr))return{data:{user:null},error:Xr};throw Xr}}async updateUser(Mt,Xr={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(Mt,Xr))}async _updateUser(Mt,Xr={}){try{return await this._useSession(async rn=>{const{data:nn,error:an}=rn;if(an)throw an;if(!nn.session)throw new AuthSessionMissingError;const on=nn.session;let sn=null,ln=null;this.flowType==="pkce"&&Mt.email!=null&&([sn,ln]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:un,error:cn}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:Xr==null?void 0:Xr.emailRedirectTo,body:Object.assign(Object.assign({},Mt),{code_challenge:sn,code_challenge_method:ln}),jwt:on.access_token,xform:_userResponse});if(cn)throw cn;return on.user=un.user,await this._saveSession(on),await this._notifyAllSubscribers("USER_UPDATED",on),{data:{user:on.user},error:null}})}catch(rn){if(isAuthError(rn))return{data:{user:null},error:rn};throw rn}}_decodeJWT(Mt){return decodeJWTPayload(Mt)}async setSession(Mt){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(Mt))}async _setSession(Mt){try{if(!Mt.access_token||!Mt.refresh_token)throw new AuthSessionMissingError;const Xr=Date.now()/1e3;let rn=Xr,nn=!0,an=null;const on=decodeJWTPayload(Mt.access_token);if(on.exp&&(rn=on.exp,nn=rn<=Xr),nn){const{session:sn,error:ln}=await this._callRefreshToken(Mt.refresh_token);if(ln)return{data:{user:null,session:null},error:ln};if(!sn)return{data:{user:null,session:null},error:null};an=sn}else{const{data:sn,error:ln}=await this._getUser(Mt.access_token);if(ln)throw ln;an={access_token:Mt.access_token,refresh_token:Mt.refresh_token,user:sn.user,token_type:"bearer",expires_in:rn-Xr,expires_at:rn},await this._saveSession(an),await this._notifyAllSubscribers("SIGNED_IN",an)}return{data:{user:an.user,session:an},error:null}}catch(Xr){if(isAuthError(Xr))return{data:{session:null,user:null},error:Xr};throw Xr}}async refreshSession(Mt){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(Mt))}async _refreshSession(Mt){try{return await this._useSession(async Xr=>{var rn;if(!Mt){const{data:on,error:sn}=Xr;if(sn)throw sn;Mt=(rn=on.session)!==null&&rn!==void 0?rn:void 0}if(!(Mt!=null&&Mt.refresh_token))throw new AuthSessionMissingError;const{session:nn,error:an}=await this._callRefreshToken(Mt.refresh_token);return an?{data:{user:null,session:null},error:an}:nn?{data:{user:nn.user,session:nn},error:null}:{data:{user:null,session:null},error:null}})}catch(Xr){if(isAuthError(Xr))return{data:{user:null,session:null},error:Xr};throw Xr}}async _getSessionFromURL(Mt){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!Mt)throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");const Xr=parseParametersFromURL(window.location.href);if(Mt){if(!Xr.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:ho,error:fo}=await this._exchangeCodeForSession(Xr.code);if(fo)throw fo;const mo=new URL(window.location.href);return mo.searchParams.delete("code"),window.history.replaceState(window.history.state,"",mo.toString()),{data:{session:ho.session,redirectType:null},error:null}}if(Xr.error||Xr.error_description||Xr.error_code)throw new AuthImplicitGrantRedirectError(Xr.error_description||"Error in URL with unspecified error_description",{error:Xr.error||"unspecified_error",code:Xr.error_code||"unspecified_code"});const{provider_token:rn,provider_refresh_token:nn,access_token:an,refresh_token:on,expires_in:sn,expires_at:ln,token_type:un}=Xr;if(!an||!sn||!on||!un)throw new AuthImplicitGrantRedirectError("No session defined in URL");const cn=Math.round(Date.now()/1e3),hn=parseInt(sn);let fn=cn+hn;ln&&(fn=parseInt(ln));const to=fn-cn;to*1e3<=AUTO_REFRESH_TICK_DURATION&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${to}s, should have been closer to ${hn}s`);const uo=fn-hn;cn-uo>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",uo,fn,cn):cn-uo<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",uo,fn,cn);const{data:co,error:Uo}=await this._getUser(an);if(Uo)throw Uo;const lo={provider_token:rn,provider_refresh_token:nn,access_token:an,expires_in:hn,expires_at:fn,refresh_token:on,token_type:un,user:co.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:lo,redirectType:Xr.type},error:null}}catch(Xr){if(isAuthError(Xr))return{data:{session:null,redirectType:null},error:Xr};throw Xr}}_isImplicitGrantFlow(){const Mt=parseParametersFromURL(window.location.href);return!!(isBrowser()&&(Mt.access_token||Mt.error_description))}async _isPKCEFlow(){const Mt=parseParametersFromURL(window.location.href),Xr=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(Mt.code&&Xr)}async signOut(Mt={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(Mt))}async _signOut({scope:Mt}={scope:"global"}){return await this._useSession(async Xr=>{var rn;const{data:nn,error:an}=Xr;if(an)return{error:an};const on=(rn=nn.session)===null||rn===void 0?void 0:rn.access_token;if(on){const{error:sn}=await this.admin.signOut(on,Mt);if(sn&&!(isAuthApiError(sn)&&(sn.status===404||sn.status===401)))return{error:sn}}return Mt!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(Mt){const Xr=uuid(),rn={id:Xr,callback:Mt,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",Xr),this.stateChangeEmitters.delete(Xr)}};return this._debug("#onAuthStateChange()","registered callback with id",Xr),this.stateChangeEmitters.set(Xr,rn),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(Xr)})))(),{data:{subscription:rn}}}async _emitInitialSession(Mt){return await this._useSession(async Xr=>{var rn,nn;try{const{data:{session:an},error:on}=Xr;if(on)throw on;await((rn=this.stateChangeEmitters.get(Mt))===null||rn===void 0?void 0:rn.callback("INITIAL_SESSION",an)),this._debug("INITIAL_SESSION","callback id",Mt,"session",an)}catch(an){await((nn=this.stateChangeEmitters.get(Mt))===null||nn===void 0?void 0:nn.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",Mt,"error",an),console.error(an)}})}async resetPasswordForEmail(Mt,Xr={}){let rn=null,nn=null;this.flowType==="pkce"&&([rn,nn]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:Mt,code_challenge:rn,code_challenge_method:nn,gotrue_meta_security:{captcha_token:Xr.captchaToken}},headers:this.headers,redirectTo:Xr.redirectTo})}catch(an){if(isAuthError(an))return{data:null,error:an};throw an}}async getUserIdentities(){var Mt;try{const{data:Xr,error:rn}=await this.getUser();if(rn)throw rn;return{data:{identities:(Mt=Xr.user.identities)!==null&&Mt!==void 0?Mt:[]},error:null}}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}async linkIdentity(Mt){var Xr;try{const{data:rn,error:nn}=await this._useSession(async an=>{var on,sn,ln,un,cn;const{data:hn,error:fn}=an;if(fn)throw fn;const to=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,Mt.provider,{redirectTo:(on=Mt.options)===null||on===void 0?void 0:on.redirectTo,scopes:(sn=Mt.options)===null||sn===void 0?void 0:sn.scopes,queryParams:(ln=Mt.options)===null||ln===void 0?void 0:ln.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",to,{headers:this.headers,jwt:(cn=(un=hn.session)===null||un===void 0?void 0:un.access_token)!==null&&cn!==void 0?cn:void 0})});if(nn)throw nn;return isBrowser()&&!(!((Xr=Mt.options)===null||Xr===void 0)&&Xr.skipBrowserRedirect)&&window.location.assign(rn==null?void 0:rn.url),{data:{provider:Mt.provider,url:rn==null?void 0:rn.url},error:null}}catch(rn){if(isAuthError(rn))return{data:{provider:Mt.provider,url:null},error:rn};throw rn}}async unlinkIdentity(Mt){try{return await this._useSession(async Xr=>{var rn,nn;const{data:an,error:on}=Xr;if(on)throw on;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${Mt.identity_id}`,{headers:this.headers,jwt:(nn=(rn=an.session)===null||rn===void 0?void 0:rn.access_token)!==null&&nn!==void 0?nn:void 0})})}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}async _refreshAccessToken(Mt){const Xr=`#_refreshAccessToken(${Mt.substring(0,5)}...)`;this._debug(Xr,"begin");try{const rn=Date.now();return await retryable(async nn=>(await sleep(nn*200),this._debug(Xr,"refreshing attempt",nn),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:Mt},headers:this.headers,xform:_sessionResponse})),(nn,an,on)=>on&&on.error&&isAuthRetryableFetchError(on.error)&&Date.now()+(nn+1)*200-rn<AUTO_REFRESH_TICK_DURATION)}catch(rn){if(this._debug(Xr,"error",rn),isAuthError(rn))return{data:{session:null,user:null},error:rn};throw rn}finally{this._debug(Xr,"end")}}_isValidSession(Mt){return typeof Mt=="object"&&Mt!==null&&"access_token"in Mt&&"refresh_token"in Mt&&"expires_at"in Mt}async _handleProviderSignIn(Mt,Xr){const rn=await this._getUrlForProvider(`${this.url}/authorize`,Mt,{redirectTo:Xr.redirectTo,scopes:Xr.scopes,queryParams:Xr.queryParams});return this._debug("#_handleProviderSignIn()","provider",Mt,"options",Xr,"url",rn),isBrowser()&&!Xr.skipBrowserRedirect&&window.location.assign(rn),{data:{provider:Mt,url:rn},error:null}}async _recoverAndRefresh(){var Mt;const Xr="#_recoverAndRefresh()";this._debug(Xr,"begin");try{const rn=await getItemAsync(this.storage,this.storageKey);if(this._debug(Xr,"session from storage",rn),!this._isValidSession(rn)){this._debug(Xr,"session is not valid"),rn!==null&&await this._removeSession();return}const nn=Math.round(Date.now()/1e3),an=((Mt=rn.expires_at)!==null&&Mt!==void 0?Mt:1/0)<nn+EXPIRY_MARGIN;if(this._debug(Xr,`session has${an?"":" not"} expired with margin of ${EXPIRY_MARGIN}s`),an){if(this.autoRefreshToken&&rn.refresh_token){const{error:on}=await this._callRefreshToken(rn.refresh_token);on&&(console.error(on),isAuthRetryableFetchError(on)||(this._debug(Xr,"refresh failed with a non-retryable error, removing the session",on),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",rn)}catch(rn){this._debug(Xr,"error",rn),console.error(rn);return}finally{this._debug(Xr,"end")}}async _callRefreshToken(Mt){var Xr,rn;if(!Mt)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const nn=`#_callRefreshToken(${Mt.substring(0,5)}...)`;this._debug(nn,"begin");try{this.refreshingDeferred=new Deferred;const{data:an,error:on}=await this._refreshAccessToken(Mt);if(on)throw on;if(!an.session)throw new AuthSessionMissingError;await this._saveSession(an.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",an.session);const sn={session:an.session,error:null};return this.refreshingDeferred.resolve(sn),sn}catch(an){if(this._debug(nn,"error",an),isAuthError(an)){const on={session:null,error:an};return isAuthRetryableFetchError(an)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(Xr=this.refreshingDeferred)===null||Xr===void 0||Xr.resolve(on),on}throw(rn=this.refreshingDeferred)===null||rn===void 0||rn.reject(an),an}finally{this.refreshingDeferred=null,this._debug(nn,"end")}}async _notifyAllSubscribers(Mt,Xr,rn=!0){const nn=`#_notifyAllSubscribers(${Mt})`;this._debug(nn,"begin",Xr,`broadcast = ${rn}`);try{this.broadcastChannel&&rn&&this.broadcastChannel.postMessage({event:Mt,session:Xr});const an=[],on=Array.from(this.stateChangeEmitters.values()).map(async sn=>{try{await sn.callback(Mt,Xr)}catch(ln){an.push(ln)}});if(await Promise.all(on),an.length>0){for(let sn=0;sn<an.length;sn+=1)console.error(an[sn]);throw an[0]}}finally{this._debug(nn,"end")}}async _saveSession(Mt){this._debug("#_saveSession()",Mt),await setItemAsync(this.storage,this.storageKey,Mt)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const Mt=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{Mt&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",Mt)}catch(Xr){console.error("removing visibilitychange callback failed",Xr)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const Mt=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION);this.autoRefreshTicker=Mt,Mt&&typeof Mt=="object"&&typeof Mt.unref=="function"?Mt.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(Mt),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const Mt=this.autoRefreshTicker;this.autoRefreshTicker=null,Mt&&clearInterval(Mt)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const Mt=Date.now();try{return await this._useSession(async Xr=>{const{data:{session:rn}}=Xr;if(!rn||!rn.refresh_token||!rn.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const nn=Math.floor((rn.expires_at*1e3-Mt)/AUTO_REFRESH_TICK_DURATION);this._debug("#_autoRefreshTokenTick()",`access token expires in ${nn} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),nn<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(rn.refresh_token)})}catch(Xr){console.error("Auto refresh tick failed with error. This is likely a transient error.",Xr)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Mt){if(Mt.isAcquireTimeout||Mt instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw Mt}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(Mt){console.error("_handleVisibilityChange",Mt)}}async _onVisibilityChanged(Mt){const Xr=`#_onVisibilityChanged(${Mt})`;this._debug(Xr,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),Mt||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(Xr,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(Mt,Xr,rn){const nn=[`provider=${encodeURIComponent(Xr)}`];if(rn!=null&&rn.redirectTo&&nn.push(`redirect_to=${encodeURIComponent(rn.redirectTo)}`),rn!=null&&rn.scopes&&nn.push(`scopes=${encodeURIComponent(rn.scopes)}`),this.flowType==="pkce"){const[an,on]=await getCodeChallengeAndMethod(this.storage,this.storageKey),sn=new URLSearchParams({code_challenge:`${encodeURIComponent(an)}`,code_challenge_method:`${encodeURIComponent(on)}`});nn.push(sn.toString())}if(rn!=null&&rn.queryParams){const an=new URLSearchParams(rn.queryParams);nn.push(an.toString())}return rn!=null&&rn.skipBrowserRedirect&&nn.push(`skip_http_redirect=${rn.skipBrowserRedirect}`),`${Mt}?${nn.join("&")}`}async _unenroll(Mt){try{return await this._useSession(async Xr=>{var rn;const{data:nn,error:an}=Xr;return an?{data:null,error:an}:await _request(this.fetch,"DELETE",`${this.url}/factors/${Mt.factorId}`,{headers:this.headers,jwt:(rn=nn==null?void 0:nn.session)===null||rn===void 0?void 0:rn.access_token})})}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}async _enroll(Mt){try{return await this._useSession(async Xr=>{var rn,nn;const{data:an,error:on}=Xr;if(on)return{data:null,error:on};const{data:sn,error:ln}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:Mt.friendlyName,factor_type:Mt.factorType,issuer:Mt.issuer},headers:this.headers,jwt:(rn=an==null?void 0:an.session)===null||rn===void 0?void 0:rn.access_token});return ln?{data:null,error:ln}:(!((nn=sn==null?void 0:sn.totp)===null||nn===void 0)&&nn.qr_code&&(sn.totp.qr_code=`data:image/svg+xml;utf-8,${sn.totp.qr_code}`),{data:sn,error:null})})}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}}async _verify(Mt){return this._acquireLock(-1,async()=>{try{return await this._useSession(async Xr=>{var rn;const{data:nn,error:an}=Xr;if(an)return{data:null,error:an};const{data:on,error:sn}=await _request(this.fetch,"POST",`${this.url}/factors/${Mt.factorId}/verify`,{body:{code:Mt.code,challenge_id:Mt.challengeId},headers:this.headers,jwt:(rn=nn==null?void 0:nn.session)===null||rn===void 0?void 0:rn.access_token});return sn?{data:null,error:sn}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+on.expires_in},on)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",on),{data:on,error:sn})})}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}})}async _challenge(Mt){return this._acquireLock(-1,async()=>{try{return await this._useSession(async Xr=>{var rn;const{data:nn,error:an}=Xr;return an?{data:null,error:an}:await _request(this.fetch,"POST",`${this.url}/factors/${Mt.factorId}/challenge`,{headers:this.headers,jwt:(rn=nn==null?void 0:nn.session)===null||rn===void 0?void 0:rn.access_token})})}catch(Xr){if(isAuthError(Xr))return{data:null,error:Xr};throw Xr}})}async _challengeAndVerify(Mt){const{data:Xr,error:rn}=await this._challenge({factorId:Mt.factorId});return rn?{data:null,error:rn}:await this._verify({factorId:Mt.factorId,challengeId:Xr.id,code:Mt.code})}async _listFactors(){const{data:{user:Mt},error:Xr}=await this.getUser();if(Xr)return{data:null,error:Xr};const rn=(Mt==null?void 0:Mt.factors)||[],nn=rn.filter(an=>an.factor_type==="totp"&&an.status==="verified");return{data:{all:rn,totp:nn},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async Mt=>{var Xr,rn;const{data:{session:nn},error:an}=Mt;if(an)return{data:null,error:an};if(!nn)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const on=this._decodeJWT(nn.access_token);let sn=null;on.aal&&(sn=on.aal);let ln=sn;((rn=(Xr=nn.user.factors)===null||Xr===void 0?void 0:Xr.filter(hn=>hn.status==="verified"))!==null&&rn!==void 0?rn:[]).length>0&&(ln="aal2");const cn=on.amr||[];return{data:{currentLevel:sn,nextLevel:ln,currentAuthenticationMethods:cn},error:null}}))}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(Mt){super(Mt)}}var __awaiter=globalThis&&globalThis.__awaiter||function(st,Mt,Xr,rn){function nn(an){return an instanceof Xr?an:new Xr(function(on){on(an)})}return new(Xr||(Xr=Promise))(function(an,on){function sn(cn){try{un(rn.next(cn))}catch(hn){on(hn)}}function ln(cn){try{un(rn.throw(cn))}catch(hn){on(hn)}}function un(cn){cn.done?an(cn.value):nn(cn.value).then(sn,ln)}un((rn=rn.apply(st,Mt||[])).next())})};class SupabaseClient{constructor(Mt,Xr,rn){var nn,an,on,sn,ln,un,cn,hn;if(this.supabaseUrl=Mt,this.supabaseKey=Xr,!Mt)throw new Error("supabaseUrl is required.");if(!Xr)throw new Error("supabaseKey is required.");const fn=stripTrailingSlash(Mt);this.realtimeUrl=`${fn}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${fn}/auth/v1`,this.storageUrl=`${fn}/storage/v1`,this.functionsUrl=`${fn}/functions/v1`;const to=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,uo={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:to}),global:DEFAULT_GLOBAL_OPTIONS},co=applySettingDefaults(rn??{},uo);this.storageKey=(an=(nn=co.auth)===null||nn===void 0?void 0:nn.storageKey)!==null&&an!==void 0?an:"",this.headers=(sn=(on=co.global)===null||on===void 0?void 0:on.headers)!==null&&sn!==void 0?sn:{},this.auth=this._initSupabaseAuthClient((ln=co.auth)!==null&&ln!==void 0?ln:{},this.headers,(un=co.global)===null||un===void 0?void 0:un.fetch),this.fetch=fetchWithAuth(Xr,this._getAccessToken.bind(this),(cn=co.global)===null||cn===void 0?void 0:cn.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},co.realtime)),this.rest=new PostgrestClient(`${fn}/rest/v1`,{headers:this.headers,schema:(hn=co.db)===null||hn===void 0?void 0:hn.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(Mt){return this.rest.from(Mt)}schema(Mt){return this.rest.schema(Mt)}rpc(Mt,Xr={},rn={}){return this.rest.rpc(Mt,Xr,rn)}channel(Mt,Xr={config:{}}){return this.realtime.channel(Mt,Xr)}getChannels(){return this.realtime.getChannels()}removeChannel(Mt){return this.realtime.removeChannel(Mt)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var Mt,Xr;return __awaiter(this,void 0,void 0,function*(){const{data:rn}=yield this.auth.getSession();return(Xr=(Mt=rn.session)===null||Mt===void 0?void 0:Mt.access_token)!==null&&Xr!==void 0?Xr:null})}_initSupabaseAuthClient({autoRefreshToken:Mt,persistSession:Xr,detectSessionInUrl:rn,storage:nn,storageKey:an,flowType:on,debug:sn},ln,un){const cn={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},cn),ln),storageKey:an,autoRefreshToken:Mt,persistSession:Xr,detectSessionInUrl:rn,storage:nn,flowType:on,debug:sn,fetch:un})}_initRealtimeClient(Mt){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},Mt),{params:Object.assign({apikey:this.supabaseKey},Mt==null?void 0:Mt.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((Xr,rn)=>{this._handleTokenChanged(Xr,"CLIENT",rn==null?void 0:rn.access_token)})}_handleTokenChanged(Mt,Xr,rn){(Mt==="TOKEN_REFRESHED"||Mt==="SIGNED_IN")&&this.changedAccessToken!==rn?(this.realtime.setAuth(rn??null),this.changedAccessToken=rn):Mt==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),Xr=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(st,Mt,Xr)=>new SupabaseClient(st,Mt,Xr),SUPABASE_URL="https://cfdrkjqgibsxervlmzpr.supabase.co",SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmZHJranFnaWJzeGVydmxtenByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTE3ODM0NTksImV4cCI6MjAyNzM1OTQ1OX0.0VOI328Aqwi3x_-9LRWLxPla3QOm9Cfme9htvJQ3YWc",supabase=createClient(SUPABASE_URL,SUPABASE_KEY),Login=()=>{var pp;const[st,Mt]=reactExports.useState(null),[Xr,rn]=reactExports.useState(null),[nn,an]=reactExports.useState(!1),[on,sn]=reactExports.useState(!1),[ln,un]=reactExports.useState("PENDING"),[cn,hn]=reactExports.useState(10),[fn,to]=reactExports.useState({}),[uo,co]=reactExports.useState(!1),Uo=reactExports.useRef(),lo=reactExports.useRef(),ho=reactExports.useRef(),fo=640,mo=360,_d=useLocation(),ep=useNavigate();if(!((pp=_d==null?void 0:_d.state)!=null&&pp.account))return jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0});reactExports.useEffect(()=>{Mt(_d.state.account)},[]);const rp=async()=>{await new Promise(vp=>setTimeout(vp,1e4));const hp="/models";await nets.ssdMobilenetv1.loadFromUri(hp),await nets.faceLandmark68Net.loadFromUri(hp),await nets.faceRecognitionNet.loadFromUri(hp)};reactExports.useEffect(()=>(st&&rp().then(async()=>{const hp=await up(st);to(hp)}).then(()=>an(!0)).catch(hp=>console.error("Error loading models:",hp)),()=>{clearInterval(ho.current)}),[st]),reactExports.useEffect(()=>{if(ln==="SUCCESS"){const hp=setInterval(()=>{hn(vp=>vp-1)},1e3);return cn===0&&(Uo.current.pause(),Uo.current.srcObject=null,Xr.getTracks().forEach(vp=>{vp.stop()}),clearInterval(hp),clearInterval(ho.current),localStorage.setItem("faceAuth",JSON.stringify({status:!0,account:st})),ep("/HomePage",{replace:!0})),()=>clearInterval(hp)}hn(5)},[ln,cn]);const ap=async()=>{matchDimensions(lo.current,Uo.current);const hp=setInterval(async()=>{const vp=await detectAllFaces(Uo.current).withFaceLandmarks().withFaceDescriptors(),gp=resizeResults(vp,{width:fo,height:mo});if(!fn.length){console.error("No hay descriptores de rostros cargados.");return}const mp=new FaceMatcher(fn),lp=gp.map(cp=>mp.findBestMatch(cp.descriptor));lo.current&&(lo.current.getContext("2d").clearRect(0,0,fo,mo),drawDetections(lo.current,gp),drawFaceLandmarks(lo.current,gp),lp.length>0&&(lp[0].label!=="unknown"&&lp[0].distance<.5?un("SUCCESS"):un("FAILED")),on||sn(!0))},1e3/15);ho.current=hp},sp=async()=>{navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(hp=>{Uo.current.srcObject=hp,rn(hp)}).catch(hp=>{console.error("error:",hp)})};async function up(hp){if(!hp)return null;const vp=[];try{const{data:gp,error:mp}=await supabase.from("users2").select("pictureFileName").eq("id",hp.id).single();if(mp)throw mp;const lp=gp.pictureFileName,tp=await(await fetch(`https://cfdrkjqgibsxervlmzpr.supabase.co/storage/v1/object/public/images/${lp}`)).blob(),np=await bufferToImage(tp),fp=await detectSingleFace(np).withFaceLandmarks().withFaceDescriptor();fp&&vp.push(new LabeledFaceDescriptors(hp.id.toString(),[fp.descriptor]))}catch(gp){return console.error("Error loading image:",gp),co(!0),null}return vp.length>0?vp:null}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-tl from-blue-700 to-indigo-900 flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx(ParticlesComponent,{id:"particles-background"}),jsxRuntimeExports.jsxs("div",{className:`h-auto mt-30 flex flex-col items-center justify-center bg-white py-4 px-4 \r
     md:py-8 md:px-10 max-w-screen-lg mx-auto rounded-2xl shadow-xl mb-8 z-10 `,children:[!Xr&&!nn&&jsxRuntimeExports.jsxs("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:[jsxRuntimeExports.jsx("span",{className:"block",children:"Estas intentando Iniciar Sesin con tu Rostro."}),jsxRuntimeExports.jsx("span",{className:"block text-indigo-600 mt-2",children:"Cargando Modelos..."})]}),!Xr&&nn&&jsxRuntimeExports.jsx("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:jsxRuntimeExports.jsx("span",{className:"block text-indigo-600",children:"Escanee su rostro para iniciar sesin completamente."})}),Xr&&ln==="SUCCESS"&&jsxRuntimeExports.jsxs("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:[jsxRuntimeExports.jsx("span",{className:"block text-indigo-600 ",children:"Hemos reconocido tu cara con xito!"}),jsxRuntimeExports.jsxs("span",{className:"block text-indigo-600 mb-5",children:["Por favor espera ",cn," segundos..."]})]}),Xr&&ln==="FAILED"&&jsxRuntimeExports.jsx("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-rose-700 sm:text-4xl",children:jsxRuntimeExports.jsxs("span",{className:"block mt-[20px] mb-10",children:["Ups! No se puede reconocer tu rostro :","(","."]})}),Xr&&!on&&ln==="PENDING"&&jsxRuntimeExports.jsx("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:jsxRuntimeExports.jsx("span",{className:"block mt-[20px]",children:"Escaneando Rostro..."})}),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center",children:[jsxRuntimeExports.jsx("video",{muted:!0,autoPlay:!0,ref:Uo,height:mo,width:fo,onPlay:ap,style:{objectFit:"fill",height:"360px",borderRadius:"20px",display:Xr?"block":"none"}}),jsxRuntimeExports.jsx("canvas",{ref:lo,style:{position:"absolute",display:Xr?"block":"none"}})]}),!Xr&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:nn?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(_default,{style:{pointerEvents:"none"},options:{animationData:FaceScaner,loop:!0,autoplay:!0},height:400,width:300}),jsxRuntimeExports.jsx("button",{onClick:sp,type:"button",className:"flex justify-center items-center w-full py-3 px-5 mr-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg border border-gray-200 ",children:"ESCANEAR ROSTRO"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_default,{style:{pointerEvents:"none"},options:{animationData:Check,loop:!0,autoplay:!0},height:300,width:500}),jsxRuntimeExports.jsxs("button",{disabled:!0,type:"button",className:"cursor-not-allowed flex justify-center items-center w-full py-2.5 px-5 text-sm font-medium text-white bg-indigo-600 rounded-lg border border-gray-200 hover:bg-indigo-500 hover:text-gray-200 ",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",role:"status",className:"inline mr-2 w-4 h-4 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"#77f2de"})]}),"Espere mientras se cargan los modelos.."]})]})})]})]})]})},whiteList=["/HomePage"],Layout=()=>{const st=useLocation(),{account:Mt}=JSON.parse(localStorage.getItem("faceAuth"))||{};return!Mt&&whiteList.includes(st.pathname)?jsxRuntimeExports.jsx(Navigate,{to:"/"}):Mt&&!whiteList.includes(st.pathname)?jsxRuntimeExports.jsx(Navigate,{to:"/HomePage"}):jsxRuntimeExports.jsx("div",{className:"h-90 flex flex-col justify-between",children:jsxRuntimeExports.jsx(Outlet,{className:"grow"})})};var i$1=Object.defineProperty,d$2=(st,Mt,Xr)=>Mt in st?i$1(st,Mt,{enumerable:!0,configurable:!0,writable:!0,value:Xr}):st[Mt]=Xr,r$1=(st,Mt,Xr)=>(d$2(st,typeof Mt!="symbol"?Mt+"":Mt,Xr),Xr);let o$4=class{constructor(){r$1(this,"current",this.detect()),r$1(this,"handoffState","pending"),r$1(this,"currentId",0)}set(Mt){this.current!==Mt&&(this.handoffState="pending",this.currentId=0,this.current=Mt)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$3=new o$4,l$1=(st,Mt)=>{s$3.isServer?reactExports.useEffect(st,Mt):reactExports.useLayoutEffect(st,Mt)};function s$2(st){let Mt=reactExports.useRef(st);return l$1(()=>{Mt.current=st},[st]),Mt}function t(st){typeof queueMicrotask=="function"?queueMicrotask(st):Promise.resolve().then(st).catch(Mt=>setTimeout(()=>{throw Mt}))}function o$3(){let st=[],Mt={addEventListener(Xr,rn,nn,an){return Xr.addEventListener(rn,nn,an),Mt.add(()=>Xr.removeEventListener(rn,nn,an))},requestAnimationFrame(...Xr){let rn=requestAnimationFrame(...Xr);return Mt.add(()=>cancelAnimationFrame(rn))},nextFrame(...Xr){return Mt.requestAnimationFrame(()=>Mt.requestAnimationFrame(...Xr))},setTimeout(...Xr){let rn=setTimeout(...Xr);return Mt.add(()=>clearTimeout(rn))},microTask(...Xr){let rn={current:!0};return t(()=>{rn.current&&Xr[0]()}),Mt.add(()=>{rn.current=!1})},style(Xr,rn,nn){let an=Xr.style.getPropertyValue(rn);return Object.assign(Xr.style,{[rn]:nn}),this.add(()=>{Object.assign(Xr.style,{[rn]:an})})},group(Xr){let rn=o$3();return Xr(rn),this.add(()=>rn.dispose())},add(Xr){return st.push(Xr),()=>{let rn=st.indexOf(Xr);if(rn>=0)for(let nn of st.splice(rn,1))nn()}},dispose(){for(let Xr of st.splice(0))Xr()}};return Mt}function p$2(){let[st]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>st.dispose(),[st]),st}let o$2=function(st){let Mt=s$2(st);return React.useCallback((...Xr)=>Mt.current(...Xr),[Mt])};function l(){let[st,Mt]=reactExports.useState(s$3.isHandoffComplete);return st&&s$3.isHandoffComplete===!1&&Mt(!1),reactExports.useEffect(()=>{st!==!0&&Mt(!0)},[st]),reactExports.useEffect(()=>s$3.handoff(),[]),st}var o$1;let I$1=(o$1=React.useId)!=null?o$1:function(){let st=l(),[Mt,Xr]=React.useState(st?()=>s$3.nextId():null);return l$1(()=>{Mt===null&&Xr(s$3.nextId())},[Mt]),Mt!=null?""+Mt:void 0};function u$2(st,Mt,...Xr){if(st in Mt){let nn=Mt[st];return typeof nn=="function"?nn(...Xr):nn}let rn=new Error(`Tried to handle "${st}" but there is no handler defined. Only defined handlers are: ${Object.keys(Mt).map(nn=>`"${nn}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(rn,u$2),rn}function e$2(st){return s$3.isServer?null:st instanceof Node?st.ownerDocument:st!=null&&st.hasOwnProperty("current")&&st.current instanceof Node?st.current.ownerDocument:document}let c$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(st=>`${st}:not([tabindex='-1'])`).join(",");var M$2=(st=>(st[st.First=1]="First",st[st.Previous=2]="Previous",st[st.Next=4]="Next",st[st.Last=8]="Last",st[st.WrapAround=16]="WrapAround",st[st.NoScroll=32]="NoScroll",st))(M$2||{}),N$1=(st=>(st[st.Error=0]="Error",st[st.Overflow=1]="Overflow",st[st.Success=2]="Success",st[st.Underflow=3]="Underflow",st))(N$1||{}),F$1=(st=>(st[st.Previous=-1]="Previous",st[st.Next=1]="Next",st))(F$1||{});function f$3(st=document.body){return st==null?[]:Array.from(st.querySelectorAll(c$3)).sort((Mt,Xr)=>Math.sign((Mt.tabIndex||Number.MAX_SAFE_INTEGER)-(Xr.tabIndex||Number.MAX_SAFE_INTEGER)))}var T$1=(st=>(st[st.Strict=0]="Strict",st[st.Loose=1]="Loose",st))(T$1||{}),w$1=(st=>(st[st.Keyboard=0]="Keyboard",st[st.Mouse=1]="Mouse",st))(w$1||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",st=>{st.metaKey||st.altKey||st.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",st=>{st.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:st.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let S$2=["textarea","input"].join(",");function H$1(st){var Mt,Xr;return(Xr=(Mt=st==null?void 0:st.matches)==null?void 0:Mt.call(st,S$2))!=null?Xr:!1}function I(st,Mt=Xr=>Xr){return st.slice().sort((Xr,rn)=>{let nn=Mt(Xr),an=Mt(rn);if(nn===null||an===null)return 0;let on=nn.compareDocumentPosition(an);return on&Node.DOCUMENT_POSITION_FOLLOWING?-1:on&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function O(st,Mt,{sorted:Xr=!0,relativeTo:rn=null,skipElements:nn=[]}={}){let an=Array.isArray(st)?st.length>0?st[0].ownerDocument:document:st.ownerDocument,on=Array.isArray(st)?Xr?I(st):st:f$3(st);nn.length>0&&on.length>1&&(on=on.filter(to=>!nn.includes(to))),rn=rn??an.activeElement;let sn=(()=>{if(Mt&5)return 1;if(Mt&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),ln=(()=>{if(Mt&1)return 0;if(Mt&2)return Math.max(0,on.indexOf(rn))-1;if(Mt&4)return Math.max(0,on.indexOf(rn))+1;if(Mt&8)return on.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),un=Mt&32?{preventScroll:!0}:{},cn=0,hn=on.length,fn;do{if(cn>=hn||cn+hn<=0)return 0;let to=ln+cn;if(Mt&16)to=(to+hn)%hn;else{if(to<0)return 3;if(to>=hn)return 1}fn=on[to],fn==null||fn.focus(un),cn+=sn}while(fn!==an.activeElement);return Mt&6&&H$1(fn)&&fn.select(),2}let u$1=Symbol();function y$1(...st){let Mt=reactExports.useRef(st);reactExports.useEffect(()=>{Mt.current=st},[st]);let Xr=o$2(rn=>{for(let nn of Mt.current)nn!=null&&(typeof nn=="function"?nn(rn):nn.current=rn)});return st.every(rn=>rn==null||(rn==null?void 0:rn[u$1]))?void 0:Xr}function F({container:st,accept:Mt,walk:Xr,enabled:rn=!0}){let nn=reactExports.useRef(Mt),an=reactExports.useRef(Xr);reactExports.useEffect(()=>{nn.current=Mt,an.current=Xr},[Mt,Xr]),l$1(()=>{if(!st||!rn)return;let on=e$2(st);if(!on)return;let sn=nn.current,ln=an.current,un=Object.assign(hn=>sn(hn),{acceptNode:sn}),cn=on.createTreeWalker(st,NodeFilter.SHOW_ELEMENT,un,!1);for(;cn.nextNode();)ln(cn.currentNode)},[st,rn,nn,an])}function e$1(...st){return st.filter(Boolean).join(" ")}var S$1=(st=>(st[st.None=0]="None",st[st.RenderStrategy=1]="RenderStrategy",st[st.Static=2]="Static",st))(S$1||{}),j=(st=>(st[st.Unmount=0]="Unmount",st[st.Hidden=1]="Hidden",st))(j||{});function X({ourProps:st,theirProps:Mt,slot:Xr,defaultTag:rn,features:nn,visible:an=!0,name:on}){let sn=N(Mt,st);if(an)return c$2(sn,Xr,rn,on);let ln=nn??0;if(ln&2){let{static:un=!1,...cn}=sn;if(un)return c$2(cn,Xr,rn,on)}if(ln&1){let{unmount:un=!0,...cn}=sn;return u$2(un?0:1,{[0](){return null},[1](){return c$2({...cn,hidden:!0,style:{display:"none"}},Xr,rn,on)}})}return c$2(sn,Xr,rn,on)}function c$2(st,Mt={},Xr,rn){let{as:nn=Xr,children:an,refName:on="ref",...sn}=g(st,["unmount","static"]),ln=st.ref!==void 0?{[on]:st.ref}:{},un=typeof an=="function"?an(Mt):an;"className"in sn&&sn.className&&typeof sn.className=="function"&&(sn.className=sn.className(Mt));let cn={};if(Mt){let hn=!1,fn=[];for(let[to,uo]of Object.entries(Mt))typeof uo=="boolean"&&(hn=!0),uo===!0&&fn.push(to);hn&&(cn["data-headlessui-state"]=fn.join(" "))}if(nn===reactExports.Fragment&&Object.keys(R(sn)).length>0){if(!reactExports.isValidElement(un)||Array.isArray(un)&&un.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${rn} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(sn).map(uo=>`  - ${uo}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(uo=>`  - ${uo}`).join(`
`)].join(`
`));let hn=un.props,fn=typeof(hn==null?void 0:hn.className)=="function"?(...uo)=>e$1(hn==null?void 0:hn.className(...uo),sn.className):e$1(hn==null?void 0:hn.className,sn.className),to=fn?{className:fn}:{};return reactExports.cloneElement(un,Object.assign({},N(un.props,R(g(sn,["ref"]))),cn,ln,w(un.ref,ln.ref),to))}return reactExports.createElement(nn,Object.assign({},g(sn,["ref"]),nn!==reactExports.Fragment&&ln,nn!==reactExports.Fragment&&cn),un)}function w(...st){return{ref:st.every(Mt=>Mt==null)?void 0:Mt=>{for(let Xr of st)Xr!=null&&(typeof Xr=="function"?Xr(Mt):Xr.current=Mt)}}}function N(...st){if(st.length===0)return{};if(st.length===1)return st[0];let Mt={},Xr={};for(let rn of st)for(let nn in rn)nn.startsWith("on")&&typeof rn[nn]=="function"?(Xr[nn]!=null||(Xr[nn]=[]),Xr[nn].push(rn[nn])):Mt[nn]=rn[nn];if(Mt.disabled||Mt["aria-disabled"])return Object.assign(Mt,Object.fromEntries(Object.keys(Xr).map(rn=>[rn,void 0])));for(let rn in Xr)Object.assign(Mt,{[rn](nn,...an){let on=Xr[rn];for(let sn of on){if((nn instanceof Event||(nn==null?void 0:nn.nativeEvent)instanceof Event)&&nn.defaultPrevented)return;sn(nn,...an)}}});return Mt}function D(st){var Mt;return Object.assign(reactExports.forwardRef(st),{displayName:(Mt=st.displayName)!=null?Mt:st.name})}function R(st){let Mt=Object.assign({},st);for(let Xr in Mt)Mt[Xr]===void 0&&delete Mt[Xr];return Mt}function g(st,Mt=[]){let Xr=Object.assign({},st);for(let rn of Mt)rn in Xr&&delete Xr[rn];return Xr}function r(st){let Mt=st.parentElement,Xr=null;for(;Mt&&!(Mt instanceof HTMLFieldSetElement);)Mt instanceof HTMLLegendElement&&(Xr=Mt),Mt=Mt.parentElement;let rn=(Mt==null?void 0:Mt.getAttribute("disabled"))==="";return rn&&i(Xr)?!1:rn}function i(st){if(!st)return!1;let Mt=st.previousElementSibling;for(;Mt!==null;){if(Mt instanceof HTMLLegendElement)return!1;Mt=Mt.previousElementSibling}return!0}function e(st={},Mt=null,Xr=[]){for(let[rn,nn]of Object.entries(st))f$2(Xr,s$1(Mt,rn),nn);return Xr}function s$1(st,Mt){return st?st+"["+Mt+"]":Mt}function f$2(st,Mt,Xr){if(Array.isArray(Xr))for(let[rn,nn]of Xr.entries())f$2(st,s$1(Mt,rn.toString()),nn);else Xr instanceof Date?st.push([Mt,Xr.toISOString()]):typeof Xr=="boolean"?st.push([Mt,Xr?"1":"0"]):typeof Xr=="string"?st.push([Mt,Xr]):typeof Xr=="number"?st.push([Mt,`${Xr}`]):Xr==null?st.push([Mt,""]):e(Xr,Mt,st)}function p$1(st){var Mt;let Xr=(Mt=st==null?void 0:st.form)!=null?Mt:st.closest("form");if(Xr){for(let rn of Xr.elements)if(rn.tagName==="INPUT"&&rn.type==="submit"||rn.tagName==="BUTTON"&&rn.type==="submit"||rn.nodeName==="INPUT"&&rn.type==="image"){rn.click();return}}}let a="div";var p=(st=>(st[st.None=1]="None",st[st.Focusable=2]="Focusable",st[st.Hidden=4]="Hidden",st))(p||{});function s(st,Mt){let{features:Xr=1,...rn}=st,nn={ref:Mt,"aria-hidden":(Xr&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(Xr&4)===4&&(Xr&2)!==2&&{display:"none"}}};return X({ourProps:nn,theirProps:rn,slot:{},defaultTag:a,name:"Hidden"})}let c$1=D(s);var o=(st=>(st.Space=" ",st.Enter="Enter",st.Escape="Escape",st.Backspace="Backspace",st.Delete="Delete",st.ArrowLeft="ArrowLeft",st.ArrowUp="ArrowUp",st.ArrowRight="ArrowRight",st.ArrowDown="ArrowDown",st.Home="Home",st.End="End",st.PageUp="PageUp",st.PageDown="PageDown",st.Tab="Tab",st))(o||{});function T(st,Mt,Xr){let[rn,nn]=reactExports.useState(Xr),an=st!==void 0,on=reactExports.useRef(an),sn=reactExports.useRef(!1),ln=reactExports.useRef(!1);return an&&!on.current&&!sn.current?(sn.current=!0,on.current=an,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!an&&on.current&&!ln.current&&(ln.current=!0,on.current=an,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[an?st:rn,o$2(un=>(an||nn(un),Mt==null?void 0:Mt(un)))]}function f$1(){let st=reactExports.useRef(!1);return l$1(()=>(st.current=!0,()=>{st.current=!1}),[]),st}let d$1=reactExports.createContext(null);function f(){let st=reactExports.useContext(d$1);if(st===null){let Mt=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(Mt,f),Mt}return st}function M$1(){let[st,Mt]=reactExports.useState([]);return[st.length>0?st.join(" "):void 0,reactExports.useMemo(()=>function(Xr){let rn=o$2(an=>(Mt(on=>[...on,an]),()=>Mt(on=>{let sn=on.slice(),ln=sn.indexOf(an);return ln!==-1&&sn.splice(ln,1),sn}))),nn=reactExports.useMemo(()=>({register:rn,slot:Xr.slot,name:Xr.name,props:Xr.props}),[rn,Xr.slot,Xr.name,Xr.props]);return React.createElement(d$1.Provider,{value:nn},Xr.children)},[Mt])]}let S="p";function h$1(st,Mt){let Xr=I$1(),{id:rn=`headlessui-description-${Xr}`,...nn}=st,an=f(),on=y$1(Mt);l$1(()=>an.register(rn),[rn,an.register]);let sn={ref:on,...an.props,id:rn};return X({ourProps:sn,theirProps:nn,slot:an.slot||{},defaultTag:S,name:an.name||"Description"})}let y=D(h$1),b=Object.assign(y,{});function c(st=0){let[Mt,Xr]=reactExports.useState(st),rn=f$1(),nn=reactExports.useCallback(ln=>{rn.current&&Xr(un=>un|ln)},[Mt,rn]),an=reactExports.useCallback(ln=>!!(Mt&ln),[Mt]),on=reactExports.useCallback(ln=>{rn.current&&Xr(un=>un&~ln)},[Xr,rn]),sn=reactExports.useCallback(ln=>{rn.current&&Xr(un=>un^ln)},[Xr]);return{flags:Mt,addFlag:nn,hasFlag:an,removeFlag:on,toggleFlag:sn}}let d=reactExports.createContext(null);function u(){let st=reactExports.useContext(d);if(st===null){let Mt=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(Mt,u),Mt}return st}function H(){let[st,Mt]=reactExports.useState([]);return[st.length>0?st.join(" "):void 0,reactExports.useMemo(()=>function(Xr){let rn=o$2(an=>(Mt(on=>[...on,an]),()=>Mt(on=>{let sn=on.slice(),ln=sn.indexOf(an);return ln!==-1&&sn.splice(ln,1),sn}))),nn=reactExports.useMemo(()=>({register:rn,slot:Xr.slot,name:Xr.name,props:Xr.props}),[rn,Xr.slot,Xr.name,Xr.props]);return React.createElement(d.Provider,{value:nn},Xr.children)},[Mt])]}let A="label";function h(st,Mt){let Xr=I$1(),{id:rn=`headlessui-label-${Xr}`,passive:nn=!1,...an}=st,on=u(),sn=y$1(Mt);l$1(()=>on.register(rn),[rn,on.register]);let ln={ref:sn,...on.props,id:rn};return nn&&("onClick"in ln&&(delete ln.htmlFor,delete ln.onClick),"onClick"in an&&delete an.onClick),X({ourProps:ln,theirProps:an,slot:on.slot||{},defaultTag:A,name:on.name||"Label"})}let v=D(h),M=Object.assign(v,{});var Ce=(st=>(st[st.RegisterOption=0]="RegisterOption",st[st.UnregisterOption=1]="UnregisterOption",st))(Ce||{});let ke={[0](st,Mt){let Xr=[...st.options,{id:Mt.id,element:Mt.element,propsRef:Mt.propsRef}];return{...st,options:I(Xr,rn=>rn.element.current)}},[1](st,Mt){let Xr=st.options.slice(),rn=st.options.findIndex(nn=>nn.id===Mt.id);return rn===-1?st:(Xr.splice(rn,1),{...st,options:Xr})}},B=reactExports.createContext(null);B.displayName="RadioGroupDataContext";function oe(st){let Mt=reactExports.useContext(B);if(Mt===null){let Xr=new Error(`<${st} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(Xr,oe),Xr}return Mt}let $=reactExports.createContext(null);$.displayName="RadioGroupActionsContext";function ne(st){let Mt=reactExports.useContext($);if(Mt===null){let Xr=new Error(`<${st} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(Xr,ne),Xr}return Mt}function Le(st,Mt){return u$2(Mt.type,ke,st,Mt)}let he="div";function Fe(st,Mt){let Xr=I$1(),{id:rn=`headlessui-radiogroup-${Xr}`,value:nn,defaultValue:an,form:on,name:sn,onChange:ln,by:un=(np,fp)=>np===fp,disabled:cn=!1,...hn}=st,fn=o$2(typeof un=="string"?(np,fp)=>{let dp=un;return(np==null?void 0:np[dp])===(fp==null?void 0:fp[dp])}:un),[to,uo]=reactExports.useReducer(Le,{options:[]}),co=to.options,[Uo,lo]=H(),[ho,fo]=M$1(),mo=reactExports.useRef(null),_d=y$1(mo,Mt),[ep,rp]=T(nn,ln,an),ap=reactExports.useMemo(()=>co.find(np=>!np.propsRef.current.disabled),[co]),sp=reactExports.useMemo(()=>co.some(np=>fn(np.propsRef.current.value,ep)),[co,ep]),up=o$2(np=>{var fp;if(cn||fn(np,ep))return!1;let dp=(fp=co.find(yp=>fn(yp.propsRef.current.value,np)))==null?void 0:fp.propsRef.current;return dp!=null&&dp.disabled?!1:(rp==null||rp(np),!0)});F({container:mo.current,accept(np){return np.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:np.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(np){np.setAttribute("role","none")}});let pp=o$2(np=>{let fp=mo.current;if(!fp)return;let dp=e$2(fp),yp=co.filter(bp=>bp.propsRef.current.disabled===!1).map(bp=>bp.element.current);switch(np.key){case o.Enter:p$1(np.currentTarget);break;case o.ArrowLeft:case o.ArrowUp:if(np.preventDefault(),np.stopPropagation(),O(yp,M$2.Previous|M$2.WrapAround)===N$1.Success){let bp=co.find(_p=>_p.element.current===(dp==null?void 0:dp.activeElement));bp&&up(bp.propsRef.current.value)}break;case o.ArrowRight:case o.ArrowDown:if(np.preventDefault(),np.stopPropagation(),O(yp,M$2.Next|M$2.WrapAround)===N$1.Success){let bp=co.find(_p=>_p.element.current===(dp==null?void 0:dp.activeElement));bp&&up(bp.propsRef.current.value)}break;case o.Space:{np.preventDefault(),np.stopPropagation();let bp=co.find(_p=>_p.element.current===(dp==null?void 0:dp.activeElement));bp&&up(bp.propsRef.current.value)}break}}),hp=o$2(np=>(uo({type:0,...np}),()=>uo({type:1,id:np.id}))),vp=reactExports.useMemo(()=>({value:ep,firstOption:ap,containsCheckedOption:sp,disabled:cn,compare:fn,...to}),[ep,ap,sp,cn,fn,to]),gp=reactExports.useMemo(()=>({registerOption:hp,change:up}),[hp,up]),mp={ref:_d,id:rn,role:"radiogroup","aria-labelledby":Uo,"aria-describedby":ho,onKeyDown:pp},lp=reactExports.useMemo(()=>({value:ep}),[ep]),cp=reactExports.useRef(null),tp=p$2();return reactExports.useEffect(()=>{cp.current&&an!==void 0&&tp.addEventListener(cp.current,"reset",()=>{up(an)})},[cp,up]),React.createElement(fo,{name:"RadioGroup.Description"},React.createElement(lo,{name:"RadioGroup.Label"},React.createElement($.Provider,{value:gp},React.createElement(B.Provider,{value:vp},sn!=null&&ep!=null&&e({[sn]:ep}).map(([np,fp],dp)=>React.createElement(c$1,{features:p.Hidden,ref:dp===0?yp=>{var bp;cp.current=(bp=yp==null?void 0:yp.closest("form"))!=null?bp:null}:void 0,...R({key:np,as:"input",type:"radio",checked:fp!=null,hidden:!0,readOnly:!0,form:on,name:np,value:fp})})),X({ourProps:mp,theirProps:hn,slot:lp,defaultTag:he,name:"RadioGroup"})))))}var xe=(st=>(st[st.Empty=1]="Empty",st[st.Active=2]="Active",st))(xe||{});let _e="div";function we(st,Mt){var Xr;let rn=I$1(),{id:nn=`headlessui-radiogroup-option-${rn}`,value:an,disabled:on=!1,...sn}=st,ln=reactExports.useRef(null),un=y$1(ln,Mt),[cn,hn]=H(),[fn,to]=M$1(),{addFlag:uo,removeFlag:co,hasFlag:Uo}=c(1),lo=s$2({value:an,disabled:on}),ho=oe("RadioGroup.Option"),fo=ne("RadioGroup.Option");l$1(()=>fo.registerOption({id:nn,element:ln,propsRef:lo}),[nn,fo,ln,st]);let mo=o$2(hp=>{var vp;if(r(hp.currentTarget))return hp.preventDefault();fo.change(an)&&(uo(2),(vp=ln.current)==null||vp.focus())}),_d=o$2(hp=>{if(r(hp.currentTarget))return hp.preventDefault();uo(2)}),ep=o$2(()=>co(2)),rp=((Xr=ho.firstOption)==null?void 0:Xr.id)===nn,ap=ho.disabled||on,sp=ho.compare(ho.value,an),up={ref:un,id:nn,role:"radio","aria-checked":sp?"true":"false","aria-labelledby":cn,"aria-describedby":fn,"aria-disabled":ap?!0:void 0,tabIndex:(()=>ap?-1:sp||!ho.containsCheckedOption&&rp?0:-1)(),onClick:ap?void 0:mo,onFocus:ap?void 0:_d,onBlur:ap?void 0:ep},pp=reactExports.useMemo(()=>({checked:sp,disabled:ap,active:Uo(2)}),[sp,ap,Uo]);return React.createElement(to,{name:"RadioGroup.Description"},React.createElement(hn,{name:"RadioGroup.Label"},X({ourProps:up,theirProps:sn,slot:pp,defaultTag:_e,name:"RadioGroup.Option"})))}let Ie=D(Fe),Se=D(we),yt=Object.assign(Ie,{Option:Se,Label:M,Description:b});const Skeleton=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{role:"status",className:"max-w-sm p-4 rounded shadow animate-pulse md:p-6 ",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 me-3 text-gray-400 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-2.5 bg-gray-400 rounded-full w-32 mb-2"}),jsxRuntimeExports.jsx("div",{className:"w-48 h-2 bg-gray-400 rounded-full "})]})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]}),jsxRuntimeExports.jsxs("div",{role:"status",className:"max-w-sm p-4 rounded shadow animate-pulse md:p-6 ",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 me-3 text-gray-400 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-2.5 bg-gray-400 rounded-full w-32 mb-2"}),jsxRuntimeExports.jsx("div",{className:"w-48 h-2 bg-gray-400 rounded-full "})]})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]}),jsxRuntimeExports.jsxs("div",{role:"status",className:"max-w-sm p-4 rounded shadow animate-pulse md:p-6 ",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 me-3 text-gray-400 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-2.5 bg-gray-400 rounded-full w-32 mb-2"}),jsxRuntimeExports.jsx("div",{className:"w-48 h-2 bg-gray-400 rounded-full "})]})]}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Loading..."})]})]}),UserSelect=()=>{const[st,Mt]=reactExports.useState(null),[Xr,rn]=reactExports.useState([]),[nn,an]=reactExports.useState(!0),[on,sn]=reactExports.useState(null);return reactExports.useEffect(()=>{async function ln(){try{const{data:un,error:cn}=await supabase.from("users2").select("*");if(cn)throw cn;rn(un),Mt(un[0]),an(!1)}catch(un){console.error("Error al obtener usuarios:",un.message),sn("Error al obtener usuarios. Por favor, intntalo de nuevo.")}}ln()},[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-tl from-blue-700 to-indigo-900 flex flex-col items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"h-auto flex flex-col items-center justify-center gap-[24px] w-full max-w-[520px] mx-auto z-10",children:[jsxRuntimeExports.jsx(ParticlesComponent,{id:"particles-background"}),jsxRuntimeExports.jsxs("div",{className:"w-full p-10 text-center bg-white rounded-lg shadow-lg z-10 mt-2 mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-5 text-black",children:"Elige un usuario para iniciar sesin"}),jsxRuntimeExports.jsxs("div",{className:"mx-auto w-full max-w-md overflow-y-auto max-h-72",children:[nn?jsxRuntimeExports.jsx(Skeleton,{}):jsxRuntimeExports.jsxs(yt,{value:st,onChange:Mt,children:[jsxRuntimeExports.jsx(yt.Label,{className:"sr-only",children:"Seleccionar usuario"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Xr.map(ln=>jsxRuntimeExports.jsx(yt.Option,{value:ln,className:({checked:un})=>`${un?"bg-indigo-600 bg-opacity-75 text-white":"bg-white"} relative flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none`,children:({checked:un})=>jsxRuntimeExports.jsxs("div",{className:"flex w-full items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx("div",{className:"text-sm",children:jsxRuntimeExports.jsxs(yt.Label,{as:"div",className:`flex items-center gap-x-6 font-medium ${un?"text-white":"text-gray-900"}`,children:[ln.pictureFileName?jsxRuntimeExports.jsx("img",{className:"object-cover h-10 w-10 rounded-full",src:`https://cfdrkjqgibsxervlmzpr.supabase.co/storage/v1/object/public/images/${ln.pictureFileName}`,alt:ln.fullName}):jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200"}),ln.fullName]})})}),un&&jsxRuntimeExports.jsx("div",{className:"shrink-0 text-white",children:jsxRuntimeExports.jsx(CheckIcon,{className:"h-6 w-6"})})]})},ln.id))})]}),on&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-xs mt-2",children:on})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex justify-end",children:jsxRuntimeExports.jsxs(Link,{to:"/login",state:{account:st},className:`flex items-center rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-600 \r
              transition-colors duration-300 ease-in-out cursor-pointer`,children:["Continuar",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"ml-1.5 h-5 w-5",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"})})]})})]})]})})};function CheckIcon(st){return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...st,children:[jsxRuntimeExports.jsx("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),jsxRuntimeExports.jsx("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]})}const HomePage=()=>{const[st,Mt]=reactExports.useState(null),Xr=useNavigate();return reactExports.useEffect(()=>{localStorage.getItem("faceAuth")||Xr("/login");const{account:rn}=JSON.parse(localStorage.getItem("faceAuth"));Mt(rn)},[]),st?jsxRuntimeExports.jsx("div",{className:"bg-white pt-40 md:pt-60 h-screen",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl",children:[jsxRuntimeExports.jsx("h2",{className:"text-center text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl mb-12",children:"Has iniciado sesin correctamente!"}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-24",children:[jsxRuntimeExports.jsx("img",{className:"object-cover h-40 w-40 rounded-full mx-auto mb-6",src:`https://cfdrkjqgibsxervlmzpr.supabase.co/storage/v1/object/public/images/${st.pictureFileName}`,alt:st.fullName}),jsxRuntimeExports.jsx("h1",{className:"block text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl bg-clip-text text-transparent bg-gradient-to-r from-red-500 to-red-800",style:{lineHeight:"1.5"},children:st==null?void 0:st.fullName}),jsxRuntimeExports.jsxs("div",{onClick:()=>{localStorage.removeItem("faceAuth"),Xr("/")},className:`flex gap-2 mt-12 w-fit mx-auto cursor-pointer z-10 py-3 px-6 rounded-full bg-gradient-to-r from-red-400 to-red-600 \r
            hover:bg-opacity-80 hover:shadow-lg hover:scale-105 transform transition duration-300`,children:[jsxRuntimeExports.jsx("span",{className:"text-white",children:"Cerrar Sesin "}),jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})})]})]})]})}):null},Register=()=>{const[st,Mt]=reactExports.useState(""),[Xr,rn]=reactExports.useState(null),[nn,an]=reactExports.useState(null),[on,sn]=reactExports.useState(null),ln=cn=>{const hn=cn.target.files[0];rn(hn)},un=async cn=>{if(cn.preventDefault(),!st||!Xr){an("Por favor ingresa el nombre y selecciona una foto.");return}try{const{data:hn,error:fn}=await supabase.storage.from("images").upload(Xr.name,Xr);if(fn)throw fn;const{data:to,error:uo}=await supabase.from("users2").insert([{fullName:st,pictureFileName:Xr.name}]);if(uo)throw uo;console.log("Usuario creado exitosamente:",to),console.log("Imagen subida exitosamente:",hn);const co={fullName:st,pictureFileName:Xr.name};sn(co),Mt(""),rn(null),an(null)}catch(hn){console.error("Error al crear el usuario:",hn.message),an("Error al crear el usuario. Por favor intntalo de nuevo.")}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-tl from-blue-700 to-indigo-900 flex flex-col items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"h-auto flex flex-col items-center justify-center gap-[24px] w-full max-w-[520px] mx-auto z-10",children:[jsxRuntimeExports.jsx(ParticlesComponent,{id:"particles-background"}),jsxRuntimeExports.jsxs("div",{className:"w-full p-10 text-center bg-white rounded-lg shadow-lg z-10 mt-2 mb-10",children:[on?jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-5 text-black",children:"Te has registrado correctamente :D"}),jsxRuntimeExports.jsx("img",{src:`https://cfdrkjqgibsxervlmzpr.supabase.co/storage/v1/object/public/images/${on.pictureFileName}`,alt:on.fullName,className:"w-24 h-24 rounded-full object-cover mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-semibold mb-5",children:on.fullName}),jsxRuntimeExports.jsx(Link,{to:"/",className:`bg-indigo-500 px-4 py-2 text-white rounded-md mt-5 shadow-sm hover:bg-indigo-600 \r
                                        transition-colors duration-300 ease-in-out cursor-pointer`,children:"Continuar"})]}):jsxRuntimeExports.jsxs("form",{onSubmit:un,className:"mx-auto w-full max-w-md",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-5 text-black",children:"Registro de Usuario"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"fullName",className:"block text-left text-black",children:"Nombre:"}),jsxRuntimeExports.jsx("input",{type:"text",id:"fullName",value:st,onChange:cn=>Mt(cn.target.value),className:"border border-gray-300 rounded-md px-3 py-2 mt-1 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoComplete:"off"})]}),jsxRuntimeExports.jsxs("div",{className:`mb-4 ${Xr?"text-gray-400":""}`,children:[jsxRuntimeExports.jsx("label",{htmlFor:"picture",className:"block text-left text-black mb-2",children:"Cargar Imagen:"}),jsxRuntimeExports.jsxs("label",{htmlFor:"picture",className:"flex items-center justify-center w-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:border-indigo-200 hover:bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-indigo-500 mb-2",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),jsxRuntimeExports.jsx("p",{className:"font-semibold mb-2 text-sm text-gray-500 dark:text-gray-400",children:Xr?`Archivo seleccionado: ${Xr.name}`:"Haga clic para cargar una imagen"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG o JPEG"})]}),jsxRuntimeExports.jsx("input",{type:"file",id:"picture",accept:".png, .jpg, .jpeg",className:"hidden",onChange:ln})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-indigo-500 px-4 py-2 text-white rounded-md mt-4",children:"Guardar"})]}),nn&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:nn})]})]})})},router=createBrowserRouter(createRoutesFromChildren(jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"user-select",element:jsxRuntimeExports.jsx(UserSelect,{})}),jsxRuntimeExports.jsx(Route,{path:"login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"HomePage",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"register",element:jsxRuntimeExports.jsx(Register,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]})})),{basename:"/"});function App(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(RouterProvider,{router})})}const index="";client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{circleBounce as $,touchCancelEvent as A,visibilityChangeEvent as B,resizeEvent as C,mouseLeaveEvent as D,mouseOutEvent as E,calcExactPositionOrRandomFromSize as F,getParticleBaseVelocity as G,degToRad as H,getRangeValue as I,randomInRange as J,getRandom as K,getDistance as L,clamp as M,getPosition as N,getParticleDirectionAngle as O,Vector as P,getHslFromAnimation as Q,itemFromSingleOrMultiple as R,initParticleNumericAnimationValue as S,isInArray as T,isSsr as U,Vector3d as V,safeIntersectionObserver as W,getDistances as X,getEasing as Y,divModeExecute as Z,__vitePreload as _,addEasing as a,circleBounceDataFromParticle as a0,rectBounce as a1,calculateBounds as a2,isDivModeEnabled as a3,getRangeMax as a4,rgbToHsl as a5,colorMix as a6,divMode as a7,getLinkRandomColor as a8,getLinkColor as a9,itemFromArray as aa,loadFont as ab,updateAnimation as ac,getHslAnimationFromHsl as ad,updateColor as ae,percentDenominator as af,isPointInside as ag,getLogger as b,errorPrefix as c,getDefaultExportFromCjs as d,executeOnSingleOrMultiple as e,isString as f,getStyleFromHsl as g,deepExtend as h,isArray$1 as i,isNumber$1 as j,isObject$4 as k,isBoolean as l,safeMatchMedia as m,rangeColorToRgb as n,getStyleFromRgb as o,safeMutationObserver as p,generatedAttribute as q,rangeColorToHsl as r,setRangeValue as s,millisecondsToSeconds as t,mouseMoveEvent as u,touchStartEvent as v,touchMoveEvent as w,touchEndEvent as x,mouseUpEvent as y,mouseDownEvent as z};
